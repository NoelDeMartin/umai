var e=Object.defineProperty,t=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);import{y as n,T as r,w as i,C as s,$ as a,a as o,r as l,D as u,B as c,E as d,z as p,A as h,Y as f,_ as m,f as v,t as g,l as y,b,c as w,d as x,e as _,g as k,h as S,i as R,j as A,k as I,V as C,m as E,n as O,o as D,p as T,q as P,s as j,u as M,v as L,G as $,F as U,H as N,I as F,J as B,K as z,L as q,M as V,N as H,O as W,P as J,Q as K,W as G,R as Z,S as Y,U as Q,X,Z as ee,a0 as te,a1 as ne,a2 as re,a3 as ie,a4 as se,a5 as ae,a6 as oe,a7 as le,a8 as ue,a9 as ce,aa as de,ab as pe,ac as he,ad as fe,ae as me,af as ve,ag as ge,ah as ye,ai as be,aj as we,ak as xe,al as _e,am as ke,an as Se,ao as Re,ap as Ae,aq as Ie,ar as Ce,as as Ee,at as Oe,au as De,av as Te,aw as Pe}from"./noeldemartin-utils.esm.87e89d40.js";function je(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}function Me(e){if(it(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ut(r)?Ne(r):Me(r);if(i)for(const e in i)t[e]=i[e]}return t}return ut(e)||dt(e)?e:void 0}const Le=/;(?![^(]*\))/g,$e=/:([^]+)/,Ue=/\/\*.*?\*\//gs;function Ne(e){const t={};return e.replace(Ue,"").split(Le).forEach((e=>{if(e){const n=e.split($e);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function Fe(e){let t="";if(ut(e))t=e;else if(it(e))for(let n=0;n<e.length;n++){const r=Fe(e[n]);r&&(t+=r+" ")}else if(dt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Be=je(`itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`);function ze(e){return!!e||""===e}function qe(e,t){if(e===t)return!0;let n=ot(e),r=ot(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=ct(e),r=ct(t),n||r)return e===t;if(n=it(e),r=it(t),n||r)return!(!n||!r)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=qe(e[r],t[r]);return n}(e,t);if(n=dt(e),r=dt(t),n||r){if(!n||!r)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!qe(e[n],t[n]))return!1}}return String(e)===String(t)}function Ve(e,t){return e.findIndex((e=>qe(e,t)))}const He=e=>ut(e)?e:null==e?"":it(e)||dt(e)&&(e.toString===ht||!lt(e.toString))?JSON.stringify(e,We,2):String(e),We=(e,t)=>t&&t.__v_isRef?We(e,t.value):st(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:at(t)?{[`Set(${t.size})`]:[...t.values()]}:!dt(t)||it(t)||mt(t)?t:String(t),Je={},Ke=[],Ge=()=>{},Ze=()=>!1,Ye=/^on[^a-z]/,Qe=e=>Ye.test(e),Xe=e=>e.startsWith("onUpdate:"),et=Object.assign,tt=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},nt=Object.prototype.hasOwnProperty,rt=(e,t)=>nt.call(e,t),it=Array.isArray,st=e=>"[object Map]"===ft(e),at=e=>"[object Set]"===ft(e),ot=e=>"[object Date]"===ft(e),lt=e=>"function"==typeof e,ut=e=>"string"==typeof e,ct=e=>"symbol"==typeof e,dt=e=>null!==e&&"object"==typeof e,pt=e=>dt(e)&&lt(e.then)&&lt(e.catch),ht=Object.prototype.toString,ft=e=>ht.call(e),mt=e=>"[object Object]"===ft(e),vt=e=>ut(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,gt=je(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yt=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},bt=/-(\w)/g,wt=yt((e=>e.replace(bt,((e,t)=>t?t.toUpperCase():"")))),xt=/\B([A-Z])/g,_t=yt((e=>e.replace(xt,"-$1").toLowerCase())),kt=yt((e=>e.charAt(0).toUpperCase()+e.slice(1))),St=yt((e=>e?`on${kt(e)}`:``)),Rt=(e,t)=>!Object.is(e,t),At=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},It=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ct=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Et;let Ot;class Dt{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ot,!e&&Ot&&(this.index=(Ot.scopes||(Ot.scopes=[])).push(this)-1)}run(e){if(this.active){const t=Ot;try{return Ot=this,e()}finally{Ot=t}}}on(){Ot=this}off(){Ot=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this.active=!1}}}const Tt=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Pt=e=>(e.w&$t)>0,jt=e=>(e.n&$t)>0,Mt=new WeakMap;let Lt=0,$t=1;const Ut=30;let Nt;const Ft=Symbol(""),Bt=Symbol("");class zt{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,function(e,t=Ot){t&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();let e=Nt,t=Vt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Nt,Nt=this,Vt=!0,$t=1<<++Lt,Lt<=Ut?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=$t})(this):qt(this),this.fn()}finally{Lt<=Ut&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];Pt(i)&&!jt(i)?i.delete(e):t[n++]=i,i.w&=~$t,i.n&=~$t}t.length=n}})(this),$t=1<<--Lt,Nt=this.parent,Vt=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Nt===this?this.deferStop=!0:this.active&&(qt(this),this.onStop&&this.onStop(),this.active=!1)}}function qt(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Vt=!0;const Ht=[];function Wt(){Ht.push(Vt),Vt=!1}function Jt(){const e=Ht.pop();Vt=void 0===e||e}function Kt(e,t,n){if(Vt&&Nt){let t=Mt.get(e);t||Mt.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=Tt()),Gt(r)}}function Gt(e,t){let n=!1;Lt<=Ut?jt(e)||(e.n|=$t,n=!Pt(e)):n=!e.has(Nt),n&&(e.add(Nt),Nt.deps.push(e))}function Zt(e,t,n,r,i,s){const a=Mt.get(e);if(!a)return;let o=[];if("clear"===t)o=[...a.values()];else if("length"===n&&it(e)){const e=Ct(r);a.forEach(((t,n)=>{("length"===n||n>=e)&&o.push(t)}))}else switch(void 0!==n&&o.push(a.get(n)),t){case"add":it(e)?vt(n)&&o.push(a.get("length")):(o.push(a.get(Ft)),st(e)&&o.push(a.get(Bt)));break;case"delete":it(e)||(o.push(a.get(Ft)),st(e)&&o.push(a.get(Bt)));break;case"set":st(e)&&o.push(a.get(Ft))}if(1===o.length)o[0]&&Yt(o[0]);else{const e=[];for(const t of o)t&&e.push(...t);Yt(Tt(e))}}function Yt(e,t){const n=it(e)?e:[...e];for(const r of n)r.computed&&Qt(r);for(const r of n)r.computed||Qt(r)}function Qt(e,t){(e!==Nt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Xt=je(`__proto__,__v_isRef,__isVue`),en=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(ct)),tn=on(),nn=on(!1,!0),rn=on(!0),sn=an();function an(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Hn(this);for(let t=0,i=this.length;t<i;t++)Kt(n,0,t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(Hn)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){Wt();const n=Hn(this)[t].apply(this,e);return Jt(),n}})),e}function on(e=!1,t=!1){return function(n,r,i){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&i===(e?t?Ln:Mn:t?jn:Pn).get(n))return n;const s=it(n);if(!e&&s&&rt(sn,r))return Reflect.get(sn,r,i);const a=Reflect.get(n,r,i);return(ct(r)?en.has(r):Xt(r))?a:(e||Kt(n,0,r),t?a:Yn(a)?s&&vt(r)?a:a.value:dt(a)?e?Nn(a):Un(a):a)}}function ln(e=!1){return function(t,n,r,i){let s=t[n];if(zn(s)&&Yn(s)&&!Yn(r))return!1;if(!e&&(qn(r)||zn(r)||(s=Hn(s),r=Hn(r)),!it(t)&&Yn(s)&&!Yn(r)))return s.value=r,!0;const a=it(t)&&vt(n)?Number(n)<t.length:rt(t,n),o=Reflect.set(t,n,r,i);return t===Hn(i)&&(a?Rt(r,s)&&Zt(t,"set",n,r):Zt(t,"add",n,r)),o}}const un={get:tn,set:ln(),deleteProperty:function(e,t){const n=rt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Zt(e,"delete",t,void 0),r},has:function(e,t){const n=Reflect.has(e,t);return ct(t)&&en.has(t)||Kt(e,0,t),n},ownKeys:function(e){return Kt(e,0,it(e)?"length":Ft),Reflect.ownKeys(e)}},cn={get:rn,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},dn=et({},un,{get:nn,set:ln(!0)}),pn=e=>e,hn=e=>Reflect.getPrototypeOf(e);function fn(e,t,n=!1,r=!1){const i=Hn(e=e["__v_raw"]),s=Hn(t);n||(t!==s&&Kt(i,0,t),Kt(i,0,s));const{has:a}=hn(i),o=r?pn:n?Kn:Jn;return a.call(i,t)?o(e.get(t)):a.call(i,s)?o(e.get(s)):void(e!==i&&e.get(t))}function mn(e,t=!1){const n=this["__v_raw"],r=Hn(n),i=Hn(e);return t||(e!==i&&Kt(r,0,e),Kt(r,0,i)),e===i?n.has(e):n.has(e)||n.has(i)}function vn(e,t=!1){return e=e["__v_raw"],!t&&Kt(Hn(e),0,Ft),Reflect.get(e,"size",e)}function gn(e){e=Hn(e);const t=Hn(this);return hn(t).has.call(t,e)||(t.add(e),Zt(t,"add",e,e)),this}function yn(e,t){t=Hn(t);const n=Hn(this),{has:r,get:i}=hn(n);let s=r.call(n,e);s||(e=Hn(e),s=r.call(n,e));const a=i.call(n,e);return n.set(e,t),s?Rt(t,a)&&Zt(n,"set",e,t):Zt(n,"add",e,t),this}function bn(e){const t=Hn(this),{has:n,get:r}=hn(t);let i=n.call(t,e);i||(e=Hn(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&Zt(t,"delete",e,void 0),s}function wn(){const e=Hn(this),t=0!==e.size,n=e.clear();return t&&Zt(e,"clear",void 0,void 0),n}function xn(e,t){return function(n,r){const i=this,s=i["__v_raw"],a=Hn(s),o=t?pn:e?Kn:Jn;return!e&&Kt(a,0,Ft),s.forEach(((e,t)=>n.call(r,o(e),o(t),i)))}}function _n(e,t,n){return function(...r){const i=this["__v_raw"],s=Hn(i),a=st(s),o="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,u=i[e](...r),c=n?pn:t?Kn:Jn;return!t&&Kt(s,0,l?Bt:Ft),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:o?[c(e[0]),c(e[1])]:c(e),done:t}},[Symbol.iterator](){return this}}}}function kn(e){return function(...t){return"delete"!==e&&this}}function Sn(){const e={get(e){return fn(this,e)},get size(){return vn(this)},has:mn,add:gn,set:yn,delete:bn,clear:wn,forEach:xn(!1,!1)},t={get(e){return fn(this,e,!1,!0)},get size(){return vn(this)},has:mn,add:gn,set:yn,delete:bn,clear:wn,forEach:xn(!1,!0)},n={get(e){return fn(this,e,!0)},get size(){return vn(this,!0)},has(e){return mn.call(this,e,!0)},add:kn("add"),set:kn("set"),delete:kn("delete"),clear:kn("clear"),forEach:xn(!0,!1)},r={get(e){return fn(this,e,!0,!0)},get size(){return vn(this,!0)},has(e){return mn.call(this,e,!0)},add:kn("add"),set:kn("set"),delete:kn("delete"),clear:kn("clear"),forEach:xn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{e[i]=_n(i,!1,!1),n[i]=_n(i,!0,!1),t[i]=_n(i,!1,!0),r[i]=_n(i,!0,!0)})),[e,n,t,r]}const[Rn,An,In,Cn]=Sn();function En(e,t){const n=t?e?Cn:In:e?An:Rn;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(rt(n,r)&&r in t?n:t,r,i)}const On={get:En(!1,!1)},Dn={get:En(!1,!0)},Tn={get:En(!0,!1)},Pn=new WeakMap,jn=new WeakMap,Mn=new WeakMap,Ln=new WeakMap;function $n(e){return e["__v_skip"]||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>ft(e).slice(8,-1))(e))}function Un(e){return zn(e)?e:Fn(e,!1,un,On,Pn)}function Nn(e){return Fn(e,!0,cn,Tn,Mn)}function Fn(e,t,n,r,i){if(!dt(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const s=i.get(e);if(s)return s;const a=$n(e);if(0===a)return e;const o=new Proxy(e,2===a?r:n);return i.set(e,o),o}function Bn(e){return zn(e)?Bn(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function zn(e){return!(!e||!e["__v_isReadonly"])}function qn(e){return!(!e||!e["__v_isShallow"])}function Vn(e){return Bn(e)||zn(e)}function Hn(e){const t=e&&e["__v_raw"];return t?Hn(t):e}function Wn(e){return It(e,"__v_skip",!0),e}const Jn=e=>dt(e)?Un(e):e,Kn=e=>dt(e)?Nn(e):e;function Gn(e){Vt&&Nt&&Gt((e=Hn(e)).dep||(e.dep=Tt()))}function Zn(e,t){(e=Hn(e)).dep&&Yt(e.dep)}function Yn(e){return!(!e||!0!==e.__v_isRef)}function Qn(e){return Xn(e,!1)}function Xn(e,t){return Yn(e)?e:new er(e,t)}class er{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Hn(e),this._value=t?e:Jn(e)}get value(){return Gn(this),this._value}set value(e){const t=this.__v_isShallow||qn(e)||zn(e);e=t?e:Hn(e),Rt(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Jn(e),Zn(this))}}function tr(e){return Yn(e)?e.value:e}const nr={get:(e,t,n)=>tr(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Yn(i)&&!Yn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function rr(e){return Bn(e)?e:new Proxy(e,nr)}class ir{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e((()=>Gn(this)),(()=>Zn(this)));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}var sr;class ar{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[sr]=!1,this._dirty=!0,this.effect=new zt(e,(()=>{this._dirty||(this._dirty=!0,Zn(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const e=Hn(this);return Gn(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function or(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){handleError(s,t,n)}return i}function lr(e,t,n,r){if(lt(e)){const i=or(e,t,n,r);return i&&pt(i)&&i.catch((e=>{handleError(e,t,n)})),i}const i=[];for(let s=0;s<e.length;s++)i.push(lr(e[s],t,n,r));return i}function handleError(e,t,n,r=!0){t&&t.vnode;if(t){let r=t.parent;const i=t.proxy,s=n;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,s))return;r=r.parent}const a=t.appContext.config.errorHandler;if(a)return void or(a,null,10,[e,i,s])}!function logError(e,t,n,r=!0){console.error(e)}(e,0,0,r)}sr="__v_isReadonly";let ur=!1,cr=!1;const dr=[];let pr=0;const hr=[];let fr=null,mr=0;const vr=Promise.resolve();let gr=null;function yr(e){const t=gr||vr;return e?t.then(this?e.bind(this):e):t}function br(e){dr.length&&dr.includes(e,ur&&e.allowRecurse?pr+1:pr)||(null==e.id?dr.push(e):dr.splice(function(e){let t=pr+1,n=dr.length;for(;t<n;){const r=t+n>>>1;kr(dr[r])<e?t=r+1:n=r}return t}(e.id),0,e),wr())}function wr(){ur||cr||(cr=!0,gr=vr.then(Rr))}function xr(e,t=(ur?pr+1:0)){for(;t<dr.length;t++){const e=dr[t];e&&e.pre&&(dr.splice(t,1),t--,e())}}function _r(e){if(hr.length){const e=[...new Set(hr)];if(hr.length=0,fr)return void fr.push(...e);for(fr=e,fr.sort(((e,t)=>kr(e)-kr(t))),mr=0;mr<fr.length;mr++)fr[mr]();fr=null,mr=0}}const kr=e=>null==e.id?1/0:e.id,Sr=(e,t)=>{const n=kr(e)-kr(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Rr(e){cr=!1,ur=!0,dr.sort(Sr);try{for(pr=0;pr<dr.length;pr++){const e=dr[pr];e&&!1!==e.active&&or(e,null,14)}}finally{pr=0,dr.length=0,_r(),ur=!1,gr=null,(dr.length||hr.length)&&Rr()}}function Ar(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Je;let i=n;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:s}=r[e]||Je;s&&(i=n.map((e=>ut(e)?e.trim():e))),t&&(i=n.map(Ct))}let o,l=r[o=St(t)]||r[o=St(wt(t))];!l&&s&&(l=r[o=St(_t(t))]),l&&lr(l,e,6,i);const u=r[o+`Once`];if(u){if(e.emitted){if(e.emitted[o])return}else e.emitted={};e.emitted[o]=!0,lr(u,e,6,i)}}function Ir(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const s=e.emits;let a={},o=!1;if(!lt(e)){const r=e=>{const n=Ir(e,t,!0);n&&(o=!0,et(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return s||o?(it(s)?s.forEach((e=>a[e]=null)):et(a,s),dt(e)&&r.set(e,a),a):(dt(e)&&r.set(e,null),null)}function Cr(e,t){return!(!e||!Qe(t))&&(t=t.slice(2).replace(/Once$/,""),rt(e,t[0].toLowerCase()+t.slice(1))||rt(e,_t(t))||rt(e,t))}let Er=null,Or=null;function Dr(e){const t=Er;return Er=e,Or=e&&e.type.__scopeId||null,t}function Tr(e,t=Er,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Ts(-1);const i=Dr(t);let s;try{s=e(...n)}finally{Dr(i),r._d&&Ts(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Pr(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[a],slots:o,attrs:l,emit:u,render:c,renderCache:d,data:p,setupState:h,ctx:f,inheritAttrs:m}=e;let v,g;const y=Dr(e);try{if(4&n.shapeFlag){const e=i||r;v=Ks(c.call(e,e,d,s,h,p,f)),g=l}else{const e=t;v=Ks(e.length>1?e(s,0?{get attrs(){return l},slots:o,emit:u}:{attrs:l,slots:o,emit:u}):e(s,null)),g=t.props?l:jr(l)}}catch(w){Cs.length=0,handleError(w,e,1),v=zs(As)}let b=v;if(g&&!1!==m){const e=Object.keys(g),{shapeFlag:t}=b;e.length&&t&(1|6)&&(a&&e.some(Xe)&&(g=Mr(g,a)),b=Vs(b,g))}return n.dirs&&(b=Vs(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),v=b,Dr(y),v}const jr=e=>{let t;for(const n in e)("class"===n||"style"===n||Qe(n))&&((t||(t={}))[n]=e[n]);return t},Mr=(e,t)=>{const n={};for(const r in e)Xe(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Lr(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Cr(n,s))return!0}return!1}function $r(e,t){if(ta){let n=ta.provides;const r=ta.parent&&ta.parent.provides;r===n&&(n=ta.provides=Object.create(r)),n[e]=t}else;}function Ur(e,t,n=!1){const r=ta||Er;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&lt(t)?t.call(r.proxy):t}}function Nr(e,t){return zr(e,null,t)}const Fr={};function Br(e,t,n){return zr(e,t,n)}function zr(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:a}=Je){const o=ta;let l,u,c=!1,d=!1;if(Yn(e)?(l=()=>e.value,c=qn(e)):Bn(e)?(l=()=>e,r=!0):it(e)?(d=!0,c=e.some((e=>Bn(e)||qn(e))),l=()=>e.map((e=>Yn(e)?e.value:Bn(e)?Hr(e):lt(e)?or(e,o,2):void 0))):l=lt(e)?t?()=>or(e,o,2):()=>{if(!o||!o.isUnmounted)return u&&u(),lr(e,o,3,[h])}:Ge,t&&r){const e=l;l=()=>Hr(e())}let p,h=e=>{u=g.onStop=()=>{or(e,o,4)}};if(oa){if(h=Ge,t?n&&lr(t,o,3,[l(),d?[]:void 0,h]):l(),"sync"!==i)return Ge;{const e=ga();p=e.__watcherHandles||(e.__watcherHandles=[])}}let f=d?new Array(e.length).fill(Fr):Fr;const m=()=>{if(g.active)if(t){const e=g.run();(r||c||(d?e.some(((e,t)=>Rt(e,f[t]))):Rt(e,f))||0)&&(u&&u(),lr(t,o,3,[e,f===Fr?void 0:d&&f[0]===Fr?[]:f,h]),f=e)}else g.run()};let v;m.allowRecurse=!!t,"sync"===i?v=m:"post"===i?v=()=>hs(m,o&&o.suspense):(m.pre=!0,o&&(m.id=o.uid),v=()=>br(m));const g=new zt(l,v);t?n?m():f=g.run():"post"===i?hs(g.run.bind(g),o&&o.suspense):g.run();const y=()=>{g.stop(),o&&o.scope&&tt(o.scope.effects,g)};return p&&p.push(y),y}function qr(e,t,n){const r=this.proxy,i=ut(e)?e.includes(".")?Vr(r,e):()=>r[e]:e.bind(r,r);let s;lt(t)?s=t:(s=t.handler,n=t);const a=ta;ra(this);const o=zr(i,s.bind(r),n);return a?ra(a):ia(),o}function Vr(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Hr(e,t){if(!dt(e)||e["__v_skip"])return e;if((t=t||new Set).has(e))return e;if(t.add(e),Yn(e))Hr(e.value,t);else if(it(e))for(let n=0;n<e.length;n++)Hr(e[n],t);else if(at(e)||st(e))e.forEach((e=>{Hr(e,t)}));else if(mt(e))for(const n in e)Hr(e[n],t);return e}function Wr(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return di((()=>{e.isMounted=!0})),fi((()=>{e.isUnmounting=!0})),e}const Jr=[Function,Array],Kr={name:`BaseTransition`,props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Jr,onEnter:Jr,onAfterEnter:Jr,onEnterCancelled:Jr,onBeforeLeave:Jr,onLeave:Jr,onAfterLeave:Jr,onLeaveCancelled:Jr,onBeforeAppear:Jr,onAppear:Jr,onAfterAppear:Jr,onAppearCancelled:Jr},setup(e,{slots:t}){const n=na(),r=Wr();let i;return()=>{const s=t.default&&ei(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1)for(const e of s)if(e.type!==As){a=e;break}const o=Hn(e),{mode:l}=o;if(r.isLeaving)return Yr(a);const u=Qr(a);if(!u)return Yr(a);const c=Zr(u,o,r,n);Xr(u,c);const d=n.subTree,p=d&&Qr(d);let h=!1;const{getTransitionKey:f}=u.type;if(f){const e=f();void 0===i?i=e:e!==i&&(i=e,h=!0)}if(p&&p.type!==As&&(!$s(u,p)||h)){const e=Zr(p,o,r,n);if(Xr(p,e),"out-in"===l)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&n.update()},Yr(a);"in-out"===l&&u.type!==As&&(e.delayLeave=(e,t,n)=>{Gr(r,p)[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=n})}return a}}};function Gr(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Zr(e,t,n,r){const{appear:i,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:p,onAfterLeave:h,onLeaveCancelled:f,onBeforeAppear:m,onAppear:v,onAfterAppear:g,onAppearCancelled:y}=t,b=String(e.key),w=Gr(n,e),x=(e,t)=>{e&&lr(e,r,9,t)},_=(e,t)=>{const n=t[1];x(e,t),it(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},k={mode:s,persisted:a,beforeEnter(t){let r=o;if(!n.isMounted){if(!i)return;r=m||o}t._leaveCb&&t._leaveCb(!0);const s=w[b];s&&$s(e,s)&&s.el._leaveCb&&s.el._leaveCb(),x(r,[t])},enter(e){let t=l,r=u,s=c;if(!n.isMounted){if(!i)return;t=v||l,r=g||u,s=y||c}let a=!1;const o=e._enterCb=t=>{a||(a=!0,x(t?s:r,[e]),k.delayedLeave&&k.delayedLeave(),e._enterCb=void 0)};t?_(t,[e,o]):o()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();x(d,[t]);let s=!1;const a=t._leaveCb=n=>{s||(s=!0,r(),x(n?f:h,[t]),t._leaveCb=void 0,w[i]===e&&delete w[i])};w[i]=e,p?_(p,[t,a]):a()},clone:e=>Zr(e,t,n,r)};return k}function Yr(e){if(ri(e))return(e=Vs(e)).children=null,e}function Qr(e){return ri(e)?e.children?e.children[0]:void 0:e}function Xr(e,t){6&e.shapeFlag&&e.component?Xr(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ei(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let a=e[s];const o=null==n?a.key:String(n)+String(null!=a.key?a.key:s);a.type===Ss?(128&a.patchFlag&&i++,r=r.concat(ei(a.children,t,o))):(t||a.type!==As)&&r.push(null!=o?Vs(a,{key:o}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function ti(e){return lt(e)?{setup:e,name:e.name}:e}const ni=e=>!!e.type.__asyncLoader,ri=e=>e.type.__isKeepAlive;function ii(e,t){ai(e,"a",t)}function si(e,t){ai(e,"da",t)}function ai(e,t,n=ta){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(li(t,r,n),n){let e=n.parent;for(;e&&e.parent;)ri(e.parent.vnode)&&oi(r,t,n,e),e=e.parent}}function oi(e,t,n,r){const i=li(t,e,r,!0);mi((()=>{tt(r[t],i)}),n)}function li(e,t,n=ta,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;Wt(),ra(n);const i=lr(t,n,e,r);return ia(),Jt(),i});return r?i.unshift(s):i.push(s),s}}const ui=e=>(t,n=ta)=>(!oa||"sp"===e)&&li(e,((...e)=>t(...e)),n),ci=ui("bm"),di=ui("m"),pi=ui("bu"),hi=ui("u"),fi=ui("bum"),mi=ui("um"),vi=ui("sp"),gi=ui("rtg"),yi=ui("rtc");function bi(e,t=ta){li("ec",e,t)}function wi(e,t){const n=Er;if(null===n)return e;const r=da(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[e,n,a,o=Je]=t[s];e&&(lt(e)&&(e={mounted:e,updated:e}),e.deep&&Hr(n),i.push({dir:e,instance:r,value:n,oldValue:void 0,arg:a,modifiers:o}))}return e}function xi(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(Wt(),lr(l,n,8,[e.el,o,e,t]),Jt())}}const _i="components",ki="directives";function Si(e,t){return Ci(_i,e,!0,t)||e}const Ri=Symbol();function Ai(e){return ut(e)?Ci(_i,e,!1)||e:e||Ri}function Ii(e){return Ci(ki,e)}function Ci(e,t,n=!0,r=!1){const i=Er||ta;if(i){const n=i.type;if(e===_i){const e=function(e,t=!0){return lt(e)?e.displayName||e.name:e.name||t&&e.__name}(n,!1);if(e&&(e===t||e===wt(t)||e===kt(wt(t))))return n}const s=Ei(i[e]||n[e],t)||Ei(i.appContext[e],t);return!s&&r?n:s}}function Ei(e,t){return e&&(e[t]||e[wt(t)]||e[kt(wt(t))])}function Oi(e,t,n,r){let i;const s=n&&n[r];if(it(e)||ut(e)){i=new Array(e.length);for(let n=0,r=e.length;n<r;n++)i[n]=t(e[n],n,void 0,s&&s[n])}else if("number"==typeof e){i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,s&&s[n])}else if(dt(e))if(e[Symbol.iterator])i=Array.from(e,((e,n)=>t(e,n,void 0,s&&s[n])));else{const n=Object.keys(e);i=new Array(n.length);for(let r=0,a=n.length;r<a;r++){const a=n[r];i[r]=t(e[a],a,r,s&&s[r])}}else i=[];return n&&(n[r]=i),i}function Di(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(it(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.key?(...e)=>{const t=r.fn(...e);return t&&(t.key=r.key),t}:r.fn)}return e}function Ti(e,t,n={},r,i){if(Er.isCE||Er.parent&&ni(Er.parent)&&Er.parent.isCE)return"default"!==t&&(n.name=t),zs("slot",n,r&&r());let s=e[t];s&&s._c&&(s._d=!1),Os();const a=s&&Pi(s(n)),o=Ms(Ss,{key:n.key||a&&a.key||`_${t}`},a||(r?r():[]),a&&1===e._?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function Pi(e){return e.some((e=>!Ls(e)||e.type!==As&&!(e.type===Ss&&!Pi(e.children))))?e:null}function ji(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:St(r)]=e[r];return n}const Mi=e=>e?sa(e)?da(e)||e.proxy:Mi(e.parent):null,Li=et(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Mi(e.parent),$root:e=>Mi(e.root),$emit:e=>e.emit,$options:e=>qi(e),$forceUpdate:e=>e.f||(e.f=()=>br(e.update)),$nextTick:e=>e.n||(e.n=yr.bind(e.proxy)),$watch:e=>qr.bind(e)}),$i=(e,t)=>e!==Je&&!e.__isScriptSetup&&rt(e,t),Ui={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:l}=e;let u;if("$"!==t[0]){const o=a[t];if(void 0!==o)switch(o){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if($i(r,t))return a[t]=1,r[t];if(i!==Je&&rt(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&rt(u,t))return a[t]=3,s[t];if(n!==Je&&rt(n,t))return a[t]=4,n[t];Ni&&(a[t]=0)}}const c=Li[t];let d,p;return c?("$attrs"===t&&Kt(e,0,t),c(e)):(d=o.__cssModules)&&(d=d[t])?d:n!==Je&&rt(n,t)?(a[t]=4,n[t]):(p=l.config.globalProperties,rt(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return $i(i,t)?(i[t]=n,!0):r!==Je&&rt(r,t)?(r[t]=n,!0):!rt(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let o;return!!n[a]||e!==Je&&rt(e,a)||$i(t,a)||(o=s[0])&&rt(o,a)||rt(r,a)||rt(Li,a)||rt(i.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:rt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Ni=!0;function Fi(e){const t=qi(e),n=e.proxy,r=e.ctx;Ni=!1,t.beforeCreate&&Bi(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:d,mounted:p,beforeUpdate:h,updated:f,activated:m,deactivated:v,beforeDestroy:g,beforeUnmount:y,destroyed:b,unmounted:w,render:x,renderTracked:_,renderTriggered:k,errorCaptured:S,serverPrefetch:R,expose:A,inheritAttrs:I,components:C,directives:E,filters:O}=t;if(u&&function(e,t,n=Ge,r=!1){it(e)&&(e=Ji(e));for(const i in e){const n=e[i];let s;s=dt(n)?"default"in n?Ur(n.from||i,n.default,!0):Ur(n.from||i):Ur(n),Yn(s)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[i]=s}}(u,r,null,e.appContext.config.unwrapInjectedRef),a)for(const T in a){const e=a[T];lt(e)&&(r[T]=e.bind(n))}if(i){const t=i.call(n,n);dt(t)&&(e.data=Un(t))}if(Ni=!0,s)for(const T in s){const e=s[T],t=lt(e)?e.bind(n,n):lt(e.get)?e.get.bind(n,n):Ge,i=!lt(e)&&lt(e.set)?e.set.bind(n):Ge,a=pa({get:t,set:i});Object.defineProperty(r,T,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(o)for(const T in o)zi(o[T],r,n,T);if(l){const e=lt(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{$r(t,e[t])}))}function D(e,t){it(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(c&&Bi(c,e,"c"),D(ci,d),D(di,p),D(pi,h),D(hi,f),D(ii,m),D(si,v),D(bi,S),D(yi,_),D(gi,k),D(fi,y),D(mi,w),D(vi,R),it(A))if(A.length){const t=e.exposed||(e.exposed={});A.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});x&&e.render===Ge&&(e.render=x),null!=I&&(e.inheritAttrs=I),C&&(e.components=C),E&&(e.directives=E)}function Bi(e,t,n){lr(it(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function zi(e,t,n,r){const i=r.includes(".")?Vr(n,r):()=>n[r];if(ut(e)){const n=t[e];lt(n)&&Br(i,n)}else if(lt(e))Br(i,e.bind(n));else if(dt(e))if(it(e))e.forEach((e=>zi(e,t,n,r)));else{const r=lt(e.handler)?e.handler.bind(n):t[e.handler];lt(r)&&Br(i,r,e)}}function qi(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:i.length||n||r?(l={},i.length&&i.forEach((e=>Vi(l,e,a,!0))),Vi(l,t,a)):l=t,dt(t)&&s.set(t,l),l}function Vi(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Vi(e,s,n,!0),i&&i.forEach((t=>Vi(e,t,n,!0)));for(const a in t)if(r&&"expose"===a);else{const r=Hi[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const Hi={data:Wi,props:Gi,emits:Gi,methods:Gi,computed:Gi,beforeCreate:Ki,created:Ki,beforeMount:Ki,mounted:Ki,beforeUpdate:Ki,updated:Ki,beforeDestroy:Ki,beforeUnmount:Ki,destroyed:Ki,unmounted:Ki,activated:Ki,deactivated:Ki,errorCaptured:Ki,serverPrefetch:Ki,components:Gi,directives:Gi,watch:function(e,t){if(!e)return t;if(!t)return e;const n=et(Object.create(null),e);for(const r in t)n[r]=Ki(e[r],t[r]);return n},provide:Wi,inject:function(e,t){return Gi(Ji(e),Ji(t))}};function Wi(e,t){return t?e?function(){return et(lt(e)?e.call(this,this):e,lt(t)?t.call(this,this):t)}:t:e}function Ji(e){if(it(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ki(e,t){return e?[...new Set([].concat(e,t))]:t}function Gi(e,t){return e?et(et(Object.create(null),e),t):t}function Zi(e,t,n,r=!1){const i={},s={};It(s,Us,1),e.propsDefaults=Object.create(null),Yi(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:Fn(i,!1,dn,Dn,jn):e.type.props?e.props=i:e.props=s,e.attrs=s}function Yi(e,t,n,r){const[i,s]=e.propsOptions;let a,o=!1;if(t)for(let l in t){if(gt(l))continue;const u=t[l];let c;i&&rt(i,c=wt(l))?s&&s.includes(c)?(a||(a={}))[c]=u:n[c]=u:Cr(e.emitsOptions,l)||l in r&&u===r[l]||(r[l]=u,o=!0)}if(s){const t=Hn(n),r=a||Je;for(let a=0;a<s.length;a++){const o=s[a];n[o]=Qi(i,t,o,r[o],e,!rt(r,o))}}return o}function Qi(e,t,n,r,i,s){const a=e[n];if(null!=a){const e=rt(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&lt(e)){const{propsDefaults:s}=i;n in s?r=s[n]:(ra(i),r=s[n]=e.call(null,t),ia())}else r=e}a[0]&&(s&&!e?r=!1:!a[1]||""!==r&&r!==_t(n)||(r=!0))}return r}function Xi(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,a={},o=[];let l=!1;if(!lt(e)){const r=e=>{l=!0;const[n,r]=Xi(e,t,!0);et(a,n),r&&o.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!s&&!l)return dt(e)&&r.set(e,Ke),Ke;if(it(s))for(let c=0;c<s.length;c++){const e=wt(s[c]);es(e)&&(a[e]=Je)}else if(s)for(const c in s){const e=wt(c);if(es(e)){const t=s[c],n=a[e]=it(t)||lt(t)?{type:t}:Object.assign({},t);if(n){const t=rs(Boolean,n.type),r=rs(String,n.type);n[0]=t>-1,n[1]=r<0||t<r,(t>-1||rt(n,"default"))&&o.push(e)}}}const u=[a,o];return dt(e)&&r.set(e,u),u}function es(e){return"$"!==e[0]}function ts(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function ns(e,t){return ts(e)===ts(t)}function rs(e,t){return it(t)?t.findIndex((t=>ns(t,e))):lt(t)&&ns(t,e)?0:-1}const is=e=>"_"===e[0]||"$stable"===e,ss=e=>it(e)?e.map(Ks):[Ks(e)],as=(e,t,n)=>{if(t._n)return t;const r=Tr(((...e)=>ss(t(...e))),n);return r._c=!1,r},os=(e,t,n)=>{const r=e._ctx;for(const i in e){if(is(i))continue;const n=e[i];if(lt(n))t[i]=as(0,n,r);else if(null!=n){const e=ss(n);t[i]=()=>e}}},ls=(e,t)=>{const n=ss(t);e.slots.default=()=>n};function us(){return{app:null,config:{isNativeTag:Ze,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cs=0;function ds(e,t){return function(n,r=null){lt(n)||(n=Object.assign({},n)),null==r||dt(r)||(r=null);const i=us(),s=new Set;let a=!1;const o=i.app={_uid:cs++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:ya,get config(){return i.config},set config(e){},use:(e,...t)=>(s.has(e)||(e&&lt(e.install)?(s.add(e),e.install(o,...t)):lt(e)&&(s.add(e),e(o,...t))),o),mixin:e=>(i.mixins.includes(e)||i.mixins.push(e),o),component:(e,t)=>t?(i.components[e]=t,o):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,o):i.directives[e],mount(s,l,u){if(!a){const c=zs(n,r);return c.appContext=i,l&&t?t(c,s):e(c,s,u),a=!0,o._container=s,s.__vue_app__=o,da(c.component)||c.component.proxy}},unmount(){a&&(e(null,o._container),delete o._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,o)};return o}}function ps(e,t,n,r,i=!1){if(it(e))return void e.forEach(((e,s)=>ps(e,t&&(it(t)?t[s]:t),n,r,i)));if(ni(r)&&!i)return;const s=4&r.shapeFlag?da(r.component)||r.component.proxy:r.el,a=i?null:s,{i:o,r:l}=e,u=t&&t.r,c=o.refs===Je?o.refs={}:o.refs,d=o.setupState;if(null!=u&&u!==l&&(ut(u)?(c[u]=null,rt(d,u)&&(d[u]=null)):Yn(u)&&(u.value=null)),lt(l))or(l,o,12,[a,c]);else{const t=ut(l),r=Yn(l);if(t||r){const o=()=>{if(e.f){const n=t?rt(d,l)?d[l]:c[l]:l.value;i?it(n)&&tt(n,s):it(n)?n.includes(s)||n.push(s):t?(c[l]=[s],rt(d,l)&&(d[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else t?(c[l]=a,rt(d,l)&&(d[l]=a)):r&&(l.value=a,e.k&&(c[e.k]=a))};a?(o.id=-1,hs(o,n)):o()}}}const hs=function(e,t){var n;t&&t.pendingBranch?it(e)?t.effects.push(...e):t.effects.push(e):(it(n=e)?hr.push(...n):fr&&fr.includes(n,n.allowRecurse?mr+1:mr)||hr.push(n),wr())};function fs(e){return function(e,t){(Et||(Et="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})).__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:s,createText:a,createComment:o,setText:l,setElementText:u,parentNode:c,nextSibling:d,setScopeId:p=Ge,insertStaticContent:h}=e,f=(e,t,n,r=null,i=null,s=null,a=!1,o=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!$s(e,t)&&(r=z(e),$(e,i,s,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:u,ref:c,shapeFlag:d}=t;switch(u){case Rs:m(e,t,n,r);break;case As:v(e,t,n,r);break;case Is:null==e&&g(t,n,r,a);break;case Ss:I(e,t,n,r,i,s,a,o,l);break;default:1&d?w(e,t,n,r,i,s,a,o,l):6&d?C(e,t,n,r,i,s,a,o,l):(64&d||128&d)&&u.process(e,t,n,r,i,s,a,o,l,V)}null!=c&&i&&ps(c,e&&e.ref,s,t||e,!t)},m=(e,t,r,i)=>{if(null==e)n(t.el=a(t.children),r,i);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},v=(e,t,r,i)=>{null==e?n(t.el=o(t.children||""),r,i):t.el=e.el},g=(e,t,n,r)=>{[e.el,e.anchor]=h(e.children,t,n,r,e.el,e.anchor)},y=({el:e,anchor:t},r,i)=>{let s;for(;e&&e!==t;)s=d(e),n(e,r,i),e=s;n(t,r,i)},b=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=d(e),r(e),e=n;r(t)},w=(e,t,n,r,i,s,a,o,l)=>{a=a||"svg"===t.type,null==e?x(t,n,r,i,s,a,o,l):S(e,t,i,s,a,o,l)},x=(e,t,r,a,o,l,c,d)=>{let p,h;const{type:f,props:m,shapeFlag:v,transition:g,dirs:y}=e;if(p=e.el=s(e.type,l,m&&m.is,m),8&v?u(p,e.children):16&v&&k(e.children,p,null,a,o,l&&"foreignObject"!==f,c,d),y&&xi(e,null,a,"created"),m){for(const t in m)"value"===t||gt(t)||i(p,t,null,m[t],l,e.children,a,o,B);"value"in m&&i(p,"value",null,m.value),(h=m.onVnodeBeforeMount)&&Qs(h,a,e)}_(p,e,e.scopeId,c,a),y&&xi(e,null,a,"beforeMount");const b=(!o||o&&!o.pendingBranch)&&g&&!g.persisted;b&&g.beforeEnter(p),n(p,t,r),((h=m&&m.onVnodeMounted)||b||y)&&hs((()=>{h&&Qs(h,a,e),b&&g.enter(p),y&&xi(e,null,a,"mounted")}),o)},_=(e,t,n,r,i)=>{if(n&&p(e,n),r)for(let s=0;s<r.length;s++)p(e,r[s]);if(i){if(t===i.subTree){const t=i.vnode;_(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},k=(e,t,n,r,i,s,a,o,l=0)=>{for(let u=l;u<e.length;u++){const l=e[u]=o?Gs(e[u]):Ks(e[u]);f(null,l,t,n,r,i,s,a,o)}},S=(e,t,n,r,s,a,o)=>{const l=t.el=e.el;let{patchFlag:c,dynamicChildren:d,dirs:p}=t;c|=16&e.patchFlag;const h=e.props||Je,f=t.props||Je;let m;n&&ms(n,!1),(m=f.onVnodeBeforeUpdate)&&Qs(m,n,t,e),p&&xi(t,e,n,"beforeUpdate"),n&&ms(n,!0);const v=s&&"foreignObject"!==t.type;if(d?R(e.dynamicChildren,d,l,n,r,v,a):o||P(e,t,l,null,n,r,v,a,!1),c>0){if(16&c)A(l,t,h,f,n,r,s);else if(2&c&&h.class!==f.class&&i(l,"class",null,f.class,s),4&c&&i(l,"style",h.style,f.style,s),8&c){const a=t.dynamicProps;for(let t=0;t<a.length;t++){const o=a[t],u=h[o],c=f[o];c===u&&"value"!==o||i(l,o,u,c,s,e.children,n,r,B)}}1&c&&e.children!==t.children&&u(l,t.children)}else o||null!=d||A(l,t,h,f,n,r,s);((m=f.onVnodeUpdated)||p)&&hs((()=>{m&&Qs(m,n,t,e),p&&xi(t,e,n,"updated")}),r)},R=(e,t,n,r,i,s,a)=>{for(let o=0;o<t.length;o++){const l=e[o],u=t[o],d=l.el&&(l.type===Ss||!$s(l,u)||l.shapeFlag&(6|64))?c(l.el):n;f(l,u,d,null,r,i,s,a,!0)}},A=(e,t,n,r,s,a,o)=>{if(n!==r){if(n!==Je)for(const l in n)gt(l)||l in r||i(e,l,n[l],null,o,t.children,s,a,B);for(const l in r){if(gt(l))continue;const u=r[l],c=n[l];u!==c&&"value"!==l&&i(e,l,c,u,o,t.children,s,a,B)}"value"in r&&i(e,"value",n.value,r.value)}},I=(e,t,r,i,s,o,l,u,c)=>{const d=t.el=e?e.el:a(""),p=t.anchor=e?e.anchor:a("");let{patchFlag:h,dynamicChildren:f,slotScopeIds:m}=t;m&&(u=u?u.concat(m):m),null==e?(n(d,r,i),n(p,r,i),k(t.children,r,p,s,o,l,u,c)):h>0&&64&h&&f&&e.dynamicChildren?(R(e.dynamicChildren,f,r,s,o,l,u),(null!=t.key||s&&t===s.subTree)&&vs(e,t,!0)):P(e,t,r,p,s,o,l,u,c)},C=(e,t,n,r,i,s,a,o,l)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,l):E(t,n,r,i,s,a,l):O(e,t,l)},E=(e,t,n,r,i,s,a)=>{const o=e.component=function(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Xs,s={uid:ea++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Dt(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xi(r,i),emitsOptions:Ir(r,i),emit:null,emitted:null,propsDefaults:Je,inheritAttrs:r.inheritAttrs,ctx:Je,data:Je,props:Je,attrs:Je,slots:Je,refs:Je,setupState:Je,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};s.ctx={_:s},s.root=t?t.root:s,s.emit=Ar.bind(null,s),e.ce&&e.ce(s);return s}(e,r,i);if(ri(e)&&(o.ctx.renderer=V),function(e,t=!1){oa=t;const{props:n,children:r}=e.vnode,i=sa(e);Zi(e,n,i,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=Hn(t),It(t,"_",n)):os(t,e.slots={})}else e.slots={},t&&ls(e,t);It(e.slots,Us,1)})(e,r);const s=i?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Wn(new Proxy(e.ctx,Ui));const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?ca(e):null;ra(e),Wt();const i=or(r,e,0,[e.props,n]);if(Jt(),ia(),pt(i)){if(i.then(ia,ia),t)return i.then((n=>{la(e,n,t)})).catch((t=>{handleError(t,e,0)}));e.asyncDep=i}else la(e,i,t)}else ua(e,t)}(e,t):void 0;oa=!1}(o),o.asyncDep){if(i&&i.registerDep(o,D),!e.el){const e=o.subTree=zs(As);v(null,e,t,n)}}else D(o,e,t,n,i,s,a)},O=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:s}=e,{props:a,children:o,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!o||o&&o.$stable)||r!==a&&(r?!a||Lr(r,a,u):!!a);if(1024&l)return!0;if(16&l)return r?Lr(r,a,u):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!Cr(u,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void T(r,t,n);r.next=t,function(e){const t=dr.indexOf(e);t>pr&&dr.splice(t,1)}(r.update),r.update()}else t.el=e.el,r.vnode=t},D=(e,t,n,r,i,s,a)=>{const o=()=>{if(e.isMounted){let t,{next:n,bu:r,u:o,parent:l,vnode:u}=e,d=n;ms(e,!1),n?(n.el=u.el,T(e,n,a)):n=u,r&&At(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Qs(t,l,n,u),ms(e,!0);const p=Pr(e),h=e.subTree;e.subTree=p,f(h,p,c(h.el),z(h),e,i,s),n.el=p.el,null===d&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,p.el),o&&hs(o,i),(t=n.props&&n.props.onVnodeUpdated)&&hs((()=>Qs(t,l,n,u)),i)}else{let a;const{el:o,props:l}=t,{bm:u,m:c,parent:d}=e,p=ni(t);if(ms(e,!1),u&&At(u),!p&&(a=l&&l.onVnodeBeforeMount)&&Qs(a,d,t),ms(e,!0),o&&W){const n=()=>{e.subTree=Pr(e),W(o,e.subTree,e,i,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const a=e.subTree=Pr(e);f(null,a,n,r,e,i,s),t.el=a.el}if(c&&hs(c,i),!p&&(a=l&&l.onVnodeMounted)){const e=t;hs((()=>Qs(a,d,e)),i)}(256&t.shapeFlag||d&&ni(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&hs(e.a,i),e.isMounted=!0,t=n=r=null}},l=e.effect=new zt(o,(()=>br(u)),e.scope),u=e.update=()=>l.run();u.id=e.uid,ms(e,!0),u()},T=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,o=Hn(i),[l]=e.propsOptions;let u=!1;if(!(r||a>0)||16&a){let r;Yi(e,t,i,s)&&(u=!0);for(const s in o)t&&(rt(t,s)||(r=_t(s))!==s&&rt(t,r))||(l?!n||void 0===n[s]&&void 0===n[r]||(i[s]=Qi(l,o,s,void 0,e,!0)):delete i[s]);if(s!==o)for(const e in s)(!t||!rt(t,e)&&1)&&(delete s[e],u=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];if(Cr(e.emitsOptions,a))continue;const c=t[a];if(l)if(rt(s,a))c!==s[a]&&(s[a]=c,u=!0);else{const t=wt(a);i[t]=Qi(l,o,t,c,e,!1)}else c!==s[a]&&(s[a]=c,u=!0)}}u&&Zt(e,"set","$attrs")}(e,t.props,r,n),((e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,a=Je;if(32&r.shapeFlag){const e=t._;e?n&&1===e?s=!1:(et(i,t),n||1!==e||delete i._):(s=!t.$stable,os(t,i)),a=t}else t&&(ls(e,t),a={default:1});if(s)for(const o in i)is(o)||o in a||delete i[o]})(e,t.children,n),Wt(),xr(),Jt()},P=(e,t,n,r,i,s,a,o,l=!1)=>{const c=e&&e.children,d=e?e.shapeFlag:0,p=t.children,{patchFlag:h,shapeFlag:f}=t;if(h>0){if(128&h)return void M(c,p,n,r,i,s,a,o,l);if(256&h)return void j(c,p,n,r,i,s,a,o,l)}8&f?(16&d&&B(c,i,s),p!==c&&u(n,p)):16&d?16&f?M(c,p,n,r,i,s,a,o,l):B(c,i,s,!0):(8&d&&u(n,""),16&f&&k(p,n,r,i,s,a,o,l))},j=(e,t,n,r,i,s,a,o,l)=>{t=t||Ke;const u=(e=e||Ke).length,c=t.length,d=Math.min(u,c);let p;for(p=0;p<d;p++){const r=t[p]=l?Gs(t[p]):Ks(t[p]);f(e[p],r,n,null,i,s,a,o,l)}u>c?B(e,i,s,!0,!1,d):k(t,n,r,i,s,a,o,l,d)},M=(e,t,n,r,i,s,a,o,l)=>{let u=0;const c=t.length;let d=e.length-1,p=c-1;for(;u<=d&&u<=p;){const r=e[u],c=t[u]=l?Gs(t[u]):Ks(t[u]);if(!$s(r,c))break;f(r,c,n,null,i,s,a,o,l),u++}for(;u<=d&&u<=p;){const r=e[d],u=t[p]=l?Gs(t[p]):Ks(t[p]);if(!$s(r,u))break;f(r,u,n,null,i,s,a,o,l),d--,p--}if(u>d){if(u<=p){const e=p+1,d=e<c?t[e].el:r;for(;u<=p;)f(null,t[u]=l?Gs(t[u]):Ks(t[u]),n,d,i,s,a,o,l),u++}}else if(u>p)for(;u<=d;)$(e[u],i,s,!0),u++;else{const h=u,m=u,v=new Map;for(u=m;u<=p;u++){const e=t[u]=l?Gs(t[u]):Ks(t[u]);null!=e.key&&v.set(e.key,u)}let g,y=0;const b=p-m+1;let w=!1,x=0;const _=new Array(b);for(u=0;u<b;u++)_[u]=0;for(u=h;u<=d;u++){const r=e[u];if(y>=b){$(r,i,s,!0);continue}let c;if(null!=r.key)c=v.get(r.key);else for(g=m;g<=p;g++)if(0===_[g-m]&&$s(r,t[g])){c=g;break}void 0===c?$(r,i,s,!0):(_[c-m]=u+1,c>=x?x=c:w=!0,f(r,t[c],n,null,i,s,a,o,l),y++)}const k=w?function(e){const t=e.slice(),n=[0];let r,i,s,a,o;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,e[n[o]]<l?s=o+1:a=o;l<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}s=n.length,a=n[s-1];for(;s-- >0;)n[s]=a,a=t[a];return n}(_):Ke;for(g=k.length-1,u=b-1;u>=0;u--){const e=m+u,d=t[e],p=e+1<c?t[e+1].el:r;0===_[u]?f(null,d,n,p,i,s,a,o,l):w&&(g<0||u!==k[g]?L(d,n,p,2):g--)}}},L=(e,t,r,i,s=null)=>{const{el:a,type:o,transition:l,children:u,shapeFlag:c}=e;if(6&c)return void L(e.component.subTree,t,r,i);if(128&c)return void e.suspense.move(t,r,i);if(64&c)return void o.move(e,t,r,V);if(o===Ss){n(a,t,r);for(let e=0;e<u.length;e++)L(u[e],t,r,i);return void n(e.anchor,t,r)}if(o===Is)return void y(e,t,r);if(2!==i&&1&c&&l)if(0===i)l.beforeEnter(a),n(a,t,r),hs((()=>l.enter(a)),s);else{const{leave:e,delayLeave:i,afterLeave:s}=l,o=()=>n(a,t,r),u=()=>{e(a,(()=>{o(),s&&s()}))};i?i(a,o,u):u()}else n(a,t,r)},$=(e,t,n,r=!1,i=!1)=>{const{type:s,props:a,ref:o,children:l,dynamicChildren:u,shapeFlag:c,patchFlag:d,dirs:p}=e;if(null!=o&&ps(o,null,n,e,!0),256&c)return void t.ctx.deactivate(e);const h=1&c&&p,f=!ni(e);let m;if(f&&(m=a&&a.onVnodeBeforeUnmount)&&Qs(m,t,e),6&c)F(e.component,n,r);else{if(128&c)return void e.suspense.unmount(n,r);h&&xi(e,null,t,"beforeUnmount"),64&c?e.type.remove(e,t,n,i,V,r):u&&(s!==Ss||d>0&&64&d)?B(u,t,n,!1,!0):(s===Ss&&d&(128|256)||!i&&16&c)&&B(l,t,n),r&&U(e)}(f&&(m=a&&a.onVnodeUnmounted)||h)&&hs((()=>{m&&Qs(m,t,e),h&&xi(e,null,t,"unmounted")}),n)},U=e=>{const{type:t,el:n,anchor:i,transition:s}=e;if(t===Ss)return void N(n,i);if(t===Is)return void b(e);const a=()=>{r(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:r}=s,i=()=>t(n,a);r?r(e.el,a,i):i()}else a()},N=(e,t)=>{let n;for(;e!==t;)n=d(e),r(e),e=n;r(t)},F=(e,t,n)=>{const{bum:r,scope:i,update:s,subTree:a,um:o}=e;r&&At(r),i.stop(),s&&(s.active=!1,$(a,e,t,n)),o&&hs(o,t),hs((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},B=(e,t,n,r=!1,i=!1,s=0)=>{for(let a=s;a<e.length;a++)$(e[a],t,n,r,i)},z=e=>6&e.shapeFlag?z(e.component.subTree):128&e.shapeFlag?e.suspense.next():d(e.anchor||e.el),q=(e,t,n)=>{null==e?t._vnode&&$(t._vnode,null,null,!0):f(t._vnode||null,e,t,null,null,null,n),xr(),_r(),t._vnode=e},V={p:f,um:$,m:L,r:U,mt:E,mc:k,pc:P,pbc:R,n:z,o:e};let H,W;t&&([H,W]=t(V));return{render:q,hydrate:H,createApp:ds(q,H)}}(e)}function ms({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function vs(e,t,n=!1){const r=e.children,i=t.children;if(it(r)&&it(i))for(let s=0;s<r.length;s++){const e=r[s];let t=i[s];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=i[s]=Gs(i[s]),t.el=e.el),n||vs(e,t)),t.type===Rs&&(t.el=e.el)}}const gs=e=>e&&(e.disabled||""===e.disabled),ys=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,bs=(e,t)=>{const n=e&&e.to;if(ut(n)){if(t){return t(n)}return null}return n},ws={__isTeleport:!0,process(e,t,n,r,i,s,a,o,l,u){const{mc:c,pc:d,pbc:p,o:{insert:h,querySelector:f,createText:m,createComment:v}}=u,g=gs(t.props);let{shapeFlag:y,children:b,dynamicChildren:w}=t;if(null==e){const e=t.el=m(""),u=t.anchor=m("");h(e,n,r),h(u,n,r);const d=t.target=bs(t.props,f),p=t.targetAnchor=m("");d&&(h(p,d),a=a||ys(d));const v=(e,t)=>{16&y&&c(b,e,t,i,s,a,o,l)};g?v(n,u):d&&v(d,p)}else{t.el=e.el;const r=t.anchor=e.anchor,c=t.target=e.target,h=t.targetAnchor=e.targetAnchor,m=gs(e.props),v=m?n:c,y=m?r:h;if(a=a||ys(c),w?(p(e.dynamicChildren,w,v,i,s,a,o),vs(e,t,!0)):l||d(e,t,v,y,i,s,a,o,!1),g)m||xs(t,n,r,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=bs(t.props,f);e&&xs(t,e,null,u,0)}else m&&xs(t,c,h,u,1)}ks(t)},remove(e,t,n,r,{um:i,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:u,targetAnchor:c,target:d,props:p}=e;if(d&&s(c),(a||!gs(p))&&(s(u),16&o))for(let h=0;h<l.length;h++){const e=l[h];i(e,t,n,!0,!!e.dynamicChildren)}},move:xs,hydrate:function(e,t,n,r,i,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},u){const c=t.target=bs(t.props,l);if(c){const l=c._lpa||c.firstChild;if(16&t.shapeFlag)if(gs(t.props))t.anchor=u(a(e),t,o(e),n,r,i,s),t.targetAnchor=l;else{t.anchor=a(e);let o=l;for(;o;)if(o=a(o),o&&8===o.nodeType&&"teleport anchor"===o.data){t.targetAnchor=o,c._lpa=t.targetAnchor&&a(t.targetAnchor);break}u(l,t,c,n,r,i,s)}ks(t)}return t.anchor&&a(t.anchor)}};function xs(e,t,n,{o:{insert:r},m:i},s=2){0===s&&r(e.targetAnchor,t,n);const{el:a,anchor:o,shapeFlag:l,children:u,props:c}=e,d=2===s;if(d&&r(a,t,n),(!d||gs(c))&&16&l)for(let p=0;p<u.length;p++)i(u[p],t,n,2);d&&r(o,t,n)}const _s=ws;function ks(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n!==e.targetAnchor;)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const Ss=Symbol(void 0),Rs=Symbol(void 0),As=Symbol(void 0),Is=Symbol(void 0),Cs=[];let Es=null;function Os(e=!1){Cs.push(Es=e?null:[])}let Ds=1;function Ts(e){Ds+=e}function Ps(e){return e.dynamicChildren=Ds>0?Es||Ke:null,Cs.pop(),Es=Cs[Cs.length-1]||null,Ds>0&&Es&&Es.push(e),e}function js(e,t,n,r,i,s){return Ps(Bs(e,t,n,r,i,s,!0))}function Ms(e,t,n,r,i){return Ps(zs(e,t,n,r,i,!0))}function Ls(e){return!!e&&!0===e.__v_isVNode}function $s(e,t){return e.type===t.type&&e.key===t.key}const Us=`__vInternal`,Ns=({key:e})=>null!=e?e:null,Fs=({ref:e,ref_key:t,ref_for:n})=>null!=e?ut(e)||Yn(e)||lt(e)?{i:Er,r:e,k:t,f:!!n}:e:null;function Bs(e,t=null,n=null,r=0,i=null,s=(e===Ss?0:1),a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ns(t),ref:t&&Fs(t),scopeId:Or,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Er};return o?(Zs(l,n),128&s&&e.normalize(l)):n&&(l.shapeFlag|=ut(n)?8:16),Ds>0&&!a&&Es&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&Es.push(l),l}const zs=function(e,t=null,n=null,r=0,i=null,s=!1){e&&e!==Ri||(e=As);if(Ls(e)){const r=Vs(e,t,!0);return n&&Zs(r,n),Ds>0&&!s&&Es&&(6&r.shapeFlag?Es[Es.indexOf(e)]=r:Es.push(r)),r.patchFlag|=-2,r}a=e,lt(a)&&"__vccOpts"in a&&(e=e.__vccOpts);var a;if(t){t=qs(t);let{class:e,style:n}=t;e&&!ut(e)&&(t.class=Fe(e)),dt(n)&&(Vn(n)&&!it(n)&&(n=et({},n)),t.style=Me(n))}const o=ut(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:dt(e)?4:lt(e)?2:0;return Bs(e,t,n,r,i,o,s,!0)};function qs(e){return e?Vn(e)||Us in e?et({},e):e:null}function Vs(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:a}=e,o=t?Ys(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&Ns(o),ref:t&&t.ref?n&&i?it(i)?i.concat(Fs(t)):[i,Fs(t)]:Fs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ss?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vs(e.ssContent),ssFallback:e.ssFallback&&Vs(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function Hs(e=" ",t=0){return zs(Rs,null,e,t)}function Ws(e,t){const n=zs(Is,null,e);return n.staticCount=t,n}function Js(e="",t=!1){return t?(Os(),Ms(As,null,e)):zs(As,null,e)}function Ks(e){return null==e||"boolean"==typeof e?zs(As):it(e)?zs(Ss,null,e.slice()):"object"==typeof e?Gs(e):zs(Rs,null,String(e))}function Gs(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Vs(e)}function Zs(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(it(t))n=16;else if("object"==typeof t){if(r&(1|64)){const n=t.default;return void(n&&(n._c&&(n._d=!1),Zs(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||Us in t?3===r&&Er&&(1===Er.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Er}}else lt(t)?(t={default:t,_ctx:Er},n=32):(t=String(t),64&r?(n=16,t=[Hs(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ys(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=Fe([t.class,r.class]));else if("style"===e)t.style=Me([t.style,r.style]);else if(Qe(e)){const n=t[e],i=r[e];!i||n===i||it(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}function Qs(e,t,n,r=null){lr(e,t,7,[n,r])}const Xs=us();let ea=0;let ta=null;const na=()=>ta||Er,ra=e=>{ta=e,e.scope.on()},ia=()=>{ta&&ta.scope.off(),ta=null};function sa(e){return 4&e.vnode.shapeFlag}let aa,oa=!1;function la(e,t,n){lt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:dt(t)&&(e.setupState=rr(t)),ua(e,n)}function ua(e,t,n){const r=e.type;if(!e.render){if(!t&&aa&&!r.render){const t=r.template||qi(e).template;if(t){const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:s,compilerOptions:a}=r,o=et(et({isCustomElement:n,delimiters:s},i),a);r.render=aa(t,o)}}e.render=r.render||Ge}ra(e),Wt(),Fi(e),Jt(),ia()}function ca(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(Kt(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}function da(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(rr(Wn(e.exposed)),{get:(t,n)=>n in t?t[n]:n in Li?Li[n](e):void 0,has:(e,t)=>t in e||t in Li}))}const pa=(e,t)=>function(e,t,n=!1){let r,i;const s=lt(e);return s?(r=e,i=Ge):(r=e.get,i=e.set),new ar(r,i,s||!i,n)}(e,0,oa);function ha(){return fa().attrs}function fa(){const e=na();return e.setupContext||(e.setupContext=ca(e))}function ma(e,t,n){const r=arguments.length;return 2===r?dt(t)&&!it(t)?Ls(t)?zs(e,null,[t]):zs(e,t):zs(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Ls(n)&&(n=[n]),zs(e,t,n))}const va=Symbol(``),ga=()=>Ur(va),ya="3.2.45",ba="http://www.w3.org/2000/svg",wa="undefined"!=typeof document?document:null,xa=wa&&wa.createElement("template"),_a={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?wa.createElementNS(ba,e):wa.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>wa.createTextNode(e),createComment:e=>wa.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>wa.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const a=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;1&&(t.insertBefore(i.cloneNode(!0),n),i!==s&&(i=i.nextSibling)););else{xa.innerHTML=r?`<svg>${e}</svg>`:e;const i=xa.content;if(r){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const ka=/\s*!important$/;function Sa(e,t,n){if(it(n))n.forEach((n=>Sa(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=Aa[t];if(n)return n;let r=wt(t);if("filter"!==r&&r in e)return Aa[t]=r;r=kt(r);for(let i=0;i<Ra.length;i++){const n=Ra[i]+r;if(n in e)return Aa[t]=n}return t}(e,t);ka.test(n)?e.setProperty(_t(r),n.replace(ka,""),"important"):e[r]=n}}const Ra=["Webkit","Moz","ms"],Aa={};const Ia="http://www.w3.org/1999/xlink";function Ca(e,t,n,r){e.addEventListener(t,n,r)}function Ea(e,t,n,r,i=null){const s=e._vei||(e._vei={}),a=s[t];if(r&&a)a.value=r;else{const[n,o]=function(e){let t;if(Oa.test(e)){let n;for(t={};n=e.match(Oa);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):_t(e.slice(2)),t]}(t);if(r){const a=s[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();lr(function(e,t){if(it(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>Da||(Ta.then((()=>Da=0)),Da=Date.now()))(),n}(r,i);Ca(e,n,a,o)}else a&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,a,o),s[t]=void 0)}}const Oa=/(?:Once|Passive|Capture)$/;let Da=0;const Ta=Promise.resolve();const Pa=/^on[a-z]/;function ja(e){const t=na();if(!t)return;const n=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach((e=>La(e,n)))},r=()=>{const r=e(t.proxy);Ma(t.subTree,r),n(r)};zr(r,null,{flush:"post"}),di((()=>{const e=new MutationObserver(r);e.observe(t.subTree.el.parentNode,{childList:!0}),mi((()=>e.disconnect()))}))}function Ma(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{Ma(n.activeBranch,t)}))}for(;e.component;)e=e.component.subTree;if(1&e.shapeFlag&&e.el)La(e.el,t);else if(e.type===Ss)e.children.forEach((e=>Ma(e,t)));else if(e.type===Is){let{el:n,anchor:r}=e;for(;n&&(La(n,t),n!==r);)n=n.nextSibling}}function La(e,t){if(1===e.nodeType){const n=e.style;for(const e in t)n.setProperty(`--${e}`,t[e])}}const $a="transition",Ua="animation",Na=(e,{slots:t})=>ma(Kr,Va(e),t);Na.displayName="Transition";const Fa={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ba=Na.props=et({},Kr.props,Fa),za=(e,t=[])=>{it(e)?e.forEach((e=>e(...t))):e&&e(...t)},qa=e=>!!e&&(it(e)?e.some((e=>e.length>1)):e.length>1);function Va(e){const t={};for(const C in e)C in Fa||(t[C]=e[C]);if(!1===e.css)return t;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=a,appearToClass:c=o,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,f=function(e){if(null==e)return null;if(dt(e))return[Ha(e.enter),Ha(e.leave)];{const t=Ha(e);return[t,t]}}(i),m=f&&f[0],v=f&&f[1],{onBeforeEnter:g,onEnter:y,onEnterCancelled:b,onLeave:w,onLeaveCancelled:x,onBeforeAppear:_=g,onAppear:k=y,onAppearCancelled:S=b}=t,R=(e,t,n)=>{Ja(e,t?c:o),Ja(e,t?u:a),n&&n()},A=(e,t)=>{e._isLeaving=!1,Ja(e,d),Ja(e,h),Ja(e,p),t&&t()},I=e=>(t,n)=>{const i=e?k:y,a=()=>R(t,e,n);za(i,[t,a]),Ka((()=>{Ja(t,e?l:s),Wa(t,e?c:o),qa(i)||Za(t,r,m,a)}))};return et(t,{onBeforeEnter(e){za(g,[e]),Wa(e,s),Wa(e,a)},onBeforeAppear(e){za(_,[e]),Wa(e,l),Wa(e,u)},onEnter:I(!1),onAppear:I(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>A(e,t);Wa(e,d),eo(),Wa(e,p),Ka((()=>{e._isLeaving&&(Ja(e,d),Wa(e,h),qa(w)||Za(e,r,v,n))})),za(w,[e,n])},onEnterCancelled(e){R(e,!1),za(b,[e])},onAppearCancelled(e){R(e,!0),za(S,[e])},onLeaveCancelled(e){A(e),za(x,[e])}})}function Ha(e){return Ct(e)}function Wa(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function Ja(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Ka(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let Ga=0;function Za(e,t,n,r){const i=e._endId=++Ga,s=()=>{i===e._endId&&r()};if(n)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=Ya(e,t);if(!a)return r();const u=a+"end";let c=0;const d=()=>{e.removeEventListener(u,p),s()},p=t=>{t.target===e&&++c>=l&&d()};setTimeout((()=>{c<l&&d()}),o+1),e.addEventListener(u,p)}function Ya(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(`${$a}Delay`),s=r(`${$a}Duration`),a=Qa(i,s),o=r(`${Ua}Delay`),l=r(`${Ua}Duration`),u=Qa(o,l);let c=null,d=0,p=0;t===$a?a>0&&(c=$a,d=a,p=s.length):t===Ua?u>0&&(c=Ua,d=u,p=l.length):(d=Math.max(a,u),c=d>0?a>u?$a:Ua:null,p=c?c===$a?s.length:l.length:0);return{type:c,timeout:d,propCount:p,hasTransform:c===$a&&/\b(transform|all)(,|$)/.test(r(`${$a}Property`).toString())}}function Qa(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Xa(t)+Xa(e[n]))))}function Xa(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function eo(){return document.body.offsetHeight}const to=new WeakMap,no=new WeakMap,ro={name:"TransitionGroup",props:et({},Ba,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=na(),r=Wr();let i,s;return hi((()=>{if(!i.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!function(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&r.classList.remove(e)))}));n.split(/\s+/).forEach((e=>e&&r.classList.add(e))),r.style.display="none";const i=1===t.nodeType?t:t.parentNode;i.appendChild(r);const{hasTransform:s}=Ya(r);return i.removeChild(r),s}(i[0].el,n.vnode.el,t))return;i.forEach(so),i.forEach(ao);const r=i.filter(oo);eo(),r.forEach((e=>{const n=e.el,r=n.style;Wa(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,Ja(n,t))};n.addEventListener("transitionend",i)}))})),()=>{const a=Hn(e),o=Va(a);let l=a.tag||Ss;i=s,s=t.default?ei(t.default()):[];for(let e=0;e<s.length;e++){const t=s[e];null!=t.key&&Xr(t,Zr(t,o,r,n))}if(i)for(let e=0;e<i.length;e++){const t=i[e];Xr(t,Zr(t,o,r,n)),to.set(t,t.el.getBoundingClientRect())}return zs(l,null,s)}}},io=ro;function so(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function ao(e){no.set(e,e.el.getBoundingClientRect())}function oo(e){const t=to.get(e),n=no.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${i}px)`,t.transitionDuration="0s",e}}const lo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return it(t)?e=>At(t,e):t},uo={deep:!0,created(e,t,n){e._assign=lo(n),Ca(e,"change",(()=>{const t=e._modelValue,n=function(e){return"_value"in e?e._value:e.value}(e),r=e.checked,i=e._assign;if(it(t)){const e=Ve(t,n),s=-1!==e;if(r&&!s)i(t.concat(n));else if(!r&&s){const n=[...t];n.splice(e,1),i(n)}}else if(at(t)){const e=new Set(t);r?e.add(n):e.delete(n),i(e)}else i(po(e,r))}))},mounted:co,beforeUpdate(e,t,n){e._assign=lo(n),co(e,t,n)}};function co(e,{value:t,oldValue:n},r){e._modelValue=t,it(t)?e.checked=Ve(t,r.props.value)>-1:at(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=qe(t,po(e,!0)))}function po(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const ho=["ctrl","shift","alt","meta"],fo={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>ho.some((n=>e[`${n}Key`]&&!t.includes(n)))},mo=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=fo[t[e]];if(r&&r(n,t))return}return e(n,...r)},vo={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},go=(e,t)=>n=>{if(!("key"in n))return;const r=_t(n.key);return t.some((e=>e===r||vo[e]===r))?e(n):void 0},yo={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):bo(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),bo(e,!0),r.enter(e)):r.leave(e,(()=>{bo(e,!1)})):bo(e,t))},beforeUnmount(e,{value:t}){bo(e,t)}};function bo(e,t){e.style.display=t?e._vod:"none"}const wo=et({patchProp:(e,t,n,r,i=!1,s,a,o,l)=>{"class"===t?function(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,i):"style"===t?function(e,t,n){const r=e.style,i=ut(n);if(n&&!i){for(const e in n)Sa(r,e,n[e]);if(t&&!ut(t))for(const e in t)null==n[e]&&Sa(r,e,"")}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}(e,n,r):Qe(t)?Xe(t)||Ea(e,t,0,r,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&Pa.test(t)&&lt(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(Pa.test(t)&&ut(n))return!1;return t in e}(e,t,r,i))?function(e,t,n,r,i,s,a){if("innerHTML"===t||"textContent"===t)return r&&a(r,i,s),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}let o=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=ze(n):null==n&&"string"===r?(n="",o=!0):"number"===r&&(n=0,o=!0)}try{e[t]=n}catch(Wd){}o&&e.removeAttribute(t)}(e,t,r,s,a,o,l):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),function(e,t,n,r,i){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(Ia,t.slice(6,t.length)):e.setAttributeNS(Ia,t,n);else{const r=Be(t);null==n||r&&!ze(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}(e,t,r,i))}},_a);let xo;const _o=(...e)=>{const t=(xo||(xo=fs(wo))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){if(ut(e)){return document.querySelector(e)}return e}
/*!
  * shared v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */(e);if(!r)return;const i=t._component;lt(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};const ko="undefined"!=typeof window,So="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Ro=e=>So?Symbol(e):e,Ao=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Io=e=>"number"==typeof e&&isFinite(e),Co=e=>"[object RegExp]"===qo(e),Eo=e=>Vo(e)&&0===Object.keys(e).length;function Oo(e,t){"undefined"!=typeof console&&(console.warn(`[intlify] `+e),t&&console.warn(t.stack))}const Do=Object.assign;let To;const Po=()=>To||(To="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function jo(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const Mo=Object.prototype.hasOwnProperty;function Lo(e,t){return Mo.call(e,t)}const $o=Array.isArray,Uo=e=>"function"==typeof e,No=e=>"string"==typeof e,Fo=e=>"boolean"==typeof e,Bo=e=>null!==e&&"object"==typeof e,zo=Object.prototype.toString,qo=e=>zo.call(e),Vo=e=>"[object Object]"===qo(e),Ho=15;function createCompileError(e,t,n={}){const{domain:r,messages:i,args:s}=n,a=new SyntaxError(String(e));return a.code=e,t&&(a.location=t),a.domain=r,a}
/*!
  * devtools-if v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const Wo="i18n:init",Jo="function:translate",Ko=[];
/*!
  * core-base v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */Ko[0]={w:[0],i:[3,0],"[":[4],o:[7]},Ko[1]={w:[1],".":[2],"[":[4],o:[7]},Ko[2]={w:[2],i:[3,0],0:[3,0]},Ko[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},Ko[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},Ko[5]={"'":[4,0],o:8,l:[5,0]},Ko[6]={'"':[4,0],o:8,l:[6,0]};const Go=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Zo(e){if(null==e)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Yo(e){const t=e.trim();return("0"!==e.charAt(0)||!isNaN(parseInt(e)))&&(n=t,Go.test(n)?function(e){const t=e.charCodeAt(0);return t!==e.charCodeAt(e.length-1)||34!==t&&39!==t?e:e.slice(1,-1)}(t):"*"+t);var n}const Qo=new Map;function Xo(e,t){return Bo(e)?e[t]:null}const el=e=>e,tl=e=>"",nl="text",rl=e=>0===e.length?"":e.join(""),il=e=>null==e?"":$o(e)||Vo(e)&&e.toString===zo?JSON.stringify(e,null,2):String(e);function sl(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0}function al(e={}){const t=e.locale,n=function(e){const t=Io(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Io(e.named.count)||Io(e.named.n))?Io(e.named.count)?e.named.count:Io(e.named.n)?e.named.n:t:t}(e),r=Bo(e.pluralRules)&&No(t)&&Uo(e.pluralRules[t])?e.pluralRules[t]:sl,i=Bo(e.pluralRules)&&No(t)&&Uo(e.pluralRules[t])?sl:void 0,s=e.list||[],a=e.named||{};Io(e.pluralIndex)&&function(e,t){t.count||(t.count=e),t.n||(t.n=e)}(n,a);function o(t){const n=Uo(e.messages)?e.messages(t):!!Bo(e.messages)&&e.messages[t];return n||(e.parent?e.parent.message(t):tl)}const l=Vo(e.processor)&&Uo(e.processor.normalize)?e.processor.normalize:rl,u=Vo(e.processor)&&Uo(e.processor.interpolate)?e.processor.interpolate:il,c={list:e=>s[e],named:e=>a[e],plural:e=>e[r(n,e.length,i)],linked:(t,...n)=>{const[r,i]=n;let s="text",a="";1===n.length?Bo(r)?(a=r.modifier||a,s=r.type||s):No(r)&&(a=r||a):2===n.length&&(No(r)&&(a=r||a),No(i)&&(s=i||s));let l=o(t)(c);return"vnode"===s&&$o(l)&&a&&(l=l[0]),a?(u=a,e.modifiers?e.modifiers[u]:el)(l,s):l;var u},message:o,type:Vo(e.processor)&&No(e.processor.type)?e.processor.type:nl,interpolate:u,normalize:l};return c}let ol=null;const ll=ul(Jo);function ul(e){return t=>ol&&ol.emit(e,t)}function cl(e,t,n){return[...new Set([n,...$o(t)?t:Bo(t)?Object.keys(t):No(t)?[t]:[n]])]}function dl(e,t,n){const r=No(n)?n:gl,i=e;i.__localeChainCache||(i.__localeChainCache=new Map);let s=i.__localeChainCache.get(r);if(!s){s=[];let e=[n];for(;$o(e);)e=pl(s,e,t);const a=$o(t)||!Vo(t)?t:t["default"]?t["default"]:null;e=No(a)?[a]:a,$o(e)&&pl(s,e,!1),i.__localeChainCache.set(r,s)}return s}function pl(e,t,n){let r=!0;for(let i=0;i<t.length&&Fo(r);i++){const s=t[i];No(s)&&(r=hl(e,t[i],n))}return r}function hl(e,t,n){let r;const i=t.split("-");do{r=fl(e,i.join("-"),n),i.splice(-1,1)}while(i.length&&!0===r);return r}function fl(e,t,n){let r=!1;if(!e.includes(t)&&(r=!0,t)){r="!"!==t[t.length-1];const i=t.replace(/!/g,"");e.push(i),($o(n)||Vo(n))&&n[i]&&(r=n[i])}return r}const ml="9.2.2",vl=-1,gl="en-US",yl="",bl=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;let wl,xl,_l;let kl=null;const Sl=e=>{kl=e};let Rl=null;const Al=e=>{Rl=e};let Il=0;function Cl(e={}){const t=No(e.version)?e.version:ml,n=No(e.locale)?e.locale:gl,r=$o(e.fallbackLocale)||Vo(e.fallbackLocale)||No(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:n,i=Vo(e.messages)?e.messages:{[n]:{}},s=Vo(e.datetimeFormats)?e.datetimeFormats:{[n]:{}},a=Vo(e.numberFormats)?e.numberFormats:{[n]:{}},o=Do({},e.modifiers||{},{upper:(e,t)=>"text"===t&&No(e)?e.toUpperCase():"vnode"===t&&Bo(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>"text"===t&&No(e)?e.toLowerCase():"vnode"===t&&Bo(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>"text"===t&&No(e)?bl(e):"vnode"===t&&Bo(e)&&"__v_isVNode"in e?bl(e.children):e}),l=e.pluralRules||{},u=Uo(e.missing)?e.missing:null,c=!Fo(e.missingWarn)&&!Co(e.missingWarn)||e.missingWarn,d=!Fo(e.fallbackWarn)&&!Co(e.fallbackWarn)||e.fallbackWarn,p=!!e.fallbackFormat,h=!!e.unresolving,f=Uo(e.postTranslation)?e.postTranslation:null,m=Vo(e.processor)?e.processor:null,v=!Fo(e.warnHtmlMessage)||e.warnHtmlMessage,g=!!e.escapeParameter,y=Uo(e.messageCompiler)?e.messageCompiler:wl,b=Uo(e.messageResolver)?e.messageResolver:xl||Xo,w=Uo(e.localeFallbacker)?e.localeFallbacker:_l||cl,x=Bo(e.fallbackContext)?e.fallbackContext:void 0,_=Uo(e.onWarn)?e.onWarn:Oo,k=e,S=Bo(k.__datetimeFormatters)?k.__datetimeFormatters:new Map,R=Bo(k.__numberFormatters)?k.__numberFormatters:new Map,A=Bo(k.__meta)?k.__meta:{};Il++;const I={version:t,cid:Il,locale:n,fallbackLocale:r,messages:i,modifiers:o,pluralRules:l,missing:u,missingWarn:c,fallbackWarn:d,fallbackFormat:p,unresolving:h,postTranslation:f,processor:m,warnHtmlMessage:v,escapeParameter:g,messageCompiler:y,messageResolver:b,localeFallbacker:w,fallbackContext:x,onWarn:_,__meta:A};return I.datetimeFormats=s,I.numberFormats=a,I.__datetimeFormatters=S,I.__numberFormatters=R,__INTLIFY_PROD_DEVTOOLS__&&function(e,t,n){ol&&ol.emit(Wo,{timestamp:Date.now(),i18n:e,version:t,meta:n})}(I,t,A),I}function El(e,t,n,r,i){const{missing:s,onWarn:a}=e;if(null!==s){const r=s(e,n,t,i);return No(r)?r:t}return t}function Ol(e,t,n){e.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}let Dl=Ho;const Tl=()=>++Dl,Pl={INVALID_ARGUMENT:Dl,INVALID_DATE_ARGUMENT:Tl(),INVALID_ISO_DATE_ARGUMENT:Tl(),__EXTEND_POINT__:Tl()};function createCoreError(e){return createCompileError(e,null,void 0)}const jl=()=>"",Ml=e=>Uo(e);function Ll(e,...t){const{fallbackFormat:n,postTranslation:r,unresolving:i,messageCompiler:s,fallbackLocale:a,messages:o}=e,[l,u]=Nl(...t),c=Fo(u.missingWarn)?u.missingWarn:e.missingWarn,d=Fo(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,p=Fo(u.escapeParameter)?u.escapeParameter:e.escapeParameter,h=!!u.resolvedMessage,f=No(u.default)||Fo(u.default)?Fo(u.default)?s?l:()=>l:u.default:n?s?l:()=>l:"",m=n||""!==f,v=No(u.locale)?u.locale:e.locale;p&&function(e){$o(e.list)?e.list=e.list.map((e=>No(e)?jo(e):e)):Bo(e.named)&&Object.keys(e.named).forEach((t=>{No(e.named[t])&&(e.named[t]=jo(e.named[t]))}))}(u);let[g,y,b]=h?[l,v,o[v]||{}]:$l(e,l,v,a,d,c),w=g,x=l;if(h||No(w)||Ml(w)||m&&(w=f,x=w),!(h||(No(w)||Ml(w))&&No(y)))return i?vl:l;let _=!1;const k=Ml(w)?w:Ul(e,l,y,w,x,(()=>{_=!0}));if(_)return w;const S=function(e,t,n,r){const{modifiers:i,pluralRules:s,messageResolver:a,fallbackLocale:o,fallbackWarn:l,missingWarn:u,fallbackContext:c}=e,d=r=>{let i=a(n,r);if(null==i&&c){const[,,e]=$l(c,r,t,o,l,u);i=a(e,r)}if(No(i)){let n=!1;const s=Ul(e,r,t,i,r,(()=>{n=!0}));return n?jl:s}return Ml(i)?i:jl},p={locale:t,modifiers:i,pluralRules:s,messages:d};e.processor&&(p.processor=e.processor);r.list&&(p.list=r.list);r.named&&(p.named=r.named);Io(r.plural)&&(p.pluralIndex=r.plural);return p}(e,y,b,u),R=function(e,t,n){return t(n)}(0,k,al(S)),A=r?r(R,l):R;if(__INTLIFY_PROD_DEVTOOLS__){const t={timestamp:Date.now(),key:No(l)?l:Ml(w)?w.key:"",locale:y||(Ml(w)?w.locale:""),format:No(w)?w:Ml(w)?w.source:"",message:A};t.meta=Do({},e.__meta,kl||{}),ll(t)}return A}function $l(e,t,n,r,i,s){const{messages:a,onWarn:o,messageResolver:l,localeFallbacker:u}=e,c=u(e,r,n);let d,p={},h=null;const f="translate";for(let m=0;m<c.length&&(d=c[m],p=a[d]||{},null===(h=l(p,t))&&(h=p[t]),!No(h)&&!Uo(h));m++){const n=El(e,t,d,0,f);n!==t&&(h=n)}return[h,d,p]}function Ul(e,t,n,r,i,s){const{messageCompiler:a,warnHtmlMessage:o}=e;if(Ml(r)){const e=r;return e.locale=e.locale||n,e.key=e.key||t,e}if(null==a){const e=()=>r;return e.locale=n,e.key=t,e}const l=a(r,function(e,t,n,r,i,s){return{warnHtmlMessage:i,onError:e=>{throw s&&s(e),e},onCacheKey:e=>((e,t,n)=>Ao({l:e,k:t,s:n}))(t,n,e)}}(0,n,i,0,o,s));return l.locale=n,l.key=t,l.source=r,l}function Nl(...e){const[t,n,r]=e,i={};if(!No(t)&&!Io(t)&&!Ml(t))throw createCoreError(Pl.INVALID_ARGUMENT);const s=Io(t)?String(t):(Ml(t),t);return Io(n)?i.plural=n:No(n)?i.default=n:Vo(n)&&!Eo(n)?i.named=n:$o(n)&&(i.list=n),Io(r)?i.plural=r:No(r)?i.default=r:Vo(r)&&Do(i,r),[s,i]}function Fl(e,...t){const{datetimeFormats:n,unresolving:r,fallbackLocale:i,onWarn:s,localeFallbacker:a}=e,{__datetimeFormatters:o}=e,[l,u,c,d]=zl(...t);Fo(c.missingWarn)?c.missingWarn:e.missingWarn;Fo(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const p=!!c.part,h=No(c.locale)?c.locale:e.locale,f=a(e,i,h);if(!No(l)||""===l)return new Intl.DateTimeFormat(h,d).format(u);let m,v={},g=null;const y="datetime format";for(let x=0;x<f.length&&(m=f[x],v=n[m]||{},g=v[l],!Vo(g));x++)El(e,l,m,0,y);if(!Vo(g)||!No(m))return r?vl:l;let b=`${m}__${l}`;Eo(d)||(b=`${b}__${JSON.stringify(d)}`);let w=o.get(b);return w||(w=new Intl.DateTimeFormat(m,Do({},g,d)),o.set(b,w)),p?w.formatToParts(u):w.format(u)}const Bl=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function zl(...e){const[t,n,r,i]=e,s={};let a,o={};if(No(t)){const e=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!e)throw createCoreError(Pl.INVALID_ISO_DATE_ARGUMENT);const n=e[3]?e[3].trim().startsWith("T")?`${e[1].trim()}${e[3].trim()}`:`${e[1].trim()}T${e[3].trim()}`:e[1].trim();a=new Date(n);try{a.toISOString()}catch(Wd){throw createCoreError(Pl.INVALID_ISO_DATE_ARGUMENT)}}else if("[object Date]"===qo(t)){if(isNaN(t.getTime()))throw createCoreError(Pl.INVALID_DATE_ARGUMENT);a=t}else{if(!Io(t))throw createCoreError(Pl.INVALID_ARGUMENT);a=t}return No(n)?s.key=n:Vo(n)&&Object.keys(n).forEach((e=>{Bl.includes(e)?o[e]=n[e]:s[e]=n[e]})),No(r)?s.locale=r:Vo(r)&&(o=r),Vo(i)&&(o=i),[s.key||"",a,s,o]}function ql(e,t,n){const r=e;for(const i in n){const e=`${t}__${i}`;r.__datetimeFormatters.has(e)&&r.__datetimeFormatters.delete(e)}}function Vl(e,...t){const{numberFormats:n,unresolving:r,fallbackLocale:i,onWarn:s,localeFallbacker:a}=e,{__numberFormatters:o}=e,[l,u,c,d]=Wl(...t);Fo(c.missingWarn)?c.missingWarn:e.missingWarn;Fo(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const p=!!c.part,h=No(c.locale)?c.locale:e.locale,f=a(e,i,h);if(!No(l)||""===l)return new Intl.NumberFormat(h,d).format(u);let m,v={},g=null;const y="number format";for(let x=0;x<f.length&&(m=f[x],v=n[m]||{},g=v[l],!Vo(g));x++)El(e,l,m,0,y);if(!Vo(g)||!No(m))return r?vl:l;let b=`${m}__${l}`;Eo(d)||(b=`${b}__${JSON.stringify(d)}`);let w=o.get(b);return w||(w=new Intl.NumberFormat(m,Do({},g,d)),o.set(b,w)),p?w.formatToParts(u):w.format(u)}const Hl=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Wl(...e){const[t,n,r,i]=e,s={};let a={};if(!Io(t))throw createCoreError(Pl.INVALID_ARGUMENT);const o=t;return No(n)?s.key=n:Vo(n)&&Object.keys(n).forEach((e=>{Hl.includes(e)?a[e]=n[e]:s[e]=n[e]})),No(r)?s.locale=r:Vo(r)&&(a=r),Vo(i)&&(a=i),[s.key||"",o,s,a]}function Jl(e,t,n){const r=e;for(const i in n){const e=`${t}__${i}`;r.__numberFormatters.has(e)&&r.__numberFormatters.delete(e)}}function Kl(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(Po().__INTLIFY_PROD_DEVTOOLS__=!1);const Gl="function"==typeof Proxy,Zl="devtools-plugin:setup",Yl="plugin:settings:set";let Ql,Xl;function eu(){return void 0!==Ql||("undefined"!=typeof window&&window.performance?(Ql=!0,Xl=window.performance):"undefined"!=typeof global&&(null===(e=global.perf_hooks)||void 0===e?void 0:e.performance)?(Ql=!0,Xl=global.perf_hooks.performance):Ql=!1),Ql?Xl.now():Date.now();var e}class tu{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const s in e.settings){const t=e.settings[s];n[s]=t.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},n);try{const e=localStorage.getItem(r),t=JSON.parse(e);Object.assign(i,t)}catch(Wd){}this.fallbacks={getSettings:()=>i,setSettings(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(Wd){}i=e},now:()=>eu()},t&&t.on(Yl,((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function nu(e,t){const n=e,r=Kl(),i=Kl().__VUE_DEVTOOLS_GLOBAL_HOOK__,s=Gl&&n.enableEarlyProxy;if(!i||!r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&s){const e=s?new tu(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else i.emit(Zl,e,t)}
/*!
  * vue-i18n v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const ru="9.2.2";let iu=Ho;const su=()=>++iu,au={UNEXPECTED_RETURN_TYPE:iu,INVALID_ARGUMENT:su(),MUST_BE_CALL_SETUP_TOP:su(),NOT_INSLALLED:su(),NOT_AVAILABLE_IN_LEGACY_MODE:su(),REQUIRED_VALUE:su(),INVALID_VALUE:su(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:su(),NOT_INSLALLED_WITH_PROVIDE:su(),UNEXPECTED_ERROR:su(),NOT_COMPATIBLE_LEGACY_VUE_I18N:su(),BRIDGE_SUPPORT_VUE_2_ONLY:su(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:su(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:su(),__EXTEND_POINT__:su()};function createI18nError(e,...t){return createCompileError(e,null,void 0)}const ou=Ro("__transrateVNode"),lu=Ro("__datetimeParts"),uu=Ro("__numberParts"),cu=Ro("__setPluralRules");Ro("__intlifyMeta");const du=Ro("__injectWithOption");function pu(e){if(!Bo(e))return e;for(const t in e)if(Lo(e,t))if(t.includes(".")){const n=t.split("."),r=n.length-1;let i=e;for(let e=0;e<r;e++)n[e]in i||(i[n[e]]={}),i=i[n[e]];i[n[r]]=e[t],delete e[t],Bo(i[n[r]])&&pu(i[n[r]])}else Bo(e[t])&&pu(e[t]);return e}function hu(e,t){const{messages:n,__i18n:r,messageResolver:i,flatJson:s}=t,a=Vo(n)?n:$o(r)?{}:{[e]:{}};if($o(r)&&r.forEach((e=>{if("locale"in e&&"resource"in e){const{locale:t,resource:n}=e;t?(a[t]=a[t]||{},mu(n,a[t])):mu(n,a)}else No(e)&&mu(JSON.parse(e),a)})),null==i&&s)for(const o in a)Lo(a,o)&&pu(a[o]);return a}const fu=e=>!Bo(e)||$o(e);function mu(e,t){if(fu(e)||fu(t))throw createI18nError(au.INVALID_VALUE);for(const n in e)Lo(e,n)&&(fu(e[n])||fu(t[n])?t[n]=e[n]:mu(e[n],t[n]))}function vu(e){return e.type}function gu(e){return zs(Rs,null,e,0)}const yu="__INTLIFY_META__";let bu=0;function wu(e){return(t,n,r,i)=>e(n,r,na()||void 0,i)}function xu(e={},t){const{__root:n}=e,r=void 0===n;let i=!Fo(e.inheritLocale)||e.inheritLocale;const s=Qn(n&&i?n.locale.value:No(e.locale)?e.locale:gl),a=Qn(n&&i?n.fallbackLocale.value:No(e.fallbackLocale)||$o(e.fallbackLocale)||Vo(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:s.value),o=Qn(hu(s.value,e)),l=Qn(Vo(e.datetimeFormats)?e.datetimeFormats:{[s.value]:{}}),u=Qn(Vo(e.numberFormats)?e.numberFormats:{[s.value]:{}});let c=n?n.missingWarn:!Fo(e.missingWarn)&&!Co(e.missingWarn)||e.missingWarn,d=n?n.fallbackWarn:!Fo(e.fallbackWarn)&&!Co(e.fallbackWarn)||e.fallbackWarn,p=n?n.fallbackRoot:!Fo(e.fallbackRoot)||e.fallbackRoot,h=!!e.fallbackFormat,f=Uo(e.missing)?e.missing:null,m=Uo(e.missing)?wu(e.missing):null,v=Uo(e.postTranslation)?e.postTranslation:null,g=n?n.warnHtmlMessage:!Fo(e.warnHtmlMessage)||e.warnHtmlMessage,y=!!e.escapeParameter;const b=n?n.modifiers:Vo(e.modifiers)?e.modifiers:{};let w,x=e.pluralRules||n&&n.pluralRules;w=(()=>{r&&Al(null);const t={version:ru,locale:s.value,fallbackLocale:a.value,messages:o.value,modifiers:b,pluralRules:x,missing:null===m?void 0:m,missingWarn:c,fallbackWarn:d,fallbackFormat:h,unresolving:!0,postTranslation:null===v?void 0:v,warnHtmlMessage:g,escapeParameter:y,messageResolver:e.messageResolver,__meta:{framework:"vue"}};t.datetimeFormats=l.value,t.numberFormats=u.value,t.__datetimeFormatters=Vo(w)?w.__datetimeFormatters:void 0,t.__numberFormatters=Vo(w)?w.__numberFormatters:void 0;const n=Cl(t);return r&&Al(n),n})(),Ol(w,s.value,a.value);const _=pa({get:()=>s.value,set:e=>{s.value=e,w.locale=s.value}}),k=pa({get:()=>a.value,set:e=>{a.value=e,w.fallbackLocale=a.value,Ol(w,s.value,e)}}),S=pa((()=>o.value)),R=pa((()=>l.value)),A=pa((()=>u.value));const I=(e,t,i,c,d,h)=>{let f;if(s.value,a.value,o.value,l.value,u.value,__INTLIFY_PROD_DEVTOOLS__)try{Sl((()=>{const e=na();let t=null;return e&&(t=vu(e)[yu])?{[yu]:t}:null})()),r||(w.fallbackContext=n?Rl:void 0),f=e(w)}finally{Sl(null),r||(w.fallbackContext=void 0)}else f=e(w);if(Io(f)&&f===vl){const[e,r]=t();return n&&p?c(n):d(e)}if(h(f))return f;throw createI18nError(au.UNEXPECTED_RETURN_TYPE)};function C(...e){return I((t=>Reflect.apply(Ll,null,[t,...e])),(()=>Nl(...e)),0,(t=>Reflect.apply(t.t,t,[...e])),(e=>e),(e=>No(e)))}const E={normalize:function(e){return e.map((e=>No(e)||Io(e)||Fo(e)?gu(String(e)):e))},interpolate:e=>e,type:"vnode"};function O(e){return o.value[e]||{}}bu++,n&&ko&&(Br(n.locale,(e=>{i&&(s.value=e,w.locale=e,Ol(w,s.value,a.value))})),Br(n.fallbackLocale,(e=>{i&&(a.value=e,w.fallbackLocale=e,Ol(w,s.value,a.value))})));const D={id:bu,locale:_,fallbackLocale:k,get inheritLocale(){return i},set inheritLocale(e){i=e,e&&n&&(s.value=n.locale.value,a.value=n.fallbackLocale.value,Ol(w,s.value,a.value))},get availableLocales(){return Object.keys(o.value).sort()},messages:S,get modifiers(){return b},get pluralRules(){return x||{}},get isGlobal(){return r},get missingWarn(){return c},set missingWarn(e){c=e,w.missingWarn=c},get fallbackWarn(){return d},set fallbackWarn(e){d=e,w.fallbackWarn=d},get fallbackRoot(){return p},set fallbackRoot(e){p=e},get fallbackFormat(){return h},set fallbackFormat(e){h=e,w.fallbackFormat=h},get warnHtmlMessage(){return g},set warnHtmlMessage(e){g=e,w.warnHtmlMessage=e},get escapeParameter(){return y},set escapeParameter(e){y=e,w.escapeParameter=e},t:C,getLocaleMessage:O,setLocaleMessage:function(e,t){o.value[e]=t,w.messages=o.value},mergeLocaleMessage:function(e,t){o.value[e]=o.value[e]||{},mu(t,o.value[e]),w.messages=o.value},getPostTranslationHandler:function(){return Uo(v)?v:null},setPostTranslationHandler:function(e){v=e,w.postTranslation=e},getMissingHandler:function(){return f},setMissingHandler:function(e){null!==e&&(m=wu(e)),f=e,w.missing=m},[cu]:function(e){x=e,w.pluralRules=x}};return D.datetimeFormats=R,D.numberFormats=A,D.rt=function(...e){const[t,n,r]=e;if(r&&!Bo(r))throw createI18nError(au.INVALID_ARGUMENT);return C(t,n,Do({resolvedMessage:!0},r||{}))},D.te=function(e,t){const n=O(No(t)?t:s.value);return null!==w.messageResolver(n,e)},D.tm=function(e){const t=function(e){let t=null;const n=dl(w,a.value,s.value);for(let r=0;r<n.length;r++){const i=o.value[n[r]]||{},s=w.messageResolver(i,e);if(null!=s){t=s;break}}return t}(e);return null!=t?t:n&&n.tm(e)||{}},D.d=function(...e){return I((t=>Reflect.apply(Fl,null,[t,...e])),(()=>zl(...e)),0,(t=>Reflect.apply(t.d,t,[...e])),(()=>yl),(e=>No(e)))},D.n=function(...e){return I((t=>Reflect.apply(Vl,null,[t,...e])),(()=>Wl(...e)),0,(t=>Reflect.apply(t.n,t,[...e])),(()=>yl),(e=>No(e)))},D.getDateTimeFormat=function(e){return l.value[e]||{}},D.setDateTimeFormat=function(e,t){l.value[e]=t,w.datetimeFormats=l.value,ql(w,e,t)},D.mergeDateTimeFormat=function(e,t){l.value[e]=Do(l.value[e]||{},t),w.datetimeFormats=l.value,ql(w,e,t)},D.getNumberFormat=function(e){return u.value[e]||{}},D.setNumberFormat=function(e,t){u.value[e]=t,w.numberFormats=u.value,Jl(w,e,t)},D.mergeNumberFormat=function(e,t){u.value[e]=Do(u.value[e]||{},t),w.numberFormats=u.value,Jl(w,e,t)},D[du]=e.__injectWithOption,D[ou]=function(...e){return I((t=>{let n;const r=t;try{r.processor=E,n=Reflect.apply(Ll,null,[r,...e])}finally{r.processor=null}return n}),(()=>Nl(...e)),0,(t=>t[ou](...e)),(e=>[gu(e)]),(e=>$o(e)))},D[lu]=function(...e){return I((t=>Reflect.apply(Fl,null,[t,...e])),(()=>zl(...e)),0,(t=>t[lu](...e)),(()=>[]),(e=>No(e)||$o(e)))},D[uu]=function(...e){return I((t=>Reflect.apply(Vl,null,[t,...e])),(()=>Wl(...e)),0,(t=>t[uu](...e)),(()=>[]),(e=>No(e)||$o(e)))},D}const _u={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>"parent"===e||"global"===e,default:"parent"},i18n:{type:Object}};function ku(e){return Ss}const Su={name:"i18n-t",props:Do({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Io(e)||!isNaN(e)}},_u),setup(e,t){const{slots:n,attrs:r}=t,i=e.i18n||Pu({useScope:e.scope,__useComponent:!0});return()=>{const s=Object.keys(n).filter((e=>"_"!==e)),a={};e.locale&&(a.locale=e.locale),void 0!==e.plural&&(a.plural=No(e.plural)?+e.plural:e.plural);const o=function({slots:e},t){if(1===t.length&&"default"===t[0])return(e.default?e.default():[]).reduce(((e,t)=>[...e,...$o(t.children)?t.children:[t]]),[]);return t.reduce(((t,n)=>{const r=e[n];return r&&(t[n]=r()),t}),{})}(t,s),l=i[ou](e.keypath,o,a),u=Do({},r);return ma(No(e.tag)||Bo(e.tag)?e.tag:ku(),u,l)}}};function Ru(e,t,n,r){const{slots:i,attrs:s}=t;return()=>{const t={part:!0};let a={};e.locale&&(t.locale=e.locale),No(e.format)?t.key=e.format:Bo(e.format)&&(No(e.format.key)&&(t.key=e.format.key),a=Object.keys(e.format).reduce(((t,r)=>n.includes(r)?Do({},t,{[r]:e.format[r]}):t),{}));const o=r(e.value,t,a);let l=[t.key];$o(o)?l=o.map(((e,t)=>{const n=i[e.type],r=n?n({[e.type]:e.value,index:t,parts:o}):[e.value];var s;return $o(s=r)&&!No(s[0])&&(r[0].key=`${e.type}-${t}`),r})):No(o)&&(l=[o]);const u=Do({},s);return ma(No(e.tag)||Bo(e.tag)?e.tag:ku(),u,l)}}const Au={name:"i18n-n",props:Do({value:{type:Number,required:!0},format:{type:[String,Object]}},_u),setup(e,t){const n=e.i18n||Pu({useScope:"parent",__useComponent:!0});return Ru(e,t,Hl,((...e)=>n[uu](...e)))}},Iu={name:"i18n-d",props:Do({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},_u),setup(e,t){const n=e.i18n||Pu({useScope:"parent",__useComponent:!0});return Ru(e,t,Bl,((...e)=>n[lu](...e)))}};function Cu(e){if(No(e))return{path:e};if(Vo(e)){if(!("path"in e))throw createI18nError(au.REQUIRED_VALUE);return e}throw createI18nError(au.INVALID_VALUE)}function Eu(e){const{path:t,locale:n,args:r,choice:i,plural:s}=e,a={},o=r||{};return No(n)&&(a.locale=n),Io(i)&&(a.plural=i),Io(s)&&(a.plural=s),[t,o,a]}function Ou(e,t,...n){const r=Vo(n[0])?n[0]:{},i=!!r.useI18nComponentName;(!Fo(r.globalInstall)||r.globalInstall)&&(e.component(i?"i18n":Su.name,Su),e.component(Au.name,Au),e.component(Iu.name,Iu)),e.directive("t",function(e){const t=t=>{const{instance:n,modifiers:r,value:i}=t;if(!n||!n.$)throw createI18nError(au.UNEXPECTED_ERROR);const s=function(e,t){const n=e;if("composition"===e.mode)return n.__getInstance(t)||e.global;{const r=n.__getInstance(t);return null!=r?r.__composer:e.global.__composer}}(e,n.$),a=Cu(i);return[Reflect.apply(s.t,s,[...Eu(a)]),s]};return{created:(n,r)=>{const[i,s]=t(r);ko&&e.global===s&&(n.__i18nWatcher=Br(s.locale,(()=>{r.instance&&r.instance.$forceUpdate()}))),n.__composer=s,n.textContent=i},unmounted:e=>{ko&&e.__i18nWatcher&&(e.__i18nWatcher(),e.__i18nWatcher=void 0,delete e.__i18nWatcher),e.__composer&&(e.__composer=void 0,delete e.__composer)},beforeUpdate:(e,{value:t})=>{if(e.__composer){const n=e.__composer,r=Cu(t);e.textContent=Reflect.apply(n.t,n,[...Eu(r)])}},getSSRProps:e=>{const[n]=t(e);return{textContent:n}}}}(t))}const Du=Ro("global-vue-i18n");function Tu(e={},t){const n=!Fo(e.globalInjection)||e.globalInjection,r=!0,i=new Map,[s,a]=function(e,t,n){const r=new Dt(i);var i;{const t=r.run((()=>xu(e)));if(null==t)throw createI18nError(au.UNEXPECTED_ERROR);return[r,t]}}(e),o=Ro("");{const e={get mode(){return"composition"},get allowComposition(){return r},async install(t,...r){t.__VUE_I18N_SYMBOL__=o,t.provide(t.__VUE_I18N_SYMBOL__,e),n&&function(e,t){const n=Object.create(null);ju.forEach((e=>{const r=Object.getOwnPropertyDescriptor(t,e);if(!r)throw createI18nError(au.UNEXPECTED_ERROR);const i=Yn(r.value)?{get:()=>r.value.value,set(e){r.value.value=e}}:{get:()=>r.get&&r.get()};Object.defineProperty(n,e,i)})),e.config.globalProperties.$i18n=n,Mu.forEach((n=>{const r=Object.getOwnPropertyDescriptor(t,n);if(!r||!r.value)throw createI18nError(au.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${n}`,r)}))}(t,e.global),Ou(t,e,...r);const i=t.unmount;t.unmount=()=>{e.dispose(),i()}},get global(){return a},dispose(){s.stop()},__instances:i,__getInstance:function(e){return i.get(e)||null},__setInstance:function(e,t){i.set(e,t)},__deleteInstance:function(e){i.delete(e)}};return e}}function Pu(e={}){const t=na();if(null==t)throw createI18nError(au.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&null!=t.appContext.app&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(au.NOT_INSLALLED);const n=function(e){{const t=Ur(e.isCE?Du:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw createI18nError(e.isCE?au.NOT_INSLALLED_WITH_PROVIDE:au.UNEXPECTED_ERROR);return t}}(t),r=function(e){return"composition"===e.mode?e.global:e.global.__composer}(n),i=vu(t),s=function(e,t){return Eo(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}(e,i);if("global"===s)return function(e,t,n){let r=Bo(t.messages)?t.messages:{};"__i18nGlobal"in n&&(r=hu(e.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const i=Object.keys(r);if(i.length&&i.forEach((t=>{e.mergeLocaleMessage(t,r[t])})),Bo(t.datetimeFormats)){const n=Object.keys(t.datetimeFormats);n.length&&n.forEach((n=>{e.mergeDateTimeFormat(n,t.datetimeFormats[n])}))}if(Bo(t.numberFormats)){const n=Object.keys(t.numberFormats);n.length&&n.forEach((n=>{e.mergeNumberFormat(n,t.numberFormats[n])}))}}(r,e,i),r;if("parent"===s){let i=function(e,t,n=!1){let r=null;const i=t.root;let s=t.parent;for(;null!=s;){const t=e;if("composition"===e.mode&&(r=t.__getInstance(s)),null!=r)break;if(i===s)break;s=s.parent}return r}(n,t,e.__useComponent);return null==i&&(i=r),i}const a=n;let o=a.__getInstance(t);if(null==o){const n=Do({},e);"__i18n"in i&&(n.__i18n=i.__i18n),r&&(n.__root=r),o=xu(n),function(e,t,n){di((()=>{}),t),mi((()=>{e.__deleteInstance(t)}),t)}(a,t),a.__setInstance(t,o)}return o}const ju=["locale","fallbackLocale","availableLocales"],Mu=["t","rt","d","n","tm"];var Lu,$u;if(Lu=function(e,t){if(!Bo(e))return null;let n=Qo.get(t);if(n||(n=function(e){const t=[];let n,r,i,s,a,o,l,u=-1,c=0,d=0;const p=[];function h(){const t=e[u+1];if(5===c&&"'"===t||6===c&&'"'===t)return u++,i="\\"+t,p[0](),!0}for(p[0]=()=>{void 0===r?r=i:r+=i},p[1]=()=>{void 0!==r&&(t.push(r),r=void 0)},p[2]=()=>{p[0](),d++},p[3]=()=>{if(d>0)d--,c=4,p[0]();else{if(d=0,void 0===r)return!1;if(r=Yo(r),!1===r)return!1;p[1]()}};null!==c;)if(u++,n=e[u],"\\"!==n||!h()){if(s=Zo(n),l=Ko[c],a=l[s]||l["l"]||8,8===a)return;if(c=a[0],void 0!==a[1]&&(o=p[a[1]],o&&(i=n,!1===o())))return;if(7===c)return t}}(t),n&&Qo.set(t,n)),!n)return null;const r=n.length;let i=e,s=0;for(;s<r;){const e=i[n[s]];if(void 0===e)return null;i=e,s++}return i},xl=Lu,_l=dl,"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(Po().__INTLIFY_PROD_DEVTOOLS__=!1),__INTLIFY_PROD_DEVTOOLS__){const e=Po();e.__INTLIFY__=!0,$u=e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__,ol=$u}const Uu="modulepreload",Nu={},Fu=function(e,t,n){if(!t||0===t.length)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in Nu)return;Nu[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(!!n)for(let n=r.length-1;n>=0;n--){const i=r[n];if(i.href===e&&(!t||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${e}"]${i}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":Uu,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))};class ServiceBootError extends n{constructor(e,t){super(`Service '${e}' failed booting`,{cause:t})}}const Bu=r((()=>i("Store facade cannot be initialized lazily")));class zu{constructor(){if(t(this,"_namespace"),t(this,"_proxy"),t(this,"_booted"),!this.static("__constructingPure"))return this._namespace=new.target.name,this._booted=new s,this.initialize(),this._proxy}static pureInstance(){return this.pureInstances.has(this)||(this.__constructingPure=!0,this.pureInstances.set(this,new this),this.__constructingPure=!1),this.pureInstances.get(this)}get booted(){return this._booted}static(e){const t=this.constructor;return e?t[e]:t}launch(e){const t=e=>this._booted.reject(new ServiceBootError(this._namespace,e));this._namespace=null!=e?e:this._namespace;try{this.boot().then((()=>this._booted.resolve())).catch(t)}catch(n){t(n)}return this._booted}initialize(){if(!this.static("__classProperties")){const e=this.static().pureInstance();this.static().__classProperties=Object.getOwnPropertyNames(e)}const e=(e,t)=>"string"!=typeof t||t in e||e.static("__classProperties").includes(t),t=this._proxy=new Proxy(this,{get:(n,r,i)=>e(n,r)?Reflect.get(n,r,i):t.hasState(r)?t.getState(r):t.hasComputedState(r)?t.getComputedState(r):t.__get(r),set:(n,r,i,s)=>e(n,r)?Reflect.set(n,r,i,s):(t.setState({[r]:i}),!0)})}hasState(e){var t;return e in(null!=(t=Bu.state[this._namespace])?t:this.getInitialState())}getState(e){var t;const n=null!=(t=Bu.state[this._namespace])?t:this.getInitialState();return e?n[e]:n}setState(e){Bu.commit(`${this._namespace}/setState`,e),this.onStateUpdated(e)}onStateUpdated(e){const t=a(e,this.static("persist"));o(t)||l.set(this._namespace,{...l.require(this._namespace),...this.serializePersistedState(u(t))})}hasComputedState(e){return`${this._namespace}/${e}`in Bu.getters}getComputedState(e){return Bu.getters[`${this._namespace}/${e}`]}getInitialState(){return{}}getComputedStateDefinitions(){return{}}serializePersistedState(e){return e}async restorePersistedState(e){return e}__get(e){}async boot(){if(this.registerStoreModule(),o(this.static("persist")))return;if(l.has(this._namespace)){const e=await this.restorePersistedState(l.require(this._namespace));return void this.setState(e)}const e=a(u(this.getState()),this.static("persist"));l.set(this._namespace,this.serializePersistedState(e))}registerStoreModule(){const e=this.getInitialState();0!==Object.keys(e).length&&Bu.registerModule(this._namespace,{namespaced:!0,state:e,mutations:{setState:(e,t)=>{Object.assign(e,t)}},getters:this.getComputedStateDefinitions()})}}t(zu,"persist",[]),t(zu,"__constructingPure",!1),t(zu,"__classProperties"),t(zu,"pureInstances",new WeakMap);const qu=r(class extends zu{constructor(){super(...arguments),t(this,"listeners",{})}async emit(e,t){var n,r;const i=[...null!=(n=this.listeners[e])?n:[]];await Promise.all(null!=(r=i.map((e=>e(t))))?r:[])}on(e,t){var n,r;return(null!=(r=(n=this.listeners)[e])?r:n[e]=c([])).push(t),()=>this.off(e,t)}once(e,t){let n=null;return d((()=>n&&this.off(e,n)),(r=>{var i,s;(null!=(s=(i=this.listeners)[e])?s:i[e]=c([])).push(n=(...e)=>(r(),t(...e)))}))}off(e,t){const n=this.listeners[e];n&&(n.remove(t),n.isEmpty()&&delete this.listeners[e])}}),Vu=r((()=>i("I18n facade cannot be initialized lazily"))),Hu={ca:"Català",en:"English",es:"Español"},Wu="lang.locale";const Ju=r(class extends zu{constructor(){super(),t(this,"locales"),t(this,"displayNames"),t(this,"defaultLocale"),t(this,"fallbackLocale","en"),t(this,"localeLoaders"),t(this,"loadedLocales",new Set),this.localeLoaders=this.initLocaleLoaders(),this.locales=Object.keys(this.localeLoaders),this.displayNames=this.locales.reduce(((e,t)=>{var n;return null!=e[t]||(e[t]=p(null!=(n=new Intl.DisplayNames([t],{type:"language"}).of(t))?n:t)),e}),Hu),this.defaultLocale=this.initDefaultLocale()}async loadLocaleMessages(e){var t,n;const{default:r}=await(null==(n=(t=this.localeLoaders)[e])?void 0:n.call(t));return r}async getDefaultLocalesMessages(){const e=await Promise.all(h([this.defaultLocale,this.fallbackLocale]).map((async e=>({locale:e,messages:await this.loadLocaleMessages(e)}))));return e.map((({locale:e})=>this.loadedLocales.add(e))),e.reduce(((e,{locale:t,messages:n})=>(e[t]=n,e)),{})}async change(e){var t;if(!this.loadedLocales.has(e)){const t=await this.loadLocaleMessages(e);Vu.setLocaleMessages(e,t)}Vu.locale.value=e,null==(t=document.querySelector("html"))||t.setAttribute("lang",e)}async boot(){await super.boot(),qu.on("application-mounted",(()=>{Br(Vu.locale,(()=>l.set(Wu,Vu.locale.value)))}))}initLocaleLoaders(){const e=Object.assign({"/src/lang/ca.yaml":()=>Fu((()=>import("./ca.555a79c5.js")),1?[]:void 0),"/src/lang/en.yaml":()=>Fu((()=>import("./en.c8c92789.js")),1?[]:void 0),"/src/lang/es.yaml":()=>Fu((()=>import("./es.09764c0f.js")),1?[]:void 0)});return Object.entries(e).reduce(((e,[t,n])=>{var r;const i=null==(r=f(t,/.*\/lang\/(.+)\.yaml/))?void 0:r[1];return i&&(e[i]=n),e}),{})}initDefaultLocale(){var e;return l.has(Wu)?l.require(Wu):d(null!=(e=navigator.languages.find((e=>this.locales.includes(e))))?e:"en",(e=>{l.set(Wu,e)}))}}),Ku={"auth.stuckConnecting":"We didn't hear back from the identity provider, maybe try reconnecting?"};function Gu(e,t={}){var n;const r=null!=(n=Ku[e])?n:e;return Object.entries(t).reduce(((e,[t,n])=>e.replace(`{${t}}`,n)),r)}async function Zu(){const e=await Ju.getDefaultLocalesMessages();return Tu({locale:Ju.defaultLocale,fallbackLocale:Ju.fallbackLocale,globalInjection:!0,messages:e})}
/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Qu=e=>Yu?Symbol(e):"_vr_"+e,Xu=Qu("rvlm"),ec=Qu("rvd"),tc=Qu("r"),nc=Qu("rl"),rc=Qu("rvl"),ic="undefined"!=typeof window;const sc=Object.assign;function ac(e,t){const n={};for(const r in t){const i=t[r];n[r]=Array.isArray(i)?i.map(e):e(i)}return n}const oc=()=>{},lc=/\/$/;function uc(e,t,n="/"){let r,i={},s="",a="";const o=t.indexOf("?"),l=t.indexOf("#",o>-1?o:0);return o>-1&&(r=t.slice(0,o),s=t.slice(o+1,l>-1?l:t.length),i=e(s)),l>-1&&(r=r||t.slice(0,l),a=t.slice(l,t.length)),r=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i,s,a=n.length-1;for(i=0;i<r.length;i++)if(s=r[i],1!==a&&"."!==s){if(".."!==s)break;a--}return n.slice(0,a).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:t,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:a}}function cc(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function dc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function pc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!hc(e[n],t[n]))return!1;return!0}function hc(e,t){return Array.isArray(e)?fc(e,t):Array.isArray(t)?fc(t,e):e===t}function fc(e,t){return Array.isArray(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}var mc,vc,gc,yc;function bc(e){if(!e)if(ic){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(lc,"")}(vc=mc||(mc={}))["pop"]="pop",vc["push"]="push",(yc=gc||(gc={}))["back"]="back",yc["forward"]="forward",yc["unknown"]="";const wc=/^[^#]+#/;function xc(e,t){return e.replace(wc,"#")+t}const _c=()=>({left:window.pageXOffset,top:window.pageYOffset});function kc(e){let t;if("el"in e){const n=e.el,r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=function(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function Sc(e,t){return(history.state?history.state.position-t:-1)+e}const Rc=new Map;function Ac(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let t=i.includes(e.slice(s))?e.slice(s).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),cc(n,"")}return cc(n,e)+r+i}function Ic(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?_c():null}}function Cc(e){const{history:t,location:n}=window,r={value:Ac(e,n)},i={value:t.state};function s(r,s,a){const o=e.indexOf("#"),l=o>-1?(n.host&&document.querySelector("base")?e:e.slice(o))+r:location.protocol+"//"+location.host+e+r;try{t[a?"replaceState":"pushState"](s,"",l),i.value=s}catch(u){console.error(u),n[a?"replace":"assign"](l)}}return i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(e,n){const a=sc({},i.value,t.state,{forward:e,scroll:_c()});s(a.current,a,!0),s(e,sc({},Ic(r.value,e,null),{position:a.position+1},n),!1),r.value=e},replace:function(e,n){s(e,sc({},t.state,Ic(i.value.back,e,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=e}}}function Ec(e){const t=Cc(e=bc(e)),n=function(e,t,n,r){let i=[],s=[],a=null;const o=({state:s})=>{const o=Ac(e,location),l=n.value,u=t.value;let c=0;if(s){if(n.value=o,t.value=s,a&&a===l)return void(a=null);c=u?s.position-u.position:0}else r(o);i.forEach((e=>{e(n.value,l,{delta:c,type:mc.pop,direction:c?c>0?gc.forward:gc.back:gc.unknown})}))};function l(){const{history:e}=window;e.state&&e.replaceState(sc({},e.state,{scroll:_c()}),"")}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",l),{pauseListeners:function(){a=n.value},listen:function(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return s.push(t),t},destroy:function(){for(const e of s)e();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",l)}}}(e,t.state,t.location,t.replace);const r=sc({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:xc.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function Oc(e){return"string"==typeof e||"symbol"==typeof e}const Dc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Tc=Qu("nf");var Pc,jc;function createRouterError(e,t){return sc(new Error,{type:e,[Tc]:!0},t)}function Mc(e,t){return e instanceof Error&&Tc in e&&(null==t||!!(e.type&t))}(jc=Pc||(Pc={}))[jc["aborted"]=4]="aborted",jc[jc["cancelled"]=8]="cancelled",jc[jc["duplicated"]=16]="duplicated";const Lc="[^/]+?",$c={sensitive:!1,strict:!1,start:!0,end:!0},Uc=/[.+*?^${}()[\]/\\]/g;function Nc(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&e[0]===40+40?-1:1:e.length>t.length?1===t.length&&t[0]===40+40?1:-1:0}function Fc(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const e=Nc(r[n],i[n]);if(e)return e;n++}return i.length-r.length}const Bc={type:0,value:""},zc=/[a-zA-Z0-9_]/;function qc(e,t,n){const r=function(e,t){const n=sc({},$c,t),r=[];let i=n.start?"^":"";const s=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let t=0;t<l.length;t++){const r=l[t];let a=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace(Uc,"\\$&"),a+=40;else if(1===r.type){const{value:e,repeatable:n,optional:u,regexp:c}=r;s.push({name:e,repeatable:n,optional:u});const d=c||Lc;if(d!==Lc){a+=10;try{new RegExp(`(${d})`)}catch(o){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+o.message)}}let p=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(p=u&&l.length<2?`(?:/${p})`:"/"+p),u&&(p+="?"),i+=p,a+=20,u&&(a+=-8),n&&(a+=-20),".*"===d&&(a+=-50)}e.push(a)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");return{re:a,score:r,keys:s,parse:function(e){const t=e.match(a),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=s[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:s,repeatable:a,optional:o}=e,l=s in t?t[s]:"";if(Array.isArray(l)&&!a)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(l)?l.join("/"):l;if(!u){if(!o)throw new Error(`Missing required param "${s}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=u}}return n}}}(function(e){if(!e)return[[]];if("/"===e)return[[Bc]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${u}": ${e}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let o,l=0,u="",c="";function d(){u&&(0===n?s.push({type:0,value:u}):1===n||2===n||3===n?(s.length>1&&("*"===o||"+"===o)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:"*"===o||"+"===o,optional:"*"===o||"?"===o})):t("Invalid state to consume buffer"),u="")}function p(){u+=o}for(;l<e.length;)if(o=e[l++],"\\"!==o||2===n)switch(n){case 0:"/"===o?(u&&d(),a()):":"===o?(d(),n=1):p();break;case 4:p(),n=r;break;case 1:"("===o?n=2:zc.test(o)?p():(d(),n=0,"*"!==o&&"?"!==o&&"+"!==o&&l--);break;case 2:")"===o?"\\"==c[c.length-1]?c=c.slice(0,-1)+o:n=3:c+=o;break;case 3:d(),n=0,"*"!==o&&"?"!==o&&"+"!==o&&l--,c="";break;default:t("Unknown state")}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${u}"`),d(),a(),i}(e.path),n),i=sc(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Vc(e,t){const n=[],r=new Map;function i(e,n,r){const o=!r,l=function(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Hc(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}(e);l.aliasOf=r&&r.record;const u=Kc(t,e),c=[l];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)c.push(sc({},l,{components:r?r.record.components:l.components,path:e,aliasOf:r?r.record:l}))}let d,p;for(const t of c){const{path:c}=t;if(n&&"/"!==c[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(c&&r+c)}if(d=qc(t,n,u),r?r.alias.push(d):(p=p||d,p!==d&&p.alias.push(d),o&&e.name&&!Wc(d)&&s(e.name)),"children"in l){const e=l.children;for(let t=0;t<e.length;t++)i(e[t],d,r&&r.children[t])}r=r||d,a(d)}return p?()=>{s(p)}:oc}function s(e){if(Oc(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(s),t.alias.forEach(s))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(s),e.alias.forEach(s))}}function a(e){let t=0;for(;t<n.length&&Fc(e,n[t])>=0;)t++;n.splice(t,0,e),e.record.name&&!Wc(e)&&r.set(e.record.name,e)}return t=Kc({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>i(e))),{addRoute:i,resolve:function(e,t){let i,s,a,o={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw createRouterError(1,{location:e});a=i.record.name,o=sc(function(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}(t.params,i.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params),s=i.stringify(o)}else if("path"in e)s=e.path,i=n.find((e=>e.re.test(s))),i&&(o=i.parse(s),a=i.record.name);else{if(i=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!i)throw createRouterError(1,{location:e,currentLocation:t});a=i.record.name,o=sc({},t.params,e.params),s=i.stringify(o)}const l=[];let u=i;for(;u;)l.unshift(u.record),u=u.parent;return{name:a,path:s,params:o,matched:l,meta:Jc(l)}},removeRoute:s,getRoutes:function(){return n},getRecordMatcher:function(e){return r.get(e)}}}function Hc(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"==typeof n?n:n[r];return t}function Wc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Jc(e){return e.reduce(((e,t)=>sc(e,t.meta)),{})}function Kc(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}const Gc=/#/g,Zc=/&/g,Yc=/\//g,Qc=/=/g,Xc=/\?/g,ed=/\+/g,td=/%5B/g,nd=/%5D/g,rd=/%5E/g,id=/%60/g,sd=/%7B/g,ad=/%7C/g,od=/%7D/g,ld=/%20/g;function ud(e){return encodeURI(""+e).replace(ad,"|").replace(td,"[").replace(nd,"]")}function cd(e){return ud(e).replace(ed,"%2B").replace(ld,"+").replace(Gc,"%23").replace(Zc,"%26").replace(id,"`").replace(sd,"{").replace(od,"}").replace(rd,"^")}function dd(e){return null==e?"":function(e){return ud(e).replace(Gc,"%23").replace(Xc,"%3F")}(e).replace(Yc,"%2F")}function pd(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function hd(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const e=n[r].replace(ed," "),i=e.indexOf("="),s=pd(i<0?e:e.slice(0,i)),a=i<0?null:pd(e.slice(i+1));if(s in t){let e=t[s];Array.isArray(e)||(e=t[s]=[e]),e.push(a)}else t[s]=a}return t}function fd(e){let t="";for(let n in e){const r=e[n];if(n=cd(n).replace(Qc,"%3D"),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(r)?r.map((e=>e&&cd(e))):[r&&cd(r)]).forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function md(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=Array.isArray(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}function vd(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e,reset:function(){e=[]}}}function gd(e,t,n){const r=()=>{e[t].delete(n)};mi(r),si(r),ii((()=>{e[t].add(n)})),e[t].add(n)}function yd(e,t,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((a,o)=>{const l=e=>{var l;!1===e?o(createRouterError(4,{from:n,to:t})):e instanceof Error?o(e):"string"==typeof(l=e)||l&&"object"==typeof l?o(createRouterError(2,{from:t,to:e})):(s&&r.enterCallbacks[i]===s&&"function"==typeof e&&s.push(e),a())},u=e.call(r&&r.instances[i],t,n,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch((e=>o(e)))}))}function bd(e,t,n,r){const i=[];for(const a of e)for(const e in a.components){let o=a.components[e];if("beforeRouteEnter"===t||a.instances[e])if("object"==typeof(s=o)||"displayName"in s||"props"in s||"__vccOpts"in s){const s=(o.__vccOpts||o)[t];s&&i.push(yd(s,n,r,a,e))}else{let s=o();i.push((()=>s.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${a.path}"`));const s=(o=i).__esModule||Yu&&"Module"===o[Symbol.toStringTag]?i.default:i;var o;a.components[e]=s;const l=(s.__vccOpts||s)[t];return l&&yd(l,n,r,a,e)()}))))}}var s;return i}function wd(e){const t=Ur(tc),n=Ur(nc),r=pa((()=>t.resolve(tr(e.to)))),i=pa((()=>{const{matched:e}=r.value,{length:t}=e,i=e[t-1],s=n.matched;if(!i||!s.length)return-1;const a=s.findIndex(dc.bind(null,i));if(a>-1)return a;const o=_d(e[t-2]);return t>1&&_d(i)===o&&s[s.length-1].path!==o?s.findIndex(dc.bind(null,e[t-2])):a})),s=pa((()=>i.value>-1&&function(e,t){for(const n in t){const r=t[n],i=e[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((e,t)=>e!==i[t])))return!1}return!0}(n.params,r.value.params))),a=pa((()=>i.value>-1&&i.value===n.matched.length-1&&pc(n.params,r.value.params)));return{route:r,href:pa((()=>r.value.href)),isActive:s,isExactActive:a,navigate:function(n={}){return function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(n)?t[tr(e.replace)?"replace":"push"](tr(e.to)).catch(oc):Promise.resolve()}}}const xd=ti({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:wd,setup(e,{slots:t}){const n=Un(wd(e)),{options:r}=Ur(tc),i=pa((()=>({[kd(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[kd(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=t.default&&t.default(n);return e.custom?r:ma("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function _d(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const kd=(e,t,n)=>null!=e?e:null!=t?t:n,Sd=ti({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const r=Ur(rc),i=pa((()=>e.route||r.value)),s=Ur(ec,0),a=pa((()=>i.value.matched[s]));$r(ec,s+1),$r(Xu,a),$r(rc,i);const o=Qn();return Br((()=>[o.value,a.value,e.name]),(([e,t,n],[r,i,s])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&dc(t,i)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const r=i.value,s=a.value,l=s&&s.components[e.name],u=e.name;if(!l)return Rd(n.default,{Component:l,route:r});const c=s.props[e.name],d=c?!0===c?r.params:"function"==typeof c?c(r):c:null,p=ma(l,sc({},d,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(s.instances[u]=null)},ref:o}));return Rd(n.default,{Component:p,route:r})||p}}});function Rd(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const Ad=Sd;function Id(e){const t=Vc(e.routes,e),n=e.parseQuery||hd,r=e.stringifyQuery||fd,i=e.history,s=vd(),a=vd(),o=vd(),l=Xn(Dc,!0);let u=Dc;ic&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ac.bind(null,(e=>""+e)),d=ac.bind(null,dd),p=ac.bind(null,pd);function h(e,s){if(s=sc({},s||l.value),"string"==typeof e){const r=uc(n,e,s.path),a=t.resolve({path:r.path},s),o=i.createHref(r.fullPath);return sc(r,a,{params:p(a.params),hash:pd(r.hash),redirectedFrom:void 0,href:o})}let a;if("path"in e)a=sc({},e,{path:uc(n,e.path,s.path).path});else{const t=sc({},e.params);for(const e in t)null==t[e]&&delete t[e];a=sc({},e,{params:d(e.params)}),s.params=d(s.params)}const o=t.resolve(a,s),u=e.hash||"";o.params=c(p(o.params));const h=function(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}(r,sc({},e,{hash:(f=u,ud(f).replace(sd,"{").replace(od,"}").replace(rd,"^")),path:o.path}));var f;const m=i.createHref(h);return sc({fullPath:h,hash:u,query:r===fd?md(e.query):e.query||{}},o,{redirectedFrom:void 0,href:m})}function f(e){return"string"==typeof e?uc(n,e,l.value.path):sc({},e)}function m(e,t){if(u!==e)return createRouterError(8,{from:t,to:e})}function v(e){return y(e)}function g(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"==typeof n?n(e):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=f(r):{path:r},r.params={}),sc({query:e.query,hash:e.hash,params:e.params},r)}}function y(e,t){const n=u=h(e),i=l.value,s=e.state,a=e.force,o=!0===e.replace,c=g(n);if(c)return y(sc(f(c),{state:s,force:a,replace:o}),t||n);const d=n;let p;return d.redirectedFrom=t,!a&&function(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&dc(t.matched[r],n.matched[i])&&pc(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(r,i,n)&&(p=createRouterError(16,{to:d,from:i}),E(i,i,!0,!1)),(p?Promise.resolve(p):w(d,i)).catch((e=>Mc(e)?e:triggerError(e,d,i))).then((e=>{if(e){if(Mc(e,2))return y(sc(f(e.to),{state:s,force:a,replace:o}),t||d)}else e=_(d,i,!0,o,s);return x(d,i,e),e}))}function b(e,t){const n=m(e,t);return n?Promise.reject(n):Promise.resolve()}function w(e,t){let n;const[r,i,o]=function(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const s=t.matched[a];s&&(e.matched.find((e=>dc(e,s)))?r.push(s):n.push(s));const o=e.matched[a];o&&(t.matched.find((e=>dc(e,o)))||i.push(o))}return[n,r,i]}(e,t);n=bd(r.reverse(),"beforeRouteLeave",e,t);for(const s of r)s.leaveGuards.forEach((r=>{n.push(yd(r,e,t))}));const l=b.bind(null,e,t);return n.push(l),Cd(n).then((()=>{n=[];for(const r of s.list())n.push(yd(r,e,t));return n.push(l),Cd(n)})).then((()=>{n=bd(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach((r=>{n.push(yd(r,e,t))}));return n.push(l),Cd(n)})).then((()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(yd(i,e,t));else n.push(yd(r.beforeEnter,e,t));return n.push(l),Cd(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=bd(o,"beforeRouteEnter",e,t),n.push(l),Cd(n)))).then((()=>{n=[];for(const r of a.list())n.push(yd(r,e,t));return n.push(l),Cd(n)})).catch((e=>Mc(e,8)?e:Promise.reject(e)))}function x(e,t,n){for(const r of o.list())r(e,t,n)}function _(e,t,n,r,s){const a=m(e,t);if(a)return a;const o=t===Dc,u=ic?history.state:{};n&&(r||o?i.replace(e.fullPath,sc({scroll:o&&u&&u.scroll},s)):i.push(e.fullPath,s)),l.value=e,E(e,t,n,o),C()}let k;function S(){k=i.listen(((e,t,n)=>{const r=h(e),s=g(r);if(s)return void y(sc(s,{replace:!0}),r).catch(oc);u=r;const a=l.value;var o,c;ic&&(o=Sc(a.fullPath,n.delta),c=_c(),Rc.set(o,c)),w(r,a).catch((e=>Mc(e,4|8)?e:Mc(e,2)?(y(e.to,r).then((e=>{Mc(e,4|16)&&!n.delta&&n.type===mc.pop&&i.go(-1,!1)})).catch(oc),Promise.reject()):(n.delta&&i.go(-n.delta,!1),triggerError(e,r,a)))).then((e=>{(e=e||_(r,a,!1))&&(n.delta?i.go(-n.delta,!1):n.type===mc.pop&&Mc(e,4|16)&&i.go(-1,!1)),x(r,a,e)})).catch(oc)}))}let R,A=vd(),I=vd();function triggerError(e,t,n){C(e);const r=I.list();return r.length?r.forEach((r=>r(e,t,n))):console.error(e),Promise.reject(e)}function C(e){R||(R=!0,S(),A.list().forEach((([t,n])=>e?n(e):t())),A.reset())}function E(t,n,r,i){const{scrollBehavior:s}=e;if(!ic||!s)return Promise.resolve();const a=!r&&function(e){const t=Rc.get(e);return Rc.delete(e),t}(Sc(t.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return yr().then((()=>s(t,n,a))).then((e=>e&&kc(e))).catch((e=>triggerError(e,t,n)))}const O=e=>i.go(e);let D;const T=new Set;return{currentRoute:l,addRoute:function(e,n){let r,i;return Oc(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)},removeRoute:function(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)},hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:h,options:e,push:v,replace:function(e){return v(sc(f(e),{replace:!0}))},go:O,back:()=>O(-1),forward:()=>O(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:I.add,isReady:function(){return R&&l.value!==Dc?Promise.resolve():new Promise(((e,t)=>{A.add([e,t])}))},install(e){e.component("RouterLink",xd),e.component("RouterView",Ad),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>tr(l)}),ic&&!D&&l.value===Dc&&(D=!0,v(i.location).catch((e=>{})));const t={};for(const r in Dc)t[r]=pa((()=>l.value[r]));e.provide(tc,this),e.provide(nc,Un(t)),e.provide(rc,l);const n=e.unmount;T.add(e),e.unmount=function(){T.delete(e),T.size<1&&(u=Dc,k&&k(),l.value=Dc,D=!1,R=!1),n()}}}}function Cd(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}const Ed=r((()=>i("Router facade cannot be initialized lazily")));var Od=v,Dd=g,Td=y,Pd=w,jd=b;m({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=Dd(this),n=Td(t),r=jd(t,0);return r.length=Od(r,t,t,n,0,void 0===e?1:Pd(e)),r}}),x("flat");var Md,Ld={exports:{}};window,Ld.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=49)}([function(e,t,n){const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2001/XMLSchema#",s="http://www.w3.org/2000/10/swap/";t.a={xsd:{decimal:i+"decimal",boolean:i+"boolean",double:i+"double",integer:i+"integer",string:i+"string"},rdf:{type:r+"type",nil:r+"nil",first:r+"first",rest:r+"rest",langString:r+"langString"},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:s+"reify#forSome",forAll:s+"reify#forAll"},log:{implies:s+"log#implies"}}},function(e,t,n){const r={};e.exports=r,r.isArray=Array.isArray,r.isBoolean=e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e),r.isDouble=e=>r.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21),r.isEmptyObject=e=>r.isObject(e)&&0===Object.keys(e).length,r.isNumber=e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e),r.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),r.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),r.isString=e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e),r.isUndefined=e=>void 0===e},function(e,t,n){const r=n(4),i=n(1),s=n(11).IdentifierIssuer,a=n(3),o=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,l=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,c={accept:"application/ld+json, application/json"},d={};e.exports=d,d.IdentifierIssuer=s,d.clone=function(e){if(e&&"object"==typeof e){let t;if(i.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=d.clone(e[n])}else if(e instanceof Map){t=new Map;for(const[n,r]of e)t.set(n,d.clone(r))}else if(e instanceof Set){t=new Set;for(const n of e)t.add(d.clone(n))}else if(i.isObject(e)){t={};for(const n in e)t[n]=d.clone(e[n])}else t=e.toString();return t}return e},d.asArray=function(e){return Array.isArray(e)?e:[e]},d.buildHeaders=(e={})=>{if(Object.keys(e).some((e=>"accept"===e.toLowerCase())))throw new RangeError('Accept header may not be specified; only "'+c.accept+'" is supported.');return Object.assign({Accept:c.accept},e)},d.parseLinkHeader=e=>{const t={},n=e.match(o);for(let r=0;r<n.length;++r){let e=n[r].match(l);if(!e)continue;const i={target:e[1]},s=e[2];for(;e=u.exec(s);)i[e[1]]=void 0===e[2]?e[3]:e[2];const a=i.rel||"";Array.isArray(t[a])?t[a].push(i):t.hasOwnProperty(a)?t[a]=[t[a],i]:t[a]=i}return t},d.validateTypeValue=(e,t)=>{if(!(i.isString(e)||i.isArray(e)&&e.every((e=>i.isString(e))))){if(t&&i.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&d.asArray(e["@default"]).every((e=>i.isString(e))))return}throw new a('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},d.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const n=e[t];return!i.isArray(n)||n.length>0}return!1},d.hasValue=(e,t,n)=>{if(d.hasProperty(e,t)){let s=e[t];const a=r.isList(s);if(i.isArray(s)||a){a&&(s=s["@list"]);for(let e=0;e<s.length;++e)if(d.compareValues(n,s[e]))return!0}else if(!i.isArray(n))return d.compareValues(n,s)}return!1},d.addValue=(e,t,n,r)=>{if("propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)e[t]=n;else if(i.isArray(n)){0===n.length&&r.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),r.prependValue&&(n=n.concat(e[t]),e[t]=[]);for(let i=0;i<n.length;++i)d.addValue(e,t,n[i],r)}else if(e.hasOwnProperty(t)){const s=!r.allowDuplicate&&d.hasValue(e,t,n);i.isArray(e[t])||s&&!r.propertyIsArray||(e[t]=[e[t]]),s||(r.prependValue?e[t].unshift(n):e[t].push(n))}else e[t]=r.propertyIsArray?[n]:n},d.getValues=(e,t)=>[].concat(e[t]||[]),d.removeProperty=(e,t)=>{delete e[t]},d.removeValue=(e,t,n,r)=>{"propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1);const i=d.getValues(e,t).filter((e=>!d.compareValues(e,n)));0===i.length?d.removeProperty(e,t):1!==i.length||r.propertyIsArray?e[t]=i:e[t]=i[0]},d.relabelBlankNodes=(e,t)=>function e(t,n){if(i.isArray(n))for(let r=0;r<n.length;++r)n[r]=e(t,n[r]);else if(r.isList(n))n["@list"]=e(t,n["@list"]);else if(i.isObject(n)){r.isBlankNode(n)&&(n["@id"]=t.getId(n["@id"]));const i=Object.keys(n).sort();for(let r=0;r<i.length;++r){const s=i[r];"@id"!==s&&(n[s]=e(t,n[s]))}}return n}((t=t||{}).issuer||new s("_:b"),e),d.compareValues=(e,t)=>e===t||!(!r.isValue(e)||!r.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(i.isObject(e)&&"@id"in e&&i.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"],d.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1},function(e,t,n){e.exports=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",n={}){super(e),this.name=t,this.message=e,this.details=n}}},function(e,t,n){const r=n(1),i={};e.exports=i,i.isSubject=e=>!(!r.isObject(e)||"@value"in e||"@set"in e||"@list"in e)&&(Object.keys(e).length>1||!("@id"in e)),i.isSubjectReference=e=>r.isObject(e)&&1===Object.keys(e).length&&"@id"in e,i.isValue=e=>r.isObject(e)&&"@value"in e,i.isList=e=>r.isObject(e)&&"@list"in e,i.isGraph=e=>r.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((e=>"@id"!==e&&"@index"!==e)).length,i.isSimpleGraph=e=>i.isGraph(e)&&!("@id"in e),i.isBlankNode=e=>!!r.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e))},function(e,t,n){const r=n(1),i={};e.exports=i,i.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},i.parse=(e,t)=>{const n={},r=i.parsers[t||"full"],s=r.regex.exec(e);let a=r.keys.length;for(;a--;)n[r.keys[a]]=void 0===s[a]?null:s[a];return("https"===n.scheme&&"443"===n.port||"http"===n.scheme&&"80"===n.port)&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=i.removeDotSegments(n.path),n},i.prependBase=(e,t)=>{if(null===e)return t;if(i.isAbsolute(t))return t;e&&!r.isString(e)||(e=i.parse(e||""));const n=i.parse(t),s={protocol:e.protocol||""};if(null!==n.authority)s.authority=n.authority,s.path=n.path,s.query=n.query;else if(s.authority=e.authority,""===n.path)s.path=e.path,null!==n.query?s.query=n.query:s.query=e.query;else{if(0===n.path.indexOf("/"))s.path=n.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),(t.length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=n.path,s.path=t}s.query=n.query}""!==n.path&&(s.path=i.removeDotSegments(s.path));let a=s.protocol;return null!==s.authority&&(a+="//"+s.authority),a+=s.path,null!==s.query&&(a+="?"+s.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a},i.removeBase=(e,t)=>{if(null===e)return t;e&&!r.isString(e)||(e=i.parse(e||""));let n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),0!==t.indexOf(n))return t;const s=i.parse(t.substr(n.length)),a=e.normalizedPath.split("/"),o=s.normalizedPath.split("/"),l=s.fragment||s.query?0:1;for(;a.length>0&&o.length>l&&a[0]===o[0];)a.shift(),o.shift();let u="";if(a.length>0){a.pop();for(let e=0;e<a.length;++e)u+="../"}return u+=o.join("/"),null!==s.query&&(u+="?"+s.query),null!==s.fragment&&(u+="#"+s.fragment),""===u&&(u="./"),u},i.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),n=[];for(;t.length>0;){const e=t.shift(),r=0===t.length;"."!==e?".."!==e?n.push(e):(n.pop(),r&&n.push("")):r&&n.push("")}return"/"===e[0]&&n.length>0&&""!==n[0]&&n.unshift(""),1===n.length&&""===n[0]?"/":n.join("/")};const s=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;i.isAbsolute=e=>r.isString(e)&&s.test(e),i.isRelative=e=>r.isString(e)},function(e,t,n){const r=n(2),i=n(3),{isArray:s,isObject:a,isString:o,isUndefined:l}=n(1),{isAbsolute:u,isRelative:c,prependBase:d}=n(5),{asArray:p,compareShortestLeast:h}=n(2),f=new Map,m=/^@[a-zA-Z]+$/,v={};function g(e,t,n,r,i,s){if(null===t||!o(t)||v.isKeyword(t))return t;if(t.match(m))return null;if(r&&r.hasOwnProperty(t)&&!0!==i.get(t)&&v.createTermDefinition({activeCtx:e,localCtx:r,term:t,defined:i,options:s}),(n=n||{}).vocab){const n=e.mappings.get(t);if(null===n)return null;if(a(n)&&"@id"in n)return n["@id"]}const l=t.indexOf(":");if(l>0){const n=t.substr(0,l),a=t.substr(l+1);if("_"===n||0===a.indexOf("//"))return t;r&&r.hasOwnProperty(n)&&v.createTermDefinition({activeCtx:e,localCtx:r,term:n,defined:i,options:s});const o=e.mappings.get(n);if(o&&o._prefix)return o["@id"]+a;if(u(t))return t}if(n.vocab&&"@vocab"in e)return e["@vocab"]+t;if(n.base&&"@base"in e){if(e["@base"])return d(d(s.base,e["@base"]),t)}else if(n.base)return d(s.base,t);return t}e.exports=v,v.process=async({activeCtx:e,localCtx:t,options:n,propagate:l=!0,overrideProtected:h=!1,cycles:f=new Set})=>{if(a(t)&&"@context"in t&&s(t["@context"])&&(t=t["@context"]),0===p(t).length)return e;const m=await n.contextResolver.resolve({activeCtx:e,context:t,documentLoader:n.documentLoader,base:n.base});a(m[0].document)&&"boolean"==typeof m[0].document["@propagate"]&&(l=m[0].document["@propagate"]);let y=e;l||y.previousContext||(y=y.clone(),y.previousContext=e);for(const s of m){let{document:l}=s;if(e=y,null===l){if(!h&&0!==Object.keys(e.protected).length){const a=n&&n.protectedMode||"error";if("error"===a)throw new i("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===a){console.warn("WARNING: invalid context nullification");const t=s.getProcessed(e);if(t){y=e=t;continue}const i=e;y=e=v.getInitialContext(n).clone();for(const[n,s]of Object.entries(i.protected))s&&(e.mappings[n]=r.clone(i.mappings[n]));e.protected=r.clone(i.protected),s.setProcessed(i,y);continue}throw new i("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,protectedMode:a})}y=e=v.getInitialContext(n).clone();continue}const p=s.getProcessed(e);if(p){y=e=p;continue}if(a(l)&&"@context"in l&&(l=l["@context"]),!a(l))throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:l});y=y.clone();const m=new Map;if("@version"in l){if(1.1!==l["@version"])throw new i("Unsupported JSON-LD version: "+l["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:l});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new i("@version: "+l["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:l});y.processingMode="json-ld-1.1",y["@version"]=l["@version"],m.set("@version",!0)}if(y.processingMode=y.processingMode||e.processingMode,"@base"in l){let e=l["@base"];if(null===e||u(e));else{if(!c(e))throw new i('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:l});e=d(y["@base"],e)}y["@base"]=e,m.set("@base",!0)}if("@vocab"in l){const e=l["@vocab"];if(null===e)delete y["@vocab"];else{if(!o(e))throw new i('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});if(!u(e)&&v.processingMode(y,1))throw new i('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});y["@vocab"]=g(y,e,{vocab:!0,base:!0},void 0,void 0,n)}m.set("@vocab",!0)}if("@language"in l){const e=l["@language"];if(null===e)delete y["@language"];else{if(!o(e))throw new i('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:l});y["@language"]=e.toLowerCase()}m.set("@language",!0)}if("@direction"in l){const t=l["@direction"];if("json-ld-1.0"===e.processingMode)throw new i("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:l});if(null===t)delete y["@direction"];else{if("ltr"!==t&&"rtl"!==t)throw new i('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:l});y["@direction"]=t}m.set("@direction",!0)}if("@propagate"in l){const n=l["@propagate"];if("json-ld-1.0"===e.processingMode)throw new i("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:l});if("boolean"!=typeof n)throw new i("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});m.set("@propagate",!0)}if("@import"in l){const r=l["@import"];if("json-ld-1.0"===e.processingMode)throw new i("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:l});if(!o(r))throw new i("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const s=await n.contextResolver.resolve({activeCtx:e,context:r,documentLoader:n.documentLoader,base:n.base});if(1!==s.length)throw new i("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const a=s[0].getProcessed(e);if(a)l=a;else{const n=s[0].document;if("@import"in n)throw new i("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const e in n)l.hasOwnProperty(e)||(l[e]=n[e]);s[0].setProcessed(e,l)}m.set("@import",!0)}m.set("@protected",l["@protected"]||!1);for(const e in l)if(v.createTermDefinition({activeCtx:y,localCtx:l,term:e,defined:m,options:n,overrideProtected:h}),a(l[e])&&"@context"in l[e]){const t=l[e]["@context"];let r=!0;if(o(t)){const e=d(n.base,t);f.has(e)?r=!1:f.add(e)}if(r)try{await v.process({activeCtx:y.clone(),localCtx:l[e]["@context"],overrideProtected:!0,options:n,cycles:f})}catch(b){throw new i("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:l[e]["@context"],term:e})}}s.setProcessed(e,y)}return y},v.createTermDefinition=({activeCtx:e,localCtx:t,term:n,defined:r,options:l,overrideProtected:c=!1})=>{if(r.has(n)){if(r.get(n))return;throw new i("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}let d;if(r.set(n,!1),t.hasOwnProperty(n)&&(d=t[n]),"@type"===n&&a(d)&&"@set"===(d["@container"]||"@set")&&v.processingMode(e,1.1)){const e=["@container","@id","@protected"],r=Object.keys(d);if(0===r.length||r.some((t=>!e.includes(t))))throw new i("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n})}else{if(v.isKeyword(n))throw new i("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(n.match(m))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:n});if(""===n)throw new i("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const p=e.mappings.get(n);e.mappings.has(n)&&e.mappings.delete(n);let h=!1;if((o(d)||null===d)&&(h=!0,d={"@id":d}),!a(d))throw new i("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const f={};e.mappings.set(n,f),f.reverse=!1;const y=["@container","@id","@language","@reverse","@type"];v.processingMode(e,1.1)&&y.push("@context","@direction","@index","@nest","@prefix","@protected");for(const s in d)if(!y.includes(s))throw new i("Invalid JSON-LD syntax; a term definition must not contain "+s,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const b=n.indexOf(":");if(f._termHasColon=b>0,"@reverse"in d){if("@id"in d)throw new i("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in d)throw new i("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const s=d["@reverse"];if(!o(s))throw new i("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(!v.isKeyword(s)&&s.match(m))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:s}),void(p?e.mappings.set(n,p):e.mappings.delete(n));const a=g(e,s,{vocab:!0,base:!1},t,r,l);if(!u(a))throw new i("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});f["@id"]=a,f.reverse=!0}else if("@id"in d){let s=d["@id"];if(s&&!o(s))throw new i("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(null===s)f["@id"]=null;else{if(!v.isKeyword(s)&&s.match(m))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:s}),void(p?e.mappings.set(n,p):e.mappings.delete(n));if(s!==n){if(s=g(e,s,{vocab:!0,base:!1},t,r,l),!u(s)&&!v.isKeyword(s))throw new i("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(n.match(/(?::[^:])|\//)&&g(e,n,{vocab:!0,base:!1},t,new Map(r).set(n,!0),l)!==s)throw new i("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});f["@id"]=s,f._prefix=h&&!f._termHasColon&&s.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in f))if(f._termHasColon){const i=n.substr(0,b);if(t.hasOwnProperty(i)&&v.createTermDefinition({activeCtx:e,localCtx:t,term:i,defined:r,options:l}),e.mappings.has(i)){const t=n.substr(b+1);f["@id"]=e.mappings.get(i)["@id"]+t}else f["@id"]=n}else if("@type"===n)f["@id"]=n;else{if(!("@vocab"in e))throw new i("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});f["@id"]=e["@vocab"]+n}if((!0===d["@protected"]||!0===r.get("@protected")&&!1!==d["@protected"])&&(e.protected[n]=!0,f.protected=!0),r.set(n,!0),"@type"in d){let n=d["@type"];if(!o(n))throw new i("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@json"===n||"@none"===n){if(v.processingMode(e,1))throw new i(`Invalid JSON-LD syntax; an @context @type value must not be "${n}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if("@id"!==n&&"@vocab"!==n){if(n=g(e,n,{vocab:!0,base:!1},t,r,l),!u(n))throw new i("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===n.indexOf("_:"))throw new i("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}f["@type"]=n}if("@container"in d){const n=o(d["@container"])?[d["@container"]]:d["@container"]||[],r=["@list","@set","@index","@language"];let a=!0;const l=n.includes("@set");if(v.processingMode(e,1.1)){if(r.push("@graph","@id","@type"),n.includes("@list")){if(1!==n.length)throw new i("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(n.includes("@graph")){if(n.some((e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e)))throw new i("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else a&=n.length<=(l?2:1);if(n.includes("@type")&&(f["@type"]=f["@type"]||"@id",!["@id","@vocab"].includes(f["@type"])))throw new i("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else a&=!s(d["@container"]),a&=n.length<=1;if(a&=n.every((e=>r.includes(e))),a&=!(l&&n.includes("@list")),!a)throw new i("Invalid JSON-LD syntax; @context @container value must be one of the following: "+r.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(f.reverse&&!n.every((e=>["@index","@set"].includes(e))))throw new i("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});f["@container"]=n}if("@index"in d){if(!("@container"in d)||!f["@container"].includes("@index"))throw new i(`Invalid JSON-LD syntax; @index without @index in @container: "${d["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!o(d["@index"])||0===d["@index"].indexOf("@"))throw new i(`Invalid JSON-LD syntax; @index must expand to an IRI: "${d["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});f["@index"]=d["@index"]}if("@context"in d&&(f["@context"]=d["@context"]),"@language"in d&&!("@type"in d)){let e=d["@language"];if(null!==e&&!o(e))throw new i("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),f["@language"]=e}if("@prefix"in d){if(n.match(/:|\//))throw new i("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(v.isKeyword(f["@id"]))throw new i("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof d["@prefix"])throw new i("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});f._prefix=!0===d["@prefix"]}if("@direction"in d){const e=d["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new i('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});f["@direction"]=e}if("@nest"in d){const e=d["@nest"];if(!o(e)||"@nest"!==e&&0===e.indexOf("@"))throw new i("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});f["@nest"]=e}
// disallow aliasing @context and @preserve
const w=f["@id"];if("@context"===w||"@preserve"===w)throw new i("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(p&&p.protected&&!c&&(e.protected[n]=!0,f.protected=!0,!function e(t,n){if(!t||"object"!=typeof t||!n||"object"!=typeof n)return t===n;const r=Array.isArray(t);if(r!==Array.isArray(n))return!1;if(r){if(t.length!==n.length)return!1;for(let r=0;r<t.length;++r)if(!e(t[r],n[r]))return!1;return!0}const i=Object.keys(t),s=Object.keys(n);if(i.length!==s.length)return!1;for(const a in t){let r=t[a],i=n[a];if("@container"===a&&Array.isArray(r)&&Array.isArray(i)&&(r=r.slice().sort(),i=i.slice().sort()),!e(r,i))return!1}return!0}(p,f))){const e=l&&l.protectedMode||"error";if("error"===e)throw new i(`Invalid JSON-LD syntax; tried to redefine "${n}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:n});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:n});throw new i("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:n,protectedMode:e})}},v.expandIri=(e,t,n,r)=>g(e,t,n,void 0,void 0,r),v.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),n=f.get(t);if(n)return n;const i={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},n=e.fastCurieMap={},r={},i=(e["@language"]||"@none").toLowerCase(),o=e["@direction"],l=e.mappings,u=[...l.keys()].sort(h);for(const s of u){const e=l.get(s);if(null===e)continue;let u=e["@container"]||"@none";if(u=[].concat(u).sort().join(""),null===e["@id"])continue;const c=p(e["@id"]);for(const l of c){let c=t[l];const d=v.isKeyword(l);if(c)d||e._termHasColon||r[l].push(s);else if(t[l]=c={},!d&&!e._termHasColon){r[l]=[s];const e={iri:l,terms:r[l]};l[0]in n?n[l[0]].push(e):n[l[0]]=[e]}if(c[u]||(c[u]={"@language":{},"@type":{},"@any":{}}),c=c[u],a(s,c["@any"],"@none"),e.reverse)a(s,c["@type"],"@reverse");else if("@none"===e["@type"])a(s,c["@any"],"@none"),a(s,c["@language"],"@none"),a(s,c["@type"],"@none");else if("@type"in e)a(s,c["@type"],e["@type"]);else if("@language"in e&&"@direction"in e){const t=e["@language"],n=e["@direction"];a(s,c["@language"],t&&n?`${t}_${n}`.toLowerCase():t?t.toLowerCase():n?"_"+n:"@null")}else"@language"in e?a(s,c["@language"],(e["@language"]||"@null").toLowerCase()):"@direction"in e?e["@direction"]?a(s,c["@language"],"_"+e["@direction"]):a(s,c["@language"],"@none"):o?(a(s,c["@language"],"_"+o),a(s,c["@language"],"@none"),a(s,c["@type"],"@none")):(a(s,c["@language"],i),a(s,c["@language"],"@none"),a(s,c["@type"],"@none"))}}for(const a in n)s(n,a,1);return t},clone:function(){const e={};return e.mappings=r.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=r.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone()),e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]),"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===f.size&&f.clear(),f.set(t,i),i;function s(e,t,n){const r=e[t],i=e[t]={};let a,o;for(const s of r)a=s.iri,o=n>=a.length?"":a[n],o in i?i[o].push(s):i[o]=[s];for(const l in i)""!==l&&s(i,l,n+1)}function a(e,t,n){t.hasOwnProperty(n)||(t[n]=e)}},v.getContextValue=(e,t,n)=>{if(null===t){if("@context"===n)return;return null}if(e.mappings.has(t)){const r=e.mappings.get(t);if(l(n))return r;if(r.hasOwnProperty(n))return r[n]}return"@language"===n&&n in e||"@direction"===n&&n in e?e[n]:"@context"!==n?null:void 0},v.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode,v.isKeyword=e=>{if(!o(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},function(e,t,n){
/**
       * A JavaScript implementation of the JSON-LD API.
       *
       * @author Dave Longley
       *
       * @license BSD 3-Clause License
       * Copyright (c) 2011-2019 Digital Bazaar, Inc.
       * All rights reserved.
       *
       * Redistribution and use in source and binary forms, with or without
       * modification, are permitted provided that the following conditions are met:
       *
       * Redistributions of source code must retain the above copyright notice,
       * this list of conditions and the following disclaimer.
       *
       * Redistributions in binary form must reproduce the above copyright
       * notice, this list of conditions and the following disclaimer in the
       * documentation and/or other materials provided with the distribution.
       *
       * Neither the name of the Digital Bazaar, Inc. nor the names of its
       * contributors may be used to endorse or promote products derived from
       * this software without specific prior written permission.
       *
       * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
       * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
       * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
       * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
       * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
       * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
       * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
       * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
       * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
       * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
       * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
       */
const r=n(11),i=n(30),s=n(2),a=n(32),o=s.IdentifierIssuer,l=n(3),u=n(20),c=n(36),{expand:d}=n(37),{flatten:p}=n(38),{fromRDF:h}=n(39),{toRDF:f}=n(40),{frameMergedOrDefault:m,cleanupNull:v}=n(42),{isArray:g,isObject:y,isString:b}=n(1),{isSubjectReference:w}=n(4),{expandIri:x,getInitialContext:_,process:k,processingMode:S}=n(6),{compact:R,compactIri:A}=n(43),{createNodeMap:I,createMergedNodeMap:C,mergeNodeMaps:E}=n(10),O=function(e){const t={},O=new u({max:100});function D(t,{documentLoader:n=e.documentLoader,...r}){return Object.assign({},{documentLoader:n},r,t)}return e.compact=async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===n)throw new l("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let i;(r=D(r,{base:b(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new o("_:b"),contextResolver:new a({sharedCache:O})})).link&&(r.skipExpansion=!0),r.compactToRelative||delete r.base,i=r.skipExpansion?t:await e.expand(t,r);const u=await e.processContext(_(r),n,r);let c=await R({activeCtx:u,element:i,options:r,compactionMap:r.compactionMap});r.compactArrays&&!r.graph&&g(c)?1===c.length?c=c[0]:0===c.length&&(c={}):r.graph&&y(c)&&(c=[c]),y(n)&&"@context"in n&&(n=n["@context"]),n=s.clone(n),g(n)||(n=[n]);const d=n;n=[];for(let e=0;e<d.length;++e)(!y(d[e])||Object.keys(d[e]).length>0)&&n.push(d[e]);const p=n.length>0;if(1===n.length&&(n=n[0]),g(c)){const e=A({activeCtx:u,iri:"@graph",relativeTo:{vocab:!0}}),t=c;c={},p&&(c["@context"]=n),c[e]=t}else if(y(c)&&p){const e=c;c={"@context":n};for(const t in e)c[t]=e[t]}return c},e.expand=async function(t,n){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(n=D(n,{keepFreeFloatingNodes:!1,contextResolver:new a({sharedCache:O})})).expansionMap&&(n.expansionMap=void 0);const r={},i=[];if("expandContext"in n){const e=s.clone(n.expandContext);y(e)&&"@context"in e?r.expandContext=e:r.expandContext={"@context":e},i.push(r.expandContext)}let o;if(b(t)){const s=await e.get(t,n);o=s.documentUrl,r.input=s.document,s.contextUrl&&(r.remoteContext={"@context":s.contextUrl},i.push(r.remoteContext))}else r.input=s.clone(t);"base"in n||(n.base=o||"");let l=_(n);for(const e of i)l=await k({activeCtx:l,localCtx:e,options:n});let u=await d({activeCtx:l,element:r.input,options:n,expansionMap:n.expansionMap});return y(u)&&"@graph"in u&&1===Object.keys(u).length?u=u["@graph"]:null===u&&(u=[]),g(u)||(u=[u]),u},e.flatten=async function(t,n,r){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");n="function"==typeof n?null:n||null,r=D(r,{base:b(t)?t:"",contextResolver:new a({sharedCache:O})});const i=await e.expand(t,r),s=p(i);return null===n?s:(r.graph=!0,r.skipExpansion=!0,await e.compact(s,n,r))},e.frame=async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(r=D(r,{base:b(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new a({sharedCache:O})}),b(n)){const t=await e.get(n,r);if(n=t.document,t.contextUrl){let e=n["@context"];e?g(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,n["@context"]=e}}const i=n&&n["@context"]||{},s=await e.processContext(_(r),i,r);r.hasOwnProperty("omitGraph")||(r.omitGraph=S(s,1.1)),r.hasOwnProperty("pruneBlankNodeIdentifiers")||(r.pruneBlankNodeIdentifiers=S(s,1.1));const o=await e.expand(t,r),l={...r};l.isFrame=!0,l.keepFreeFloatingNodes=!0;const u=await e.expand(n,l),c=Object.keys(n).map((e=>x(s,e,{vocab:!0})));l.merged=!c.includes("@graph"),l.is11=S(s,1.1);const d=m(o,u,l);l.graph=!r.omitGraph,l.skipExpansion=!0,l.link={},l.framing=!0;let p=await e.compact(d,i,l);return l.link={},p=v(p,l),p},e.link=async function(t,n,r){const i={};return n&&(i["@context"]=n),i["@embed"]="@link",e.frame(t,i,r)},e.normalize=e.canonize=async function(t,n){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(n=D(n,{base:b(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new a({sharedCache:O})}))){if("application/n-quads"!==n.inputFormat&&"application/nquads"!==n.inputFormat)throw new l("Unknown canonicalization input format.","jsonld.CanonizeError");const e=c.parse(t);return r.canonize(e,n)}const i={...n};delete i.format,i.produceGeneralizedRdf=!1;const s=await e.toRDF(t,i);return r.canonize(s,n)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=D(n,{format:b(e)?"application/n-quads":void 0});const{format:r}=n;let{rdfParser:i}=n;if(r){if(i=i||t[r],!i)throw new l("Unknown input format.","jsonld.UnknownFormat",{format:r})}else i=()=>e;const s=await i(e);return h(s,n)},e.toRDF=async function(t,n){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let r;r=(n=D(n,{base:b(t)?t:"",skipExpansion:!1,contextResolver:new a({sharedCache:O})})).skipExpansion?t:await e.expand(t,n);const i=f(r,n);if(n.format){if("application/n-quads"===n.format||"application/nquads"===n.format)return c.serialize(i);throw new l("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}return i},e.createNodeMap=async function(t,n){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");n=D(n,{base:b(t)?t:"",contextResolver:new a({sharedCache:O})});const r=await e.expand(t,n);return C(r,n)},e.merge=async function(t,n,r){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!g(t))throw new TypeError('Could not merge, "docs" must be an array.');n="function"==typeof n?null:n||null,r=D(r,{contextResolver:new a({sharedCache:O})});const i=await Promise.all(t.map((t=>{const n={...r};return e.expand(t,n)})));let l=!0;"mergeNodes"in r&&(l=r.mergeNodes);const u=r.issuer||new o("_:b"),c={"@default":{}};for(let e=0;e<i.length;++e){const t=s.relabelBlankNodes(i[e],{issuer:new o("_:b"+e+"-")}),n=l||0===e?c:{"@default":{}};if(I(t,n,"@default",u),n!==c)for(const e in n){const t=n[e];if(!(e in c)){c[e]=t;continue}const r=c[e];for(const e in t)e in r||(r[e]=t[e])}}const d=E(c),p=[],h=Object.keys(d).sort();for(let e=0;e<h.length;++e){const t=d[h[e]];w(t)||p.push(t)}return null===n?p:(r.graph=!0,r.skipExpansion=!0,await e.compact(p,n,r))},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=async e=>{throw new l("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})},e.get=async function(t,n){let r;r="function"==typeof n.documentLoader?n.documentLoader:e.documentLoader;const i=await r(t);try{if(!i.document)throw new l("No remote document found at the given URL.","jsonld.NullRemoteDocument");b(i.document)&&(i.document=JSON.parse(i.document))}catch(s){throw new l("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:s,remoteDoc:i})}return i},e.processContext=async function(e,t,n){return n=D(n,{base:"",contextResolver:new a({sharedCache:O})}),null===t?_(n):(t=s.clone(t),y(t)&&"@context"in t||(t={"@context":t}),k({activeCtx:e,localCtx:t,options:n}))},e.getContextValue=n(6).getContextValue,e.documentLoaders={},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new l('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",c.parse),e.registerRDFParser("application/nquads",c.parse),e.url=n(5),e.util=s,Object.assign(e,s),e.promises=e,e.RequestQueue=n(19),e.JsonLdProcessor=n(44)(e),i.setupGlobals(e),i.setupDocumentLoaders(e),e},D=function(){return O((function(){return D()}))};O(D),e.exports=D},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){
/*!
      * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
      */
n(16);const r=self.crypto||self.msCrypto;e.exports=class{constructor(e){if(!r||!r.subtle)throw new Error("crypto.subtle not found.");if("sha256"===e)this.algorithm={name:"SHA-256"};else{if("sha1"!==e)throw new Error(`Unsupported algorithm "${e}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(e){this._content+=e}async digest(){const e=(new TextEncoder).encode(this._content),t=new Uint8Array(await r.subtle.digest(this.algorithm,e));let n="";for(let r=0;r<t.length;++r)n+=t[r].toString(16).padStart(2,"0");return n}}},function(e,t,n){const{isKeyword:r}=n(6),i=n(4),s=n(1),a=n(2),o=n(3),l={};e.exports=l,l.createMergedNodeMap=(e,t)=>{const n=(t=t||{}).issuer||new a.IdentifierIssuer("_:b"),r={"@default":{}};return l.createNodeMap(e,r,"@default",n),l.mergeNodeMaps(r)},l.createNodeMap=(e,t,n,u,c,d)=>{if(s.isArray(e)){for(const r of e)l.createNodeMap(r,t,n,u,void 0,d);return}if(!s.isObject(e))return void(d&&d.push(e));if(i.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=u.getId(t))}return void(d&&d.push(e))}if(d&&i.isList(e)){const r=[];return l.createNodeMap(e["@list"],t,n,u,c,r),void d.push({"@list":r})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&u.getId(e)}s.isUndefined(c)&&(c=i.isBlankNode(e)?u.getId(e["@id"]):e["@id"]),d&&d.push({"@id":c});const p=t[n],h=p[c]=p[c]||{};h["@id"]=c;const f=Object.keys(e).sort();for(let s of f){if("@id"===s)continue;if("@reverse"===s){const r={"@id":c},s=e["@reverse"];for(const e in s){const o=s[e];for(const s of o){let o=s["@id"];i.isBlankNode(s)&&(o=u.getId(o)),l.createNodeMap(s,t,n,u,o),a.addValue(p[o],e,r,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===s){c in t||(t[c]={}),l.createNodeMap(e[s],t,c,u);continue}if("@included"===s){l.createNodeMap(e[s],t,n,u);continue}if("@type"!==s&&r(s)){if("@index"===s&&s in h&&(e[s]!==h[s]||e[s]["@id"]!==h[s]["@id"]))throw new o("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:h});h[s]=e[s];continue}const d=e[s];if(0===s.indexOf("_:")&&(s=u.getId(s)),0!==d.length)for(let e of d)if("@type"===s&&(e=0===e.indexOf("_:")?u.getId(e):e),i.isSubject(e)||i.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const r=i.isBlankNode(e)?u.getId(e["@id"]):e["@id"];a.addValue(h,s,{"@id":r},{propertyIsArray:!0,allowDuplicate:!1}),l.createNodeMap(e,t,n,u,r)}else if(i.isValue(e))a.addValue(h,s,e,{propertyIsArray:!0,allowDuplicate:!1});else if(i.isList(e)){const r=[];l.createNodeMap(e["@list"],t,n,u,c,r),e={"@list":r},a.addValue(h,s,e,{propertyIsArray:!0,allowDuplicate:!1})}else l.createNodeMap(e,t,n,u,c),a.addValue(h,s,e,{propertyIsArray:!0,allowDuplicate:!1});else a.addValue(h,s,[],{propertyIsArray:!0})}},l.mergeNodeMapGraphs=e=>{const t={};for(const n of Object.keys(e).sort())for(const i of Object.keys(e[n]).sort()){const s=e[n][i];i in t||(t[i]={"@id":i});const o=t[i];for(const e of Object.keys(s).sort())if(r(e)&&"@type"!==e)o[e]=a.clone(s[e]);else for(const t of s[e])a.addValue(o,e,a.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},l.mergeNodeMaps=e=>{const t=e["@default"],n=Object.keys(e).sort();for(const r of n){if("@default"===r)continue;const n=e[r];let s=t[r];s?"@graph"in s||(s["@graph"]=[]):t[r]=s={"@id":r,"@graph":[]};const a=s["@graph"];for(const e of Object.keys(n).sort()){const t=n[e];i.isSubjectReference(t)||a.push(t)}}return t}},function(e,t,n){e.exports=n(24)},function(e,t,n){e.exports=class e{constructor(e,t=new Map,n=0){this.prefix=e,this._existing=t,this.counter=n}clone(){const{prefix:t,_existing:n,counter:r}=this;return new e(t,new Map(n),r)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const n=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,n),n}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}},function(e,t,n){
/*!
      * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
      */
const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",i="http://www.w3.org/2001/XMLSchema#string",s={};function a(e,t){return e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType&&e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value&&("Literal"!==e.object.termType||e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value)}s.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,s.empty=new RegExp("^[ \\t]*$"),s.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?))[ \\t]*\\.))[ \\t]*$'),e.exports=class e{static parse(e){const t=[],n={},o=e.split(s.eoln);let u=0;for(const c of o){if(u++,s.empty.test(c))continue;const e=c.match(s.quad);if(null===e)throw new Error("N-Quads parse error on line "+u+".");const o={subject:null,predicate:null,object:null,graph:null};if(void 0!==e[1]?o.subject={termType:"NamedNode",value:e[1]}:o.subject={termType:"BlankNode",value:e[2]},o.predicate={termType:"NamedNode",value:e[3]},void 0!==e[4]?o.object={termType:"NamedNode",value:e[4]}:void 0!==e[5]?o.object={termType:"BlankNode",value:e[5]}:(o.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==e[7]?o.object.datatype.value=e[7]:void 0!==e[8]?(o.object.datatype.value=r,o.object.language=e[8]):o.object.datatype.value=i,o.object.value=e[6].replace(l,(function(e,t,n,r){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(n)return String.fromCharCode(parseInt(n,16));if(r)throw new Error("Unsupported U escape")}))),void 0!==e[9]?o.graph={termType:"NamedNode",value:e[9]}:void 0!==e[10]?o.graph={termType:"BlankNode",value:e[10]}:o.graph={termType:"DefaultGraph",value:""},o.graph.value in n){let e=!0;const r=n[o.graph.value];for(const t of r)if(a(t,o)){e=!1;break}e&&(r.push(o),t.push(o))}else n[o.graph.value]=[o],t.push(o)}return t}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const n=[];for(const r of t)n.push(e.serializeQuad(r));return n.sort().join("")}static serializeQuadComponents(e,t,n,s){let a="";return"NamedNode"===e.termType?a+=`<${e.value}>`:a+=""+e.value,a+=` <${t.value}> `,"NamedNode"===n.termType?a+=`<${n.value}>`:"BlankNode"===n.termType?a+=n.value:(a+=`"${l=n.value,l.replace(o,(function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}}))}"`,n.datatype.value===r?n.language&&(a+="@"+n.language):n.datatype.value!==i&&(a+=`^^<${n.datatype.value}>`)),"NamedNode"===s.termType?a+=` <${s.value}>`:"BlankNode"===s.termType&&(a+=" "+s.value),a+=" .\n",a;var l}static serializeQuad(t){return e.serializeQuadComponents(t.subject,t.predicate,t.object,t.graph)}static legacyDatasetToQuads(e){const t=[],n={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"};for(const s in e)e[s].forEach((e=>{const a={};for(const t in e){const s=e[t],o={termType:n[s.type],value:s.value};"Literal"===o.termType&&(o.datatype={termType:"NamedNode"},"datatype"in s&&(o.datatype.value=s.datatype),"language"in s?("datatype"in s||(o.datatype.value=r),o.language=s.language):"datatype"in s||(o.datatype.value=i)),a[t]=o}a.graph="@default"===s?{termType:"DefaultGraph",value:""}:{termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s},t.push(a)}));return t}};const o=/["\\\n\r]/g,l=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},function(e,t,n){const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2001/XMLSchema#";e.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:r,RDF_LIST:r+"List",RDF_FIRST:r+"first",RDF_REST:r+"rest",RDF_NIL:r+"nil",RDF_TYPE:r+"type",RDF_PLAIN_LITERAL:r+"PlainLiteral",RDF_XML_LITERAL:r+"XMLLiteral",RDF_JSON_LITERAL:r+"JSON",RDF_OBJECT:r+"object",RDF_LANGSTRING:r+"langString",XSD:i,XSD_BOOLEAN:i+"boolean",XSD_DOUBLE:i+"double",XSD_INTEGER:i+"integer",XSD_STRING:i+"string"}},function(e,t,n){(function(t){
/*!
         * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
         */
const r=n(12),i=n(9),s=n(17),a=n(13);function o(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor({createMessageDigest:e=(()=>new i("sha256")),maxDeepIterations:t=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new r("_:c14n"),this.createMessageDigest=e,this.maxDeepIterations=t,this.quads=null,this.deepIterations=null}async main(e){this.deepIterations=new Map,this.quads=e;for(const r of e)this._addBlankNodeQuadInfo({quad:r,component:r.subject}),this._addBlankNodeQuadInfo({quad:r,component:r.object}),this._addBlankNodeQuadInfo({quad:r,component:r.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];let i=0;for(const r of n)++i%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:r,hashToBlankNodes:t});const s=[...t.keys()].sort(),l=[];for(const r of s){const e=t.get(r);if(e.length>1){l.push(e);continue}const n=e[0];this.canonicalIssuer.getId(n)}for(const a of l){const e=[];for(const t of a){if(this.canonicalIssuer.hasId(t))continue;const n=new r("_:b");n.getId(t);const i=await this.hashNDegreeQuads(t,n);e.push(i)}e.sort(o);for(const t of e){const e=t.issuer.getOldIds();for(const t of e)this.canonicalIssuer.getId(t)}}const u=[];for(const r of this.quads){const e=a.serializeQuadComponents(this._componentWithCanonicalId(r.subject),r.predicate,this._componentWithCanonicalId(r.object),this._componentWithCanonicalId(r.graph));u.push(e)}return u.sort(),u.join("")}async hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),r=n.quads;for(const s of r){const n={subject:null,predicate:s.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,s.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,s.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,s.graph,"graph"),t.push(a.serializeQuad(n))}t.sort();const i=this.createMessageDigest();for(const s of t)i.update(s);return n.hash=await i.digest(),n.hash}async hashRelatedBlankNode(e,t,n,r){let i;i=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const s=this.createMessageDigest();return s.update(r),"g"!==r&&s.update(this.getRelatedPredicate(t)),s.update(i),s.digest()}async hashNDegreeQuads(e,t){const n=this.deepIterations.get(e)||0;if(n>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(e,n+1);const r=this.createMessageDigest(),i=await this.createHashToRelated(e,t),a=[...i.keys()].sort();for(const o of a){r.update(o);let e,n="";const a=new s(i.get(o));let l=0;for(;a.hasNext();){const r=a.next();++l%3==0&&await this._yield();let i=t.clone(),s="";const o=[];let u=!1;for(const e of r)if(this.canonicalIssuer.hasId(e)?s+=this.canonicalIssuer.getId(e):(i.hasId(e)||o.push(e),s+=i.getId(e)),0!==n.length&&s>n){u=!0;break}if(!u){for(const e of o){const t=await this.hashNDegreeQuads(e,i);if(s+=i.getId(e),s+=`<${t.hash}>`,i=t.issuer,0!==n.length&&s>n){u=!0;break}}u||(0===n.length||s<n)&&(n=s,e=i)}}r.update(n),t=e}return{hash:await r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;let i=0;for(const s of r)++i%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:s,component:s.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:s,component:s.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:s,component:s.graph,position:"g",id:e,issuer:t,hashToRelated:n})]);return n}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=await this.hashFirstDegreeQuads(e),r=t.get(n);r?r.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:t,position:n,id:r,issuer:i,hashToRelated:s}){if("BlankNode"!==t.termType||t.value===r)return;const a=t.value,o=await this.hashRelatedBlankNode(a,e,i,n),l=s.get(o);l?l.push(a):s.set(o,[a])}_componentWithCanonicalId(e){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}async _yield(){return new Promise((e=>t(e)))}}}).call(this,n(25).setImmediate)},function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var r,i,s,a,o,l=1,u={},c=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),r=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){s.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(f,0,e)},p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[l]=i,r(l),l++},p.clearImmediate=h}function h(e){delete u[e]}function f(e){if(c)setTimeout(f,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(8),n(26))},function(e,t,n){
/*!
      * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
      */
e.exports=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,n=e.slice();let r=null,i=0;const s=e.length;for(let a=0;a<s;++a){const n=e[a],o=t.get(n);(null===r||n>r)&&(o&&a>0&&n>e[a-1]||!o&&a<s-1&&n>e[a+1])&&(r=n,i=a)}if(null===r)this.done=!0;else{const n=t.get(r)?i-1:i+1;e[i]=e[n],e[n]=r;for(const i of e)i>r&&t.set(i,!t.get(i))}return n}}},function(e,t,n){
/*!
      * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
      */
const r=n(12),i=n(9),s=n(17),a=n(13);function o(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor({createMessageDigest:e=(()=>new i("sha256")),maxDeepIterations:t=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new r("_:c14n"),this.createMessageDigest=e,this.maxDeepIterations=t,this.quads=null,this.deepIterations=null}main(e){this.deepIterations=new Map,this.quads=e;for(const r of e)this._addBlankNodeQuadInfo({quad:r,component:r.subject}),this._addBlankNodeQuadInfo({quad:r,component:r.object}),this._addBlankNodeQuadInfo({quad:r,component:r.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];for(const r of n)this._hashAndTrackBlankNode({id:r,hashToBlankNodes:t});const i=[...t.keys()].sort(),s=[];for(const r of i){const e=t.get(r);if(e.length>1){s.push(e);continue}const n=e[0];this.canonicalIssuer.getId(n)}for(const a of s){const e=[];for(const t of a){if(this.canonicalIssuer.hasId(t))continue;const n=new r("_:b");n.getId(t);const i=this.hashNDegreeQuads(t,n);e.push(i)}e.sort(o);for(const t of e){const e=t.issuer.getOldIds();for(const t of e)this.canonicalIssuer.getId(t)}}const l=[];for(const r of this.quads){const e=a.serializeQuadComponents(this._componentWithCanonicalId({component:r.subject}),r.predicate,this._componentWithCanonicalId({component:r.object}),this._componentWithCanonicalId({component:r.graph}));l.push(e)}return l.sort(),l.join("")}hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),r=n.quads;for(const s of r){const n={subject:null,predicate:s.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,s.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,s.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,s.graph,"graph"),t.push(a.serializeQuad(n))}t.sort();const i=this.createMessageDigest();for(const s of t)i.update(s);return n.hash=i.digest(),n.hash}hashRelatedBlankNode(e,t,n,r){let i;i=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const s=this.createMessageDigest();return s.update(r),"g"!==r&&s.update(this.getRelatedPredicate(t)),s.update(i),s.digest()}hashNDegreeQuads(e,t){const n=this.deepIterations.get(e)||0;if(n>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(e,n+1);const r=this.createMessageDigest(),i=this.createHashToRelated(e,t),a=[...i.keys()].sort();for(const o of a){r.update(o);let e,n="";const a=new s(i.get(o));for(;a.hasNext();){const r=a.next();let i=t.clone(),s="";const o=[];let l=!1;for(const e of r)if(this.canonicalIssuer.hasId(e)?s+=this.canonicalIssuer.getId(e):(i.hasId(e)||o.push(e),s+=i.getId(e)),0!==n.length&&s>n){l=!0;break}if(!l){for(const e of o){const t=this.hashNDegreeQuads(e,i);if(s+=i.getId(e),s+=`<${t.hash}>`,i=t.issuer,0!==n.length&&s>n){l=!0;break}}l||(0===n.length||s<n)&&(n=s,e=i)}}r.update(n),t=e}return{hash:r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const i of r)this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:e,issuer:t,hashToRelated:n});return n}_hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=this.hashFirstDegreeQuads(e),r=t.get(n);r?r.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:t,position:n,id:r,issuer:i,hashToRelated:s}){if("BlankNode"!==t.termType||t.value===r)return;const a=t.value,o=this.hashRelatedBlankNode(a,e,i,n),l=s.get(o);l?l.push(a):s.set(o,[a])}_componentWithCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}}},function(e,t,n){e.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}}},function(e,t,n){const r=n(34),i=Symbol("max"),s=Symbol("length"),a=Symbol("lengthCalculator"),o=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),h=Symbol("updateAgeOnGet"),f=()=>1,m=(e,t,n)=>{const r=e[p].get(t);if(r){const t=r.value;if(v(e,t)){if(y(e,r),!e[o])return}else n&&(e[h]&&(r.value.now=Date.now()),e[d].unshiftNode(r));return t.value}},v=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},g=e=>{if(e[s]>e[i])for(let t=e[d].tail;e[s]>e[i]&&null!==t;){const n=t.prev;y(e,t),t=n}},y=(e,t)=>{if(t){const n=t.value;e[u]&&e[u](n.key,n.value),e[s]-=n.length,e[p].delete(n.key),e[d].removeNode(t)}};class b{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const w=(e,t,n,r)=>{let i=n.value;v(e,i)&&(y(e,n),e[o]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||f;if(this[a]="function"!=typeof t?f:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[h]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,g(this)}get max(){return this[i]}set allowStale(e){this[o]=!!e}get allowStale(){return this[o]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,g(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[a]&&(this[a]=e,this[s]=0,this[d].forEach((e=>{e.length=this[a](e.value,e.key),this[s]+=e.length}))),g(this)}get lengthCalculator(){return this[a]}get length(){return this[s]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let n=this[d].tail;null!==n;){const r=n.prev;w(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[d].head;null!==n;){const r=n.next;w(this,e,n,t),n=r}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[u]&&this[d]&&this[d].length&&this[d].forEach((e=>this[u](e.key,e.value))),this[p]=new Map,this[d]=new r,this[s]=0}dump(){return this[d].map((e=>!v(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,n){if((n=n||this[l])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,o=this[a](t,e);if(this[p].has(e)){if(o>this[i])return y(this,this[p].get(e)),!1;const a=this[p].get(e).value;return this[u]&&(this[c]||this[u](e,a.value)),a.now=r,a.maxAge=n,a.value=t,this[s]+=o-a.length,a.length=o,this.get(e),g(this),!0}const h=new b(e,t,o,r,n);return h.length>this[i]?(this[u]&&this[u](e,t),!1):(this[s]+=h.length,this[d].unshift(h),this[p].set(e,this[d].head),g(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!v(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){const e=this[d].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[p].forEach(((e,t)=>m(this,t,!1)))}}},function(e,t,n){(function(e){n.d(t,"a",(function(){return p}));var r=n(0),i=n(22),s=n.n(i);const{xsd:a}=r.a,o=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,l={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},u=/[\x00-\x20<>\\"\{\}\|\^\`]/,c={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},d=/$0^/;class p{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const e in this)!(e in c)&&this[e]instanceof RegExp&&(this[e]=d)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input;const r=this._comments;for(;;){let s,o;for(;s=this._newline.exec(n);)r&&(o=this._comment.exec(s[0]))&&e(null,{line:this._line,type:"comment",value:o[1],prefix:""}),n=n.substr(s[0].length,n.length),this._line++;if(!s&&(s=this._whitespace.exec(n))&&(n=n.substr(s[0].length,n.length)),this._endOfFile.test(n))return t&&(r&&(o=this._comment.exec(n))&&e(null,{line:this._line,type:"comment",value:o[1],prefix:""}),e(n=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=n;const l=this._line,c=n[0];let d="",p="",h="",f=null,m=0,v=!1;switch(c){case"^":if(n.length<3)break;if("^"!==n[1]){this._n3Mode&&(m=1,d="^");break}if(this._previousMarker="^^",n=n.substr(2),"<"!==n[0]){v=!0;break}case"<":if(f=this._unescapedIri.exec(n))d="IRI",p=f[1];else if(f=this._iri.exec(n)){if(p=this._unescape(f[1]),null===p||u.test(p))return i(this);d="IRI"}else n.length>1&&"<"===n[1]?(d="<<",m=2):this._n3Mode&&n.length>1&&"="===n[1]&&(d="inverse",m=2,p=">");break;case">":n.length>1&&">"===n[1]&&(d=">>",m=2);break;case"_":((f=this._blank.exec(n))||t&&(f=this._blank.exec(n+" ")))&&(d="blank",h="_",p=f[1]);break;case'"':if(f=this._simpleQuotedString.exec(n))p=f[1];else if(({value:p,matchLength:m}=this._parseLiteral(n)),null===p)return i(this);null===f&&0===m||(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(f=this._simpleApostropheString.exec(n))p=f[1];else if(({value:p,matchLength:m}=this._parseLiteral(n)),null===p)return i(this);null===f&&0===m||(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(f=this._variable.exec(n))&&(d="var",p=f[0]);break;case"@":"literal"===this._previousMarker&&(f=this._langcode.exec(n))?(d="langcode",p=f[1]):(f=this._keyword.exec(n))&&(d=f[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){d=".",m=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(f=this._number.exec(n)||t&&(f=this._number.exec(n+" ")))&&(d="literal",p=f[0],h="string"==typeof f[1]?a.double:"string"==typeof f[2]?a.decimal:a.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(f=this._sparqlKeyword.exec(n))?d=f[0].toUpperCase():v=!0;break;case"f":case"t":(f=this._boolean.exec(n))?(d="literal",p=f[0],h=a.boolean):v=!0;break;case"a":(f=this._shortPredicates.exec(n))?(d="abbreviation",p="a"):v=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",">"!==n[1]?(m=1,p="="):(m=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(m=1,d=c);break;default:v=!0}if(v&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(f=this._prefix.exec(n))?((f=this._prefixed.exec(n))||t&&(f=this._prefixed.exec(n+" ")))&&(d="prefixed",h=f[1]||"",p=this._unescape(f[2])):(d="prefix",p=f[1]||"")),"^^"===this._previousMarker)switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?i(this):this._input=n;const g={line:l,type:d,value:p,prefix:h};e(null,g),this.previousToken=g,this._previousMarker=d,n=n.substr(m||f[0].length,n.length)}function i(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(o,((e,n,r,i)=>{if("string"==typeof n)return String.fromCharCode(Number.parseInt(n,16));if("string"==typeof r){let e=Number.parseInt(r,16);return e<=65535?String.fromCharCode(Number.parseInt(r,16)):String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e))}return i in l?l[i]:(t=!0,"")}));return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let r=Math.max(this._literalClosingPos,n);for(;(r=e.indexOf(t,r))>0;){let t=0;for(;"\\"===e[r-t-1];)t++;if(t%2==0){const t=e.substring(n,r),i=t.split(/\r\n|\r|\n/).length-1,s=r+n;if(1===n&&0!==i||3===n&&this._lineMode)break;return this._line+=i,{value:this._unescape(t),matchLength:s}}r++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}tokenize(t,n){if(this._line=1,"string"==typeof t){if(this._input=t,"function"!=typeof n){const e=[];let t;if(this._tokenizeToEnd(((n,r)=>n?t=n:e.push(r)),!0),t)throw t;return e}s()((()=>this._tokenizeToEnd(n,!0)))}else this._input="",this._pendingBuffer=null,"function"==typeof t.setEncoding&&t.setEncoding("utf8"),t.on("data",(t=>{null!==this._input&&0!==t.length&&(this._pendingBuffer&&(t=e.concat([this._pendingBuffer,t]),this._pendingBuffer=null),128&t[t.length-1]?this._pendingBuffer=t:(this._input+=t,this._tokenizeToEnd(n,!1)))})),t.on("end",(()=>{null!==this._input&&this._tokenizeToEnd(n,!0)})),t.on("error",n)}}}).call(this,n(45).Buffer)},function(e,t,n){(function(t){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let n;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:t):e=>(n||(n=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))}).call(this,n(8))},,function(e,t,n){const r=n(15),i=n(27),s=n(18),a=n(28);let o;try{o=n(29)}catch(l){}t.NQuads=n(13),t.IdentifierIssuer=n(12),t._rdfCanonizeNative=function(e){return e&&(o=e),o},t.canonize=async function(e,n){if(Array.isArray(e)||(e=t.NQuads.legacyDatasetToQuads(e)),n.useNative){if(!o)throw new Error("rdf-canonize-native not available");if(n.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise(((t,r)=>o.canonize(e,n,((e,n)=>e?r(e):t(n)))))}if("URDNA2015"===n.algorithm)return new r(n).main(e);if("URGNA2012"===n.algorithm){if(n.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new i(n).main(e)}if(!("algorithm"in n))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+n.algorithm)},t._canonizeSync=function(e,n){if(Array.isArray(e)||(e=t.NQuads.legacyDatasetToQuads(e)),n.useNative){if(!o)throw new Error("rdf-canonize-native not available");if(n.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return o.canonizeSync(e,n)}if("URDNA2015"===n.algorithm)return new s(n).main(e);if("URGNA2012"===n.algorithm){if(n.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new a(n).main(e)}if(!("algorithm"in n))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+n.algorithm)}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new s(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(16),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(8))},function(e,t){var n,r,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(r){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,u=[],c=!1,d=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!c){var e=o(p);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(n){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||o(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){
/*!
      * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
      */
const r=n(9),i=n(15);e.exports=class extends i{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new r("sha1")}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;let i=0;for(const s of r){let r,a;if("BlankNode"===s.subject.termType&&s.subject.value!==e)a=s.subject.value,r="p";else{if("BlankNode"!==s.object.termType||s.object.value===e)continue;a=s.object.value,r="r"}++i%100==0&&await this._yield();const o=await this.hashRelatedBlankNode(a,s,t,r),l=n.get(o);l?l.push(a):n.set(o,[a])}return n}}},function(e,t,n){
/*!
      * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
      */
const r=n(9),i=n(18);e.exports=class extends i{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new r("sha1")}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const i of r){let r,s;if("BlankNode"===i.subject.termType&&i.subject.value!==e)s=i.subject.value,r="p";else{if("BlankNode"!==i.object.termType||i.object.value===e)continue;s=i.object.value,r="r"}const a=this.hashRelatedBlankNode(s,i,t,r),o=n.get(a);o?o.push(s):n.set(a,[s])}return n}}},function(e,t){},function(e,t,n){const r=n(31),i={};e.exports=i,i.setupDocumentLoaders=function(e){"undefined"!=typeof XMLHttpRequest&&(e.documentLoaders.xhr=r,e.useDocumentLoader("xhr"))},i.setupGlobals=function(e){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})}},function(e,t,n){const{parseLinkHeader:r,buildHeaders:i}=n(2),{LINK_HEADER_CONTEXT:s}=n(14),a=n(3),o=n(19),{prependBase:l}=n(5),u=/(^|(\r\n))link:/i;e.exports=({secure:e,headers:t={},xhr:n}={headers:{}})=>(t=i(t),(new o).wrapLoader((async function i(o){if(0!==o.indexOf("http:")&&0!==o.indexOf("https:"))throw new a('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:o});if(e&&0!==o.indexOf("https"))throw new a(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:o});let c;try{c=await function(e,t,n){const r=new(e=e||XMLHttpRequest);return new Promise(((e,i)=>{r.onload=()=>e(r),r.onerror=e=>i(e),r.open("GET",t,!0);for(const t in n)r.setRequestHeader(t,n[t]);r.send()}))}(n,o,t)}catch(m){throw new a("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:o,cause:m})}if(c.status>=400)throw new a("URL could not be dereferenced: "+c.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:o,httpStatusCode:c.status});let d={contextUrl:null,documentUrl:o,document:c.response},p=null;const h=c.getResponseHeader("Content-Type");let f;if(u.test(c.getAllResponseHeaders())&&(f=c.getResponseHeader("Link")),f&&"application/ld+json"!==h){const e=r(f),t=e[s];if(Array.isArray(t))throw new a("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:o});t&&(d.contextUrl=t.target),p=e.alternate,p&&"application/ld+json"==p.type&&!(h||"").match(/^application\/(\w*\+)?json$/)&&(d=await i(l(o,p.target)))}return d})))},function(e,t,n){const{isArray:r,isObject:i,isString:s}=n(1),{asArray:a}=n(2),{prependBase:o}=n(5),l=n(3),u=n(33);function c(e){throw new l("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}e.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:n,base:o,cycles:l=new Set}){t&&i(t)&&t["@context"]&&(t=t["@context"]),t=a(t);const d=[];for(const a of t){if(s(a)){let t=this._get(a);t||(t=await this._resolveRemoteContext({activeCtx:e,url:a,documentLoader:n,base:o,cycles:l})),r(t)?d.push(...t):d.push(t);continue}if(null===a){d.push(new u({document:null}));continue}i(a)||c(t);const p=JSON.stringify(a);let h=this._get(p);h||(h=new u({document:a}),this._cacheResolvedContext({key:p,resolved:h,tag:"static"})),d.push(h)}return d}_get(e){let t=this.perOpCache.get(e);if(!t){const n=this.sharedCache.get(e);n&&(t=n.get("static"),t&&this.perOpCache.set(e,t))}return t}_cacheResolvedContext({key:e,resolved:t,tag:n}){if(this.perOpCache.set(e,t),void 0!==n){let r=this.sharedCache.get(e);r||(r=new Map,this.sharedCache.set(e,r)),r.set(n,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:n,base:a,cycles:l}){t=o(a,t);const{context:u,remoteDoc:c}=await this._fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:l});!function e({context:t,base:n}){if(!t)return;const a=t["@context"];if(s(a))t["@context"]=o(n,a);else if(r(a))for(let r=0;r<a.length;++r){const t=a[r];s(t)?a[r]=o(n,t):i(t)&&e({context:{"@context":t},base:n})}else if(i(a))for(const r in a)e({context:a[r],base:n})}({context:u,base:a=c.documentUrl||t});const d=await this.resolve({activeCtx:e,context:u,documentLoader:n,base:a,cycles:l});return this._cacheResolvedContext({key:t,resolved:d,tag:c.tag}),d}async _fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:a}){if(a.size>10)throw new l("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:10});if(a.has(t))throw new l("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let o,u;a.add(t);try{u=await n(t),o=u.document||null,s(o)&&(o=JSON.parse(o))}catch(c){throw new l("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:c})}if(!i(o))throw new l("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return o="@context"in o?{"@context":o["@context"]}:{"@context":{}},u.contextUrl&&(r(o["@context"])||(o["@context"]=[o["@context"]]),o["@context"].push(u.contextUrl)),{context:o,remoteDoc:u}}}},function(e,t,n){const r=n(20);e.exports=class{constructor({document:e}){this.document=e,this.cache=new r({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,t){this.cache.set(e,t)}}},function(e,t,n){function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function i(e,t,n){var r=t===e.head?new o(n,null,t,e):new o(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function s(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function o(e,t,n,r){if(!(this instanceof o))return new o(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=o,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,s=this.head;null!==s&&i<e;i++)s=s.next;for(;null!==s&&i<t;i++,s=s.next)n.push(s.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,s=this.tail;null!==s&&i>t;i--)s=s.prev;for(;null!==s&&i>e;i--,s=s.prev)n.push(s.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,s=this.head;null!==s&&r<e;r++)s=s.next;var a=[];for(r=0;s&&r<t;r++)a.push(s.value),s=this.removeNode(s);for(null===s&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev),r=0;r<n.length;r++)s=i(this,s,n[r]);return a},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(35)(r)}catch(l){}},function(e,t,n){e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},function(e,t,n){e.exports=n(11).NQuads},function(e,t,n){const r=n(3),{isArray:i,isObject:s,isEmptyObject:a,isString:o,isUndefined:l}=n(1),{isList:u,isValue:c,isGraph:d,isSubject:p}=n(4),{expandIri:h,getContextValue:f,isKeyword:m,process:v,processingMode:g}=n(6),{isAbsolute:y}=n(5),{addValue:b,asArray:w,getValues:x,validateTypeValue:_}=n(2),k={};e.exports=k;const S=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function R({activeCtx:e,activeProperty:t,value:n,options:r}){if(null==n)return null;const i=h(e,t,{vocab:!0},r);if("@id"===i)return h(e,n,{base:!0},r);if("@type"===i)return h(e,n,{vocab:!0,base:!0},r);const s=f(e,t,"@type");if(("@id"===s||"@graph"===i)&&o(n))return{"@id":h(e,n,{base:!0},r)};if("@vocab"===s&&o(n))return{"@id":h(e,n,{vocab:!0,base:!0},r)};if(m(i))return n;const a={};if(s&&!["@id","@vocab","@none"].includes(s))a["@type"]=s;else if(o(n)){const n=f(e,t,"@language");null!==n&&(a["@language"]=n);const r=f(e,t,"@direction");null!==r&&(a["@direction"]=r)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),a["@value"]=n,a}function A(e,t,n,s){const a=[],l=Object.keys(t).sort();for(const u of l){const l=h(e,u,{vocab:!0},s);let c=t[u];i(c)||(c=[c]);for(const e of c){if(null===e)continue;if(!o(e))throw new r("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const i={"@value":e};"@none"!==l&&(i["@language"]=u.toLowerCase()),n&&(i["@direction"]=n),a.push(i)}}return a}async function I({activeCtx:e,options:t,activeProperty:n,value:s,expansionMap:a,asGraph:o,indexKey:u,propertyIndex:p}){const m=[],g=Object.keys(s).sort(),y="@type"===u;for(let w of g){if(y){const n=f(e,w,"@context");l(n)||(e=await v({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let g,x=s[w];i(x)||(x=[x]),x=await k.expand({activeCtx:e,activeProperty:n,element:x,options:t,insideList:!1,insideIndex:!0,expansionMap:a}),g=p?"@none"===w?"@none":R({activeCtx:e,activeProperty:u,value:w,options:t}):h(e,w,{vocab:!0},t),"@id"===u?w=h(e,w,{base:!0},t):y&&(w=g);for(let e of x){if(o&&!d(e)&&(e={"@graph":[e]}),"@type"===u)"@none"===g||(e["@type"]?e["@type"]=[w].concat(e["@type"]):e["@type"]=[w]);else{if(c(e)&&!["@language","@type","@index"].includes(u))throw new r(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${u}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});p?"@none"!==g&&b(e,p,g,{propertyIsArray:!0,prependValue:!0}):"@none"===g||u in e||(e[u]=w)}m.push(e)}}return m}k.expand=async({activeCtx:e,activeProperty:t=null,element:n,options:d={},insideList:C=!1,insideIndex:E=!1,typeScopedContext:O=null,expansionMap:D=(()=>{})})=>{if(null==n)return null;if("@default"===t&&(d=Object.assign({},d,{isFrame:!1})),!i(n)&&!s(n)){if(!C&&(null===t||"@graph"===h(e,t,{vocab:!0},d))){const r=await D({unmappedValue:n,activeCtx:e,activeProperty:t,options:d,insideList:C});return void 0===r?null:r}return R({activeCtx:e,activeProperty:t,value:n,options:d})}if(i(n)){let r=[];const s=f(e,t,"@container")||[];C=C||s.includes("@list");for(let a=0;a<n.length;++a){let s=await k.expand({activeCtx:e,activeProperty:t,element:n[a],options:d,expansionMap:D,insideIndex:E,typeScopedContext:O});C&&i(s)&&(s={"@list":s}),null===s&&(s=await D({unmappedValue:n[a],activeCtx:e,activeProperty:t,parent:n,index:a,options:d,expandedParent:r,insideList:C}),void 0===s)||(i(s)?r=r.concat(s):r.push(s))}return r}const T=h(e,t,{vocab:!0},d),P=f(e,t,"@context");O=O||(e.previousContext?e:null);let j=Object.keys(n).sort(),M=!E;if(M&&O&&j.length<=2&&!j.includes("@context"))for(const r of j){const t=h(O,r,{vocab:!0},d);if("@value"===t){M=!1,e=O;break}if("@id"===t&&1===j.length){M=!1;break}}M&&(e=e.revertToPreviousContext()),l(P)||(e=await v({activeCtx:e,localCtx:P,propagate:!0,overrideProtected:!0,options:d})),"@context"in n&&(e=await v({activeCtx:e,localCtx:n["@context"],options:d})),O=e;let L=null;for(const r of j)if("@type"===h(e,r,{vocab:!0},d)){L=L||r;const t=n[r],i=Array.isArray(t)?t.length>1?t.slice().sort():t:[t];for(const n of i){const t=f(O,n,"@context");l(t)||(e=await v({activeCtx:e,localCtx:t,options:d,propagate:!1}))}}let $={};await async function e({activeCtx:t,activeProperty:n,expandedActiveProperty:d,element:x,expandedParent:R,options:C={},insideList:E,typeKey:O,typeScopedContext:D,expansionMap:T}){const P=Object.keys(x).sort(),j=[];let M;const L=x[O]&&"@json"===h(t,i(x[O])?x[O][0]:x[O],{vocab:!0},C);for(const $ of P){let e,O=x[$];if("@context"===$)continue;let P=h(t,$,{vocab:!0},C);if((null===P||!y(P)&&!m(P))&&(P=T({unmappedProperty:$,activeCtx:t,activeProperty:n,parent:x,options:C,insideList:E,value:O,expandedParent:R}),void 0===P))continue;if(m(P)){if("@reverse"===d)throw new r("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:O});if(P in R&&"@included"!==P&&"@type"!==P)throw new r("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:P})}if("@id"===P){if(!o(O)){if(!C.isFrame)throw new r('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:O});if(s(O)){if(!a(O))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:O})}else{if(!i(O))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:O});if(!O.every((e=>o(e))))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:O})}}b(R,"@id",w(O).map((e=>o(e)?h(t,e,{base:!0},C):e)),{propertyIsArray:C.isFrame});continue}if("@type"===P){s(O)&&(O=Object.fromEntries(Object.entries(O).map((([e,t])=>[h(D,e,{vocab:!0}),w(t).map((e=>h(D,e,{base:!0,vocab:!0})))])))),_(O,C.isFrame),b(R,"@type",w(O).map((e=>o(e)?h(D,e,{base:!0,vocab:!0},C):e)),{propertyIsArray:C.isFrame});continue}if("@included"===P&&g(t,1.1)){const e=w(await k.expand({activeCtx:t,activeProperty:n,element:O,options:C,expansionMap:T}));if(!e.every((e=>p(e))))throw new r("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:O});b(R,"@included",e,{propertyIsArray:!0});continue}if("@graph"===P&&!s(O)&&!i(O))throw new r('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:O});if("@value"===P){M=O,L&&g(t,1.1)?R["@value"]=O:b(R,"@value",O,{propertyIsArray:C.isFrame});continue}if("@language"===P){if(null===O)continue;if(!o(O)&&!C.isFrame)throw new r('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:O});O=w(O).map((e=>o(e)?e.toLowerCase():e));for(const e of O)o(e)&&!e.match(S)&&console.warn("@language must be valid BCP47: "+e);b(R,"@language",O,{propertyIsArray:C.isFrame});continue}if("@direction"===P){if(!o(O)&&!C.isFrame)throw new r('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:O});O=w(O);for(const e of O)if(o(e)&&"ltr"!==e&&"rtl"!==e)throw new r('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:O});b(R,"@direction",O,{propertyIsArray:C.isFrame});continue}if("@index"===P){if(!o(O))throw new r('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:O});b(R,"@index",O);continue}if("@reverse"===P){if(!s(O))throw new r('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:O});if(e=await k.expand({activeCtx:t,activeProperty:"@reverse",element:O,options:C,expansionMap:T}),"@reverse"in e)for(const t in e["@reverse"])b(R,t,e["@reverse"][t],{propertyIsArray:!0});let n=R["@reverse"]||null;for(const t in e){if("@reverse"===t)continue;null===n&&(n=R["@reverse"]={}),b(n,t,[],{propertyIsArray:!0});const i=e[t];for(let s=0;s<i.length;++s){const a=i[s];if(c(a)||u(a))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:e});b(n,t,a,{propertyIsArray:!0})}}continue}if("@nest"===P){j.push($);continue}let U=t;const N=f(t,$,"@context");l(N)||(U=await v({activeCtx:t,localCtx:N,propagate:!0,overrideProtected:!0,options:C}));const F=f(U,$,"@container")||[];if(F.includes("@language")&&s(O))e=A(U,O,f(U,$,"@direction"),C);else if(F.includes("@index")&&s(O)){const n=F.includes("@graph"),r=f(U,$,"@index")||"@index",i="@index"!==r&&h(t,r,{vocab:!0},C);e=await I({activeCtx:U,options:C,activeProperty:$,value:O,expansionMap:T,asGraph:n,indexKey:r,propertyIndex:i})}else if(F.includes("@id")&&s(O)){const t=F.includes("@graph");e=await I({activeCtx:U,options:C,activeProperty:$,value:O,expansionMap:T,asGraph:t,indexKey:"@id"})}else if(F.includes("@type")&&s(O))e=await I({activeCtx:U.revertToPreviousContext(),options:C,activeProperty:$,value:O,expansionMap:T,asGraph:!1,indexKey:"@type"});else{const r="@list"===P;if(r||"@set"===P){let t=n;r&&"@graph"===d&&(t=null),e=await k.expand({activeCtx:U,activeProperty:t,element:O,options:C,insideList:r,expansionMap:T})}else e="@json"===f(t,$,"@type")?{"@type":"@json","@value":O}:await k.expand({activeCtx:U,activeProperty:$,element:O,options:C,insideList:!1,expansionMap:T})}if(null!==e||"@value"===P||(e=T({unmappedValue:O,expandedProperty:P,activeCtx:U,activeProperty:n,parent:x,options:C,insideList:E,key:$,expandedParent:R}),void 0!==e))if("@list"!==P&&!u(e)&&F.includes("@list")&&(e={"@list":w(e)}),F.includes("@graph")&&!F.some((e=>"@id"===e||"@index"===e))&&(e=w(e).map((e=>({"@graph":w(e)})))),U.mappings.has($)&&U.mappings.get($).reverse){const t=R["@reverse"]=R["@reverse"]||{};e=w(e);for(let n=0;n<e.length;++n){const i=e[n];if(c(i)||u(i))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:e});b(t,P,i,{propertyIsArray:!0})}}else b(R,P,e,{propertyIsArray:!0})}if("@value"in R)if("@json"===R["@type"]&&g(t,1.1));else if((s(M)||i(M))&&!C.isFrame)throw new r('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:M});for(const a of j){const o=i(x[a])?x[a]:[x[a]];for(const i of o){if(!s(i)||Object.keys(i).some((e=>"@value"===h(t,e,{vocab:!0},C))))throw new r("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:i});await e({activeCtx:t,activeProperty:n,expandedActiveProperty:d,element:i,expandedParent:R,options:C,insideList:E,typeScopedContext:D,typeKey:O,expansionMap:T})}}}({activeCtx:e,activeProperty:t,expandedActiveProperty:T,element:n,expandedParent:$,options:d,insideList:C,typeKey:L,typeScopedContext:O,expansionMap:D}),j=Object.keys($);let U=j.length;if("@value"in $){if("@type"in $&&("@language"in $||"@direction"in $))throw new r('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:$});let i=U-1;if("@type"in $&&(i-=1),"@index"in $&&(i-=1),"@language"in $&&(i-=1),"@direction"in $&&(i-=1),0!==i)throw new r('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:$});const s=null===$["@value"]?[]:w($["@value"]),l=x($,"@type");if(g(e,1.1)&&l.includes("@json")&&1===l.length);else if(0===s.length){const r=await D({unmappedValue:$,activeCtx:e,activeProperty:t,element:n,options:d,insideList:C});$=void 0!==r?r:null}else{if(!s.every((e=>o(e)||a(e)))&&"@language"in $)throw new r("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:$});if(!l.every((e=>y(e)&&!(o(e)&&0===e.indexOf("_:"))||a(e))))throw new r('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:$})}}else if("@type"in $&&!i($["@type"]))$["@type"]=[$["@type"]];else if("@set"in $||"@list"in $){if(U>1&&(2!==U||!("@index"in $)))throw new r('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:$});"@set"in $&&($=$["@set"],j=Object.keys($),U=j.length)}else if(1===U&&"@language"in $){const r=await D($,{unmappedValue:$,activeCtx:e,activeProperty:t,element:n,options:d,insideList:C});$=void 0!==r?r:null}if(s($)&&!d.keepFreeFloatingNodes&&!C&&(null===t||"@graph"===T)&&(0===U||"@value"in $||"@list"in $||1===U&&"@id"in $)){const r=await D({unmappedValue:$,activeCtx:e,activeProperty:t,element:n,options:d,insideList:C});$=void 0!==r?r:null}return $}},function(e,t,n){const{isSubjectReference:r}=n(4),{createMergedNodeMap:i}=n(10),s={};e.exports=s,s.flatten=e=>{const t=i(e),n=[],s=Object.keys(t).sort();for(let i=0;i<s.length;++i){const e=t[s[i]];r(e)||n.push(e)}return n}},function(e,t,n){const r=n(3),i=n(4),s=n(1),a=n(2),{RDF_LIST:o,RDF_FIRST:l,RDF_REST:u,RDF_NIL:c,RDF_TYPE:d,RDF_JSON_LITERAL:p,XSD_BOOLEAN:h,XSD_DOUBLE:f,XSD_INTEGER:m,XSD_STRING:v}=n(14),g=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,y={};function b(e,t,n){if(e.termType.endsWith("Node"))return{"@id":e.value};const i={"@value":e.value};if(e.language)i["@language"]=e.language;else{let o=e.datatype.value;if(o||(o=v),o===p){o="@json";try{i["@value"]=JSON.parse(i["@value"])}catch(a){throw new r("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:i["@value"],cause:a})}}if(t){if(o===h)"true"===i["@value"]?i["@value"]=!0:"false"===i["@value"]&&(i["@value"]=!1);else if(s.isNumeric(i["@value"]))if(o===m){const e=parseInt(i["@value"],10);e.toFixed(0)===i["@value"]&&(i["@value"]=e)}else o===f&&(i["@value"]=parseFloat(i["@value"]));[h,m,f,v].includes(o)||(i["@type"]=o)}else if("i18n-datatype"===n&&o.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=o.split(/[#_]/);e.length>0&&(i["@language"]=e,e.match(g)||console.warn("@language must be valid BCP47: "+e)),i["@direction"]=t}else o!==v&&(i["@type"]=o)}return i}e.exports=y,y.fromRDF=async(e,{useRdfType:t=!1,useNativeTypes:n=!1,rdfDirection:r=null})=>{const p={},h={"@default":p},f={};for(const i of e){const e="DefaultGraph"===i.graph.termType?"@default":i.graph.value;e in h||(h[e]={}),"@default"===e||e in p||(p[e]={"@id":e});const s=h[e],o=i.subject.value,l=i.predicate.value,u=i.object;o in s||(s[o]={"@id":o});const m=s[o],v=u.termType.endsWith("Node");if(v&&!(u.value in s)&&(s[u.value]={"@id":u.value}),l===d&&!t&&v){a.addValue(m,"@type",u.value,{propertyIsArray:!0});continue}const g=b(u,n,r);if(a.addValue(m,l,g,{propertyIsArray:!0}),v)if(u.value===c){const e=s[u.value];"usages"in e||(e.usages=[]),e.usages.push({node:m,property:l,value:g})}else u.value in f?f[u.value]=!1:f[u.value]={node:m,property:l,value:g}}for(const a in h){const e=h[a];if(!(c in e))continue;const t=e[c];if(t.usages){for(let n of t.usages){let t=n.node,r=n.property,a=n.value;const c=[],d=[];let p=Object.keys(t).length;for(;r===u&&s.isObject(f[t["@id"]])&&s.isArray(t[l])&&1===t[l].length&&s.isArray(t[u])&&1===t[u].length&&(3===p||4===p&&s.isArray(t["@type"])&&1===t["@type"].length&&t["@type"][0]===o)&&(c.push(t[l][0]),d.push(t["@id"]),n=f[t["@id"]],t=n.node,r=n.property,a=n.value,p=Object.keys(t).length,i.isBlankNode(t)););delete a["@id"],a["@list"]=c.reverse();for(const n of d)delete e[n]}delete t.usages}}const m=[],v=Object.keys(p).sort();for(const s of v){const e=p[s];if(s in h){const t=e["@graph"]=[],n=h[s],r=Object.keys(n).sort();for(const e of r){const r=n[e];i.isSubjectReference(r)||t.push(r)}}i.isSubjectReference(e)||m.push(e)}return m}},function(e,t,n){const{createNodeMap:r}=n(10),{isKeyword:i}=n(6),s=n(4),a=n(41),o=n(1),l=n(2),{RDF_FIRST:u,RDF_REST:c,RDF_NIL:d,RDF_TYPE:p,RDF_JSON_LITERAL:h,RDF_LANGSTRING:f,XSD_BOOLEAN:m,XSD_DOUBLE:v,XSD_INTEGER:g,XSD_STRING:y}=n(14),{isAbsolute:b}=n(5),w={};function x(e,t,n,r,s){const a=Object.keys(t).sort();for(const o of a){const a=t[o],l=Object.keys(a).sort();for(let t of l){const l=a[t];if("@type"===t)t=p;else if(i(t))continue;for(const i of l){const a={termType:o.startsWith("_:")?"BlankNode":"NamedNode",value:o};if(!b(o))continue;const l={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!b(t))continue;if("BlankNode"===l.termType&&!s.produceGeneralizedRdf)continue;const u=_(i,r,e,n,s.rdfDirection);u&&e.push({subject:a,predicate:l,object:u,graph:n})}}}}function _(e,t,n,r,i){const l={};if(s.isValue(e)){l.termType="Literal",l.value=void 0,l.datatype={termType:"NamedNode"};let t=e["@value"];const n=e["@type"]||null;if("@json"===n)l.value=a(t),l.datatype.value=h;else if(o.isBoolean(t))l.value=t.toString(),l.datatype.value=n||m;else if(o.isDouble(t)||n===v)o.isDouble(t)||(t=parseFloat(t)),l.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),l.datatype.value=n||v;else if(o.isNumber(t))l.value=t.toFixed(0),l.datatype.value=n||g;else if("i18n-datatype"===i&&"@direction"in e){const n="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+"_"+e["@direction"];l.datatype.value=n,l.value=t}else"@language"in e?(l.value=t,l.datatype.value=n||f,l.language=e["@language"]):(l.value=t,l.datatype.value=n||y)}else if(s.isList(e)){const s=function(e,t,n,r,i){const s={termType:"NamedNode",value:u},a={termType:"NamedNode",value:c},o={termType:"NamedNode",value:d},l=e.pop(),p=l?{termType:"BlankNode",value:t.getId()}:o;let h=p;for(const u of e){const e=_(u,t,n,r,i),o={termType:"BlankNode",value:t.getId()};n.push({subject:h,predicate:s,object:e,graph:r}),n.push({subject:h,predicate:a,object:o,graph:r}),h=o}if(l){const e=_(l,t,n,r,i);n.push({subject:h,predicate:s,object:e,graph:r}),n.push({subject:h,predicate:a,object:o,graph:r})}return p}(e["@list"],t,n,r,i);l.termType=s.termType,l.value=s.value}else{const t=o.isObject(e)?e["@id"]:e;l.termType=t.startsWith("_:")?"BlankNode":"NamedNode",l.value=t}return"NamedNode"!==l.termType||b(l.value)?l:null}e.exports=w,w.toRDF=(e,t)=>{const n=new l.IdentifierIssuer("_:b"),i={"@default":{}};r(e,i,"@default",n);const s=[],a=Object.keys(i).sort();for(const r of a){let e;if("@default"===r)e={termType:"DefaultGraph",value:""};else{if(!b(r))continue;e=r.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},e.value=r}x(s,i[r],e,n,t)}return s}},function(e,t,n){e.exports=function e(t){return null===t||"object"!=typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce(((t,n,r)=>t+(0===r?"":",")+e(void 0===n||"symbol"==typeof n?null:n)),"")+"]":"{"+Object.keys(t).sort().reduce(((n,r,i)=>void 0===t[r]||"symbol"==typeof t[r]?n:n+(0===n.length?"":",")+e(r)+":"+e(t[r])),"")+"}"}},function(e,t,n){const{isKeyword:r}=n(6),i=n(4),s=n(1),a=n(2),o=n(5),l=n(3),{createNodeMap:u,mergeNodeMapGraphs:c}=n(10),d={};function p(e){const t={};for(const n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function h(e,t,n){for(let r=n.length-1;r>=0;--r){const i=n[r];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function f(e,t,n){const r="@"+n;let i=r in e?e[r][0]:t[n];if("embed"===n)if(!0===i)i="@once";else if(!1===i)i="@never";else if("@always"!==i&&"@never"!==i&&"@link"!==i&&"@first"!==i&&"@last"!==i&&"@once"!==i)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return i}function m(e){if(!s.isArray(e)||1!==e.length||!s.isObject(e[0]))throw new l("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const t of a.asArray(e[0]["@id"]))if(!s.isObject(t)&&!o.isAbsolute(t)||s.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const t of a.asArray(e[0]["@type"]))if(!s.isObject(t)&&!o.isAbsolute(t)||s.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function v(e,t,n,o){let l=!0,u=!1;for(const c in n){let d=!1;const p=a.getValues(t,c),h=0===a.getValues(n,c).length;if("@id"===c){if(s.isEmptyObject(n["@id"][0]||{})?d=!0:n["@id"].length>=0&&(d=n["@id"].includes(p[0])),!o.requireAll)return d}else if("@type"===c){if(l=!1,h){if(p.length>0)return!1;d=!0}else if(1===n["@type"].length&&s.isEmptyObject(n["@type"][0]))d=p.length>0;else for(const e of n["@type"])d=!(!s.isObject(e)||!("@default"in e))||d||p.some((t=>t===e));if(!o.requireAll)return d}else{if(r(c))continue;{const t=a.getValues(n,c)[0];let r=!1;if(t&&(m([t]),r="@default"in t),l=!1,0===p.length&&r)continue;if(p.length>0&&h)return!1;if(void 0===t){if(p.length>0)return!1;d=!0}else if(i.isList(t)){const n=t["@list"][0];if(i.isList(p[0])){const t=p[0]["@list"];i.isValue(n)?d=t.some((e=>w(n,e))):(i.isSubject(n)||i.isSubjectReference(n))&&(d=t.some((t=>b(e,n,t,o))))}}else d=i.isValue(t)?p.some((e=>w(t,e))):i.isSubjectReference(t)?p.some((n=>b(e,t,n,o))):!!s.isObject(t)&&p.length>0}}if(!d&&o.requireAll)return!1;u=u||d}return l||u}function g(e,t){const n=e.uniqueEmbeds[e.graph],r=n[t],i=r.parent,o=r.property,l={"@id":t};if(s.isArray(i)){for(let s=0;s<i.length;++s)if(a.compareValues(i[s],l)){i[s]=l;break}}else{const e=s.isArray(i[o]);a.removeValue(i,o,l,{propertyIsArray:e}),a.addValue(i,o,l,{propertyIsArray:e})}const u=e=>{const t=Object.keys(n);for(const r of t)r in n&&s.isObject(n[r].parent)&&n[r].parent["@id"]===e&&(delete n[r],u(r))};u(t)}
/**
       * Removes the @preserve keywords from expanded result of framing.
       *
       * @param input the framed, framed output.
       * @param options the framing options used.
       *
       * @return the resulting output.
       */function y(e,t,n){s.isObject(e)?a.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function b(e,t,n,r){if(!("@id"in n))return!1;const i=e.subjects[n["@id"]];return i&&v(e,i,t,r)}function w(e,t){const n=t["@value"],r=t["@type"],i=t["@language"],a=e["@value"]?s.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],o=e["@type"]?s.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],l=e["@language"]?s.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===a.length&&0===o.length&&0===l.length||!(!a.includes(n)&&!s.isEmptyObject(a[0]))&&!!(!r&&0===o.length||o.includes(r)||r&&s.isEmptyObject(o[0]))&&!!(!i&&0===l.length||l.includes(i)||i&&s.isEmptyObject(l[0]))}e.exports=d,d.frameMergedOrDefault=(e,t,n)=>{const r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},o=new a.IdentifierIssuer("_:b");u(e,r.graphMap,"@default",o),n.merged&&(r.graphMap["@merged"]=c(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];const l=[];return d.frame(r,Object.keys(r.subjects).sort(),t,l),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter((e=>1===r.bnodeMap[e].length))),n.link={},function e(t,n){if(s.isArray(t))return t.map((t=>e(t,n)));if(s.isObject(t)){
// remove @preserve
if("@preserve"in t)return t["@preserve"][0];if(i.isValue(t))return t;if(i.isList(t))return t["@list"]=e(t["@list"],n),t;if("@id"in t){const e=t["@id"];if(n.link.hasOwnProperty(e)){const r=n.link[e].indexOf(t);if(-1!==r)return n.link[e][r];n.link[e].push(t)}else n.link[e]=[t]}for(const r in t)"@id"===r&&n.bnodesToClear.includes(t[r])?delete t["@id"]:t[r]=e(t[r],n)}return t}(l,n)},d.frame=(e,t,n,o,u=null)=>{m(n),n=n[0];const c=e.options,b={embed:f(n,c,"embed"),explicit:f(n,c,"explicit"),requireAll:f(n,c,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const x=e.link[e.graph],_=function(e,t,n,r){const i={};for(const s of t){const t=e.graphMap[e.graph][s];v(e,t,n,r)&&(i[s]=t)}return i}(e,t,n,b),k=Object.keys(_).sort();for(const m of k){const v=_[m];if(null===u?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===b.embed&&m in x){y(o,u,x[m]);continue}const k={"@id":m};if(0===m.indexOf("_:")&&a.addValue(e.bnodeMap,m,k,{propertyIsArray:!0}),x[m]=k,("@first"===b.embed||"@last"===b.embed)&&e.is11)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(m))if(!e.embedded||"@never"!==b.embed&&!h(v,e.graph,e.subjectStack))if(!e.embedded||"@first"!=b.embed&&"@once"!=b.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(m)){if("@last"===b.embed&&m in e.uniqueEmbeds[e.graph]&&g(e,m),e.uniqueEmbeds[e.graph][m]={parent:o,property:u},e.subjectStack.push({subject:v,graph:e.graph}),m in e.graphMap){let t=!1,r=null;"@graph"in n?(r=n["@graph"][0],t=!("@merged"===m||"@default"===m),s.isObject(r)||(r={})):(t="@merged"!==e.graph,r={}),t&&d.frame({...e,graph:m,embedded:!1},Object.keys(e.graphMap[m]).sort(),[r],k,"@graph")}"@included"in n&&d.frame({...e,embedded:!1},t,n["@included"],k,"@included");for(const t of Object.keys(v).sort())if(r(t)){if(k[t]=a.clone(v[t]),"@type"===t)for(const n of v["@type"])0===n.indexOf("_:")&&a.addValue(e.bnodeMap,n,k,{propertyIsArray:!0})}else if(!b.explicit||t in n)for(const r of v[t]){const s=t in n?n[t]:p(b);if(i.isList(r)){const s=n[t]&&n[t][0]&&n[t][0]["@list"]?n[t][0]["@list"]:p(b),o={"@list":[]};y(k,t,o);const l=r["@list"];for(const t of l)i.isSubjectReference(t)?d.frame({...e,embedded:!0},[t["@id"]],s,o,"@list"):y(o,"@list",a.clone(t))}else i.isSubjectReference(r)?d.frame({...e,embedded:!0},[r["@id"]],s,k,t):w(s[0],r)&&y(k,t,a.clone(r))}for(const e of Object.keys(n).sort()){if("@type"===e){if(!s.isObject(n[e][0])||!("@default"in n[e][0]))continue}else if(r(e))continue;const t=n[e][0]||{};if(!f(t,c,"omitDefault")&&!(e in k)){let n="@null";"@default"in t&&(n=a.clone(t["@default"])),s.isArray(n)||(n=[n]),k[e]=[{"@preserve":n}]}}for(const t of Object.keys(n["@reverse"]||{}).sort()){const r=n["@reverse"][t];for(const n of Object.keys(e.subjects))a.getValues(e.subjects[n],t).some((e=>e["@id"]===m))&&(k["@reverse"]=k["@reverse"]||{},a.addValue(k["@reverse"],t,[],{propertyIsArray:!0}),d.frame({...e,embedded:!0},[n],r,k["@reverse"][t],u))}y(o,u,k),e.subjectStack.pop()}else y(o,u,k);else y(o,u,k)}},d.cleanupNull=(e,t)=>{if(s.isArray(e))return e.map((e=>d.cleanupNull(e,t))).filter((e=>e));if("@null"===e)return null;if(s.isObject(e)){if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)e[n]=d.cleanupNull(e[n],t)}return e}},function(e,t,n){const r=n(3),{isArray:i,isObject:s,isString:a,isUndefined:o}=n(1),{isList:l,isValue:u,isGraph:c,isSimpleGraph:d,isSubjectReference:p}=n(4),{expandIri:h,getContextValue:f,isKeyword:m,process:v,processingMode:g}=n(6),{removeBase:y,prependBase:b}=n(5),{addValue:w,asArray:x,compareShortestLeast:_}=n(2),k={};function S(e,t,n){if("@nest"!==h(e,t,{vocab:!0},n))throw new r("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}e.exports=k,k.compact=async({activeCtx:e,activeProperty:t=null,element:n,options:h={},compactionMap:y=(()=>{})})=>{if(i(n)){let r=[];for(let i=0;i<n.length;++i){let s=await k.compact({activeCtx:e,activeProperty:t,element:n[i],options:h,compactionMap:y});null===s&&(s=await y({unmappedValue:n[i],activeCtx:e,activeProperty:t,parent:n,index:i,options:h}),void 0===s)||r.push(s)}return h.compactArrays&&1===r.length&&0===(f(e,t,"@container")||[]).length&&(r=r[0]),r}const b=f(e,t,"@context");if(o(b)||(e=await v({activeCtx:e,localCtx:b,propagate:!0,overrideProtected:!0,options:h})),s(n)){if(h.link&&"@id"in n&&h.link.hasOwnProperty(n["@id"])){const e=h.link[n["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===n)return e[t].compacted}if(u(n)||p(n)){const r=k.compactValue({activeCtx:e,activeProperty:t,value:n,options:h});return h.link&&p(n)&&(h.link.hasOwnProperty(n["@id"])||(h.link[n["@id"]]=[]),h.link[n["@id"]].push({expanded:n,compacted:r})),r}if(l(n)&&(f(e,t,"@container")||[]).includes("@list"))return k.compact({activeCtx:e,activeProperty:t,element:n["@list"],options:h,compactionMap:y});const b="@reverse"===t,_={},R=e;u(n)||p(n)||(e=e.revertToPreviousContext());const A=f(R,t,"@context");o(A)||(e=await v({activeCtx:e,localCtx:A,propagate:!0,overrideProtected:!0,options:h})),h.link&&"@id"in n&&(h.link.hasOwnProperty(n["@id"])||(h.link[n["@id"]]=[]),h.link[n["@id"]].push({expanded:n,compacted:_}));let I=n["@type"]||[];I.length>1&&(I=Array.from(I).sort());const C=e;for(const t of I){const n=k.compactIri({activeCtx:C,iri:t,relativeTo:{vocab:!0}}),r=f(R,n,"@context");o(r)||(e=await v({activeCtx:e,localCtx:r,options:h,propagate:!1}))}const E=Object.keys(n).sort();for(const o of E){const p=n[o];if("@id"!==o)if("@type"!==o)if("@reverse"!==o)if("@preserve"!==o)if("@index"!==o)if("@graph"!==o&&"@list"!==o&&"@included"!==o&&m(o)){const t=k.compactIri({activeCtx:e,iri:o,relativeTo:{vocab:!0}});w(_,t,p)}else{if(!i(p))throw new r("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===p.length){const t=k.compactIri({activeCtx:e,iri:o,value:p,relativeTo:{vocab:!0},reverse:b}),n=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let r=_;n&&(S(e,n,h),s(_[n])||(_[n]={}),r=_[n]),w(r,t,p,{propertyIsArray:!0})}for(const t of p){const n=k.compactIri({activeCtx:e,iri:o,value:t,relativeTo:{vocab:!0},reverse:b}),r=e.mappings.has(n)?e.mappings.get(n)["@nest"]:null;let p=_;r&&(S(e,r,h),s(_[r])||(_[r]={}),p=_[r]);const m=f(e,n,"@container")||[],v=c(t),g=l(t);let R;g?R=t["@list"]:v&&(R=t["@graph"]);let A=await k.compact({activeCtx:e,activeProperty:n,element:g||v?R:t,options:h,compactionMap:y});if(g){if(i(A)||(A=[A]),m.includes("@list")){w(p,n,A,{valueIsArray:!0,allowDuplicate:!0});continue}A={[k.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:A},"@index"in t&&(A[k.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(v)if(m.includes("@graph")&&(m.includes("@id")||m.includes("@index")&&d(t))){let r;p.hasOwnProperty(n)?r=p[n]:p[n]=r={};const i=(m.includes("@id")?t["@id"]:t["@index"])||k.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});w(r,i,A,{propertyIsArray:!h.compactArrays||m.includes("@set")})}else m.includes("@graph")&&d(t)?(i(A)&&A.length>1&&(A={"@included":A}),w(p,n,A,{propertyIsArray:!h.compactArrays||m.includes("@set")})):(i(A)&&1===A.length&&h.compactArrays&&(A=A[0]),A={[k.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:A},"@id"in t&&(A[k.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(A[k.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),w(p,n,A,{propertyIsArray:!h.compactArrays||m.includes("@set")}));else if(m.includes("@language")||m.includes("@index")||m.includes("@id")||m.includes("@type")){let r,i;if(p.hasOwnProperty(n)?r=p[n]:p[n]=r={},m.includes("@language"))u(A)&&(A=A["@value"]),i=t["@language"];else if(m.includes("@index")){const r=f(e,n,"@index")||"@index",s=k.compactIri({activeCtx:e,iri:r,relativeTo:{vocab:!0}});if("@index"===r)i=t["@index"],delete A[s];else{let e;if([i,...e]=x(A[r]||[]),a(i))switch(e.length){case 0:delete A[r];break;case 1:A[r]=e[0];break;default:A[r]=e}else i=null}}else if(m.includes("@id")){const t=k.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});i=A[t],delete A[t]}else if(m.includes("@type")){const r=k.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let s;switch([i,...s]=x(A[r]||[]),s.length){case 0:delete A[r];break;case 1:A[r]=s[0];break;default:A[r]=s}1===Object.keys(A).length&&"@id"in t&&(A=await k.compact({activeCtx:e,activeProperty:n,element:{"@id":t["@id"]},options:h,compactionMap:y}))}i||(i=k.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),w(r,i,A,{propertyIsArray:m.includes("@set")})}else{const e=!h.compactArrays||m.includes("@set")||m.includes("@list")||i(A)&&0===A.length||"@list"===o||"@graph"===o;w(p,n,A,{propertyIsArray:e})}}}else{if((f(e,t,"@container")||[]).includes("@index"))continue;const n=k.compactIri({activeCtx:e,iri:o,relativeTo:{vocab:!0}});w(_,n,p)}else{const n=await k.compact({activeCtx:e,activeProperty:t,element:p,options:h,compactionMap:y});i(n)&&0===n.length||w(_,o,n)}else{const t=await k.compact({activeCtx:e,activeProperty:"@reverse",element:p,options:h,compactionMap:y});for(const n in t)if(e.mappings.has(n)&&e.mappings.get(n).reverse){const r=t[n],i=(f(e,n,"@container")||[]).includes("@set")||!h.compactArrays;w(_,n,r,{propertyIsArray:i}),delete t[n]}if(Object.keys(t).length>0){const n=k.compactIri({activeCtx:e,iri:o,relativeTo:{vocab:!0}});w(_,n,t)}}else{let t=x(p).map((e=>k.compactIri({activeCtx:R,iri:e,relativeTo:{vocab:!0}})));1===t.length&&(t=t[0]);const n=k.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),r=(f(e,n,"@container")||[]).includes("@set")&&g(e,1.1)||i(t)&&0===p.length;w(_,n,t,{propertyIsArray:r})}else{let t=x(p).map((t=>k.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!1},base:h.base})));1===t.length&&(t=t[0]),_[k.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t}}return _}return n},k.compactIri=({activeCtx:e,iri:t,value:n=null,relativeTo:i={vocab:!1},reverse:a=!1,base:o=null})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const d=e.getInverse();if(m(t)&&t in d&&"@none"in d[t]&&"@type"in d[t]["@none"]&&"@none"in d[t]["@none"]["@type"])return d[t]["@none"]["@type"]["@none"];if(i.vocab&&t in d){const r=e["@language"]||"@none",i=[];s(n)&&"@index"in n&&!("@graph"in n)&&i.push("@index","@index@set"),s(n)&&"@preserve"in n&&(n=n["@preserve"][0]),c(n)?("@index"in n&&i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&i.push("@graph@id","@graph@id@set"),i.push("@graph","@graph@set","@set"),"@index"in n||i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||i.push("@graph@id","@graph@id@set")):s(n)&&!u(n)&&i.push("@id","@id@set","@type","@set@type");let o="@language",d="@null";if(a)o="@type",d="@reverse",i.push("@set");else if(l(n)){"@index"in n||i.push("@list");const e=n["@list"];if(0===e.length)o="@any",d="@none";else{let t=0===e.length?r:null,n=null;for(let r=0;r<e.length;++r){const i=e[r];let s="@none",a="@none";if(u(i)?"@direction"in i?s=`${(i["@language"]||"").toLowerCase()}_${i["@direction"]}`:"@language"in i?s=i["@language"].toLowerCase():"@type"in i?a=i["@type"]:s="@null":a="@id",null===t?t=s:s!==t&&u(i)&&(t="@none"),null===n?n=a:a!==n&&(n="@none"),"@none"===t&&"@none"===n)break}t=t||"@none",n=n||"@none","@none"!==n?(o="@type",d=n):d=t}}else{if(u(n))if("@language"in n&&!("@index"in n)){i.push("@language","@language@set"),d=n["@language"];const e=n["@direction"];e&&(d=`${d}_${e}`)}else"@direction"in n&&!("@index"in n)?d="_"+n["@direction"]:"@type"in n&&(o="@type",d=n["@type"]);else o="@type",d="@id";i.push("@set")}i.push("@none"),s(n)&&!("@index"in n)&&i.push("@index","@index@set"),u(n)&&1===Object.keys(n).length&&i.push("@language","@language@set");const p=function(e,t,n,r,i,a){null===a&&(a="@null");const o=[];if(("@id"===a||"@reverse"===a)&&s(n)&&"@id"in n){"@reverse"===a&&o.push("@reverse");const t=k.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===n["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}else{o.push(a);const e=o.find((e=>e.includes("_")));e&&o.push(e.replace(/^[^_]+_/,"_"))}o.push("@none");const l=e.inverse[t];for(const s of r){if(!(s in l))continue;const e=l[s][i];for(const t of o)if(t in e)return e[t]}return null}(e,t,n,i,o,d);if(null!==p)return p}if(i.vocab&&"@vocab"in e){const n=e["@vocab"];if(0===t.indexOf(n)&&t!==n){const r=t.substr(n.length);if(!e.mappings.has(r))return r}}let p=null;const h=[];let f=e.fastCurieMap;const v=t.length-1;for(let r=0;r<v&&t[r]in f;++r)f=f[t[r]],""in f&&h.push(f[""][0]);for(let r=h.length-1;r>=0;--r){const i=h[r],s=i.terms;for(const r of s){const s=r+":"+t.substr(i.iri.length);e.mappings.get(r)._prefix&&(!e.mappings.has(s)||null===n&&e.mappings.get(s)["@id"]===t)&&(null===p||_(s,p)<0)&&(p=s)}}if(null!==p)return p;for(const[s,l]of e.mappings)if(l&&l._prefix&&t.startsWith(s+":"))throw new r(`Absolute IRI "${t}" confused with prefix "${s}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return i.vocab?t:"@base"in e?e["@base"]?y(b(o,e["@base"]),t):t:y(o,t)},k.compactValue=({activeCtx:e,activeProperty:t,value:n,options:r})=>{if(u(n)){const r=f(e,t,"@type"),i=f(e,t,"@language"),s=f(e,t,"@direction"),o=f(e,t,"@container")||[],l="@index"in n&&!o.includes("@index");if(!l&&"@none"!==r){if(n["@type"]===r)return n["@value"];if("@language"in n&&n["@language"]===i&&"@direction"in n&&n["@direction"]===s)return n["@value"];if("@language"in n&&n["@language"]===i)return n["@value"];if("@direction"in n&&n["@direction"]===s)return n["@value"]}const u=Object.keys(n).length,c=1===u||2===u&&"@index"in n&&!l,d="@language"in e,p=a(n["@value"]),h=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(c&&"@none"!==r&&(!d||!p||h))return n["@value"];const m={};return l&&(m[k.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?m[k.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=k.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(m[k.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(m[k.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),m[k.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],m}const i=h(e,t,{vocab:!0},r),s=f(e,t,"@type"),o=k.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:"@vocab"===s},base:r.base});return"@id"===s||"@vocab"===s||"@graph"===i?o:{[k.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:o}}},function(e,t,n){e.exports=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,n){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,n)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}},function(e,t,n){(function(e){
/*!
         * The buffer module from node.js, for the browser.
         *
         * @author   Feross Aboukhadijeh <http://feross.org>
         * @license  MIT
         */
var r=n(46),i=n(47),s=n(48);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=p(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),i=(e=o(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|h(t.length);return 0===(e=o(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?o(e,0):p(e,t);if("Buffer"===t.type&&s(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=o(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|h(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var s,a=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,o/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(s=n;s<o;s++)if(u(e,s)===u(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(n+l>o&&(n=o-l),s=n;s>=0;s--){for(var d=!0,p=0;p<l;p++)if(u(e,s+p)!==u(t,p)){d=!1;break}if(d)return s}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o=parseInt(t.substr(2*a,2),16);if(isNaN(o))return a;e[n+a]=o}return a}function w(e,t,n,r){return z(F(t,e.length-n),e,n,r)}function x(e,t,n,r){return z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return x(e,t,n,r)}function k(e,t,n,r){return z(B(t),e,n,r)}function S(e,t,n,r){return z(function(e,t){for(var n,r,i,s=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function R(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s,a,o,l,u=e[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(s=e[i+1]))&&(l=(31&u)<<6|63&s)>127&&(c=l);break;case 3:s=e[i+1],a=e[i+2],128==(192&s)&&128==(192&a)&&(l=(15&u)<<12|(63&s)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(l=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function E(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=N(e[s]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,r,i,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,s){return s||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function $(e,t,n,r,s){return s||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return r=null,s=t,a=n,c(i=e),i<=0?o(r,i):void 0!==s?"string"==typeof a?o(r,i).fill(s,a):o(r,i).fill(s):o(r,i);var r,i,s,a},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),o=Math.min(s,a),u=this.slice(r,i),c=e.slice(t,n),d=0;d<o;++d)if(u[d]!==c[d]){s=u[d],a=c[d];break}return s<a?-1:a<s?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var s=0,a=1,o=0;for(this[t]=255&e;++s<n&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var s=n-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return $(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return $(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=l.isBuffer(e)?e:F(new l(e,r).toString()),o=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%o]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function B(e){return r.toByteArray(function(e){if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(U,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(8))},function(e,t,n){t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r,a=u(e),o=a[0],l=a[1],c=new s(3*(o+(r=l))/4-r),d=0,p=l>0?o-4:o;for(n=0;n<p;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===l&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[d++]=255&t),1===l&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],a=0,o=n-i;a<o;a+=16383)s.push(c(e,a,a+16383>o?o:a+16383));return 1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)r[o]=a[o],i[a.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,s,a=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var s,a,o=8*i-r-1,l=(1<<o)-1,u=l>>1,c=-7,d=n?i-1:0,p=n?-1:1,h=e[t+d];for(d+=p,s=h&(1<<-c)-1,h>>=-c,c+=o;c>0;s=256*s+e[t+d],d+=p,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=p,c-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),s-=u}return(h?-1:1)*a*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var a,o,l,u=8*s-i-1,c=(1<<u)-1,d=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(o=0,a=c):a+d>=1?(o=(t*l-1)*Math.pow(2,i),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&o,h+=f,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;e[n+h]=255&a,h+=f,a/=256,u-=8);e[n+h-f]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){n.r(t),n.d(t,"createBlankNode",(function(){return T})),n.d(t,"createQuad",(function(){return P})),n.d(t,"jsonLDFromRDF",(function(){return g.fromRDF})),n.d(t,"jsonLDToRDF",(function(){return g.toRDF})),n.d(t,"compactJsonLD",(function(){return g.compact})),n.d(t,"TurtleParser",(function(){return w})),n.d(t,"TurtleWriter",(function(){return O}));var r=n(0);function i(e){return!!e&&"DefaultGraph"===e.termType}const{rdf:s,xsd:a}=r.a;let o,l=0;var u={namedNode:function(e){return new d(e)},blankNode:function(e){return new h(e||"n3-"+l++)},variable:function(e){return new f(e)},literal:function(e,t){if("string"==typeof t)return new p(`"${e}"@${t.toLowerCase()}`);let n=t?t.value:"";return""===n&&("boolean"==typeof e?n=a.boolean:"number"==typeof e&&(Number.isFinite(e)?n=Number.isInteger(e)?a.integer:a.double:(n=a.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),""===n||n===a.string?new p(`"${e}"`):new p(`"${e}"^^${n}`)},defaultGraph:function(){return o},quad:v,triple:v};class c{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof c?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}toJSON(){return{termType:this.termType,value:this.value}}}class d extends c{get termType(){return"NamedNode"}}class p extends c{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new d(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return"^"===n?e.substr(t+2):"@"!==n?a.string:s.langString}equals(e){return e instanceof p?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class h extends c{constructor(e){super("_:"+e)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class f extends c{constructor(e){super("?"+e)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}o=new class extends c{constructor(){return super(""),o||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class m extends c{constructor(e,t,n,r){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=r||o}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function v(e,t,n,r){return new m(e,t,n,r)}var g=n(7),y=n(21);let b=0;class w{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&_(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),r=/trig/.test(t),i=/triple/.test(t),s=/quad/.test(t),a=this._n3Mode=/n3/.test(t),o=i||s;(this._supportsNamedGraphs=!(n||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||r||i||a),this._supportsRDFStar=""===t||/star|\*$/.test(t),o&&(this._resolveRelativeIRI=e=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new y.a({lineMode:o,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){b=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,n,r,i){const s=this._n3Mode;this._contextStack.push({subject:n,predicate:r,object:i,graph:t,type:e,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?this._graph.id.substr(2)+".":".",this._quantified=Object.create(this._quantified))}_restoreContext(){const e=this._contextStack.pop(),t=this._n3Mode;this._subject=e.subject,this._predicate=e.predicate,this._object=e.object,this._graph=e.graph,t&&(this._inversePredicate=e.inverse,this._prefixes._=e.blankPrefix,this._quantified=e.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const t=this._resolveIRI(e.value);if(null===t)return this._error("Invalid IRI",e);n=this._namedNode(t);break;case"type":case"prefixed":const r=this._prefixes[e.prefix];if(void 0===r)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(r+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error("Expected entity but got "+e.type,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext(),null===this._object?t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,r=this._readListItem;const i=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===n&&(this._subject=n=this._blankNode()),null===i?null===a.predicate?a.subject=n:a.object=n:this._emit(i,this.RDF_REST,n,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(void 0===n)return;t=this._literal(this._literalValue,n),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===n.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const r=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(n=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const e=this._predicate,t=this._object;i?this._emit(t,e,r,n):this._emit(r,e,t,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error("Unexpected "+e.type,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&"item"===n.type){const e=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,e,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const r=this._blankNode();if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,n,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let n,r;if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,n,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error("Expected >> but got "+e.type,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,r){this._callback(null,this._quad(e,t,n,r||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=x}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",r=-1,i=-1,s=0,a="/";for(;r<t;){switch(a){case":":if(i<0&&"/"===e[++r]&&"/"===e[++r])for(;(i=r+1)<t&&"/"!==e[i];)r=i;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":n+=e.substring(s,r-1),s=r+1;break;case void 0:case"?":case"#":return n+e.substring(s,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(n+=e.substring(s,r-2),(s=n.lastIndexOf("/"))>=i&&(n=n.substr(0,s)),"/"!==a)return`${n}/${e.substr(r+1)}`;s=r+1}}}a=e[++r]}return n+e.substring(s)}parse(e,t,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${b++}_`,this._prefixCallback=n||x,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const t=[];let n;if(this._callback=(e,r)=>{e?n=e:r&&t.push(r)},this._lexer.tokenize(e).every((e=>this._readCallback=this._readCallback(e))),n)throw n;return t}this._callback=t,this._lexer.tokenize(e,((e,t)=>{null!==e?(this._callback(e),this._callback=x):this._readCallback&&(this._readCallback=this._readCallback(t))}))}}function x(){}function _(e,t){const n=t.namedNode;e._namedNode=n,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=n(r.a.rdf.first),e.RDF_REST=n(r.a.rdf.rest),e.RDF_NIL=n(r.a.rdf.nil),e.N3_FORALL=n(r.a.r.forAll),e.N3_FORSOME=n(r.a.r.forSome),e.ABBREVIATIONS={a:n(r.a.rdf.type),"=":n(r.a.owl.sameAs),">":n(r.a.log.implies)},e.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}_(w.prototype,u);const k=u.defaultGraph(),{rdf:S,xsd:R}=r.a,A=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,I=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,C={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class E extends c{equals(){return!1}}class O{constructor(e,t){if(this._prefixRegex=/$0^/,e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{let e="";this._outputStream={write(t,n,r){e+=t,r&&r()},end:t=>{t&&t(null,e)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=k,this._baseIRI=t.baseIRI,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes))}get _inDefaultGraph(){return k.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,n,r,i){try{r.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(k.equals(r)?"":this._encodeIriOrBlank(r)+" {\n")),this._graph=r,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(", "+this._encodeObject(n),i):this._write(`;\n    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i)}catch(s){i&&i(s)}}_writeQuadLine(e,t,n,r,i){delete this._prefixMatch,this._write(this.quadToString(e,t,n,r),i)}quadToString(e,t,n,r){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(n)}${r&&r.value?` ${this._encodeIriOrBlank(r)} .\n`:" .\n"}`}quadsToString(e){return e.map((e=>this.quadToString(e.subject,e.predicate,e.object,e.graph))).join("")}_encodeSubject(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:"_:"+e.value;let t=e.value;this._baseIRI&&t.startsWith(this._baseIRI)&&(t=t.substr(this._baseIRI.length)),A.test(t)&&(t=t.replace(I,D));const n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(A.test(t)&&(t=t.replace(I,D)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===R.string)return`"${t}"`}else switch(e.datatype.value){case R.string:return`"${t}"`;case R.boolean:if("true"===t||"false"===t)return t;break;case R.integer:if(/^[+-]?\d+$/.test(t))return t;break;case R.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case R.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===S.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:n,graph:r}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(n)}${i(r)?"":" "+this._encodeIriOrBlank(r)}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,n,r,i){void 0===n?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"==typeof r?this._writeQuad(e,t,n,k,r):this._writeQuad(e,t,n,r||k,i)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,n){const r={};r[e]=t,this.addPrefixes(r,n)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let n=!1;for(let r in e){let t=e[r];"string"!=typeof t&&(t=t.value),n=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[t]=r+=":",this._write(`@prefix ${r} <${t}>.\n`)}if(n){let e="",t="";for(const n in this._prefixIRIs)e+=e?"|"+n:n,t+=(t?"|":"")+this._prefixIRIs[n];e=e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${t})[^/]*$|^(${e})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?"\n":"",t)}blank(e,t){let n,r,i=e;switch(void 0===e?i=[]:e.termType?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),r=i.length){case 0:return new E("[]");case 1:if(n=i[0],!(n.object instanceof E))return new E(`[ ${this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)} ]`);default:let t="[";for(let s=0;s<r;s++)n=i[s],n.predicate.equals(e)?t+=", "+this._encodeObject(n.object):(t+=`${(s?";\n  ":"\n  ")+this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)}`,e=n.predicate);return new E(t+"\n]")}}list(e){const t=e&&e.length||0,n=new Array(t);for(let r=0;r<t;r++)n[r]=this._encodeObject(e[r]);return new E(`(${n.join(" ")})`)}end(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let t=e&&((n,r)=>{t=null,e(n,r)});if(this._endStream)try{return this._outputStream.end(t)}catch(n){}t&&t()}}function D(e){let t=C[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function T(e){return new h(e)}function P(e,t,n,r){return new m(e,t,n,r)}}]),(Md||(Md={})).Turtle="Turtle";var $d=function(e){_(MalformedSolidDocumentError,n);var t,r,i=(t=MalformedSolidDocumentError,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=j(t);if(r){var i=j(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return M(this,e)});function MalformedSolidDocumentError(e,t,n){var r;return k(this,MalformedSolidDocumentError),r=i.call(this,function(e,t,n){return e?"Malformed ".concat(t," document found at ").concat(e," - ").concat(n):"Malformed ".concat(t," document - ").concat(n)}(e,t,n)),S(R(r),"documentUrl",void 0),S(R(r),"documentFormat",void 0),S(R(r),"malformationDetails",void 0),r.documentUrl=e,r.documentFormat=t,r.malformationDetails=n,r}return MalformedSolidDocumentError}();var Ud=function(e){_(NetworkRequestError,n);var t,r,i=(t=NetworkRequestError,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=j(t);if(r){var i=j(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return M(this,e)});function NetworkRequestError(e,t){var n;return k(this,NetworkRequestError),n=i.call(this,"Request failed trying to fetch ".concat(e),t),S(R(n),"url",void 0),n.url=e,n}return NetworkRequestError}();var Nd=function(e){_(NotFoundError,n);var t,r,i=(t=NotFoundError,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=j(t);if(r){var i=j(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return M(this,e)});function NotFoundError(e){var t;return k(this,NotFoundError),t=i.call(this,"Document with '".concat(e,"' url not found")),S(R(t),"url",void 0),t.url=e,t}return NotFoundError}();var Fd=function(e){_(UnauthorizedError,n);var t,r,i=(t=UnauthorizedError,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=j(t);if(r){var i=j(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return M(this,e)});function UnauthorizedError(e,t){var n;return k(this,UnauthorizedError),n=i.call(this,function(e,t){return"Unauthorized".concat(403===t?" (Forbidden)":"",": ").concat(e)}(e,t)),S(R(n),"url",void 0),S(R(n),"responseStatus",void 0),n.url=e,n.responseStatus=t,n}return A(UnauthorizedError,[{key:"forbidden",get:function(){return void 0!==this.responseStatus?403===this.responseStatus:void 0}}]),UnauthorizedError}();var Bd=function(e){_(UnsuccessfulRequestError,n);var t,r,i=(t=UnsuccessfulRequestError,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=j(t);if(r){var i=j(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return M(this,e)});function UnsuccessfulRequestError(e,t){var n;return k(this,UnsuccessfulRequestError),n=i.call(this,function(e,t){var n;return t=null!==(n=t)&&void 0!==n?n:e,"string"==typeof e?"".concat(e," (returned ").concat(t.status," status code)"):"Request to ".concat(t.url," returned ").concat(t.status," status code")}(e,t)),S(R(n),"response",void 0),n.response=null!=t?t:e,n}return UnsuccessfulRequestError}();var zd=function(e){_(UnsupportedAuthorizationProtocolError,n);var t,r,i=(t=UnsupportedAuthorizationProtocolError,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=j(t);if(r){var i=j(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return M(this,e)});function UnsupportedAuthorizationProtocolError(e,t,n){var r;return k(this,UnsupportedAuthorizationProtocolError),r=i.call(this,"The resource at ".concat(e," is using an unsupported authorization protocol (").concat(t,")"),n),S(R(r),"url",void 0),S(R(r),"protocol",void 0),r.url=e,r.protocol=t,r}return UnsupportedAuthorizationProtocolError}(),qd={acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",vcard:"http://www.w3.org/2006/vcard/ns#"};function Vd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.startsWith("http"))return e;var n=e.split(":"),r=L(n,2),i=r[0],s=r[1];if(i&&s){var a,o,l,u=null!==(a=null!==(o=qd[i])&&void 0!==o?o:null===(l=t.extraContext)||void 0===l?void 0:l[i])&&void 0!==a?a:null;if(!u)throw new Error("Can't expand IRI with unknown prefix: '".concat(e,"'"));return u+s}if(!t.defaultPrefix)throw new Error("Can't expand IRI without a default prefix: '".concat(e,"'"));return t.defaultPrefix+i}var Hd,Wd,Jd=function(){function e(t,n){k(this,e),S(this,"url",void 0),S(this,"quads",void 0),this.url=t,this.quads=n}return A(e,[{key:"value",value:function(e){var t;return null===(t=this.quads.find((function(t){return t.predicate.value===Vd(e)})))||void 0===t?void 0:t.object.value}},{key:"values",value:function(e){return this.quads.filter((function(t){return t.predicate.value===Vd(e)})).map((function(e){return e.object.value}))}}]),e}(),Kd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];k(this,e),S(this,"quads",void 0),this.quads=t}return A(e,[{key:"isEmpty",value:function(){return 0===this.statements.length}},{key:"getQuads",value:function(){return this.quads.slice(0)}},{key:"addQuads",value:function(e){var t;(t=this.quads).push.apply(t,I(e))}},{key:"statements",value:function(e,t,n){var r=this;return this.quads.filter((function(i){return!(n&&i.object.value!==r.expandIRI(n)||e&&i.subject.value!==r.expandIRI(e)||t&&i.predicate.value!==r.expandIRI(t))}))}},{key:"statement",value:function(e,t,n){var r=this,i=this.quads.find((function(i){return!(n&&i.object.value!==r.expandIRI(n)||e&&i.subject.value!==r.expandIRI(e)||t&&i.predicate.value!==r.expandIRI(t))}));return null!=i?i:null}},{key:"contains",value:function(e,t,n){return null!==this.statement(e,t,n)}},{key:"getThing",value:function(e){var t=this.statements(e);return new Jd(e,t)}},{key:"expandIRI",value:function(e){return Vd(e)}}]),e}();(Wd=Hd||(Hd={})).Read="read",Wd.Write="write",Wd.Append="append",Wd.Control="control";var Gd=function(e){_(n,Kd);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(e,r,i){var s;return k(this,n),s=t.call(this,r),S(R(s),"url",void 0),S(R(s),"headers",void 0),s.url=e,s.headers=i,s}return A(n,[{key:"isACPResource",value:function(){var e;return!(null===(e=this.headers.get("Link"))||void 0===e||!e.match(/<http:\/\/www\.w3\.org\/ns\/solid\/acp#AccessControlResource>;[^,]+rel="type"/))}},{key:"isPersonalProfile",value:function(){return!!this.statement(this.url,Vd("rdf:type"),Vd("foaf:PersonalProfileDocument"))}},{key:"isStorage",value:function(){var e;return!(null===(e=this.headers.get("Link"))||void 0===e||!e.match(/<http:\/\/www\.w3\.org\/ns\/pim\/space#Storage>;[^,]+rel="type"/))}},{key:"isUserWritable",value:function(){return this.getUserPermissions().includes(Hd.Write)}},{key:"getUserPermissions",value:function(){return this.getPermissionsFromWAC("user")}},{key:"getPublicPermissions",value:function(){return this.getPermissionsFromWAC("public")}},{key:"getLastModified",value:function(){var e,t,n,r;return null!==(e=null!==(t=null!==(n=C(this.headers.get("last-modified")))&&void 0!==n?n:C(null===(r=this.statement(this.url,"purl:modified"))||void 0===r?void 0:r.object.value))&&void 0!==t?t:this.getLatestDocumentDate())&&void 0!==e?e:null}},{key:"expandIRI",value:function(e){return Vd(e,{defaultPrefix:this.url})}},{key:"getLatestDocumentDate",value:function(){var e=[].concat(I(this.statements(void 0,"purl:modified")),I(this.statements(void 0,"purl:created"))).map((function(e){return C(e.object.value)})).filter((function(e){return null!==e}));return e.length>0?e.reduce((function(e,t){return e>t?e:t})):null}},{key:"getPermissionsFromWAC",value:function(e){var t,n,r,i=null!==(t=this.headers.get("WAC-Allow"))&&void 0!==t?t:"",s=null!==(n=null===(r=f(i,new RegExp("".concat(e,'="([^"]+)"'))))||void 0===r?void 0:r[1])&&void 0!==n?n:"";return E([s.includes("read")&&Hd.Read,s.includes("write")&&Hd.Write,s.includes("append")&&Hd.Append,s.includes("control")&&Hd.Control])}}]),n}();function Zd(e,t){return Yd.apply(this,arguments)}function Yd(){return(Yd=O(D.mark((function e(t,n){var r,i,s,a,o;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Accept:"text/turtle"}},null!=n&&n.cache&&(r.cache=n.cache),e.prev=2,s=null!==(i=null==n?void 0:n.fetch)&&void 0!==i?i:window.fetch,e.next=6,s(t,r);case 6:if(404!==(a=e.sent).status){e.next=9;break}throw new Nd(t);case 9:if(![401,403].includes(a.status)){e.next=11;break}throw new Fd(t,a.status);case 11:return e.next=13,a.text();case 13:return o=e.sent,e.abrupt("return",{body:o,headers:a.headers});case 17:if(e.prev=17,e.t0=e.catch(2),!(e.t0 instanceof Fd)){e.next=21;break}throw e.t0;case 21:if(!(e.t0 instanceof Nd)){e.next=23;break}throw e.t0;case 23:throw new Ud(t,{cause:e.t0});case 24:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}function Qd(e,t,n){return Xd.apply(this,arguments)}function Xd(){return(Xd=O(D.mark((function e(t,n,r){var i,s;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(window),e.next=3,sp(n);case 3:return s=e.sent,e.next=6,r(t,{method:"PUT",headers:{"Content-Type":"text/turtle"},body:n});case 6:return e.abrupt("return",new Gd(t,s,new Headers({})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ep(e,t){return tp.apply(this,arguments)}function tp(){return(tp=O(D.mark((function e(t,n){var r,i,s,a;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zd(t,n);case 2:return r=e.sent,i=r.body,s=r.headers,e.next=7,sp(i,{baseIRI:t});case 7:return a=e.sent,e.abrupt("return",new Gd(t,a,s));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function np(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=$({baseIRI:t.baseIRI}),r=new Ld.exports.TurtleParser(n),i={quads:[],containsRelativeIRIs:!1};return new Promise((function(n,s){var a=r._resolveRelativeIRI;r._resolveRelativeIRI=function(){return i.containsRelativeIRIs=!0,r._resolveRelativeIRI=a,r._resolveRelativeIRI.apply(r,arguments)},r.parse(e,(function(e,r){var a;e?s(new $d(null!==(a=t.baseIRI)&&void 0!==a?a:null,Md.Turtle,e.message)):r?i.quads.push(r):n(i)}))}))}function rp(e,t){return ip.apply(this,arguments)}function ip(){return(ip=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ep(t,n);case 3:return r=e.sent,e.abrupt("return",!r.isEmpty());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function sp(e){return ap.apply(this,arguments)}function ap(){return ap=O(D.mark((function e(t){var n,r,i,s=arguments;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,np(t,n);case 3:return r=e.sent,i=r.quads,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),ap.apply(this,arguments)}function op(e,t,n){return lp.apply(this,arguments)}function lp(){return(lp=O(D.mark((function e(t,n,r){var i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(window),e.next=3,r(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function up(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?up(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):up(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dp(e,t){return pp.apply(this,arguments)}function pp(){return pp=O(D.mark((function e(t,n){var r,i,s,a,o,l;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new Kd(t.getQuads()),a=S({},t.url,t),o=function(e){e.statements(void 0,"foaf:isPrimaryTopicOf").map((function(e){return e.object.value})).forEach((function(e){var t;return a[e]=null!==(t=a[e])&&void 0!==t?t:null})),e.statements(void 0,"foaf:primaryTopic").map((function(e){return e.subject.value})).forEach((function(e){var t;return a[e]=null!==(t=a[e])&&void 0!==t?t:null}))},l=function(){var e=O(D.mark((function e(){var t,r,i,l,u;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,r=Object.entries(a);case 1:if(!(t<r.length)){e.next=23;break}if(i=L(r[t],2),l=i[0],null===i[1]){e.next=5;break}return e.abrupt("continue",20);case 5:return e.prev=5,e.next=8,ep(l,n);case 8:u=e.sent,a[l]=u,s.addQuads(u.getQuads()),o(u),e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(5),!(e.t0 instanceof Fd)){e.next=19;break}return a[l]=!1,e.abrupt("continue",20);case 19:throw e.t0;case 20:t++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}(),o(t);case 5:return e.next=7,l();case 7:if(Object.values(a).some((function(e){return null===e}))){e.next=5;break}case 8:return e.abrupt("return",{store:s,cloaked:Object.values(a).some((function(e){return!1===e})),writableProfileUrl:t.isUserWritable()?t.url:null!==(r=null===(i=Object.values(a).find((function(e){return!!e&&e.isUserWritable()})))||void 0===i?void 0:i.url)&&void 0!==r?r:null});case 9:case"end":return e.stop()}}),e)}))),pp.apply(this,arguments)}function hp(e){return fp.apply(this,arguments)}function fp(){return fp=O(D.mark((function e(t){var n,r,i,s,a,o,l,u,c,d,p,f,m,v,g,y,b,w,x,_,k,S=arguments;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=S.length>1&&void 0!==S[1]?S[1]:{},d={fetch:c.fetch,cache:"no-store"},p=N(t),e.next=5,ep(p,d);case 5:if((f=e.sent).isPersonalProfile()||f.contains(t,"solid:oidcIssuer")){e.next=8;break}throw new Error("".concat(t," is not a valid webId."));case 8:return e.next=10,dp(f,c);case 10:m=e.sent,v=m.store,g=m.writableProfileUrl,y=m.cloaked,b=v.statements(t,"pim:storage").map((function(e){return e.object.value})),w=v.statement(t,"solid:publicTypeIndex"),x=v.statement(t,"solid:privateTypeIndex"),_=U(p);case 18:if(!_||0!==b.length){e.next=28;break}return e.next=21,P(ep(_,d));case 21:if(null==(k=e.sent)||!k.isStorage()){e.next=25;break}return b.push(_),e.abrupt("break",28);case 25:_=U(_),e.next=18;break;case 28:if(0!==b.length){e.next=30;break}throw new Error("Could not find any storage for ".concat(t,"."));case 30:return e.next=32,null===(n=c.onLoaded)||void 0===n?void 0:n.call(c,new Kd(v.statements(t)));case 32:return e.abrupt("return",cp({webId:t,cloaked:y,writableProfileUrl:g,storageUrls:h(b)},$({name:null!==(r=null===(i=v.statement(t,"vcard:fn"))||void 0===i?void 0:i.object.value)&&void 0!==r?r:null===(s=v.statement(t,"foaf:name"))||void 0===s?void 0:s.object.value,avatarUrl:null!==(a=null===(o=v.statement(t,"vcard:hasPhoto"))||void 0===o?void 0:o.object.value)&&void 0!==a?a:null===(l=v.statement(t,"foaf:img"))||void 0===l?void 0:l.object.value,oidcIssuerUrl:null===(u=v.statement(t,"solid:oidcIssuer"))||void 0===u?void 0:u.object.value,publicTypeIndexUrl:null==w?void 0:w.object.value,privateTypeIndexUrl:null==x?void 0:x.object.value})));case 33:case"end":return e.stop()}}),e)}))),fp.apply(this,arguments)}function mp(){return mp=O(D.mark((function e(t){var n,r,i,s,a=arguments;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=a.length>1&&void 0!==a[1]?a[1]:{}).required){e.next=3;break}return e.abrupt("return",hp(t,i));case 3:return s=P((function(e){return hp(e,i)})),e.next=6,s(t);case 6:if(e.t2=r=e.sent,e.t1=null!==e.t2,!e.t1){e.next=10;break}e.t1=void 0!==r;case 10:if(!e.t1){e.next=14;break}e.t3=r,e.next=17;break;case 14:return e.next=16,s(t.replace(/\/$/,"").concat("/profile/card#me"));case 16:e.t3=e.sent;case 17:if(e.t4=n=e.t3,e.t0=null!==e.t4,!e.t0){e.next=21;break}e.t0=void 0!==n;case 21:if(!e.t0){e.next=25;break}e.t5=n,e.next=28;break;case 25:return e.next=27,s(T(t).concat("/profile/card#me"));case 27:e.t5=e.sent;case 28:return e.abrupt("return",e.t5);case 29:case"end":return e.stop()}}),e)}))),mp.apply(this,arguments)}function vp(e,t,n){return gp.apply(this,arguments)}function gp(){return(gp=O(D.mark((function e(t,n,r){var i,s,a;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(r),s=t.storageUrls[0],a="".concat(s,"settings/").concat(n,"TypeIndex"),e.next=5,rp(a,{fetch:r});case 5:if(!e.sent){e.next=9;break}e.t0="".concat(s,"settings/").concat(n,"TypeIndex-").concat(F()),e.next=10;break;case 9:e.t0=a;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yp(e,t,n){return bp.apply(this,arguments)}function bp(){return(bp=O(D.mark((function e(t,n,r){var i,s,a,o;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.writableProfileUrl){e.next=2;break}throw new Error("Can't create type index without a writable profile document");case 2:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(r),e.next=5,vp(t,n,r);case 5:return s=e.sent,a="public"===n?"<> a <http://www.w3.org/ns/solid/terms#TypeIndex> .":"\n            <> a\n                <http://www.w3.org/ns/solid/terms#TypeIndex>,\n                <http://www.w3.org/ns/solid/terms#UnlistedDocument> .\n        ",o="\n        INSERT DATA {\n            <".concat(t.webId,"> <http://www.w3.org/ns/solid/terms#").concat(n,"TypeIndex> <").concat(s,"> .\n        }\n    "),e.next=10,Qd(s,a,r);case 10:return e.next=12,op(t.writableProfileUrl,o,r);case 12:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wp(e,t,n,r){return xp.apply(this,arguments)}function xp(){return(xp=O(D.mark((function e(t,n,r,i){var s,a;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ep(t,{fetch:i});case 2:return s=e.sent,a=Array.isArray(n)?n:[n],e.abrupt("return",a.map((function(e){return s.statements(void 0,"rdf:type","solid:TypeRegistration").filter((function(t){return s.contains(t.subject.value,"solid:forClass",e)})).map((function(e){return s.statements(e.subject.value,r)})).flat().map((function(e){return e.object.value})).filter((function(e){return!!e}))})).flat());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _p(){return(_p=O(D.mark((function e(t,n){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yp(t,"public",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kp(){return(kp=O(D.mark((function e(t,n){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yp(t,"private",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sp(){return(Sp=O(D.mark((function e(t,n,r){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wp(t,n,"solid:instance",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){_(ExpectedQuadAssertionError,n);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(ExpectedQuadAssertionError);function ExpectedQuadAssertionError(e){var n;return k(this,ExpectedQuadAssertionError),n=t.call(this,"Couldn't find the following triple: ".concat(function(e){return(new Ld.exports.TurtleWriter).quadsToString([e]).slice(0,-1)}(e))),S(R(n),"expectedQuad",void 0),n.expectedQuad=e,n}}(),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;k(this,e),S(this,"rawBody",void 0),S(this,"body",void 0),S(this,"bodyUsed",void 0),S(this,"headers",void 0),S(this,"ok",void 0),S(this,"redirected",void 0),S(this,"status",void 0),S(this,"statusText",void 0),S(this,"trailer",void 0),S(this,"type",void 0),S(this,"url",void 0),this.rawBody=t,this.headers=new Headers(n),this.status=r}var t,n,r,i,s;A(e,[{key:"arrayBuffer",value:(s=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("ResponseStub.arrayBuffer is not implemented");case 1:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"blob",value:(i=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("ResponseStub.blob is not implemented");case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"formData",value:(r=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("ResponseStub.formData is not implemented");case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"json",value:(n=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(this.rawBody));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"text",value:(t=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rawBody);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"clone",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rp(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this)}}])}();var Ap=("undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:window).Error;!function(e){_(JSError,Ap);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(JSError);function JSError(e,n){var r;return k(this,JSError),(r=t.call.apply(t,[this].concat([e,n]))).name="JSError"===(this instanceof JSError?this.constructor:void 0).name?"Error":(this instanceof JSError?this.constructor:void 0).name,Object.setPrototypeOf(R(r),(this instanceof JSError?this.constructor:void 0).prototype),r}}();var Ip,Cp=function(){function e(){if(k(this,e),!this.static().buildingPureInstance())return this.initializeProxy(),this._proxy}return A(e,[{key:"static",value:function(){return this.constructor}},{key:"__get",value:function(e){return Reflect.get(this._proxyTarget,e)}},{key:"__set",value:function(e,t){Reflect.set(this._proxyTarget,e,t)}},{key:"__delete",value:function(e){Reflect.deleteProperty(this._proxyTarget,e)}},{key:"initializeProxy",value:function(){var e=this.static();this._proxyTarget=this,this._proxy=new Proxy(this._proxyTarget,{get:function(t,n,r){return"string"!=typeof n||n in t||e.isReservedProperty(n)?Reflect.get(t,n,r):t.__get(n)},set:function(t,n,r,i){return"string"!=typeof n||n in t||e.isReservedProperty(n)?Reflect.set(t,n,r,i):(t.__set(n,r),!0)},deleteProperty:function(t,n){return"string"!=typeof n||n in t||e.isReservedProperty(n)?Reflect.deleteProperty(t,n):(t.__delete(n),!0)}})}}],[{key:"buildingPureInstance",value:function(){return!!this.__buildingPureInstance||(this.__reservedProperties.has(this)||(this.__buildingPureInstance=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__buildingPureInstance=!1),!1)}},{key:"isReservedProperty",value:function(e){var t;return!(null===(t=this.__reservedProperties.get(this))||void 0===t||!t.has(e))}}]),e}();function Ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Op(e,t){return e===t||!(!Pp(e)||!Pp(t))&&(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():Object.keys(e).length===Object.keys(t).length&&!Object.keys(e).some((function(n){return!Op(e[n],t[n])})))}function Dp(e){return null==e||(Array.isArray(e)||"string"==typeof e?0===e.length:"object"===B(e)&&0===Object.keys(e).length)}function Tp(e){return"function"==typeof(null==e?void 0:e[Symbol.iterator])}function Pp(e){return"object"===B(e)&&null!==e}function jp(e){return"string"==typeof e||e instanceof String}function Mp(e){return null==e}function Lp(e){for(var t in e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ep(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ep(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))Up(e,t)&&(e[t]=Lp(e[t]));return e}function $p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Up(e,t){var n;return $p(e,t)&&Pp(n=e[t])&&n.constructor===Object}function Np(e){return String(e)}function Fp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function Bp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}S(Cp,"__buildingPureInstance",void 0),S(Cp,"__reservedProperties",new WeakMap),Array.isArray.bind(Array),Object.entries.bind(Object),Ip=Symbol.iterator,function(e){function t(e){k(this,t),S(this,"keysToItems",void 0),S(this,"itemsToKeys",void 0),S(this,"getKey",void 0),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=null!=e?e:function(e){return Np(e)}}A(t,[{key:Ip,value:D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.keysToItems,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"size",get:function(){return this.keysToItems.size}},{key:"items",value:function(){return this.keysToItems.values()}},{key:"keys",value:function(){return this.keysToItems.keys()}},{key:"entries",value:function(){return this.keysToItems.entries()}},{key:"add",value:function(e){var t=this.getKey(e);this.keysToItems.set(t,e),this.itemsToKeys.set(e,t)}},{key:"require",value:function(e){return this.keysToItems.get(e)||fail("Couldn't find item with '".concat(e,"' key"))}},{key:"get",value:function(e){return this.keysToItems.get(e)}},{key:"getKeys",value:function(){return I(this.keysToItems.keys())}},{key:"getItems",value:function(){return I(this.keysToItems.values())}},{key:"hasKey",value:function(e){return this.keysToItems.has(e)}},{key:"hasItem",value:function(e){return this.itemsToKeys.has(e)}},{key:"delete",value:function(e){var t=this.itemsToKeys.get(e);t&&(this.itemsToKeys.delete(e),this.keysToItems.delete(t))}},{key:"filter",value:function(e){var t,n=this.constructor.createFromArray([],this.getKey),r=Fp(this.entries());try{for(r.s();!(t=r.n()).done;){var i=L(t.value,2),s=i[0],a=i[1];e(a,s)&&n.add(a)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"clear",value:function(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}}],[{key:"createFromArray",value:function(e,n){var r,i=new t("string"==typeof n?function(e){return e[n]}:n),s=Fp(e);try{for(s.s();!(r=s.n()).done;){var a=r.value;i.add(a)}}catch(o){s.e(o)}finally{s.f()}return i}}])}(),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;k(this,e),S(this,"count",void 0),S(this,"listeners",void 0),this.count=t,this.listeners=new Set}var t,n,r;A(e,[{key:"acquire",value:(r=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitAvailable();case 2:this.count=Math.max(this.count-1,0);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"release",value:function(){this.count++,this.notifyAvailable()}},{key:"run",value:(n=O(D.mark((function e(t){var n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.acquire();case 2:return e.next=4,t();case 4:return n=e.sent,this.release(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"waitAvailable",value:(t=O(D.mark((function e(){var t=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.count){e.next=5;break}return e.next=3,new Promise((function(e){t.listeners.add((function n(){t.listeners.delete(n),e(null)}))}));case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"notifyAvailable",value:function(){this.listeners.forEach((function(e){return e()}))}}])}();var zp={},qp=function(){function e(){k(this,e)}return A(e,[{key:"set",value:function(e,t){void 0===t&&(t="__undefined__"),localStorage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e);return null===n?t:"__undefined__"!==n?JSON.parse(n):void 0}},{key:"require",value:function(e){var t=this.get(e,zp);if(t===zp)throw new Error("Failed getting required key from local storage: '".concat(e,"'"));return t}},{key:"has",value:function(e){return null!==localStorage.getItem(e)}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"pull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.has(e))return t;var n=this.get(e);return this.remove(e),n}}],[{key:"instance",get:function(){var t;return this._instance=null!==(t=this._instance)&&void 0!==t?t:new e}}]),e}();function Vp(e,t){return e>t?1:t>e?-1:0}function Hp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Wp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function Wp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jp(e,t){return t?e.filter(t):e.filter((function(e){return!!e}))}function Kp(e,t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)}function Gp(e,t){return t?Object.values(e.reduce((function(e,n){var r,i=t(n);return e[i]=null!==(r=e[i])&&void 0!==r?r:n,e}),{})):I(new Set(e))}function Zp(e,t){return e.map((function(e,t){return[e,t]})).filter((function(e){var n=L(e,2);n[0];var r=n[1];return!t.includes(r)})).map((function(e){return L(e,1)[0]}))}function Yp(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong",t="string"==typeof e?Error:e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw z(t,I("string"==typeof e?[e]:r))}function Qp(e){var t=e;return(t^16*Math.random()>>t/4).toString(16)}function Xp(e){return e.split(/_|-|\s|(?=[A-Z])/)}function eh(e){var t=Xp(e),n=q(t),r=n[0],i=n.slice(1);return(null!=r?r:"").toLowerCase()+i.map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})).join("")}function th(e,t){for(var n=e.prototype,r=function(){var e=L(s[i],2),t=e[0],r=e[1];n[t]=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=r.apply(void 0,[this.value].concat(n));return null===(e=this.chain)||void 0===e?void 0:e.call(this,s)}},i=0,s=Object.entries(t);i<s.length;i++)r()}function nh(e,t){for(var n=e.prototype,r=Object.getOwnPropertyDescriptors(t.prototype),i=function(){var e=L(a[s],2),t=e[0],r=e[1];return t in n?"continue":"function"!=typeof r.value?(Object.defineProperty(n,t,{get:function(){return this.chain(this.value[t])}}),"continue"):void(n[t]=function(){for(var e,t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=(e=r.value).call.apply(e,[this.value].concat(i));return null===(t=this.chain)||void 0===t?void 0:t.call(this,a)})},s=0,a=Object.entries(r);s<a.length;s++)i()}S(qp,"_instance",void 0),qp.instance,function(){function e(){k(this,e),S(this,"resolveListeners",[]),S(this,"rejectListeners",[]),S(this,"resetListeners",[]),this.setPromiseValues()}A(e,[{key:"value",get:function(){return this._value||null}},{key:"isResolved",value:function(){return"_value"in this}},{key:"then",value:function(e,t){return this.promise.then(e,t)}},{key:"catch",value:function(e){return this.promise.catch(e)}},{key:"finally",value:function(e){return this.promise.finally(e)}},{key:"resolve",value:function(e){this.isResolved()&&this.reset(),this._value=e,this._resolve(e),this.resolveListeners.forEach((function(t){return t(e)}))}},{key:"reject",value:function(e){this.isResolved()&&this.reset(),delete this._value,this._reject(e),this.rejectListeners.forEach((function(t){return t(e)}))}},{key:"onResolve",value:function(e){var t=this;return this.resolveListeners.push(e),function(){return Kp(t.resolveListeners,e)}}},{key:"onReject",value:function(e){var t=this;return this.rejectListeners.push(e),function(){return Kp(t.rejectListeners,e)}}},{key:"onReset",value:function(e){var t=this;return this.resetListeners.push(e),function(){return Kp(t.resetListeners,e)}}},{key:"reset",value:function(){this.setPromiseValues(),this.rejectListeners.forEach((function(e){return e()}))}},{key:"setPromiseValues",value:function(){var e=this;this.promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}}],[{key:"from",value:function(t){var n=new e;return t.then(n.resolve.bind(n)).catch(n.reject.bind(n)),n}}])}();var rh=function(){function e(t){k(this,e),S(this,"value",void 0),this.value=t}return A(e,[{key:"create",value:function(e){return new this.constructor(e)}},{key:"chain",value:function(e){return this.isPrimitive(e)?this.create(e):e}}],[{key:"isPrimitive",value:function(e){return this.prototype.isPrimitive(e)}}]),e}();var ih={clear:function(e){e.splice(0,e.length)},diff:function(e,t,n){var r,i=e.slice(0),s=[],a=n?function(e,t){return t.findIndex((function(t){return n(e,t)}))}:function(e,t){return t.indexOf(e)},o=Hp(t);try{for(o.s();!(r=o.n()).done;){var l=r.value,u=a(l,i);-1!==u?i.splice(u,1):s.push(l)}}catch(c){o.e(c)}finally{o.f()}return{added:s,removed:i}},filter:Jp,first:function(e,t){var n,r=Hp(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t(i))return i}}catch(s){r.e(s)}finally{r.f()}return null},flatMap:function(e,t){return I(e.entries()).flatMap((function(e){var n=L(e,2),r=n[0],i=n[1];return t(i,r)}))},isEmpty:function(e){return 0===e.length},project:function(e,t){return e.map((function(e){return e[t]}))},randomItem:function(e){return 0===e.length?null:e[Math.floor(Math.random()*e.length)]},randomItems:function(e,t){for(var n=e.slice(0),r=[];n.length>0&&r.length<t;){var i=Math.floor(Math.random()*n.length);r.push(n[i]),n.splice(i,1)}return r},remove:Kp,removeIndex:function(e,t){return e.splice(Number(t),1).length>0},replace:function(e,t,n){var r=e.indexOf(t);return-1!==r&&(e[r]=n,!0)},sorted:function(e,t,n){return n="asc"===t||"desc"===t?t:n,e.slice(0).sort(function(){var e="desc"===n?function(e){return function(t,n){return Vp(n[e],t[e])}}:function(e){return function(t,n){return Vp(t[e],n[e])}};switch(B(t)){case"function":return t;case"string":if("asc"===t)return;return"desc"===t?function(e,t){return Vp(t,e)}:e(t);case"object":var r=t.map((function(t){return e(t)}));return function(e,t){var n,i=Hp(r);try{for(i.s();!(n=i.n()).done;){var s=(0,n.value)(e,t);if(0!==s)return s}}catch(a){i.e(a)}finally{i.f()}return 0}}}())},unique:Gp,where:function(e,t,n){return e.filter((function(e){var r=e[t],i="function"==typeof r?r.call(e):r;return n?i===n:!!i}))},without:function(e,t){return Array.isArray(t)?Jp(e,(function(e){return-1===t.indexOf(e)})):function(e,t){return Zp(e,[t])}(e,e.indexOf(t))},withoutIndexes:Zp},sh=function(e,t){_(r,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(r);function r(){return k(this,r),n.apply(this,arguments)}return A(r,[{key:t,value:D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.value,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"get",value:function(e){return this.value[e]}},{key:"toArray",value:function(){return this.value.slice(0)}},{key:"isPrimitive",value:function(e){return Array.isArray(e)}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.prototype;return t.create(e)}}]),r}(rh,Symbol.iterator);th(sh,ih),nh(sh,Array);var ah={reverse:function(e){return e.split("").reverse().join("")},toCamelCase:eh,toSlug:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e=e.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,t),t.length>0&&(e=e.replace(new RegExp("".concat(t,"+"),"g"),t)),e},toStudlyCase:function(e){return Xp(e).map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})).join("")}},oh=function(e){_(n,rh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(){return k(this,n),t.apply(this,arguments)}return A(n,[{key:"toString",value:function(){return this.value}},{key:"isPrimitive",value:function(e){return"string"==typeof e}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.prototype;return t.create(e)}}]),n}();function lh(e,t){if(!t)return n=new Proxy(e,{get:function(e,t,r){var i=Reflect.get(e,t,r);return"function"!=typeof i?i:function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return i.call.apply(i,[e].concat(r)),n}}}),n;var n,r=t(e);return r instanceof Promise?r.then((function(){return e})):e}function uh(e){var t="function"==typeof Map?new Map:void 0;return uh=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(pb){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return z(e,arguments,j(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),V(n,e)},uh(e)}th(oh,ah),nh(oh,String);let ch,dh;const ph=new WeakMap,hh=new WeakMap,fh=new WeakMap,mh=new WeakMap,vh=new WeakMap;let gh={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return hh.get(e);if("objectStoreNames"===t)return e.objectStoreNames||fh.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wh(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function yh(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(dh||(dh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(xh(this),t),wh(ph.get(this))}:function(...t){return wh(e.apply(xh(this),t))}:function(t,...n){const r=e.call(xh(this),t,...n);return fh.set(r,t.sort?t.sort():[t]),wh(r)}}function bh(e){return"function"==typeof e?yh(e):(e instanceof IDBTransaction&&function(e){if(hh.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));hh.set(e,t)}(e),t=e,(ch||(ch=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,gh):e);var t}function wh(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(wh(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ph.set(t,e)})).catch((()=>{})),vh.set(t,e),t}(e);if(mh.has(e))return mh.get(e);const t=bh(e);return t!==e&&(mh.set(e,t),vh.set(t,e)),t}const xh=e=>vh.get(e);function _h(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=wh(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(wh(a.result),e.oldVersion,e.newVersion,wh(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),o}function kh(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),wh(n).then((()=>{}))}const Sh=["get","getKey","getAll","getAllKeys","count"],Rh=["put","add","delete","clear"],Ah=new Map;function Ih(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ah.get(t))return Ah.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Rh.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Sh.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;r&&(a=a.index(t.shift()));const o=await a[n](...t);return i&&await s.done,o};return Ah.set(t,s),s}function Ch(e){return"closeConnections"in e}gh=(e=>({...e,get:(t,n,r)=>Ih(t,n)||e.get(t,n,r),has:(t,n)=>!!Ih(t,n)||e.has(t,n)}))(gh);var Eh=function(e){_(SoukaiError,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(SoukaiError);function SoukaiError(e){var n;return k(this,SoukaiError),(n=t.call(this,e)).name=(this instanceof SoukaiError?this.constructor:void 0).name,Object.setPrototypeOf(R(n),(this instanceof SoukaiError?this.constructor:void 0).prototype),n}return A(SoukaiError)}(uh(Error));var Oh=function(e){_(n,Eh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(e){var r;return k(this,n),r=t.call(this,"Could not create document with id ".concat(e," because it is already in use.")),S(R(r),"id",void 0),r.id=e,r}return A(n)}();var Dh=function(e){_(n,Eh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(e,r){var i;return k(this,n),i=t.call(this,r?"Couldn't find document with id '".concat(e,"' in '").concat(r,"' Collection."):"Couldn't find document with id '".concat(e,"'")),S(R(i),"id",void 0),S(R(i),"collection",void 0),i.id=e,i.collection=r,i}return A(n)}();var Th=function(e){_(n,Eh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(e,r){var i;return k(this,n),i=t.call(this,"Model ".concat(e,": ").concat(r,". ")+"Learn more at https://soukai.js.org/guide/defining-models.html"),S(R(i),"modelName",void 0),i.modelName=e,i}return A(n)}();function Ph(e){return"getProxySubject"in e}function jh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jh(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lh(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function $h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uh=function(){function e(){var t=this;k(this,e),S(this,"rootFilters",void 0),S(this,"rootUpdates",void 0),S(this,"attributeFilters",void 0),S(this,"attributeUpdates",void 0),S(this,"documentsIn",(function(e,t,n){return n.includes(e)})),S(this,"documentOverwrite",(function(e,t){var n,r=Lh(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;)delete e[n.value]}catch(i){r.e(i)}finally{r.f()}Object.assign(e,t)})),S(this,"attributeEq",(function(e,t,n){return Op(e[t],n)})),S(this,"attributeContains",(function(e,n,r){Array.isArray(r)||(r=[r]);var i=e&&e[n];return!!Array.isArray(i)&&!r.find((function(e){return!i.find((function(n){return t.filterValue(n,e)}))}))})),S(this,"attributeOr",(function(e,n,r){return!!r.find((function(r){return!!t.filterValue(e,S({},n,r))}))})),S(this,"attributeIn",(function(e,t,n){return n.includes(e[t])})),S(this,"attributeUpdate",(function(e,n,r){!Array.isArray(r)&&Pp(r)?t.isOperation(r,t.attributeUpdates)?t.runOperation(r,t.attributeUpdates,e,n):Pp(e[n])?t.updateAttributes(e[n],r):e[n]=r:e[n]=r})),S(this,"attributeUpdateItems",(function(e,n,r){Array.isArray(r)||(r=[r]);var i,s=Lh(r);try{var a=function(){var r=i.value,s=r.$where,a=r.$update,o=r.$unset;s&&s.$in&&(s.$in=s.$in.map((function(e){return e.toString()})));var l=t.requireArrayProperty("$updateItems",e,n),u=t.filterDocuments(l.reduce((function(e,t,n){return Mh(Mh({},e),{},S({},n,Pp(t)?t:{}))}),{}),s||{});a&&Object.keys(u).forEach((function(e){t.updateAttributes(u,S({},e,a)),l[parseInt(e)]=u[e]})),o&&(e[n]=Zp(l,Object.keys(u).map(parseInt)))};for(s.s();!(i=s.n()).done;)a()}catch(o){s.e(o)}finally{s.f()}})),S(this,"attributePush",(function(e,n,r){t.requireArrayProperty("$push",e,n).push(r)})),S(this,"attributeUnset",(function(e,t,n){if(!0!==n){var r=e[t];if(Pp(r)){var i,s=Lh(n=Array.isArray(n)?n:[n]);try{for(s.s();!(i=s.n()).done;)delete r[i.value]}catch(a){s.e(a)}finally{s.f()}}}else delete e[t]})),S(this,"attributeApply",(function(e,n,r){var i,s=Lh(r);try{for(s.s();!(i=s.n()).done;){var a=i.value;t.runOperation(a,t.attributeUpdates,e,n)}}catch(o){s.e(o)}finally{s.f()}})),S(this,"attributeOverwrite",(function(e,t,n){e[t]=n})),this.rootFilters={$in:this.documentsIn},this.rootUpdates={$overwrite:this.documentOverwrite},this.attributeFilters={$eq:this.attributeEq,$contains:this.attributeContains,$or:this.attributeOr,$in:this.attributeIn},this.attributeUpdates={$update:this.attributeUpdate,$updateItems:this.attributeUpdateItems,$push:this.attributePush,$unset:this.attributeUnset,$apply:this.attributeApply,$overwrite:this.attributeOverwrite}}return A(e,[{key:"filterDocuments",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce((function(e,r){var i=L(r,2),s=i[0],a=i[1];return t.filterDocument(s,a,n)&&(e[s]=a),e}),{})}},{key:"updateAttributes",value:function(e,t){if(this.isOperation(t,{$unset:this.attributeUnset})){var n,r=t.$unset,i=Lh(Array.isArray(r)?r:[r]);try{for(i.s();!(n=i.n()).done;){var s=n.value;this.attributeUnset(e,s,!0)}}catch(v){i.e(v)}finally{i.f()}}else if(this.isOperation(t,this.rootUpdates)){var a=Object.entries(t),o=L(a,1),l=L(o[0],2),u=l[0],c=l[1];this.rootUpdates[u](e,c)}else for(var d=0,p=Object.entries(t);d<p.length;d++){var h=L(p[d],2),f=h[0],m=h[1];this.attributeUpdate(e,f,m)}}},{key:"obtainDocumentId",value:function(e){return null!=e?e:"10000000-1000-4000-8000-100000000000".replace(/[018]/g,Qp)}},{key:"filterDocument",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Mh({},n);for(var r=0,i=Object.entries(this.rootFilters);r<i.length;r++){var s=L(i[r],2),a=s[0],o=s[1];if(a in n){if(!o(e,t,n[a]))return!1;delete n[a]}}return this.filterValue(t,n)}},{key:"filterValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Pp(n)?this.isOperation(n,this.attributeFilters)?this.runOperation(n,this.attributeFilters,{value:e},"value"):!!Pp(e)&&!Object.entries(n).find((function(n){var r=L(n,2),i=r[0],s=r[1];return!(t.isOperation(s,t.attributeFilters)?t.runOperation(s,t.attributeFilters,e,i):t.attributeEq(e,i,s))})):this.attributeEq({value:e},"value",n)}},{key:"isOperation",value:function(e,t){if(!Pp(e))return!1;var n=Object.keys(e),r=q(n),i=r[0],s=r.slice(1);return!(!i||0!==s.length||!(i in t))}},{key:"runOperation",value:function(e,t){for(var n=L(Object.entries(e)[0],2),r=n[0],i=n[1],s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];return t[r].apply(t,a.concat([i]))}},{key:"requireArrayProperty",value:function(e,t,n){if(!t||!Pp(t)||!Array.isArray(t[n]))throw new Error("".concat(e," operator can only be applied to array attributes"));return t[n]}}]),e}();function Nh(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function Fh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;k(this,e),S(this,"database",void 0),S(this,"helper",void 0),S(this,"_metadataConnection",void 0),S(this,"_documentsConnection",void 0),this.database=t?"soukai-"+t:"soukai",this.helper=new Uh}var t,n,r,i,s,a,o,l,u,c,d,p,h,f,m,v,g;return A(e,[{key:"getCollections",value:(g=O(D.mark((function e(){var t;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.withMetadataTransaction("readonly",(function(e){return e.store.getAllKeys()}));case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.toString()})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"purgeDatabase",value:(v=O(D.mark((function e(){var t=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.closeConnections(),e.next=3,Promise.all([kh("".concat(this.database,"-meta"),{blocked:function(){return t.throwDatabaseBlockedError()}}),kh(this.database,{blocked:function(){return t.throwDatabaseBlockedError()}})]);case 3:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"closeConnections",value:(m=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._metadataConnection&&this._metadataConnection.close(),this._documentsConnection&&this._documentsConnection.close(),delete this._metadataConnection,delete this._documentsConnection;case 4:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"create",value:(f=O(D.mark((function e(t,n,r){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.helper.obtainDocumentId(r),e.next=3,this.documentExists(t,r);case 3:if(!e.sent){e.next=5;break}throw new Oh(r);case 5:return e.next=7,this.createDocument(t,r,n);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return f.apply(this,arguments)})},{key:"readOne",value:(h=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectionExists(t);case 2:if(e.sent){e.next=4;break}throw new Dh(n,t);case 4:return e.next=6,this.getDocument(t,n);case 6:if(r=e.sent){e.next=9;break}throw new Dh(n,t);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"readMany",value:(p=O(D.mark((function e(t,n){var r,i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,this.getCollections();case 3:if(-1!==(i=e.sent).indexOf(t)){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,this.withDocumentsTransaction(i,t,"readonly",(function(e){var t,n=(t=O(D.mark((function e(t){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r[t.key]=t.value,e.abrupt("return",t.continue().then(n));case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)});return e.store.openCursor().then(n)}));case 8:return e.abrupt("return",this.helper.filterDocuments(r,n));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"update",value:(d=O(D.mark((function e(t,n,r){var i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDocument(t,n);case 2:if(i=e.sent){e.next=5;break}throw new Dh(n,t);case 5:return this.helper.updateAttributes(i,r),e.next=8,this.updateDocument(t,n,i);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return d.apply(this,arguments)})},{key:"delete",value:(c=O(D.mark((function e(t,n){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.documentExists(t,n);case 2:if(e.sent){e.next=4;break}throw new Dh(n,t);case 4:return e.next=6,this.deleteDocument(t,n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"collectionExists",value:(u=O(D.mark((function e(t){var n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollections();case 2:return n=e.sent,e.abrupt("return",-1!==n.indexOf(t));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"documentExists",value:(l=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDocument(t,n);case 2:return r=e.sent,e.abrupt("return",!!r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"getDocument",value:(o=O(D.mark((function e(t,n){var r,i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getCollections();case 3:if(-1!==(r=e.sent).indexOf(t)){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,this.withDocumentsTransaction(r,t,"readonly",(function(e){return e.store.get(n)}));case 8:return i=e.sent,e.abrupt("return",i||null);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e,t){return o.apply(this,arguments)})},{key:"createDocument",value:(a=O(D.mark((function e(t,n,r){var i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollections();case 2:if(-1!==(i=e.sent).indexOf(t)){e.next=7;break}return e.next=6,this.createCollection(t);case 6:i.push(t);case 7:return e.abrupt("return",this.withDocumentsTransaction(i,t,"readwrite",(function(e){return e.store.add(r,n),e.done})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"updateDocument",value:(s=O(D.mark((function e(t,n,r){var i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollections();case 2:return i=e.sent,e.abrupt("return",this.withDocumentsTransaction(i,t,"readwrite",(function(e){return e.store.put(r,n),e.done})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return s.apply(this,arguments)})},{key:"deleteDocument",value:(i=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollections();case 2:return r=e.sent,e.abrupt("return",this.withDocumentsTransaction(r,t,"readwrite",(function(e){return e.store.delete(n),e.done})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"withMetadataTransaction",value:(r=O(D.mark((function e(t,n){var r,i=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._metadataConnection,e.t0){e.next=5;break}return e.next=4,_h("".concat(this.database,"-meta"),1,{upgrade:function(e){e.objectStoreNames.contains("collections")||e.createObjectStore("collections",{keyPath:"name"})},blocked:function(){return i.throwDatabaseBlockedError()}});case 4:e.t0=e.sent;case 5:return r=this._metadataConnection=e.t0,e.abrupt("return",this.retryingOnTransactionInactive((function(){var e=r.transaction("collections",t);return n(e)})));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"withDocumentsTransaction",value:(n=O(D.mark((function e(t,n,r,i){var s,a=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._documentsConnection,e.t0){e.next=5;break}return e.next=4,_h(this.database,t.length,{upgrade:function(e){var n,r=Nh(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.objectStoreNames.contains(i)||e.createObjectStore(i)}}catch(s){r.e(s)}finally{r.f()}},blocked:function(){return a.throwDatabaseBlockedError()}});case 4:e.t0=e.sent;case 5:return s=this._documentsConnection=e.t0,e.abrupt("return",this.retryingOnTransactionInactive((function(){var e=s.transaction(n,r);return i(e)})));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"retryingOnTransactionInactive",value:function(e){try{return e()}catch(Wd){if(!(Wd instanceof Error)||!Wd.name.toLowerCase().includes("inactive")&&!Wd.message.toLowerCase().includes("inactive"))throw Wd;return e()}}},{key:"createCollection",value:(t=O(D.mark((function e(t){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.withMetadataTransaction("readwrite",(function(e){return e.store.add({name:t}),e.done}));case 2:this._documentsConnection&&(this._documentsConnection.close(),delete this._documentsConnection);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"throwDatabaseBlockedError",value:function throwDatabaseBlockedError(){throw new Eh("An attempt to open an IndexedDB connection has been blocked, remember to call IndexedDBEngine.closeConnections when necessary. Learn more at https://developer.mozilla.org/en-US/docs/Web/API/IDBOpenDBRequest/blocked_event")}}]),e}();!function(){function e(){k(this,e),S(this,"db",{}),S(this,"helper",void 0),this.helper=new Uh}var t,n,r;A(e,[{key:"database",get:function(){return this.db}},{key:"create",value:function(e,t,n){var r=this.collection(e);if((n=this.helper.obtainDocumentId(n))in r)throw new Oh(n);return r[n]=t,Promise.resolve(n)}},{key:"readOne",value:(r=O(D.mark((function e(t,n){var r,i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.collection(t),e.abrupt("return",null!==(r=i[n])&&void 0!==r?r:Yp(Dh,n,i));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"readMany",value:(n=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasCollection(t)){e.next=2;break}return e.abrupt("return",{});case 2:return r=this.collection(t),e.abrupt("return",this.helper.filterDocuments(r,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"update",value:(t=O(D.mark((function e(t,n,r){var i,s,a;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.collection(t),a=null!==(i=s[n])&&void 0!==i?i:Yp(Dh,n,3,t),this.helper.updateAttributes(a,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"delete",value:function(e,t){var n=this.collection(e);return t in n?(delete n[t],Promise.resolve()):Promise.reject(new Dh(t,e))}},{key:"hasCollection",value:function(e){return e in this.db}},{key:"collection",value:function(e){var t,n;return null!==(n=(t=this.db)[e])&&void 0!==n?n:t[e]={}}}])}(),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";k(this,e),S(this,"prefix",void 0),S(this,"helper",void 0),this.prefix=t,this.helper=new Uh}var t,n,r,i,s;A(e,[{key:"clear",value:function(){for(var e=0,t=Object.keys(localStorage);e<t.length;e++){var n=t[e];n.startsWith(this.prefix)&&localStorage.removeItem(n)}}},{key:"create",value:(s=O(D.mark((function e(t,n,r){var i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.readItem(t,{}),!((r=this.helper.obtainDocumentId(r))in i)){e.next=4;break}throw new Oh(r);case 4:return i[r]=this.serializeAttributes(n),this.writeItem(t,i),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return s.apply(this,arguments)})},{key:"readOne",value:(i=O(D.mark((function e(t,n){var r,i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.readItem(t,{}),i=r[n]){e.next=4;break}throw new Dh(n,t);case 4:return e.abrupt("return",this.deserializeAttributes(i));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"readMany",value:(r=O(D.mark((function e(t,n){var r,i,s,a,o,l;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=this.readItem(t,{}),i=0,s=Object.entries(r);i<s.length;i++)a=L(s[i],2),o=a[0],l=a[1],r[o]=this.deserializeAttributes(l);return e.abrupt("return",this.helper.filterDocuments(r,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"update",value:(n=O(D.mark((function e(t,n,r){var i,s,a;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.readItem(t,{}),s=i[n]){e.next=4;break}throw new Dh(n,t);case 4:a=this.deserializeAttributes(s),this.helper.updateAttributes(a,r),i[n]=this.serializeAttributes(a),this.writeItem(t,i);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"delete",value:(t=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.readItem(t,{}),n in r){e.next=3;break}throw new Dh(n,t);case 3:delete r[n],this.writeItem(t,r);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"readItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(this.prefix+e);return null!==n?JSON.parse(n):t}},{key:"writeItem",value:function(e,t){localStorage.setItem(this.prefix+e,JSON.stringify(t))}},{key:"serializeAttributes",value:function(e){for(var t in e){var n=e[t];e[t]=this.serializeAttributeValue(n)}return e}},{key:"serializeAttributeValue",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.serializeAttributeValue(e)})):e instanceof Date?{__dateTime:e.getTime()}:"object"===B(e)?this.serializeAttributes(e):e}},{key:"deserializeAttributes",value:function(e){for(var t in e){var n=e[t];e[t]=this.deserializeAttributeValue(n)}return e}},{key:"deserializeAttributeValue",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.deserializeAttributeValue(e)})):Pp(e)&&"__dateTime"in e?new Date(e.__dateTime):e}}])}(),function(){function e(t){k(this,e),S(this,"subject",void 0),this.subject=t}var t,n,r,i,s;A(e,[{key:"getProxySubject",value:function(){return this.subject}},{key:"create",value:(s=O(D.mark((function e(t,n,r){var i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("CREATE",t,n,r),e.prev=1,e.next=4,this.subject.create(t,n,r);case 4:return i=e.sent,console.log("CREATED",i),e.abrupt("return",i);case 9:throw e.prev=9,e.t0=e.catch(1),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e,t,n){return s.apply(this,arguments)})},{key:"readOne",value:(i=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("READ ONE",t,n),e.prev=1,e.next=4,this.subject.readOne(t,n);case 4:return r=e.sent,console.log("FOUND",r),e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(1),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e,t){return i.apply(this,arguments)})},{key:"readMany",value:(r=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("READ ALL",t,n),e.prev=1,e.next=4,this.subject.readMany(t,n);case 4:return r=e.sent,console.log("FOUND",r),e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(1),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e,t){return r.apply(this,arguments)})},{key:"update",value:(n=O(D.mark((function e(t,n,r){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("UPDATE",t,n,r),e.prev=1,e.next=4,this.subject.update(t,n,r);case 4:console.log("UPDATED"),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e,t,r){return n.apply(this,arguments)})},{key:"delete",value:(t=O(D.mark((function e(t,n){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("DELETE",t,n),e.prev=1,e.next=4,this.subject.delete(t,n);case 4:console.log("DELETED"),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e,n){return t.apply(this,arguments)})}])}();var zh=void 0;function qh(e){for(;e&&Ph(e);)e=e.getProxySubject();return e}function Vh(){return zh}function Hh(){return zh||Yp(Eh,"Engine must be initialized before performing any operations. Learn more at https://soukai.js.org/guide/engines.html")}function Wh(e){zh=e||void 0}function Jh(){return Kh.apply(this,arguments)}function Kh(){return(Kh=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zh&&Ch(zh)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,zh.closeConnections();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gh=function(){function e(t){k(this,e),S(this,"value",void 0),this.value=String(t)}return A(e,[{key:"equals",value:function(e){return this.value===e.value}},{key:"toString",value:function(){return this.value}}],[{key:"from",value:function(t){return t instanceof e?t:new e(t)}}]),e}();function Zh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yh=function(){function e(t,n,r,i){k(this,e),S(this,"name",void 0),S(this,"related",void 0),S(this,"parent",void 0),S(this,"relatedClass",void 0),S(this,"foreignKeyName",void 0),S(this,"localKeyName",void 0),S(this,"enabled",!0),S(this,"deleteStrategy",null),this.parent=t,this.relatedClass=n,this.foreignKeyName=r,this.localKeyName=i||n.primaryKey}var t;return A(e,[{key:"loaded",get:function(){return void 0!==this.related}},{key:"static",value:function(){return this.constructor}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"resolve",value:function(){return this.load()}},{key:"isEmpty",value:function(){return null}},{key:"getModels",value:(t=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loaded){e.next=3;break}return e.next=3,this.load();case 3:return e.abrupt("return",this.getLoadedModels());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getLoadedModels",value:function(){return this.related?function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(e)||Tp(e)&&!jp(e)?Array.from(e):t&&null==e?[]:[e]}(this.related):[]}},{key:"unload",value:function(){delete this.related}},{key:"onDelete",value:function(e){return this.deleteStrategy=e,this}},{key:"clone",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=null!==(e=r.clones)&&void 0!==e?e:new WeakMap,s=null!==(t=r.constructors)&&void 0!==t?t:new WeakMap,a=Object.create(Object.getPrototypeOf(this));return a.name=this.name,a.parent=this.parent,a.foreignKeyName=this.foreignKeyName,a.localKeyName=this.localKeyName,a.deleteStrategy=this.deleteStrategy,a.enabled=this.enabled,a.relatedClass=null!==(n=s.get(this.relatedClass))&&void 0!==n?n:this.relatedClass,null===this.related?a.related=null:Array.isArray(this.related)?a.related=this.related.map((function(e){return e.clone({clones:i,constructors:s})})):this.related&&(a.related=this.related.clone({clones:i,constructors:s})),a}},{key:"initializeInverseRelations",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Zh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}(this.relatedClass.relations);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=e.requireRelation(r);i.enabled&&i.isInverseOf(this)&&(i.setForeignAttributes(this.parent),i.addRelated(this.parent))}}catch(s){n.e(s)}finally{n.f()}}},{key:"isInverseOf",value:function(e){return this.static().inverseRelationClasses.some((function(t){return e instanceof t}))&&e.relatedClass===this.parent.constructor&&e.foreignKeyName===this.foreignKeyName&&e.localKeyName===this.localKeyName}}]),e}();S(Yh,"inverseRelationClasses",[]);var Qh=function(e){_(n,Yh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(e,r,i,s){return k(this,n),t.call(this,e,r,i||eh(r.name+"_"+r.primaryKey+"s"),s)}return A(n,[{key:"attach",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t instanceof this.relatedClass?t:this.relatedClass.newInstance(t);return lh(n,(function(){e.assertLoaded("attach")&&!e.isRelated(n)&&(e.addRelated(n),e.initializeInverseRelations(n),e.setForeignAttributes(n))}))}},{key:"addRelated",value:function(e){var t;this.related=Gp([].concat(I(null!==(t=this.related)&&void 0!==t?t:[]),[e]))}},{key:"isRelated",value:function(e){var t;return!(null===(t=this.related)||void 0===t||!t.includes(e))}},{key:"assertLoaded",value:function(e){if(this.loaded)return!0;if(!this.parent.exists())return this.related=[],!0;throw new Eh('The "'.concat(e,`" method can't be called before loading the relationship`))}}]),n}();var Xh=function(e){_(r,Qh);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(r);function r(){return k(this,r),n.apply(this,arguments)}return A(r,[{key:"isEmpty",value:function(){return 0===this.parent.getAttribute(this.foreignKeyName).length}},{key:"load",value:(t=O(D.mark((function e(){var t;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.parent.getAttribute(this.foreignKeyName),!this.isEmpty()){e.next=5;break}e.t0=[],e.next=15;break;case 5:if(this.localKeyName!==this.relatedClass.primaryKey){e.next=11;break}return e.next=8,this.relatedClass.all({$in:t});case 8:e.t1=e.sent,e.next=14;break;case 11:return e.next=13,this.relatedClass.all(S({},this.localKeyName,{$or:[].concat(I(t.map((function(e){return{$eq:e}}))),I(t.map((function(e){return{$contains:e}}))))}));case 13:e.t1=e.sent;case 14:e.t0=e.t1;case 15:return this.related=e.t0,e.abrupt("return",this.related);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setForeignAttributes",value:function(e){var t=e.getAttribute(this.localKeyName);if(t){var n=this.parent.getAttribute(this.foreignKeyName);n.includes(t)||this.parent.setAttribute(this.foreignKeyName,[].concat(I(n),[t]))}}}]),r}();var ef=function(e){_(n,Yh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(e,r,i,s){return k(this,n),t.call(this,e,r,i||eh(r.name+"_"+r.primaryKey),s)}return A(n,[{key:"attach",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t instanceof this.relatedClass?t:this.relatedClass.newInstance(t);return lh(n,(function(){if(e.loaded&&!e.isRelated(n))throw new Eh(`The "attach" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`);e.addRelated(n),e.initializeInverseRelations(n),e.setForeignAttributes(n)}))}},{key:"addRelated",value:function(e){this.related=e}},{key:"isRelated",value:function(e){return e===this.related}}]),n}();var tf=function(e){_(r,ef);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(r);function r(){return k(this,r),n.apply(this,arguments)}return A(r,[{key:"isEmpty",value:function(){return!this.parent.getAttribute(this.foreignKeyName)}},{key:"load",value:(t=O(D.mark((function e(){var t;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.parent.getAttribute(this.foreignKeyName),!this.isEmpty()){e.next=5;break}e.t0=null,e.next=15;break;case 5:if(this.localKeyName!==this.relatedClass.primaryKey){e.next=11;break}return e.next=8,this.relatedClass.find(t);case 8:e.t1=e.sent,e.next=14;break;case 11:return e.next=13,this.relatedClass.first(S({},this.localKeyName,t));case 13:e.t1=e.sent;case 14:e.t0=e.t1;case 15:return this.related=e.t0,e.abrupt("return",this.related);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setForeignAttributes",value:function(e){var t=e.getAttribute(this.localKeyName);t&&this.parent.setAttribute(this.foreignKeyName,t)}}]),r}();var nf=function(e){_(r,Qh);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(r);function r(){return k(this,r),n.apply(this,arguments)}return A(r,[{key:"load",value:(t=O(D.mark((function e(){var t;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.parent.getAttribute(this.localKeyName),e.next=3,this.relatedClass.all(S({},this.foreignKeyName,{$or:[{$eq:t},{$contains:t}]}));case 3:return this.related=e.sent,e.abrupt("return",this.related);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setForeignAttributes",value:function(e){var t=this.parent.getAttribute(this.localKeyName);if(t){var n=e.getAttribute(this.foreignKeyName);Array.isArray(n)?n.includes(t)||e.setAttribute(this.foreignKeyName,[].concat(I(n),[t])):e.setAttribute(this.foreignKeyName,t)}}}]),r}();var rf=function(e){_(r,ef);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(r);function r(){return k(this,r),n.apply(this,arguments)}return A(r,[{key:"load",value:(t=O(D.mark((function e(){var t;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.parent.getAttribute(this.localKeyName),e.next=3,this.relatedClass.first(S({},this.foreignKeyName,{$or:[{$eq:t},{$contains:t}]}));case 3:return this.related=e.sent,e.abrupt("return",this.related);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setForeignAttributes",value:function(e){var t=this.parent.getAttribute(this.localKeyName);if(t){var n=e.getAttribute(this.foreignKeyName);Array.isArray(n)?n.includes(t)||e.setAttribute(this.foreignKeyName,[].concat(I(n),[t])):e.setAttribute(this.foreignKeyName,t)}}}]),r}(),sf={Number:"number",String:"string",Boolean:"boolean",Array:"array",Object:"object",Date:"date",Key:"key",Any:"any"},af=Object.values(sf);function of(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if("string"==typeof n&&-1!==af.indexOf(n))i.type=n;else{if("object"!==B(n))throw new Th(e,"Invalid field definition ".concat(t));i=n}if(void 0===i.type)i={type:sf.Object,fields:i};else if(-1===af.indexOf(i.type))throw new Th(e,"Invalid field definition ".concat(t));switch(r||(i.required=!!i.required),i.type){case sf.Object:if(void 0===i.fields)throw new Th(e,"Field definition of type object requires fields attribute ".concat(t));for(var s in i.fields)$p(i.fields,s)&&(i.fields[s]=of(e,s,i.fields[s]));break;case sf.Array:if(void 0===i.items)throw new Th(e,"Field definition of type array requires items attribute. Field: '".concat(t,"'"));i.items=of(e,"items",i.items,!0)}return i}function lf(e){return e.type===sf.Array}function uf(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=L(r[n],2),s=i[0],a=i[1];if(!(s in e))switch(a.type){case sf.Object:e[s]={};break;case sf.Array:e[s]=[];break;default:e[s]=void 0}if(a.type===sf.Object){var o=e[s];if(!Pp(o))throw new Eh("Invalid value for field ".concat(s));e[s]=uf(o,a.fields)}}return e}function cf(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=L(r[n],2),s=i[0],a=i[1];if(a.required&&(!(s in e)||Mp(e[s])))throw new Eh("The ".concat(s," attribute is required."));if(s in e&&!Mp(e[s])&&a.type===sf.Object){var o=e[s];if(!Pp(o))throw new Eh("Invalid value for field ".concat(s));cf(o,a.fields)}}}function df(e,t){for(var n in e=Lp(e)){var r=t[n];if(void 0===e[n])delete e[n];else if(n in t&&r.type===sf.Object){var i=df(e[n],r.fields);Dp(i)?delete e[n]:e[n]=i}}return e}var pf={CreatedAt:"createdAt",UpdatedAt:"updatedAt"},hf=Object.values(pf),ff=new WeakMap;function mf(e){var t,n=e.target,r=null!==(t=ff.get(n))&&void 0!==t?t:[e.getTargetEngine(),0],i=L(r,2),s=i[0],a=i[1],o=function(){var e=ff.get(n),t=L(e,2),r=t[0],i=t[1];i>1?ff.set(n,[r,i-1]):(ff.delete(n),n.setEngine(r))},l=function(e){var t=e();return t instanceof Promise?t.then((function(){return lh(t,(function(){return o()}))})):lh(t,(function(){return o()}))};return ff.set(n,[s,a+1]),n.setEngine(e.engine),e.operation?l(e.operation):new Proxy(n,{get:function(e,t,n){var r=Reflect.get(e,t,n);return"function"!=typeof r?(o(),r):function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return l((function(){return r.call.apply(r,[e].concat(n))}))}}})}function vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vf(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yf(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wf="created",xf="updated",_f="deleted",kf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(k(this,e),!("__pureInstance"in t))return this.static().ensureBooted(),this.initializeProxy(),this.initialize(t,n),this._proxy}var t,n,r,i,s,a,o,l,u,c,d,p,h,f,m,v,g,y,b,w,x,_;return A(e,[{key:"static",value:function(e){var t=this.constructor;return e?t[e]:t}},{key:"newInstance",value:function(){for(var e=this.constructor,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return z(e,n)}},{key:"fresh",value:(_=O(D.mark((function e(){var t,n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getPrimaryKey(),e.next=3,this.static().find(t);case 3:if(n=e.sent){e.next=6;break}throw new Eh("Couldn't get fresh instance for ".concat(this.static("modelName")," with id '").concat(t,"'"));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e=this.castAttributes(e,this.static("fields")))this.setAttribute(t,e[t]);return this.save()}},{key:"hasRelation",value:function(e){return-1!==this.static("relations").indexOf(e)}},{key:"getRelation",value:function(e){return this._relations[e]||null}},{key:"requireRelation",value:function(e){var t;return null!==(t=this._relations[e])&&void 0!==t?t:Yp(Eh,"Attempting to use undefined ".concat(e," relation."))}},{key:"getEngine",value:function(){var e;return null!==(e=this._engine)&&void 0!==e?e:this.static().getEngine()}},{key:"getFinalEngine",value:function(){var e=this.getEngine();return e&&qh(e)}},{key:"requireEngine",value:function(){var e;return null!==(e=this._engine)&&void 0!==e?e:this.static().requireEngine()}},{key:"requireFinalEngine",value:function(){return qh(this.requireEngine())}},{key:"loadRelation",value:function(e){var t=this.requireRelation(e);return t.relatedClass.withEngine(this.requireEngine(),(function(){return t.load()}))}},{key:"loadRelationIfUnloaded",value:(x=O(D.mark((function e(t){var n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.requireRelation(t),e.abrupt("return",n.loaded?n.getLoadedModels():this.loadRelation(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"unloadRelation",value:function(e){this.requireRelation(e).unload()}},{key:"getRelationModel",value:function(e){var t,n,r,i=this.requireRelation(e);return i instanceof Qh?(console.warn("You're getting a single model from the multi-model '".concat(e,"' relation ")+"in the '".concat(this.static("modelName"),"' model.")),null!==(n=null===(r=i.related)||void 0===r?void 0:r[0])&&void 0!==n?n:null):null!==(t=i.related)&&void 0!==t?t:null}},{key:"getRelationModels",value:function(e){var t,n=this.requireRelation(e);return n instanceof ef?n.related?[n.related]:null:null!==(t=n.related)&&void 0!==t?t:null}},{key:"setRelationModel",value:function(e,t){var n=this.requireRelation(e);if(n instanceof Qh)return console.warn("You're setting a single model for the multi-model '".concat(e,"' relation ")+"in the '".concat(this.static("modelName"),"' model.")),void(n.related=[t]);n.related=t}},{key:"setRelationModels",value:function(e,t){var n=this.requireRelation(e);n.related=function(){var e;if(null===t||n instanceof Qh)return t;if(t.length>0)throw new Eh("Can't set multiple models for SingleModelRelation, use setRelationModel instead");return null!==(e=t[0])&&void 0!==e?e:null}()}},{key:"isRelationLoaded",value:function(e){return this.requireRelation(e).loaded}},{key:"hasAttribute",value:function(e){var t,n=e.split("."),r=df(this._attributes,this.static("fields")),i=yf(n);try{for(i.s();!(t=i.n()).done;){var s=t.value;if(!Pp(r)||!(s in r))return!1;r=r[s]}}catch(a){i.e(a)}finally{i.f()}return void 0!==r}},{key:"setAttribute",value:function(e,t){return this.hasAttributeSetter(e)?this.callAttributeSetter(e,t):this.setAttributeValue(e,t)}},{key:"setAttributeValue",value:function(e,t){this._attributes[e]=t=this.castAttribute(t,{definition:this.static("fields")[e]}),this.attributeValueChanged(this._originalAttributes[e],t)?this._dirtyAttributes[e]=t:delete this._dirtyAttributes[e]}},{key:"hasAttributeSetter",value:function(e){return this.static("__attributeSetters").has(e)}},{key:"callAttributeSetter",value:function(e,t){var n=this.static("__attributeSetters").get(e);return null==n?void 0:n.call(this,t)}},{key:"getOriginalAttribute",value:function(e){return this._originalAttributes[e]}},{key:"setOriginalAttribute",value:function(e,t){t=this.castAttribute(t,{definition:this.static("fields")[e]}),this._originalAttributes[e]=t,this._attributes[e]=t,delete this._dirtyAttributes[e]}},{key:"setAttributes",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=L(n[t],2),i=r[0],s=r[1];this.setAttribute(i,s)}}},{key:"getMalformedDocumentAttributes",value:function(){return this._malformedDocumentAttributes}},{key:"setMalformedDocumentAttributes",value:function(e){this._malformedDocumentAttributes=e}},{key:"setEngine",value:function(e){e?this._engine=e:delete this._engine}},{key:"withEngine",value:function(e,t){var n=this;return mf({target:this,getTargetEngine:function(){return n._engine},operation:t&&function(){return t(n)},engine:e})}},{key:"withoutTimestamps",value:(w=O(D.mark((function e(t){var n=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.static().ignoringTimestamps.set(this,!0),e.t0=lh,e.next=4,t();case 4:return e.t1=e.sent,e.t2=function(){return n.static().ignoringTimestamps.delete(n)},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"getAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.hasAttributeGetter(e)?this.callAttributeGetter(e):this.getAttributeValue(e,t)}},{key:"getAttributeValue",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("."),r=this.getAttributes(t);n.length>0;){var i=r[n.shift()];if(!Pp(i))return i;r=i}return r}},{key:"getAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?Lp(this._attributes):df(this._attributes,this.static("fields"))}},{key:"hasAttributeGetter",value:function(e){return this.static("__attributeGetters").has(e)}},{key:"callAttributeGetter",value:function(e){var t=this.static("__attributeGetters").get(e);return null==t?void 0:t.call(this)}},{key:"unsetAttribute",value:function(e){$p(this._attributes,e)&&(e in this.static("fields")?this._attributes[e]=void 0:delete this._attributes[e],void 0!==this._originalAttributes[e]&&(this._dirtyAttributes[e]=void 0))}},{key:"is",value:function(e){return this.getPrimaryKey()===e.getPrimaryKey()}},{key:"isDirty",value:function(e){return e?e in this._dirtyAttributes:Object.values(this._dirtyAttributes).length>0}},{key:"cleanDirty",value:function(){this._originalAttributes=Lp(this._attributes),this._dirtyAttributes={},this._exists=!0}},{key:"getPrimaryKey",value:function(){var e;return null!==(e=this._attributes[this.static("primaryKey")])&&void 0!==e?e:null}},{key:"getSerializedPrimaryKey",value:function(){var e=this.getPrimaryKey();return e?this.serializeKey(e):null}},{key:"delete",value:(b=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._exists){e.next=2;break}return e.abrupt("return",this);case 2:return e.next=4,this.performDelete();case 4:return e.next=6,this.emit(_f);case 6:return e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"save",value:(y=O(D.mark((function e(){var t;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cf(this._attributes,this.static("fields")),!(t=this.exists())||this.isDirty()){e.next=4;break}return e.abrupt("return",this);case 4:return e.next=6,this.beforeSave();case 6:return e.next=8,this.performSave();case 8:return e.next=10,this.afterSave();case 10:return e.next=12,this.emit(t?xf:wf);case 12:return e.abrupt("return",this);case 13:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"fixMalformedAttributes",value:function(){this.performMalformedAttributeFixes(),this._malformedDocumentAttributes={}}},{key:"touch",value:function(){this.setAttribute(pf.UpdatedAt,new Date)}},{key:"setExists",value:function(e){this._exists=e}},{key:"exists",value:function(){return this._exists}},{key:"wasRecentlyCreated",value:function(){return this._wasRecentlyCreated}},{key:"clone",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null!==(e=n.clones)&&void 0!==e?e:new WeakMap;if(r.has(this))return r.get(this);var i=n.constructors,s=Array.isArray(i)?lh(new WeakMap,(function(e){i.forEach((function(t){var n=L(t,2),r=n[0],i=n[1];return e.set(r,i)}))})):null!=i?i:new WeakMap,a=null!==(t=s.get(this.static()))&&void 0!==t?t:this.static(),o=new a(this.getAttributes());r.set(this,o);for(var l=0,u=Object.entries(this._relations);l<u.length;l++){var c=L(u[l],2),d=c[0],p=c[1];o._relations[d]=lh(p.clone({clones:r,constructors:s}),(function(e){return e.parent=o}))}return n.clean&&o.cleanDirty(),o}},{key:"initialize",value:function(e,t){this._exists=t,this._wasRecentlyCreated=!1,this.initializeAttributes(e,t),this.initializeRelations()}},{key:"initializeProxy",value:function(){this._proxy=new Proxy(this,{get:function(e,t,n){if("string"!=typeof t||t in e||-1!==e.static("classFields").indexOf(t))return Reflect.get(e,t,n);if(e.hasRelation(t))return e._proxy.isRelationLoaded(t)?e._proxy.requireRelation(t).related:void 0;if(t.startsWith("related")){var r=eh(t.substr(7));if(e._proxy.hasRelation(r))return e._relations[r]}return e._proxy.getAttribute(t)},set:function(e,t,n,r){return"string"!=typeof t||t in e||-1!==e.static("classFields").indexOf(t)?Reflect.set(e,t,n,r):e._proxy.hasRelation(t)?(e._proxy.requireRelation(t).related=n,!0):(e._proxy.setAttribute(t,n),!0)},deleteProperty:function(e,t){return"string"!=typeof t||t in e?Reflect.deleteProperty(e,t):e._proxy.hasRelation(t)?(e._proxy.unloadRelation(t),!0):t in e._attributes&&-1===e.static("classFields").indexOf(t)?(e._proxy.unsetAttribute(t),!0):Reflect.deleteProperty(e,t)}})}},{key:"initializeAttributes",value:function(e,t){var n=this.static("fields");this._malformedDocumentAttributes={},this._attributes=Lp(e),this._attributes=this.castAttributes(uf(this._attributes,n),n,this._malformedDocumentAttributes),this._originalAttributes=t?Lp(this._attributes):{},this._dirtyAttributes=t?{}:Lp(this._attributes),delete this._malformedDocumentAttributes[this.static("primaryKey")]}},{key:"initializeRelations",value:function(){var e=this;this._relations=this.static("relations").reduce((function(t,n){var r,i=e._proxy,s=null===(r=i[eh(n)+"Relationship"])||void 0===r?void 0:r.call(i);return s.name=n,t[n]=s,t}),{})}},{key:"getDefaultCollection",value:function(){return this.static("modelName").toLowerCase()+"s"}},{key:"createFromEngineDocument",value:(g=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parseEngineDocumentAttributes(t,n);case 2:return(r=e.sent)[this.static("primaryKey")]=t,e.abrupt("return",this.newInstance(r,!0));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"createManyFromEngineDocuments",value:(v=O(D.mark((function e(t){var n=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(Object.entries(t).map((function(e){var t=L(e,2),r=t[0],i=t[1];return n.createFromEngineDocument(n.parseKey(r),i)}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)})},{key:"beforeSave",value:(m=O(D.mark((function e(){var t,n,r,i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Date,(n=this.static().ignoringTimestamps).has(this)||n.has(this.static())||(this.static().hasAutomaticTimestamp(pf.CreatedAt)&&this.setAttribute(pf.CreatedAt,null!==(r=this.getAttribute(pf.CreatedAt))&&void 0!==r?r:t),this.static().hasAutomaticTimestamp(pf.UpdatedAt)&&(i=this.isDirty(pf.UpdatedAt)?this.getAttribute(pf.UpdatedAt):t,this.setAttribute(pf.UpdatedAt,null!=i?i:t)));case 3:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"performSave",value:(f=O(D.mark((function e(){var t,n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.exists(),e.next=3,this.syncDirty();case 3:n=e.sent,this._wasRecentlyCreated=this._wasRecentlyCreated||!t,this._attributes[this.static("primaryKey")]=this.parseKey(n);case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"afterSave",value:(h=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cleanDirty(),e.next=3,this.loadEmptyRelations();case 3:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"performDelete",value:(p=O(D.mark((function e(){var t;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCascadeModels();case 2:return t=e.sent,e.next=5,this.deleteModelsFromEngine(t);case 5:t.forEach((function(e){return e.reset()}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"performMalformedAttributeFixes",value:function(){for(var e=this,t=Object.keys(this._malformedDocumentAttributes),n=function(n,r){return r.type===sf.Array?t.some((function(e){return e.startsWith("".concat(n,"."))})):n in e._malformedDocumentAttributes},r=0,i=Object.entries(this.static("fields"));r<i.length;r++){var s=L(i[r],2),a=s[0];n(a,s[1])&&(this._dirtyAttributes[a]=this._attributes[a])}}},{key:"emit",value:(d=O(D.mark((function e(t){var n,r,i=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=this.static().listeners.get(this.static()))||void 0===n?void 0:n[t]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.all(r.map((function(e){return e(i)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"syncDirty",value:(c=O(D.mark((function e(){var t,n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.exists()){e.next=2;break}return e.abrupt("return",this.requireEngine().create(this.static("collection"),this.toEngineDocument(),this.getSerializedPrimaryKey()||void 0));case 2:return t=this.getDirtyEngineDocumentUpdates(),n=this.getSerializedPrimaryKey(),e.next=6,this.requireEngine().update(this.static("collection"),n,t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getCascadeModels",value:(u=O(D.mark((function e(){var t,n,r,i=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.static("relations").map((function(e){return i.requireRelation(e)})).filter((function(e){return e.enabled&&"cascade"===e.deleteStrategy})).map(function(){var e=O(D.mark((function e(t){var n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getModels();case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.getCascadeModels()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:return n=e.sent,e.next=6,Promise.all(n.flat());case 6:return r=e.sent,e.abrupt("return",[].concat(I(r.flat()),[this]).filter((function(e){return e.exists()})));case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"deleteModelsFromEngine",value:(l=O(D.mark((function e(t){var n,r=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return[e.static("collection"),e.getSerializedPrimaryKey()]})),e.next=3,Promise.all(n.map((function(e){var t=L(e,2),n=t[0],i=t[1];return r.requireEngine().delete(n,i)})));case 3:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"resetEngineData",value:function(){this.reset()}},{key:"reset",value:function(){delete this._attributes[this.static("primaryKey")],this._exists=!1,this._dirtyAttributes=Lp(this._attributes)}},{key:"hasOne",value:function(e,t,n){return new rf(this,e,t,n)}},{key:"belongsToOne",value:function(e,t,n){return new tf(this,e,t,n)}},{key:"hasMany",value:function(e,t,n){return new nf(this,e,t,n)}},{key:"belongsToMany",value:function(e,t,n){return new Xh(this,e,t,n)}},{key:"loadEmptyRelations",value:(o=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this._relations).filter((function(e){return e.enabled&&!e.loaded&&e.isEmpty()})).map((function(e){return e.load()})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"attributeValueChanged",value:function(e,t){return e instanceof Gh?Np(e)!==Np(t):!Op(e,t)}},{key:"castAttributes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i={};for(var s in e)i[s]=this.castAttribute(e[s],{field:r+s,malformedAttributes:n,definition:t[s]});return i}},{key:"castAttribute",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.field,i=n.definition,s=n.malformedAttributes;if(Mp(e))return e;if(void 0===i)switch(B(e)){case"object":return Array.isArray(e)?e.map((function(e,n){return t.castAttribute(e,{field:r&&"".concat(r,".").concat(n),malformedAttributes:s})})):e instanceof Date||e instanceof Gh?e:Np(e);case"symbol":case"function":case"undefined":return;default:return e}switch(i.type){case sf.Date:if(!(["string","number"].includes(B(e))||e instanceof Date))throw new Eh("Invalid Date value: ".concat(e));return new Date(e);case sf.Object:if(!Pp(e))throw new Eh("Invalid Object value: ".concat(e));return this.castAttributes(e,i.fields,s,r&&"".concat(r,"."));case sf.Array:if(!Array.isArray(e))throw new Eh("Invalid Array value: ".concat(e));return e.map((function(e,n){return t.castAttribute(e,{field:r&&"".concat(r,".").concat(n),definition:i.items,malformedAttributes:s})}));case sf.Boolean:return!!e;case sf.Number:var a=parseFloat(e);if(isNaN(a))throw new Eh("Invalid Number value: ".concat(e));return a;case sf.String:return Np(e);case sf.Key:if(e instanceof Gh)return Np(e);if(r&&s){var o,l=null!==(o=s[r])&&void 0!==o?o:[];s[r]=[].concat(I(l),["malformed-key"])}return e;default:return e}}},{key:"toEngineDocument",value:function(){return df(this._attributes,this.static("fields"))}},{key:"getDirtyEngineDocumentUpdates",value:function(){var e=Lp(this._dirtyAttributes);for(var t in e)void 0===e[t]&&(e[t]={$unset:!0});return e}},{key:"parseEngineDocumentAttributes",value:(a=O(D.mark((function e(t,n){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gf({},n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"serializeKey",value:function(e){return Np(e)}},{key:"parseKey",value:function(e){return e}}],[{key:"boot",value:function(t){var n,r,i;this.bootedModels.set(this,!0);var s=this,a=s.pureInstance(),o={},l=Object.getOwnPropertyDescriptor(s,"modelName");if(s.modelName=null!==(n=null!==(r=null==l?void 0:l.value)&&void 0!==r?r:t)&&void 0!==n?n:s.name,s.collection=null!==(i=s.collection)&&void 0!==i?i:a.getDefaultCollection(),"boolean"==typeof s.timestamps||void 0===s.timestamps)if(void 0===s.timestamps||s.timestamps){var u,c=yf(hf);try{for(c.s();!(u=c.n()).done;)o[u.value]={type:sf.Date,required:!1}}catch(D){c.e(D)}finally{c.f()}s.timestamps=hf}else s.timestamps=[];else{if(!Array.isArray(s.timestamps))throw new Th(s.modelName,"Invalid timestamps definition");var d,p=yf(s.timestamps);try{for(p.s();!(d=p.n()).done;){var h=d.value;if(!hf.includes(h))throw new Th(s.modelName,"Invalid timestamp field defined (".concat(h,")"));o[h]={type:sf.Date,required:!1}}}catch(D){p.e(D)}finally{p.f()}}if(void 0!==this.fields)for(var f=0,m=Object.entries(this.fields);f<m.length;f++){var v,g,y=L(m[f],2),b=y[0],w=y[1];if($p(this.fields,b)&&(o[b]=of(s.modelName,b,w),s.timestamps.includes(b)&&((null===(v=o[b])||void 0===v?void 0:v.type)!==sf.Date||null!==(g=o[b])&&void 0!==g&&g.required)))throw new Th(s.modelName,"Field ".concat(b," definition must be type Date and not required ")+"because it is used an automatic timestamp. Learn more at https://soukai.js.org/guide/defining-models.html#automatic-timestamps")}s.primaryKey in o||(o[s.primaryKey]={type:sf.Key,required:!1});for(var x=Object.getOwnPropertyNames(a).concat(["_engine"]),_=[],k=new Map,S=new Map,R=Object.getPrototypeOf(a);R!==e.prototype;){R.constructor.classFields&&x.push.apply(x,I(R.constructor.classFields));for(var A=0,C=Object.entries(Object.getOwnPropertyDescriptors(R));A<C.length;A++){var E=L(C[A],2),O=E[0];"function"==typeof E[1].value&&(O.endsWith("Relationship")?_.push(O.slice(0,-12)):O.match(/get.+Attribute/)?k.set(eh(O.slice(3,-9)),a[O]):O.match(/set.+Attribute/)&&S.set(eh(O.slice(3,-9)),a[O]))}R=Object.getPrototypeOf(R)}this.classFields=Gp(x),this.relations=Gp(_),this.__attributeGetters=k,this.__attributeSetters=S,this.fields=o}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new this(e);return t.save()}},{key:"createFromEngineDocument",value:function(e,t){return this.instance().createFromEngineDocument(e,t)}},{key:"createManyFromEngineDocuments",value:function(e){return this.instance().createManyFromEngineDocuments(e)}},{key:"findOrFail",value:(s=O(D.mark((function e(t){var n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.find(t);case 2:return n=e.sent,e.abrupt("return",null!=n?n:Yp("Failed getting required model ".concat(t)));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"find",value:(i=O(D.mark((function e(t){var n,r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ensureBooted(),e.prev=1,e.next=4,this.requireEngine().readOne(this.collection,this.instance().serializeKey(t));case 4:return n=e.sent,e.next=7,this.createFromEngineDocument(t,n);case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e){return i.apply(this,arguments)})},{key:"all",value:(r=O(D.mark((function e(t){var n,r,i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ensureBooted(),n=this.requireEngine(),e.next=4,n.readMany(this.collection,t);case 4:return r=e.sent,e.next=7,this.createManyFromEngineDocuments(r);case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"first",value:(n=O(D.mark((function e(t){var n,r,i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,r=L(n,1),i=r[0],e.abrupt("return",i||null);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"newInstance",value:function(){var e;return(e=this.instance()).newInstance.apply(e,arguments)}},{key:"on",value:function(e,t){var n;this.listeners.has(this)||this.listeners.set(this,{});var r=this.listeners.get(this),i=null!==(n=r[e])&&void 0!==n?n:r[e]=[];return i.push(t),function(){return Kp(i,t)}}},{key:"instance",value:function(){return this.instances.has(this)||this.instances.set(this,new this),this.instances.get(this)}},{key:"hasAutomaticTimestamp",value:function(e){return-1!==this.timestamps.indexOf(e)}},{key:"hasAutomaticTimestamps",value:function(){return this.timestamps.length>0}},{key:"getEngine",value:function(){var e;return null!==(e=this.engines.get(this))&&void 0!==e?e:Vh()}},{key:"getFinalEngine",value:function(){var e=this.getEngine();return e&&qh(e)}},{key:"requireEngine",value:function(){var e;return null!==(e=this.engines.get(this))&&void 0!==e?e:Hh()}},{key:"requireFinalEngine",value:function(){return qh(this.requireEngine())}},{key:"setEngine",value:function(e){e?this.engines.set(this,e):this.engines.delete(this)}},{key:"withEngine",value:function(e,t){var n=this;return mf({target:this,getTargetEngine:function(){return n.engines.get(n)},engine:e,operation:t})}},{key:"withoutTimestamps",value:(t=O(D.mark((function e(t){var n=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ignoringTimestamps.set(this,!0),e.t0=lh,e.next=4,t();case 4:return e.t1=e.sent,e.t2=function(){return n.ignoringTimestamps.delete(n)},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"pureInstance",value:function(){return this.pureInstances.has(this)||this.pureInstances.set(this,new this({__pureInstance:!0})),this.pureInstances.get(this)}},{key:"ensureBooted",value:function(){this.bootedModels.has(this)||this.boot()}}]),e}();function Sf(e,t){return lh(function(e){_(n,e);var t=function(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=j(t);if(n){var i=j(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return M(this,e)}}(n);function n(){return k(this,n),t.apply(this,arguments)}return A(n)}(t?e:kf),(function(n){Object.assign(n,null!=t?t:e)}))}S(kf,"collection",void 0),S(kf,"primaryKey","id"),S(kf,"timestamps",void 0),S(kf,"fields",void 0),S(kf,"modelName",void 0),S(kf,"classFields",[]),S(kf,"relations",[]),S(kf,"__attributeGetters",new Map),S(kf,"__attributeSetters",new Map),S(kf,"instances",new WeakMap),S(kf,"pureInstances",new WeakMap),S(kf,"bootedModels",new WeakMap),S(kf,"engines",new WeakMap),S(kf,"listeners",new WeakMap),S(kf,"ignoringTimestamps",new WeakMap),rf.inverseRelationClasses=[tf,Xh],nf.inverseRelationClasses=[tf,Xh],tf.inverseRelationClasses=[rf,nf],Xh.inverseRelationClasses=[rf,nf];var Rf=new Map;function Af(e){var t;return null!==(t=Rf.get(e))&&void 0!==t?t:Yp(Eh,"Could not find Model with name '".concat(e,"', are you sure it's booted?"))}function If(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=L(n[t],2),i=r[0],s=r[1];s.boot(i),Rf.set(i,s)}}function Cf(e){for(var t=Object.getPrototypeOf(e);t;){if(t===kf)return!0;t=Object.getPrototypeOf(t)}return!1}function Ef(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[".schema",".test"],n={},r=function(){var e,r=L(s[i],2),a=r[0],o=r[1],l=(a.match(/^(.*\/)?(.+)\.(j|t)s$/)||[])[2];if(void 0===l)return"continue";if(t.some((function(e){return l.endsWith(e)})))return"continue";var u=null!==(e=o.default)&&void 0!==e?e:o[Object.keys(o)[0]];if(!u||!Cf(u))return"continue";n[l]=u},i=0,s=Object.entries(e);i<s.length;i++)r();return n}var Of=function(){function e(){k(this,e),S(this,"_bootedModels",{})}var t;return A(e,[{key:"engine",get:function(){return Vh()}},{key:"requireEngine",value:function(){return Hh()}},{key:"useEngine",value:function(e){Wh(e)}},{key:"closeConnections",value:(t=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jh();case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"model",value:function(e){return this._bootedModels[e]}},{key:"loadModel",value:function(e,t){t.boot(e)}},{key:"loadModels",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=L(n[t],2),i=r[0],s=r[1];s.boot(i),e[i]=s}}}]),e}();new Of;var Df=("undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:window).Error,Tf=function(e){_(JSError,Df);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(JSError);function JSError(e,n){var r;return k(this,JSError),(r=t.call.apply(t,[this].concat([e,n]))).name="JSError"===(this instanceof JSError?this.constructor:void 0).name?"Error":(this instanceof JSError?this.constructor:void 0).name,Object.setPrototypeOf(R(r),(this instanceof JSError?this.constructor:void 0).prototype),r}return JSError}(),Pf=function(){function e(){if(k(this,e),!this.static().buildingPureInstance())return this.initializeProxy(),this._proxy}return A(e,[{key:"static",value:function(){return this.constructor}},{key:"__get",value:function(e){return Reflect.get(this._proxyTarget,e)}},{key:"__set",value:function(e,t){Reflect.set(this._proxyTarget,e,t)}},{key:"__delete",value:function(e){Reflect.deleteProperty(this._proxyTarget,e)}},{key:"initializeProxy",value:function(){var e=this.static();this._proxyTarget=this,this._proxy=new Proxy(this._proxyTarget,{get:function(t,n,r){return"string"!=typeof n||n in t||e.isReservedProperty(n)?Reflect.get(t,n,r):t.__get(n)},set:function(t,n,r,i){return"string"!=typeof n||n in t||e.isReservedProperty(n)?Reflect.set(t,n,r,i):(t.__set(n,r),!0)},deleteProperty:function(t,n){return"string"!=typeof n||n in t||e.isReservedProperty(n)?Reflect.deleteProperty(t,n):(t.__delete(n),!0)}})}}],[{key:"buildingPureInstance",value:function(){return!!this.__buildingPureInstance||(this.__reservedProperties.has(this)||(this.__buildingPureInstance=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__buildingPureInstance=!1),!1)}},{key:"isReservedProperty",value:function(e){var t;return!(null===(t=this.__reservedProperties.get(this))||void 0===t||!t.has(e))}}]),e}();function jf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mf(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}S(Pf,"__buildingPureInstance",void 0),S(Pf,"__reservedProperties",new WeakMap);var $f,Uf=Array.isArray.bind(Array);function Nf(e){return"function"==typeof(null==e?void 0:e[Symbol.iterator])}function Ff(e){return"object"===B(e)&&null!==e}function Bf(e){return"string"==typeof e||e instanceof String}function zf(e){for(var t in e=Lf({},e))qf(e,t)&&(e[t]=zf(e[t]));return e}function qf(e,t){var n;return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)&&Ff(n=e[t])&&n.constructor===Object}function Vf(e,t){var n,r=Lf({},e),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}(Array.isArray(t)?t:[t]);try{for(i.s();!(n=i.n()).done;)delete r[n.value]}catch(s){i.e(s)}finally{i.f()}return r}function Hf(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=L(r[n],2),s=i[0],a=i[1];null!=a&&(t[s]=a)}return t}function Wf(e){return String(e)}function Jf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Kf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function Kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.entries.bind(Object),$f=Symbol.iterator;var Gf=function(e){function t(e){k(this,t),S(this,"keysToItems",void 0),S(this,"itemsToKeys",void 0),S(this,"getKey",void 0),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=null!=e?e:function(e){return Wf(e)}}return A(t,[{key:$f,value:D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.keysToItems,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"size",get:function(){return this.keysToItems.size}},{key:"items",value:function(){return this.keysToItems.values()}},{key:"keys",value:function(){return this.keysToItems.keys()}},{key:"entries",value:function(){return this.keysToItems.entries()}},{key:"add",value:function(e){var t=this.getKey(e);this.keysToItems.set(t,e),this.itemsToKeys.set(e,t)}},{key:"require",value:function(e){return this.keysToItems.get(e)||fail("Couldn't find item with '".concat(e,"' key"))}},{key:"get",value:function(e){return this.keysToItems.get(e)}},{key:"getKeys",value:function(){return I(this.keysToItems.keys())}},{key:"getItems",value:function(){return I(this.keysToItems.values())}},{key:"hasKey",value:function(e){return this.keysToItems.has(e)}},{key:"hasItem",value:function(e){return this.itemsToKeys.has(e)}},{key:"delete",value:function(e){var t=this.itemsToKeys.get(e);t&&(this.itemsToKeys.delete(e),this.keysToItems.delete(t))}},{key:"filter",value:function(e){var t,n=this.constructor.createFromArray([],this.getKey),r=Jf(this.entries());try{for(r.s();!(t=r.n()).done;){var i=L(t.value,2),s=i[0],a=i[1];e(a,s)&&n.add(a)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"clear",value:function(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}}],[{key:"createFromArray",value:function(e,n){var r,i=new t("string"==typeof n?function(e){return e[n]}:n),s=Jf(e);try{for(s.s();!(r=s.n()).done;){var a=r.value;i.add(a)}}catch(o){s.e(o)}finally{s.f()}return i}}]),t}();!function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;k(this,e),S(this,"count",void 0),S(this,"listeners",void 0),this.count=t,this.listeners=new Set}var t,n,r;A(e,[{key:"acquire",value:(r=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitAvailable();case 2:this.count=Math.max(this.count-1,0);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"release",value:function(){this.count++,this.notifyAvailable()}},{key:"run",value:(n=O(D.mark((function e(t){var n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.acquire();case 2:return e.next=4,t();case 4:return n=e.sent,this.release(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"waitAvailable",value:(t=O(D.mark((function e(){var t=this;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.count){e.next=5;break}return e.next=3,new Promise((function(e){t.listeners.add((function n(){t.listeners.delete(n),e(null)}))}));case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"notifyAvailable",value:function(){this.listeners.forEach((function(e){return e()}))}}])}();var Zf={},Yf=function(){function e(){k(this,e)}return A(e,[{key:"set",value:function(e,t){void 0===t&&(t="__undefined__"),localStorage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e);return null===n?t:"__undefined__"!==n?JSON.parse(n):void 0}},{key:"require",value:function(e){var t=this.get(e,Zf);if(t===Zf)throw new Error("Failed getting required key from local storage: '".concat(e,"'"));return t}},{key:"has",value:function(e){return null!==localStorage.getItem(e)}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"pull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.has(e))return t;var n=this.get(e);return this.remove(e),n}}],[{key:"instance",get:function(){var t;return this._instance=null!==(t=this._instance)&&void 0!==t?t:new e}}]),e}();function Qf(e,t){return e>t?1:t>e?-1:0}function Xf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return em(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?em(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function em(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tm(e,t,n){var r,i=e.slice(0),s=[],a=n?function(e,t){return t.findIndex((function(t){return n(e,t)}))}:function(e,t){return t.indexOf(e)},o=Xf(t);try{for(o.s();!(r=o.n()).done;){var l=r.value,u=a(l,i);-1!==u?i.splice(u,1):s.push(l)}}catch(c){o.e(c)}finally{o.f()}return{added:s,removed:i}}function nm(e,t){return t?e.filter(t):e.filter((function(e){return!!e}))}function rm(e,t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)}function im(e,t,n){var r=e.indexOf(t);return-1!==r&&(e[r]=n,!0)}function sm(e,t,n){return n="asc"===t||"desc"===t?t:n,e.slice(0).sort(function(){var e="desc"===n?function(e){return function(t,n){return Qf(n[e],t[e])}}:function(e){return function(t,n){return Qf(t[e],n[e])}};switch(B(t)){case"function":return t;case"string":if("asc"===t)return;return"desc"===t?function(e,t){return Qf(t,e)}:e(t);case"object":var r=t.map((function(t){return e(t)}));return function(e,t){var n,i=Xf(r);try{for(i.s();!(n=i.n()).done;){var s=(0,n.value)(e,t);if(0!==s)return s}}catch(a){i.e(a)}finally{i.f()}return 0}}}())}function am(e,t){return t?Object.values(e.reduce((function(e,n){var r,i=t(n);return e[i]=null!==(r=e[i])&&void 0!==r?r:n,e}),{})):I(new Set(e))}function om(e,t){return Array.isArray(t)?nm(e,(function(e){return-1===t.indexOf(e)})):function(e,t){return lm(e,[t])}(e,e.indexOf(t))}function lm(e,t){return e.map((function(e,t){return[e,t]})).filter((function(e){var n=L(e,2);n[0];var r=n[1];return!t.includes(r)})).map((function(e){return L(e,1)[0]}))}function um(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(e)||Nf(e)&&!Bf(e)?Array.from(e):t&&null==e?[]:[e]}function cm(e){if(!e)return null;try{var t=new Date(e),n=t.getTime();return isNaN(n)||0===n?null:t}catch(r){return null}}function dm(e){return"function"==typeof e?e():e}function pm(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong",t="string"==typeof e?Error:e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw z(t,I("string"==typeof e?[e]:r))}function hm(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=mm(n,r,i,s,t[0],7,-680876936),s=mm(s,n,r,i,t[1],12,-389564586),i=mm(i,s,n,r,t[2],17,606105819),r=mm(r,i,s,n,t[3],22,-1044525330),n=mm(n,r,i,s,t[4],7,-176418897),s=mm(s,n,r,i,t[5],12,1200080426),i=mm(i,s,n,r,t[6],17,-1473231341),r=mm(r,i,s,n,t[7],22,-45705983),n=mm(n,r,i,s,t[8],7,1770035416),s=mm(s,n,r,i,t[9],12,-1958414417),i=mm(i,s,n,r,t[10],17,-42063),r=mm(r,i,s,n,t[11],22,-1990404162),n=mm(n,r,i,s,t[12],7,1804603682),s=mm(s,n,r,i,t[13],12,-40341101),i=mm(i,s,n,r,t[14],17,-1502002290),n=vm(n,r=mm(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=vm(s,n,r,i,t[6],9,-1069501632),i=vm(i,s,n,r,t[11],14,643717713),r=vm(r,i,s,n,t[0],20,-373897302),n=vm(n,r,i,s,t[5],5,-701558691),s=vm(s,n,r,i,t[10],9,38016083),i=vm(i,s,n,r,t[15],14,-660478335),r=vm(r,i,s,n,t[4],20,-405537848),n=vm(n,r,i,s,t[9],5,568446438),s=vm(s,n,r,i,t[14],9,-1019803690),i=vm(i,s,n,r,t[3],14,-187363961),r=vm(r,i,s,n,t[8],20,1163531501),n=vm(n,r,i,s,t[13],5,-1444681467),s=vm(s,n,r,i,t[2],9,-51403784),i=vm(i,s,n,r,t[7],14,1735328473),n=gm(n,r=vm(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=gm(s,n,r,i,t[8],11,-2022574463),i=gm(i,s,n,r,t[11],16,1839030562),r=gm(r,i,s,n,t[14],23,-35309556),n=gm(n,r,i,s,t[1],4,-1530992060),s=gm(s,n,r,i,t[4],11,1272893353),i=gm(i,s,n,r,t[7],16,-155497632),r=gm(r,i,s,n,t[10],23,-1094730640),n=gm(n,r,i,s,t[13],4,681279174),s=gm(s,n,r,i,t[0],11,-358537222),i=gm(i,s,n,r,t[3],16,-722521979),r=gm(r,i,s,n,t[6],23,76029189),n=gm(n,r,i,s,t[9],4,-640364487),s=gm(s,n,r,i,t[12],11,-421815835),i=gm(i,s,n,r,t[15],16,530742520),n=ym(n,r=gm(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=ym(s,n,r,i,t[7],10,1126891415),i=ym(i,s,n,r,t[14],15,-1416354905),r=ym(r,i,s,n,t[5],21,-57434055),n=ym(n,r,i,s,t[12],6,1700485571),s=ym(s,n,r,i,t[3],10,-1894986606),i=ym(i,s,n,r,t[10],15,-1051523),r=ym(r,i,s,n,t[1],21,-2054922799),n=ym(n,r,i,s,t[8],6,1873313359),s=ym(s,n,r,i,t[15],10,-30611744),i=ym(i,s,n,r,t[6],15,-1560198380),r=ym(r,i,s,n,t[13],21,1309151649),n=ym(n,r,i,s,t[4],6,-145523070),s=ym(s,n,r,i,t[11],10,-1120210379),i=ym(i,s,n,r,t[2],15,718787259),r=ym(r,i,s,n,t[9],21,-343485551),e[0]=_m(n,e[0]),e[1]=_m(r,e[1]),e[2]=_m(i,e[2]),e[3]=_m(s,e[3])}function fm(e,t,n,r,i,s){return t=_m(_m(t,e),_m(r,s)),_m(t<<i|t>>>32-i,n)}function mm(e,t,n,r,i,s,a){return fm(t&n|~t&r,e,t,i,s,a)}function vm(e,t,n,r,i,s,a){return fm(t&r|n&~r,e,t,i,s,a)}function gm(e,t,n,r,i,s,a){return fm(t^n^r,e,t,i,s,a)}function ym(e,t,n,r,i,s,a){return fm(n^(t|~r),e,t,i,s,a)}function bm(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}S(Yf,"_instance",void 0),Yf.instance,function(){function e(){k(this,e),S(this,"resolveListeners",[]),S(this,"rejectListeners",[]),S(this,"resetListeners",[]),this.setPromiseValues()}A(e,[{key:"value",get:function(){return this._value||null}},{key:"isResolved",value:function(){return"_value"in this}},{key:"then",value:function(e,t){return this.promise.then(e,t)}},{key:"catch",value:function(e){return this.promise.catch(e)}},{key:"finally",value:function(e){return this.promise.finally(e)}},{key:"resolve",value:function(e){this.isResolved()&&this.reset(),this._value=e,this._resolve(e),this.resolveListeners.forEach((function(t){return t(e)}))}},{key:"reject",value:function(e){this.isResolved()&&this.reset(),delete this._value,this._reject(e),this.rejectListeners.forEach((function(t){return t(e)}))}},{key:"onResolve",value:function(e){var t=this;return this.resolveListeners.push(e),function(){return rm(t.resolveListeners,e)}}},{key:"onReject",value:function(e){var t=this;return this.rejectListeners.push(e),function(){return rm(t.rejectListeners,e)}}},{key:"onReset",value:function(e){var t=this;return this.resetListeners.push(e),function(){return rm(t.resetListeners,e)}}},{key:"reset",value:function(){this.setPromiseValues(),this.rejectListeners.forEach((function(e){return e()}))}},{key:"setPromiseValues",value:function(){var e=this;this.promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}}],[{key:"from",value:function(t){var n=new e;return t.then(n.resolve.bind(n)).catch(n.reject.bind(n)),n}}])}();var wm="0123456789abcdef".split("");function xm(e){for(var t="",n=0;n<4;n++)t+=wm[e>>8*n+4&15]+wm[e>>8*n&15];return t}function _m(e,t){return e+t&4294967295}function km(e){var t=e;return(t^16*Math.random()>>t/4).toString(16)}function Sm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;return Math.pow(10,e-1).toString().replace(/[01]/g,km)}function Rm(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,km)}function Am(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Im(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Im(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function Im(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cm=Object.getPrototypeOf(Object);function Em(e,t){var n=function(e){_(r,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(r);function r(){var e;k(this,r);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];e=n.call.apply(n,[this].concat(s));var o,l=Am(t);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=z(u,s);Object.assign(R(e),c)}}catch(Wd){l.e(Wd)}finally{l.f()}return M(e,R(e))}return r}(e);return S(n,"__mixins",t),function(e){var t,n=Am(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]);try{for(n.s();!(t=n.n()).done;){Om(e,t.value)}}catch(r){n.e(r)}finally{n.f()}}(n,t),n}function Om(e,t){if(t!==Object){var n=t;do{for(var r=Vf(Object.getOwnPropertyDescriptors(n.prototype),["constructor"]),i=0,s=Object.entries(r);i<s.length;i++){var a=L(s[i],2),o=a[0],l=a[1];Object.defineProperty(e.prototype,o,l)}n=Object.getPrototypeOf(n)}while(n!==Cm)}}function Dm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(e)?Object:e,r=Array.isArray(e)?e:t;return Em(n,r)}function Tm(){return Dm.apply(void 0,arguments)}function Pm(e,t){var n,r,i,s;return(null!==(n=null!==(r=null==e?void 0:e.__mixins)&&void 0!==r?r:null==e||null===(i=e.__proto__)||void 0===i||null===(s=i.constructor)||void 0===s?void 0:s.__mixins)&&void 0!==n?n:[]).includes(t)}function jm(e){return e.split(/_|-|\s|(?=[A-Z])/)}function Mm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e=e.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,t),t.length>0&&(e=e.replace(new RegExp("".concat(t,"+"),"g"),t)),e}function Lm(e){var t;return null!==(t=Bm(e))&&void 0!==t?t:pm("Failed getting parent directory from '".concat(e,"'"))}function $m(e){var t;return null!==(t=zm(e))&&void 0!==t?t:pm("Failed getting directory name from '".concat(e,"'"))}function Um(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.shift();t.length>0;){var i=t.shift();i.startsWith("/")?r=Fm(r)+i:i.match(/^[\w-]+:\/\//)?r=i:r.endsWith("/")?r+=i:r+="/"+i}return r}function Nm(){var e=Um.apply(void 0,arguments);return e.endsWith("/")?e:e+"/"}function Fm(e){var t=e.indexOf("://")+3,n=e.substr(t).indexOf("/");return-1!==n?e.substring(0,t+n):e}function Bm(e){if(e.endsWith("/")&&(e=e.substring(0,e.length-1)),Fm(e)===e)return null;var t=e.lastIndexOf("/");return-1!==t?e.substr(0,t+1):null}function zm(e){var t;e.endsWith("/")||(e=null!==(t=Bm(e))&&void 0!==t?t:e+"/");var n=e.slice(0,-1);return Fm(e)===n?null:function(e){var t=e.lastIndexOf("/");return-1!==t?e.substr(t+1):""}(n)}function qm(e){var t=e.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!t)return null;var n=t[4]||"",r=-1===n.indexOf(":")?[n]:n.split(":"),i=L(r,2),s=i[0],a=i[1];return{protocol:t[2]||void 0,domain:s||void 0,port:a||void 0,path:t[5]||void 0,query:t[7]||void 0,fragment:t[9]||void 0}}function Vm(e,t){var n,r,i=qm(e);if(!i)return e;for(var s=0,a=Object.entries(i);s<a.length;s++){var o=L(a[s],2),l=o[0],u=o[1];i[l]=!1!==t[l]&&u||""}return[i.protocol?"".concat(i.protocol,"://"):"",null!==(n=i.domain)&&void 0!==n?n:"",i.port?":".concat(i.port):"",null!==(r=i.path)&&void 0!==r?r:"",i.query?"?".concat(i.query):"",i.fragment?"#".concat(i.fragment):""].join("")}function Hm(e){return Vm(e,{protocol:!0,domain:!0,port:!0,path:!0,query:!1,fragment:!1})}function Wm(e,t){for(var n=e.prototype,r=function(){var e=L(s[i],2),t=e[0],r=e[1];n[t]=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=r.apply(void 0,[this.value].concat(n));return null===(e=this.chain)||void 0===e?void 0:e.call(this,s)}},i=0,s=Object.entries(t);i<s.length;i++)r()}function Jm(e,t){for(var n=e.prototype,r=Object.getOwnPropertyDescriptors(t.prototype),i=function(){var e=L(a[s],2),t=e[0],r=e[1];return t in n?"continue":"function"!=typeof r.value?(Object.defineProperty(n,t,{get:function(){return this.chain(this.value[t])}}),"continue"):void(n[t]=function(){for(var e,t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=(e=r.value).call.apply(e,[this.value].concat(i));return null===(t=this.chain)||void 0===t?void 0:t.call(this,a)})},s=0,a=Object.entries(r);s<a.length;s++)i()}var Km=function(){function e(t){k(this,e),S(this,"value",void 0),this.value=t}return A(e,[{key:"create",value:function(e){return new this.constructor(e)}},{key:"chain",value:function(e){return this.isPrimitive(e)?this.create(e):e}}],[{key:"isPrimitive",value:function(e){return this.prototype.isPrimitive(e)}}]),e}();var Gm={clear:function(e){e.splice(0,e.length)},diff:tm,filter:nm,first:function(e,t){var n,r=Xf(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t(i))return i}}catch(s){r.e(s)}finally{r.f()}return null},flatMap:function(e,t){return I(e.entries()).flatMap((function(e){var n=L(e,2),r=n[0],i=n[1];return t(i,r)}))},isEmpty:function(e){return 0===e.length},project:function(e,t){return e.map((function(e){return e[t]}))},randomItem:function(e){return 0===e.length?null:e[Math.floor(Math.random()*e.length)]},randomItems:function(e,t){for(var n=e.slice(0),r=[];n.length>0&&r.length<t;){var i=Math.floor(Math.random()*n.length);r.push(n[i]),n.splice(i,1)}return r},remove:rm,removeIndex:function(e,t){return e.splice(Number(t),1).length>0},replace:im,sorted:sm,unique:am,where:function(e,t,n){return e.filter((function(e){var r=e[t],i="function"==typeof r?r.call(e):r;return n?i===n:!!i}))},without:om,withoutIndexes:lm},Zm=function(e,t){_(r,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(r);function r(){return k(this,r),n.apply(this,arguments)}return A(r,[{key:t,value:D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.value,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"get",value:function(e){return this.value[e]}},{key:"toArray",value:function(){return this.value.slice(0)}},{key:"isPrimitive",value:function(e){return Array.isArray(e)}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.prototype;return t.create(e)}}]),r}(Km,Symbol.iterator);Wm(Zm,Gm),Jm(Zm,Array);var Ym,Qm={reverse:function(e){return e.split("").reverse().join("")},toCamelCase:function(e){var t=jm(e),n=q(t),r=n[0],i=n.slice(1);return(null!=r?r:"").toLowerCase()+i.map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})).join("")},toSlug:Mm,toStudlyCase:function(e){return jm(e).map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})).join("")}},Xm=function(e){_(n,Km);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(){return k(this,n),t.apply(this,arguments)}return A(n,[{key:"toString",value:function(){return this.value}},{key:"isPrimitive",value:function(e){return"string"==typeof e}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.prototype;return t.create(e)}}]),n}();function ev(e,t){if(!t)return n=new Proxy(e,{get:function(e,t,r){var i=Reflect.get(e,t,r);return"function"!=typeof i?i:function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return i.call.apply(i,[e].concat(r)),n}}}),n;var n,r=t(e);return r instanceof Promise?r.then((function(){return e})):e}function tv(e,t){var n="function"==typeof t?t(e):!!t;return new Proxy(e,{get:function(e,t,r){return n?Reflect.get(e,t,r):function(){}}})}function nv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!Array.isArray(e)||"string"!=typeof e[0])return Gf.createFromArray(e,t);var n=t;return e.reduce((function(e,t){return e[t]=n(t),e}),{})}Wm(Xm,Qm),Jm(Xm,String),(Ym||(Ym={})).Turtle="Turtle";var rv=function(e){_(MalformedSolidDocumentError,Tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(MalformedSolidDocumentError);function MalformedSolidDocumentError(e,n,r){var i;return k(this,MalformedSolidDocumentError),i=t.call(this,function(e,t,n){return e?"Malformed ".concat(t," document found at ").concat(e," - ").concat(n):"Malformed ".concat(t," document - ").concat(n)}(e,n,r)),S(R(i),"documentUrl",void 0),S(R(i),"documentFormat",void 0),S(R(i),"malformationDetails",void 0),i.documentUrl=e,i.documentFormat=n,i.malformationDetails=r,i}return MalformedSolidDocumentError}();var iv=function(e){_(NetworkRequestError,Tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(NetworkRequestError);function NetworkRequestError(e,n){var r;return k(this,NetworkRequestError),r=t.call(this,"Request failed trying to fetch ".concat(e),n),S(R(r),"url",void 0),r.url=e,r}return NetworkRequestError}();var sv=function(e){_(NotFoundError,Tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(NotFoundError);function NotFoundError(e){var n;return k(this,NotFoundError),n=t.call(this,"Document with '".concat(e,"' url not found")),S(R(n),"url",void 0),n.url=e,n}return NotFoundError}();var av=function(e){_(UnauthorizedError,Tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(UnauthorizedError);function UnauthorizedError(e,n){var r;return k(this,UnauthorizedError),r=t.call(this,function(e,t){return"Unauthorized".concat(403===t?" (Forbidden)":"",": ").concat(e)}(e,n)),S(R(r),"url",void 0),S(R(r),"responseStatus",void 0),r.url=e,r.responseStatus=n,r}return A(UnauthorizedError,[{key:"forbidden",get:function(){return void 0!==this.responseStatus?403===this.responseStatus:void 0}}]),UnauthorizedError}();var ov=function(e){_(UnsuccessfulRequestError,Tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(UnsuccessfulRequestError);function UnsuccessfulRequestError(e,n){var r;return k(this,UnsuccessfulRequestError),r=t.call(this,function(e,t){var n;return t=null!==(n=t)&&void 0!==n?n:e,"string"==typeof e?"".concat(e," (returned ").concat(t.status," status code)"):"Request to ".concat(t.url," returned ").concat(t.status," status code")}(e,n)),S(R(r),"response",void 0),r.response=null!=n?n:e,r}return UnsuccessfulRequestError}();var lv=function(e){_(UnsupportedAuthorizationProtocolError,Tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(UnsupportedAuthorizationProtocolError);function UnsupportedAuthorizationProtocolError(e,n,r){var i;return k(this,UnsupportedAuthorizationProtocolError),i=t.call(this,"The resource at ".concat(e," is using an unsupported authorization protocol (").concat(n,")"),r),S(R(i),"url",void 0),S(R(i),"protocol",void 0),i.url=e,i.protocol=n,i}return UnsupportedAuthorizationProtocolError}(),uv={acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",pim:"http://www.w3.org/ns/pim/space#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",vcard:"http://www.w3.org/2006/vcard/ns#"};function cv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.startsWith("http"))return e;var n=e.split(":"),r=L(n,2),i=r[0],s=r[1];if(i&&s){var a,o,l,u=null!==(a=null!==(o=uv[i])&&void 0!==o?o:null===(l=t.extraContext)||void 0===l?void 0:l[i])&&void 0!==a?a:null;if(!u)throw new Error("Can't expand IRI with unknown prefix: '".concat(e,"'"));return u+s}if(!t.defaultPrefix)throw new Error("Can't expand IRI without a default prefix: '".concat(e,"'"));return t.defaultPrefix+i}var dv,pv=function(){function e(t,n){k(this,e),S(this,"url",void 0),S(this,"quads",void 0),this.url=t,this.quads=n}return A(e,[{key:"value",value:function(e){var t;return null===(t=this.quads.find((function(t){return t.predicate.value===cv(e)})))||void 0===t?void 0:t.object.value}},{key:"values",value:function(e){return this.quads.filter((function(t){return t.predicate.value===cv(e)})).map((function(e){return e.object.value}))}}]),e}(),hv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];k(this,e),S(this,"quads",void 0),this.quads=t}return A(e,[{key:"isEmpty",value:function(){return 0===this.statements.length}},{key:"getQuads",value:function(){return this.quads.slice(0)}},{key:"addQuads",value:function(e){var t;(t=this.quads).push.apply(t,I(e))}},{key:"statements",value:function(e,t,n){var r=this;return this.quads.filter((function(i){return!(n&&i.object.value!==r.expandIRI(n)||e&&i.subject.value!==r.expandIRI(e)||t&&i.predicate.value!==r.expandIRI(t))}))}},{key:"statement",value:function(e,t,n){var r=this,i=this.quads.find((function(i){return!(n&&i.object.value!==r.expandIRI(n)||e&&i.subject.value!==r.expandIRI(e)||t&&i.predicate.value!==r.expandIRI(t))}));return null!=i?i:null}},{key:"contains",value:function(e,t,n){return null!==this.statement(e,t,n)}},{key:"getThing",value:function(e){var t=this.statements(e);return new pv(e,t)}},{key:"expandIRI",value:function(e){return cv(e)}}]),e}();!function(e){e.Read="read",e.Write="write",e.Append="append",e.Control="control"}(dv||(dv={}));var fv=function(e){_(n,hv);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(e,r,i){var s;return k(this,n),s=t.call(this,r),S(R(s),"url",void 0),S(R(s),"headers",void 0),s.url=e,s.headers=i,s}return A(n,[{key:"isACPResource",value:function(){var e;return!(null===(e=this.headers.get("Link"))||void 0===e||!e.match(/<http:\/\/www\.w3\.org\/ns\/solid\/acp#AccessControlResource>;[^,]+rel="type"/))}},{key:"isPersonalProfile",value:function(){return!!this.statement(this.url,cv("rdf:type"),cv("foaf:PersonalProfileDocument"))}},{key:"isStorage",value:function(){var e;return!(null===(e=this.headers.get("Link"))||void 0===e||!e.match(/<http:\/\/www\.w3\.org\/ns\/pim\/space#Storage>;[^,]+rel="type"/))}},{key:"isUserWritable",value:function(){return this.getUserPermissions().includes(dv.Write)}},{key:"getUserPermissions",value:function(){return this.getPermissionsFromWAC("user")}},{key:"getPublicPermissions",value:function(){return this.getPermissionsFromWAC("public")}},{key:"getLastModified",value:function(){var e,t,n,r;return null!==(e=null!==(t=null!==(n=cm(this.headers.get("last-modified")))&&void 0!==n?n:cm(null===(r=this.statement(this.url,"purl:modified"))||void 0===r?void 0:r.object.value))&&void 0!==t?t:this.getLatestDocumentDate())&&void 0!==e?e:null}},{key:"expandIRI",value:function(e){return cv(e,{defaultPrefix:this.url})}},{key:"getLatestDocumentDate",value:function(){var e=[].concat(I(this.statements(void 0,"purl:modified")),I(this.statements(void 0,"purl:created"))).map((function(e){return cm(e.object.value)})).filter((function(e){return null!==e}));return e.length>0?e.reduce((function(e,t){return e>t?e:t})):null}},{key:"getPermissionsFromWAC",value:function(e){var t,n,r,i=null!==(n=null===(r=function(e,t){return e.match(t)}(null!==(t=this.headers.get("WAC-Allow"))&&void 0!==t?t:"",new RegExp("".concat(e,'="([^"]+)"'))))||void 0===r?void 0:r[1])&&void 0!==n?n:"";return nm([i.includes("read")&&dv.Read,i.includes("write")&&dv.Write,i.includes("append")&&dv.Append,i.includes("control")&&dv.Control])}}]),n}();function mv(){return(mv=O(D.mark((function e(t){var n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ld.exports.compactJsonLD(t,{});case 2:if(!("@graph"in(n=e.sent))){e.next=5;break}return e.abrupt("return",n);case 5:if(!("@id"in n)){e.next=7;break}return e.abrupt("return",{"@graph":[n]});case 7:return e.abrupt("return",{"@graph":[]});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vv(e){return"@graph"in e}function gv(e,t){return yv.apply(this,arguments)}function yv(){return(yv=O(D.mark((function e(t,n){var r,i,s;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Accept:"text/turtle"}},e.prev=1,e.next=4,n(t,r);case 4:if(404!==(i=e.sent).status){e.next=7;break}throw new sv(t);case 7:if(![401,403].includes(i.status)){e.next=9;break}throw new av(t,i.status);case 9:return e.next=11,i.text();case 11:return s=e.sent,e.abrupt("return",{body:s,headers:i.headers});case 15:if(e.prev=15,e.t0=e.catch(1),!(e.t0 instanceof av)){e.next=19;break}throw e.t0;case 19:if(!(e.t0 instanceof sv)){e.next=21;break}throw e.t0;case 21:throw new iv(t,{cause:e.t0});case 22:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function bv(e,t,n){return wv.apply(this,arguments)}function wv(){return(wv=O(D.mark((function e(t,n,r){var i,s;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(window),e.next=3,Tv(n);case 3:return s=e.sent,e.next=6,r(t,{method:"PUT",headers:{"Content-Type":"text/turtle"},body:n});case 6:return e.abrupt("return",new fv(t,s,new Headers({})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xv(e,t){return _v.apply(this,arguments)}function _v(){return(_v=O(D.mark((function e(t,n){var r,i,s,a;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gv(t,null!=n?n:window.fetch);case 2:return r=e.sent,i=r.body,s=r.headers,e.next=7,Tv(i,{baseIRI:t});case 7:return a=e.sent,e.abrupt("return",new fv(t,a,s));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kv(e,t){return Sv.apply(this,arguments)}function Sv(){return(Sv=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xv(t,n);case 3:return r=e.sent,e.abrupt("return",r);case 7:if(e.prev=7,e.t0=e.catch(0),e.t0 instanceof sv){e.next=11;break}throw e.t0;case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Rv(e,t){return Av.apply(this,arguments)}function Av(){return(Av=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!vv(t)){e.next=5;break}return e.next=3,Promise.all(t["@graph"].map((function(e){return Rv(e,n)})));case 3:return r=e.sent,e.abrupt("return",r.flat());case 5:return e.abrupt("return",Ld.exports.jsonLDToRDF(t,{base:n}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Hf({baseIRI:t.baseIRI}),r=new Ld.exports.TurtleParser(n),i={quads:[],containsRelativeIRIs:!1};return new Promise((function(n,s){var a=r._resolveRelativeIRI;r._resolveRelativeIRI=function(){return i.containsRelativeIRIs=!0,r._resolveRelativeIRI=a,r._resolveRelativeIRI.apply(r,arguments)},r.parse(e,(function(e,r){var a;e?s(new rv(null!==(a=t.baseIRI)&&void 0!==a?a:null,Ym.Turtle,e.message)):r?i.quads.push(r):n(i)}))}))}function Cv(e){return Ev.apply(this,arguments)}function Ev(){return(Ev=O(D.mark((function e(t){var n;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ld.exports.jsonLDFromRDF(t);case 2:return n=e.sent,e.abrupt("return",{"@graph":n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ov(e,t){return Dv.apply(this,arguments)}function Dv(){return(Dv=O(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xv(t,n);case 3:return r=e.sent,e.abrupt("return",!r.isEmpty());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Tv(e){return Pv.apply(this,arguments)}function Pv(){return Pv=O(D.mark((function e(t){var n,r,i,s=arguments;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,Iv(t,n);case 3:return r=e.sent,i=r.quads,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function jv(e,t,n){return Mv.apply(this,arguments)}function Mv(){return(Mv=O(D.mark((function e(t,n,r){var i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(window),e.next=3,r(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lv(e){var t,n=(t=e).path&&t.path.startsWith("/")?t.path.match(/^\/[^/]*$/)?"/":"/".concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Zm.create(um(e))}(t.path.split("/")).filter().slice(0,-1).join("/"),"/").replace("//","/"):null;return e.protocol&&e.domain?"".concat(e.protocol,"://").concat(e.domain).concat(null!=n?n:"/"):n}function $v(e){var t;if("@type"in e&&!("@value"in e)){e["@id"]=null!==(t=e["@id"])&&void 0!==t?t:Rm();for(var n=0,r=Object.values(e);n<r.length;n++){var i=r[n];Ff(i)&&$v(i),Uf(i)&&i.forEach((function(e){return Ff(e)&&$v(e)}))}}}function Uv(e){return ev(zf(e),(function(e){return $v(e)}))}function Nv(e,t,n){return Fv.apply(this,arguments)}function Fv(){return(Fv=O(D.mark((function e(t,n,r){var i,s,a;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(r),s=t.storageUrls[0],a="".concat(s,"settings/").concat(n,"TypeIndex"),e.next=5,Ov(a,r);case 5:if(!e.sent){e.next=9;break}e.t0="".concat(s,"settings/").concat(n,"TypeIndex-").concat(Rm()),e.next=10;break;case 9:e.t0=a;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bv(e,t,n){return zv.apply(this,arguments)}function zv(){return(zv=O(D.mark((function e(t,n,r){var i,s,a,o;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.writableProfileUrl){e.next=2;break}throw new Error("Can't create type index without a writable profile document");case 2:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(r),e.next=5,Nv(t,n,r);case 5:return s=e.sent,a="public"===n?"<> a <http://www.w3.org/ns/solid/terms#TypeIndex> .":"\n            <> a\n                <http://www.w3.org/ns/solid/terms#TypeIndex>,\n                <http://www.w3.org/ns/solid/terms#UnlistedDocument> .\n        ",o="\n        INSERT DATA {\n            <".concat(t.webId,"> <http://www.w3.org/ns/solid/terms#").concat(n,"TypeIndex> <").concat(s,"> .\n        }\n    "),e.next=10,Promise.all([bv(s,a,r),jv(t.writableProfileUrl,o,r)]);case 10:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qv(e,t,n,r){return Vv.apply(this,arguments)}function Vv(){return(Vv=O(D.mark((function e(t,n,r,i){var s,a;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xv(t,i);case 2:return s=e.sent,a=Array.isArray(n)?n:[n],e.abrupt("return",a.map((function(e){return s.statements(void 0,"rdf:type","solid:TypeRegistration").filter((function(t){return s.contains(t.subject.value,"solid:forClass",e)})).map((function(e){return s.statements(e.subject.value,r)})).flat().map((function(e){return e.object.value})).filter((function(e){return!!e}))})).flat());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hv(){return(Hv=O(D.mark((function e(t,n){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bv(t,"public",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wv(){return(Wv=O(D.mark((function e(t,n){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bv(t,"private",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jv(){return(Jv=O(D.mark((function e(t,n,r){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qv(t,n,"solid:instanceContainer",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kv(){return(Kv=O(D.mark((function e(t,n,r){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qv(t,n,"solid:instance",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gv(e,t){return Zv.apply(this,arguments)}function Zv(){return(Zv=O(D.mark((function e(t,n){var r,i,s,a,o,l,u;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==(r=n)&&void 0!==r?r:window.fetch.bind(window),e.next=3,n(t,{method:"HEAD"});case 3:if(o=e.sent,l=null!==(i=o.headers.get("Link"))&&void 0!==i?i:"",u=null!==(s=null===(a=l.match(/<([^>]+)>;\s*rel="acl"/))||void 0===a?void 0:a[1])&&void 0!==s?s:null){e.next=8;break}throw new Error("Could not find ACL Resource for '".concat(t,"'"));case 8:return e.abrupt("return",Um(Lm(t),u));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yv(e,t,n){return Qv.apply(this,arguments)}function Qv(){return(Qv=O(D.mark((function e(t,n,r){var i,s,a;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=r)||void 0===i){e.next=4;break}e.t0=i,e.next=7;break;case 4:return e.next=6,Gv(t,n);case 6:e.t0=e.sent;case 7:return r=e.t0,e.next=10,kv(null!==(s=r)&&void 0!==s?s:"",n);case 10:if(a=e.sent){e.next=13;break}return e.abrupt("return",Yv(Lm(t),n));case 13:if(!a.isACPResource()){e.next=15;break}throw new lv(t,"ACP");case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xv(){return(Xv=O(D.mark((function e(t,n){var r,i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gv(t,n);case 2:return r=e.sent,e.next=5,Yv(t,n,r);case 5:return i=e.sent,e.abrupt("return",Hf({url:r,effectiveUrl:i.url,document:i}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){_(ExpectedQuadAssertionError,Tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(ExpectedQuadAssertionError);function ExpectedQuadAssertionError(e){var n;return k(this,ExpectedQuadAssertionError),n=t.call(this,"Couldn't find the following triple: ".concat(function(e){return(new Ld.exports.TurtleWriter).quadsToString([e]).slice(0,-1)}(e))),S(R(n),"expectedQuad",void 0),n.expectedQuad=e,n}}(),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;k(this,e),S(this,"rawBody",void 0),S(this,"body",void 0),S(this,"bodyUsed",void 0),S(this,"headers",void 0),S(this,"ok",void 0),S(this,"redirected",void 0),S(this,"status",void 0),S(this,"statusText",void 0),S(this,"trailer",void 0),S(this,"type",void 0),S(this,"url",void 0),this.rawBody=t,this.headers=new Headers(n),this.status=r}var t,n,r,i,s;A(e,[{key:"arrayBuffer",value:(s=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("ResponseStub.arrayBuffer is not implemented");case 1:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"blob",value:(i=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("ResponseStub.blob is not implemented");case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"formData",value:(r=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("ResponseStub.formData is not implemented");case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"json",value:(n=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(this.rawBody));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"text",value:(t=O(D.mark((function e(){return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rawBody);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"clone",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this)}}])}();class tg{constructor(e,t){this.resourceUrl=e,this.newResourceUrl=t,this.type=2}}const ng={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"};function rg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(/^https?:\/\//.test(e))return e;const r=e.indexOf(":");if(-1===r)return n+e;t={...ng,...t};const i=e.substr(0,r);return i in t?t[i]+e.substr(i.length+1):e}class ig{constructor(e){this.name=e}}const sg=rg("xsd:dateTime"),ag=rg("xsd:integer"),og=rg("xsd:boolean"),lg=rg("xsd:decimal"),ug=rg("xsd:float"),cg=rg("xsd:double");class dg{constructor(e,t,n){this.resourceUrl=e,this.name=t,this.value=n}static fromStatement(e){const t="NamedNode"===e.subject.termType?e.subject.value:null;return e.predicate.value===rg("rdf:type")?this.type(t,e.object.value):"NamedNode"===e.object.termType?this.reference(t,e.predicate.value,e.object.value):"BlankNode"===e.object.termType?this.reference(t,e.predicate.value,null):"Variable"===e.object.termType?this.reference(t,e.predicate.value,new ig(e.object.value)):this.literal(t,e.predicate.value,this.castLiteralValue(e.object.value,e.object.datatype.value))}static literal(e,t,n){return new pg(e,t,n)}static reference(e,t,n){return new hg(e,t,n)}static type(e,t){return new fg(e,t)}static toTurtle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map((e=>e.toTurtle(t,n)+" .")).join("\n")}static castLiteralValue(e,t){switch(t){case sg:return new Date(e);case ag:case lg:return parseInt(e);case og:return"true"===e||"1"===e;case ug:case cg:return parseFloat(e)}return e}toTurtle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return`${this.getTurtleSubject(e,t)} ${this.getTurtlePredicate()} ${this.getTurtleObject(e)}`}clone(e){switch(e=null!=e?e:this.resourceUrl,this.type){case 2:return dg.literal(e,this.name,this.value);case 0:return dg.type(e,this.value);case 1:return dg.reference(e,this.name,this.value)}}getTurtleReference(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=null!=(n=null==e?void 0:e.indexOf("#"))?n:-1;return e&&e!==t?null!==t&&e.startsWith(t)&&-1!==i?`<#${e.substr(i+1)}>`:`<${encodeURI(e)}>`:t&&r?`<${encodeURI(t)}>`:"<>"}getTurtleSubject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getTurtleReference(this.resourceUrl,e,t)}getTurtlePredicate(){return`<${encodeURI(this.name)}>`}}class pg extends dg{constructor(e,t,n){super(e,t,n),this.type=2}getTurtleObject(){if(this.value instanceof Date){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((e=>e.toString().padStart(2,"0")))};return`"${e(this.value.getUTCFullYear(),this.value.getUTCMonth()+1,this.value.getUTCDate()).join("-")}T${e(this.value.getUTCHours(),this.value.getUTCMinutes(),this.value.getUTCSeconds()).join(":")}.${this.value.getUTCMilliseconds().toString().padStart(3,"0")}Z"^^<${rg("xsd:dateTime")}>`}return JSON.stringify(this.value)}}class hg extends dg{constructor(e,t,n){super(e,t,n),this.type=1}getTurtleObject(e){return this.value instanceof ig?this.value.name:this.getTurtleReference(this.value,e)}}class fg extends dg{constructor(e,t){super(e,rg("rdf:type"),t),this.type=0}getTurtlePredicate(){return"a"}getTurtleObject(){return`<${encodeURI(this.value)}>`}}class mg{constructor(e){this.url=e,this.statements=[],this.types=[],this.properties=[],this.propertiesIndex={}}get name(){return this.getPropertyValue(rg("foaf:name"))}get label(){return this.getPropertyValue(rg("rdfs:label"))}isType(e){return-1!==this.types.indexOf(rg(e))}getPropertyValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const[n]=this.propertiesIndex[rg(e)]||[];return n?n.value:t}getPropertyValues(e){return(this.propertiesIndex[rg(e)]||[]).map((e=>e.value))}addStatement(e){if(e.subject.value!==this.url)return;const t=dg.fromStatement(e);0===t.type&&this.types.push(t.value),this.statements.push(e),this.properties.push(t),this.propertiesIndex[t.name]=[...this.propertiesIndex[t.name]||[],t]}}class vg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.url=e,this.statements=t,this.metadata=n,this.resourcesIndex=this.statements.reduce(((e,t)=>{var n;const r=t.subject.value;return(e[r]=null!=(n=e[r])?n:new mg(r)).addStatement(t),e}),{}),this.resources=Object.values(this.resourcesIndex),this.properties=this.resources.reduce(((e,t)=>e.concat(t.properties)),[])}static async fromTurtle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await Iv(e,{baseIRI:t.baseIRI});return new vg(t.baseIRI||"",n.quads,{containsRelativeIRIs:n.containsRelativeIRIs,describedBy:gg(t),headers:t.headers})}static async resourceFromJsonLDGraph(e,t,n){var r,i;return(null!=(i=this.documentsCache.get(e))?i:await this.fromJsonLD(null!=(r=null!=n?n:e["@graph"].find((e=>e["@id"]===t)))?r:pm(Eh,`Resource '${t}' not found on document`))).requireResource(t)}static async fromJsonLD(e,t){var n;return null!=(n=this.documentsCache.get(e))?n:await this.getFromJsonLD(e,t)}static reduceJsonLDGraph(e,t){return ev({"@graph":e["@graph"].filter((e=>e["@id"]!==t))},(n=>{const r=this.documentsCache.get(e);r&&this.cacheJsonLD(n,r.clone({removeResourceUrls:[t]}))}))}static cacheJsonLD(e,t){this.documentsCache.set(e,t)}static async getFromJsonLD(e,t){const n=await Rv(e,t);return ev(new vg(e["@id"]?Hm(e["@id"]):null,n),(t=>{this.documentsCache.set(e,t)}))}isEmpty(){return 0===this.statements.length}hasProperty(e,t){const n=this.resourcesIndex[e];return!!n&&t in n.propertiesIndex}async toJsonLD(){return Cv(this.statements)}resource(e){var t;return null!=(t=this.resourcesIndex[e])?t:null}requireResource(e){const t=this.resource(e);if(!t)throw new Eh(`Resource '${e}' not found`);return t}clone(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ev(new vg(null!=(e=t.changeUrl)?e:this.url,[],this.metadata),(e=>{const n=t.removeResourceUrls;if(!n)return e.statements=this.statements.slice(0),e.properties=this.properties.slice(0),e.resources=this.resources.slice(0),void(e.resourcesIndex={...this.resourcesIndex});e.statements=this.statements.filter((e=>!n.includes(e.subject.value))),e.properties=this.properties.filter((e=>!e.resourceUrl||!n.includes(e.resourceUrl))),e.resources=this.resources.filter((e=>!n.includes(e.url))),e.resourcesIndex=function(e,t){return e.reduce((function(e,n){return e[n[t]]=n,e}),{})}(e.resources,"url")}))}}function gg(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(null==(e=n.headers)?void 0:e.has("Link")))return;const r=null==(t=n.headers.get("Link"))?void 0:t.match(/<([^>]+)>;\s*rel="describedBy"/i);return r?Um(n.baseIRI||"",r[1]):void 0}vg.documentsCache=new WeakMap;class yg{constructor(e,t,n){this.resourceUrl=e,this.property=t,this.value=n,this.type=1}}class bg{constructor(e){if(this.type=0,this.propertyOrProperties=e,!Array.isArray(e))return;const[t,...n]=e;if(!t)throw new Error("Cannot create an UpdatePropertyOperation with an empty array");const{resourceUrl:r,name:i,type:s}=t;if(n.some((e=>e.resourceUrl!==r||e.name!==i||e.type!==s)))throw new Error("All properties in an UpdatePropertyOperation must have the same resourceUrl, name and type")}get propertyResourceUrl(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].resourceUrl:this.propertyOrProperties.resourceUrl}get propertyName(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].name:this.propertyOrProperties.name}get propertyType(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].type:this.propertyOrProperties.type}}const wg=[rg("ldp:contains"),rg("posix:mtime"),rg("posix:size"),rg("purl:modified")],xg=[rg("ldp:Container"),rg("ldp:BasicContainer")];class _g{constructor(e){var t;const n=null!=(t=null!=e?e:null==window?void 0:window.fetch)?t:null==global?void 0:global.fetch;this.fetch=async(e,t)=>{try{return await n(e,t)}catch(r){const t="object"==typeof e?e.url:e;throw new iv(t,{cause:r})}},this.config={useGlobbing:!1,concurrentFetchBatchSize:5}}getFetch(){return this.fetch}setConfig(e){Object.assign(this.config,e)}async createDocument(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=rg("ldp:Container");return t&&n.some((e=>e.resourceUrl===t&&0===e.type&&e.value===r))?this.createContainerDocument(e,t,n):this.createNonContainerDocument(e,t,n)}async getDocument(e){const t=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(200!==t.status)return null;const n=await t.text();return await vg.fromTurtle(n,{headers:t.headers,baseIRI:e})}async getDocuments(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return this.config.useGlobbing&&!t?await this.getContainerDocumentsUsingGlobbing(e):await this.getContainerDocuments(e)}catch(n){if(this.config.useGlobbing)return console.error(n),[];throw n}}async updateDocument(e,t){var n;if(0===t.length)return;const r=await this.getDocument(e);if(null===r)throw new Dh(e);this.processChangeUrlOperations(r,t),this.processUpdatePropertyOperations(r,t),(null==(n=r.resource(e))?void 0:n.isType(rg("ldp:Container")))?await this.updateContainerDocument(r,t):await this.updateNonContainerDocument(r,t)}async overwriteDocument(e,t){const n=await this.getDocument(e);if(null===n)throw new Dh(e);const r=await this.fetch(e,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:`\n                DELETE DATA { ${dg.toTurtle(n.properties,e)} } ;\n                INSERT DATA { ${dg.toTurtle(t,e)} }\n            `});this.assertSuccessfulResponse(r,`Error overwriting document at ${n.url}`)}async deleteDocument(e,t){var n;const r=null!=t?t:await this.getDocument(e);if(null===r)return;if(null==(n=r.resource(e))?void 0:n.isType(rg("ldp:Container"))){const t=this.config.useGlobbing?await this.getContainerDocumentsUsingGlobbing(e):await this.getDocumentsFromContainer(e,r);await Promise.all(t.map((e=>this.deleteDocument(e.url,e))))}const i=await this.fetch(e,{method:"DELETE"});this.assertSuccessfulResponse(i,`Error deleting document at ${e}`)}async documentExists(e){const t=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(200===t.status)return(await t.text()).length>0;if(404===t.status)return!1;throw new Eh(`Couldn't determine if document at ${e} exists, got ${t.status} response`)}async createContainerDocument(e,t,n){return await this.createContainerFolder(e,t),await this.updateContainerMetadata(t,n),t}async createContainerFolder(e,t){if(!t.startsWith(e))throw new Eh("Explicit document url should start with the parent url");if(!t.endsWith("/"))throw new Eh(`Container urls must end with a trailing slash, given ${t}`);const n=await this.fetch(t,{method:"PUT",headers:{"Content-Type":"text/turtle",Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',"If-None-Match":"*"}});if(this.isInternalErrorResponse(n))return this.createContainerDocumentUsingPOST(t);this.assertSuccessfulResponse(n,`Error creating container folder at ${t}`)}async createContainerDocumentUsingPOST(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Lm(e),r=await this.fetch(n,{method:"POST",headers:{"Content-Type":"text/turtle",Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',Slug:$m(e),"If-None-Match":"*"}});if(404===r.status&&t)return await this.createContainerDocumentUsingPOST(n),this.createContainerDocumentUsingPOST(e,!1);this.assertSuccessfulResponse(r,`Error creating container at ${e}`)}async updateContainerMetadata(e,t){if(0===t.length)return;const n=await this.getDocument(e);if(!n)throw new Eh(`Could not get document ${e} after creation`);const r=n.metadata.describedBy||`${n.url}.meta`,i=dg.toTurtle(this.withoutReservedContainerProperties(e,t),e,!0),s=await this.fetch(r,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:`INSERT DATA { ${i} }`});this.assertSuccessfulResponse(s,`Error updating container metadata at ${r}`)}async createNonContainerDocument(e,t,n){if(!t){const r=await this.fetch(e,{headers:{"Content-Type":"text/turtle"},method:"POST",body:dg.toTurtle(n,t)});return this.assertSuccessfulResponse(r,`Error creating document under ${e}`),Um(e,r.headers.get("Location")||"")}if(!t.startsWith(e))throw new Eh("A minted document url should start with the parent url");const r=await this.fetch(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update","If-None-Match":"*"},body:`INSERT DATA { ${dg.toTurtle(n,t)} }`});return this.assertSuccessfulResponse(r,`Error creating document at ${t}`),t}async getContainerDocuments(e){const t=await this.fetch(e,{headers:{Accept:"text/turtle"}}),n=await t.text(),r=await vg.fromTurtle(n,{baseIRI:e});return this.getDocumentsFromContainer(e,r)}async getDocumentsFromContainer(e,t){var n,r;const i=[],s=null!=(r=null==(n=t.resource(e))?void 0:n.getPropertyValues("ldp:contains"))?r:[];for(;s.length>0;){const e=s.splice(0,this.config.concurrentFetchBatchSize||s.length),t=await Promise.all(e.map((e=>this.getDocument(e))));i.push(...t)}return i.filter((e=>!!e))}async getContainerDocumentsUsingGlobbing(e){const t=await this.fetch(e+"*",{headers:{Accept:"text/turtle"}});this.assertSuccessfulResponse(t,`Error getting container documents using globbing from ${e}`);const n=await t.text(),r=(await vg.fromTurtle(n,{baseIRI:e})).statements.reduce(((e,t)=>{var n;const r=Vm(t.subject.value,{fragment:!1});return(e[r]=null!=(n=e[r])?n:[]).push(t),e}),{});return Object.entries(r).map((e=>{let[t,n]=e;return new vg(t,n)}))}async updateContainerDocument(e,t){t.push(...wg.map((t=>new yg(e.url,t)))),t.push(...xg.map((t=>new yg(e.url,rg("rdf:type"),t)))),await this.updateNonContainerDocument(e.clone({changeUrl:e.metadata.describedBy||`${e.url}.meta`}),t)}async updateNonContainerDocument(e,t){const[n,r]=t.reduce(((e,t)=>{switch(t.type){case 0:e[0].push(t.propertyOrProperties);break;case 1:e[1].push(nm([t.resourceUrl,t.property,t.value]))}return e}),[[],[]]),i=dg.toTurtle(n.flat(),e.url),s=dg.toTurtle(e.properties.filter((e=>r.some((t=>{let[n,r,i]=t;return!(n!==e.resourceUrl||r&&r!==e.name||i&&i!==e.value)})))),e.url),a=await this.fetch(e.url,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:nm([s.length>0&&`DELETE DATA { ${s} }`,i.length>0&&`INSERT DATA { ${i} }`]).join(" ; ")});this.assertSuccessfulResponse(a,`Error updating document at ${e.url}`)}withoutReservedContainerProperties(e,t){return t.filter((t=>{return t.resourceUrl!==e||(n=t,!wg.includes(n.name)&&!(e=>0===e.type&&xg.includes(e.value))(t));var n}))}processChangeUrlOperations(e,t){const n=t.reduce(((e,t)=>(e[t.type].push(t),e)),{0:[],1:[],2:[]});for(const r of n[2]){const i=e.resource(r.resourceUrl);if(!i)continue;const s=n[0].filter((e=>e.propertyResourceUrl===r.resourceUrl)),a=n[1].filter((e=>e.resourceUrl===r.resourceUrl));s.forEach((e=>{e.propertyOrProperties=Array.isArray(e.propertyOrProperties)?e.propertyOrProperties.map((e=>e.clone(r.newResourceUrl))):e.propertyOrProperties.clone(r.newResourceUrl)})),a.forEach((e=>e.resourceUrl=r.newResourceUrl)),t.push(new yg(r.resourceUrl)),t.push(...i.properties.filter((e=>!s.some((t=>t.propertyName===e.name))&&!a.some((t=>!t.property||t.property===e.name)))).map((e=>new bg(e.clone(r.newResourceUrl))))),rm(t,r)}}processUpdatePropertyOperations(e,t){const n=[],r=[];for(let s=0;s<t.length;s++){const i=t[s];if(0!==i.type)continue;if(!Array.isArray(i.propertyOrProperties)||null===i.propertyResourceUrl)continue;const a=e.statements.filter((e=>e.subject.value===i.propertyResourceUrl&&e.predicate.value===i.propertyName)).map((e=>e.object)),o=2===i.propertyOrProperties[0].type,l=e=>"type"in e?1===e.type:"NamedNode"===e.termType,{added:u,removed:c}=tm(a,i.propertyOrProperties,((e,t)=>e.value===t.value&&l(e)===l(t)));u.forEach((e=>t.push(new bg(o?dg.literal(i.propertyResourceUrl,i.propertyName,e.value):dg.reference(i.propertyResourceUrl,i.propertyName,e.value))))),c.forEach((e=>t.push(new yg(i.propertyResourceUrl,i.propertyName,e.value)))),n.push(i),r.push(`${i.propertyResourceUrl}-${i.propertyName}`)}n.forEach((e=>rm(t,e)));const i=t.filter((t=>0===t.type&&0!==t.propertyType&&e.hasProperty(t.propertyResourceUrl,t.propertyName)));for(const s of i)r.includes(`${s.propertyResourceUrl}-${s.propertyName}`)||t.push(new yg(s.propertyResourceUrl,s.propertyName))}assertSuccessfulResponse(e,t){if(2!==Math.floor(e.status/100))throw new ov(t,e)}isInternalErrorResponse(e){return 5===Math.floor(e.status/100)}}class kg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.cache=new Map,this.listeners=[],this.helper=new Uh,this.config={useGlobbing:!1,globbingBatchSize:5,concurrentFetchBatchSize:10,cachesDocuments:!1,...t},this.client=new _g(e),this.client.setConfig({useGlobbing:this.config.useGlobbing,concurrentFetchBatchSize:this.config.concurrentFetchBatchSize})}setConfig(e){Object.assign(this.config,e)}getFetch(){return this.client.getFetch()}async create(e,t,n){if(this.validateJsonLDGraph(t),n&&await this.client.documentExists(n))throw new Oh(n);const r=await this.getJsonLDGraphProperties(t);return await this.client.createDocument(e,n,r)}async readOne(e,t){const n=await this.getDocument(t);if(null===n)throw new Dh(t);const r=await this.convertToEngineDocument(n);return this.emit("onRDFDocumentLoaded",n.url,n.metadata),r}async readMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await this.getDocumentsForFilters(e,t),r={};return await Promise.all(n.map((async e=>{r[e.url]=await this.convertToEngineDocument(e),this.emit("onRDFDocumentLoaded",e.url,e.metadata)}))),this.helper.filterDocuments(r,t)}async update(e,t,n){if("$overwrite"in n){const e=await this.getJsonLDGraphProperties(n.$overwrite);return void(await this.client.overwriteDocument(t,e))}const r=await this.extractJsonLDGraphUpdate(n);await this.client.updateDocument(t,r)}async delete(e,t){await this.client.deleteDocument(t)}addListener(e){return this.listeners.push(e),()=>this.removeListener(e)}removeListener(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}clearCache(){this.cache=new Map}async getDocument(e){var t,n;if(!this.config.cachesDocuments)return this.client.getDocument(e);if(!this.cache.has(e)){const t=await this.client.getDocument(e);this.cache.set(e,t)}return null!=(n=null==(t=this.cache.get(e))?void 0:t.clone())?n:null}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.listeners.forEach((t=>{var r;return null==(r=t[e])?void 0:r.call(t,...n)}))}async getDocumentsForFilters(e,t){const n=this.extractJsonLDGraphTypes(t);return t.$in?await this.getDocumentsFromUrls(t.$in,n):await this.client.getDocuments(e,n.includes(rg("ldp:Container")))}async getDocumentsFromUrls(e,t){const n=e.reduce(((e,t)=>{var n;const r=null!=(n=Bm(t))?n:Fm(t);return{...e,[r]:[...e[r]||[],t]}}),{}),r=Object.entries(n).map((async e=>{let[n,r]=e;if(this.config.useGlobbing&&null!==this.config.globbingBatchSize&&this.config.globbingBatchSize<=r.length)return this.client.getDocuments(n,t.includes(rg("ldp:Container")));const i=r.map((e=>this.getDocument(e)));return(await Promise.all(i)).filter((e=>null!=e))}));return(await Promise.all(r)).flat()}async convertToEngineDocument(e){const t=await Cv(e.statements);return await function(e){return mv.apply(this,arguments)}(t)}validateJsonLDGraph(e){if(!Array.isArray(e["@graph"]))throw new Eh("Invalid JSON-LD graph provided for SolidEngine. Are you using a model that isn't a SolidModel?")}async extractJsonLDGraphUpdate(e){if(!this.isJsonLDGraphUpdate(e))throw new Eh("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const t=[],n="$apply"in e["@graph"]?e["@graph"].$apply:[e["@graph"]];for(const r of n)if(r.$updateItems&&t.push(...um(r.$updateItems).map((e=>this.extractJsonLDGraphItemsUpdate(e))).flat()),r.$push){const e=await this.extractJsonLDGraphItemPush(r.$push);t.push(...e)}return t}extractJsonLDGraphItemsUpdate(e){let{$where:t,$update:n,$unset:r}=e;if(!t||!("@id"in t))throw new Eh("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");if(r){const e=t["@id"];return("string"==typeof e?[e]:e.$in).map((e=>new yg(e)))}const i=t["@id"],s=n,a=[];for(const[o,l]of Object.entries(s)){if(null===l)throw new Eh("SolidEngine doesn't support setting properties to null, delete");"object"==typeof l&&"$unset"in l?a.push(new yg(i,o)):"@id"!==o?a.push(new bg(this.getUpdatePropertyOperationProperty(i,o,l))):a.push(new tg(i,l))}return a}getUpdatePropertyOperationProperty(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"@type"===t?dg.type(e,n):Array.isArray(n)?r?n.map((n=>this.getUpdatePropertyOperationProperty(e,t,n,!1))):fail("Cannot have nested array values"):Ff(n)&&"@id"in n?dg.reference(e,t,n["@id"]):Ff(n)&&"@type"in n&&"http://www.w3.org/2001/XMLSchema#dateTime"===n["@type"]?dg.literal(e,t,new Date(n["@value"])):dg.literal(e,t,n)}async extractJsonLDGraphItemPush(e){return(await this.getJsonLDGraphProperties(e)).map((e=>new bg(e)))}extractJsonLDGraphTypes(e){if(!this.isJsonLDGraphTypesFilter(e))return[];return am(e["@graph"].$contains["@type"].$or.reduce(((e,t)=>("$contains"in t&&e.push(...t.$contains),"$eq"in t&&e.push(t.$eq),e)),[]).filter((e=>e.startsWith("http"))))}async getJsonLDGraphProperties(e){return(await vg.fromJsonLD(e)).properties}isJsonLDGraphUpdate(e){var t;const n=e["@graph"];return!!Ff(n)&&!(null!=(t=n.$apply)?t:[n]).some((e=>{var t;const n=Object.keys(e);return 1!==n.length||!["$updateItems","$push"].includes(null!=(t=n[0])?t:"")}))}isJsonLDGraphTypesFilter(e){const t=e["@graph"];return Ff(t)&&Ff(t.$contains)&&Ff(t.$contains["@type"])&&Array.isArray(t.$contains["@type"].$or)}}class Sg{get protectedSolidBelongsTo(){return this}async __loadDocumentModels(e,t){const n=new Uh,r=this.parent.getAttribute(this.foreignKeyName),i=Array.isArray(r)?r:r?[r]:[],s=this.relatedClass.prepareEngineFilters(),a=vg.reduceJsonLDGraph(t,this.parent.url),o=t["@graph"].filter((e=>-1!==i.indexOf(e["@id"]))).reduce(((e,t)=>(e[t["@id"]]={"@graph":[t]},e)),{}),l=await Promise.all(Object.keys(n.filterDocuments(o,s)).map((t=>this.relatedClass.createFromEngineDocument(e,a,t)))),u=i.filter((t=>!l.some((e=>e.url===t))&&Hm(t)!==e));this.protectedSolidBelongsTo.loadDocumentModels(l,u)}}var Rg,Ag=new class{getJsonLDProperty(e,t){if((t=rg(t))in e)return this.getJsonLDPropertyValue(e[t]);if(!("@context"in e))return null;const n=e["@context"],r=Object.entries(n).find((e=>{let[n,r]=e;return t.startsWith(r)}));if(!r)return null;const i=e[("@vocab"===r[0]?"":`${r[0]}:`)+t.substr(r[1].length)];return this.getJsonLDPropertyValue(i)}getJsonLDPropertyValue(e){return void 0===e?null:Array.isArray(e)&&1===e.length?e[0]:e}};class Ig{get protectedSolidHas(){return this}async __loadDocumentModels(e,t){var n;const r=new Uh,i=null==(n=this.relatedClass.fields[this.foreignKeyName])?void 0:n.rdfProperty,s=this.relatedClass.prepareEngineFilters(),a=vg.reduceJsonLDGraph(t,this.parent.url),o=t["@graph"].filter((e=>{const t=Ag.getJsonLDProperty(e,i);return"object"==typeof t&&null!==t&&"@id"in t&&t["@id"]===this.parent.url})).reduce(((e,t)=>(e[t["@id"]]={"@graph":[t]},e)),{}),l=await Promise.all(Object.keys(r.filterDocuments(o,s)).map((t=>this.relatedClass.createFromEngineDocument(e,a,t)))),u=Object.keys(o).filter((t=>!l.some((e=>e.url===t))&&Hm(t)!==e));this.protectedSolidHas.loadDocumentModels(l,u)}}function Cg(e){return"__beforeParentCreate"in e}function Eg(e){return"useSameDocument"in e}function Og(e){return Pm(e,Ig)}function Dg(e){return"__synchronizeRelated"in e}class Tg{constructor(){this.useSameDocument=!1,this.documentModelsLoaded=!1}usingSameDocument(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.useSameDocument=e,this}}class Pg extends Tg{constructor(){super(...arguments),this.__newModels=[],this.__removedDocumentModels=[]}get protectedSolidMulti(){return this}get super(){var e=this;return new Proxy(this,{get:(t,n)=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Qh.prototype[n].call(e,...r)}})}isEmpty(){var e,t,n;return!this.documentModelsLoaded&&this.parent.exists()?null:0===((null==(e=this.__modelsInSameDocument)?void 0:e.length)||0)+((null==(t=this.__modelsInOtherDocumentIds)?void 0:t.length)||0)+this.__newModels.length+((null==(n=this.related)?void 0:n.length)||0)}async create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.protectedSolidMulti.assertLoaded("create");const t=this.relatedClass.newInstance(e);return await this.save(t),t}async save(e){return this.protectedSolidMulti.assertLoaded("save"),this.attach(e),this.useSameDocument?this.parent.exists()&&await this.parent.save():await e.save(),e}async remove(e){this.detach(e),await this.parent.save()}detach(e){var t,n,r,i;const s="string"==typeof e?e:e.getAttribute(this.localKeyName),a=null==(t=this.related)?void 0:t.find((e=>e.getAttribute(this.localKeyName)===s));a&&(this.related=null==(n=this.related)?void 0:n.filter((e=>e.getAttribute(this.localKeyName)!==s)),this.__newModels=this.__newModels.filter((e=>e.getAttribute(this.localKeyName)!==s)),this.__modelsInSameDocument=null==(r=this.__modelsInSameDocument)?void 0:r.filter((e=>e.getAttribute(this.localKeyName)!==s)),this.__modelsInOtherDocumentIds=null==(i=this.__modelsInOtherDocumentIds)?void 0:i.filter((e=>e!==s)),a.getDocumentUrl()!==this.parent.getDocumentUrl()||this.parent.tracksHistory()||this.__removedDocumentModels.push(a),Og(this)&&a.setAttribute(this.foreignKeyName,null),function(e){return Pm(e,Sg)}(this)&&this.parent.setAttribute(this.foreignKeyName,this.parent.getAttribute(this.foreignKeyName).filter((e=>e!==s))))}addRelated(e){this.super.addRelated(e),e.exists()||this.__newModels.push(e)}isRelated(e){return this.super.isRelated(e)||this.__newModels.includes(e)}cloneSolidData(e){var t,n,r;const i=null!=(t=e.related)?t:[];e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,e.__newModels=[],e.__removedDocumentModels=[];for(const s of this.__newModels)e.__newModels.push(null!=(n=i.find((e=>e.is(s))))?n:ev(s.clone(),(e=>i.push(e))));for(const s of this.__removedDocumentModels)e.__removedDocumentModels.push(null!=(r=i.find((e=>e.is(s))))?r:ev(s.clone(),(e=>i.push(e))));this.__modelsInSameDocument&&(e.__modelsInSameDocument=this.__modelsInSameDocument.map((e=>{var t;return null!=(t=i.find((t=>t.is(e))))?t:e.clone()}))),this.__modelsInOtherDocumentIds&&(e.__modelsInOtherDocumentIds=this.__modelsInOtherDocumentIds)}loadDocumentModels(e,t){var n;this.__modelsInSameDocument=e,this.__modelsInOtherDocumentIds=t,0===this.__modelsInOtherDocumentIds.length&&(this.related=am([...null!=(n=this.related)?n:[],...this.__modelsInSameDocument])),this.documentModelsLoaded=!0}}class jg extends Tg{get super(){var e=this;return new Proxy(this,{get:(t,n)=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return ef.prototype[n].call(e,...r)}})}isEmpty(){return!this.documentModelsLoaded&&this.parent.exists()?null:!(this.__modelInSameDocument||this.__modelInOtherDocumentId||this.__newModel||this.related)}async create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.assertNotLoaded("create");const t=this.relatedClass.newInstance(e);return await this.save(t),t}async save(e){return this.assertNotLoaded("save"),this.attach(e),this.useSameDocument?this.parent.exists()&&await this.parent.save():await e.save(),e}addRelated(e){this.super.addRelated(e),e.exists()||(this.__newModel=e)}isRelated(e){return this.super.isRelated(e)||this.__newModel===e}cloneSolidData(e){var t;let n=null!=(t=e.related)?t:null;e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,this.__newModel&&(this.__newModel=null!=n?n:ev(this.__newModel.clone(),(e=>n=e))),this.__modelInSameDocument&&(e.__modelInSameDocument=null!=n?n:this.__modelInSameDocument.clone()),this.__modelInOtherDocumentId&&(e.__modelInOtherDocumentId=this.__modelInOtherDocumentId)}loadDocumentModels(e,t){var n;return e.length+t.length>1&&console.warn(`The ${this.name} relationship in ${this.parent.static("modelName")} has been declared as hasOne, but more than one related model were found.`),e.length>0?(this.__modelInSameDocument=e[0],this.related=this.__modelInSameDocument,this.documentModelsLoaded=!0,(null==(n=this.__modelInSameDocument)?void 0:n.exists())?void delete this.__newModel:void(this.__newModel=this.__modelInSameDocument)):t.length>0?(this.__modelInOtherDocumentId=t[0],void(this.documentModelsLoaded=!0)):void(this.documentModelsLoaded=!0)}assertNotLoaded(e){if(this.loaded)throw new Eh(`The "${e}" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`)}}function Mg(e){return Pm(e,Pg)}function Lg(e){return Pm(e,jg)}function $g(e,t,n,r){const i=e=>Hf({type:e,rdfProperty:t,rdfPropertyAliases:n,required:r});switch(typeof e){case"string":return i(sf.String);case"number":case"bigint":return i(sf.Number);case"boolean":return i(sf.Boolean);case"object":return null===e?i(sf.Any):e instanceof Gh?i(sf.Key):e instanceof Date?i(sf.Date):Array.isArray(e)?Hf({required:r,rdfProperty:t,type:sf.Array,items:e.length>0?$g(e[0]):i(sf.Any)}):Hf({required:r,rdfProperty:t,type:sf.Object,fields:Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return e[n]=$g(r),e}),{})});default:return i(sf.Any)}}class Ug{}!function(e){e.Compacted="compacted",e.Expanded="expanded"}(Rg||(Rg={}));class Ng{constructor(e){this.terms=e,this.reverseProperties=new Map}static fromRdfClasses(e){var t;const n=Object.entries(e).map((e=>{let[t,n]=e;return{name:t,value:n,compactingPrefix:`${t}:`,used:!1}}));return n.unshift({name:"@vocab",compactingPrefix:"",value:null==(t=n[0])?void 0:t.value,used:!1}),new Ng(n)}addReverseProperty(e,t){this.reverseProperties.set(e,t)}addTerms(e){for(const[t,n]of Object.entries(e)){if(this.terms.some((e=>e.value===n)))continue;let e=t,r=1;for(;this.terms.some((t=>t.name===e));)e=`${t}${++r}`;this.terms.push({name:t,value:n,compactingPrefix:`${t}`,used:!1})}}getTermForExpandedIRI(e){var t;return null!=(t=this.terms.find((t=>e.startsWith(t.value))))?t:null}render(){const e=this.terms.reduce(((e,t)=>(t.used&&(e[t.name]=t.value),e)),{});return this.reverseProperties.forEach(((t,n)=>{e[n]={"@reverse":t}})),e}}class Fg{constructor(e,t){this.context=e,this.iriFormat=t}static forModel(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Ng.fromRdfClasses(e.rdfContexts);return new Fg(n,t?Rg.Compacted:Rg.Expanded)}serialize(e){var t,n,r,i,s;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=new Set(null!=(t=a.ignoreModels)?t:[]),l={"@context":{},"@type":null};o.add(e);for(const[u,c]of Object.entries(null!=(n=a.attributes)?n:e.getAttributes()))this.setJsonLDField(l,e,u,c,a);return(null!=(r=a.includeRelations)?r:1)&&this.setJsonLDRelations(l,e,o),null==(i=a.includeTypes)||i?this.setJsonLDTypes(l,e):delete l["@type"],null==(s=a.includeContext)||s?this.setJsonLDContext(l):delete l["@context"],l}processExpandedIRI(e){return this.iriFormat===Rg.Expanded?e:this.compactExpandedIRI(e)}compactExpandedIRI(e){const t=this.context.getTermForExpandedIRI(e);return t?ev(t.compactingPrefix+e.substr(t.value.length),(()=>t.used=!0)):e}setJsonLDField(e,t,n,r,i){if(n===t.static("primaryKey"))return void(e["@id"]=Wf(r));const s=t.static().getFieldRdfProperty(n);s&&this.setJsonLDProperty(e,t,this.processExpandedIRI(s),n,r,i)}setJsonLDRelations(e,t,n){for(const r of t.static("relations")){const i=t.requireRelation(r),s=i.getLoadedModels()[0];!(i.enabled&&i.loaded&&Eg(i))||i.isEmpty()||s&&n.has(s)||(this.context.addTerms(i.relatedClass.rdfContexts),this.setJsonLDRelation(e,i,n))}}setJsonLDRelation(e,t,n){const r=t.relatedClass.instance(),i=t.related,s=Og(t),a=s?r.static().getFieldRdfProperty(t.foreignKeyName):t.parent.static().getFieldRdfProperty(t.foreignKeyName),o=this.processExpandedIRI(a),l={ignoreModels:n,includeRelations:!0,includeContext:!1},u=s?e=>ev(this.serialize(e,l),(e=>{delete e[o]})):e=>this.serialize(e,l);i&&(s&&this.context.addReverseProperty(t.name,o),e[s?t.name:o]=Array.isArray(i)?i.map((e=>u(e))):u(i))}setJsonLDTypes(e,t){const n=t.static("rdfsClasses").map((e=>this.processExpandedIRI(e)));e["@type"]=1===n.length?n[0]:n}setJsonLDContext(e){e["@context"]=this.context.render()}setJsonLDProperty(e,t,n,r,i,s){(i=this.castJsonLDValue(i,t.static().getFieldDefinition(r,i)))instanceof Ug?s.keepEmptyValues&&(e[n]=null):e[n]=i}castJsonLDValue(e,t){switch(t.type){case sf.Any:{const n=$g(e,t.rdfProperty,t.rdfPropertyAliases,t.required);if(n.type===sf.Any)throw new Eh("Couldn't infer field definition for a field declared as any");return this.castJsonLDValue(e,n)}case sf.Key:return{"@id":Wf(e)};case sf.Date:return"object"==typeof e&&null!==e&&"$unset"in e?e:{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":new Date(e).toISOString()};case sf.Array:{const n=e,r=t.items;switch(n.length){case 0:return new Ug;case 1:return this.castJsonLDValue(n[0],r);default:return n.map((e=>this.castJsonLDValue(e,r)))}}default:return JSON.parse(JSON.stringify(e))}}}let Bg;function zg(e){return qg()[e]}function qg(){return null!=Bg?Bg:Bg={Operation:Af("Operation"),PropertyOperation:Af("PropertyOperation"),AddPropertyOperation:Af("AddPropertyOperation"),RemovePropertyOperation:Af("RemovePropertyOperation"),SetPropertyOperation:Af("SetPropertyOperation"),UnsetPropertyOperation:Af("UnsetPropertyOperation"),DeleteOperation:Af("DeleteOperation")}}const Vg=Tm(nf,[Pg,Ig]);class Hg extends Vg{async load(){if(this.isEmpty())return this.related=[];if(!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)return this.related=[];const e=await this.loadRelatedModels(this.__modelsInOtherDocumentIds);return this.related=[...this.__modelsInSameDocument,...e],this.related}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.related=[],this.__newModels=[],this.__modelsInSameDocument=[],e.forEach((e=>{var t;e.unsetAttribute(this.foreignKeyName),null==(t=this.related)||t.push(e),this.__newModels.push(e)}))}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ev(super.clone(e),(e=>{this.cloneSolidData(e)}))}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}loadRelatedModels(e){return this.relatedClass.all({$in:e})}}class Wg extends Hg{constructor(e){super(e,zg("Operation"),"resourceUrl")}attach(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=zg("Operation"),r=e instanceof n?e:zg(null!=t?t:"SetPropertyOperation").newInstance(e);if(r.constructor===n)throw new Error("Creating base operations is meaningless, you should create a specific operation instead (add property, remove property, etc.)");return super.attach(r)}attachAddOperation(e){return this.attach(e,"AddPropertyOperation")}attachRemoveOperation(e){return this.attach(e,"RemovePropertyOperation")}attachSetOperation(e){return this.attach(e,"SetPropertyOperation")}attachUnsetOperation(e){return this.attach(e,"UnsetPropertyOperation")}attachDeleteOperation(e){return this.attach(e,"DeleteOperation")}async __loadDocumentModels(e,t){var n;const r=null==(n=this.relatedClass.fields[this.foreignKeyName])?void 0:n.rdfProperty,i=vg.reduceJsonLDGraph(t,this.parent.url),s=t["@graph"].filter((e=>{const t=Ag.getJsonLDProperty(e,r);return"object"==typeof t&&null!==t&&"@id"in t&&t["@id"]===this.parent.url})),a=nm(await Promise.all(s.map((async t=>{var n;return null==(n=this.getOperationClass(t))?void 0:n.createFromEngineDocument(e,i,t["@id"])})))),o=s.map((e=>e["@id"])).filter((t=>!a.some((e=>e.url===t))&&Hm(t)!==e));this.protectedSolidHas.loadDocumentModels(a,o)}async loadRelatedModels(){throw new Error("loading operations from different documents has not been implemented yet")}getOperationClass(e){var t,n;const r=this.getOperationMatchers(),i=um(null!=(t=e["@type"])?t:[]);return null==(n=r.find((e=>e.match(i))))?void 0:n.operation}getOperationMatchers(){var e;return null!=(e=Wg.operationMatchers)?e:Wg.operationMatchers=Object.values(qg()).map((e=>{const t=Fg.forModel(e),n=e.rdfsClasses,r=n.map((e=>t.processExpandedIRI(e))),i=[...n,...r];return{operation:e,match:e=>i.some((t=>e.includes(t)))}}))}}class Jg extends Qh{constructor(e){super(e,Af("SolidACLAuthorization"))}requireACLUrl(){var e;return null!=(e=this.aclUrl)?e:fail("Could not get ACL Url")}isDocumentACL(){return this.aclUrl&&this.effectiveACLUrl?this.aclUrl===this.effectiveACLUrl:null}setForeignAttributes(){}async load(){const e=Af("SolidACLAuthorization"),t=await function(e,t){return Xv.apply(this,arguments)}(this.parent.requireDocumentUrl(),e.requireFetch()),n=await Cv(t.document.statements()),r=await Promise.all(t.document.statements(void 0,"rdf:type","acl:Authorization").map((r=>{let{subject:i}=r;return e.createFromEngineDocument(t.effectiveUrl,n,i.value)})));return this.aclUrl=t.url,this.effectiveACLUrl=t.effectiveUrl,this.related=r,r}}const Kg=Tm(Xh,[Pg,Sg]);class Gg extends Kg{async load(){var e,t,n;if(this.__modelsInSameDocument&&this.__modelsInOtherDocumentIds||(this.__modelsInSameDocument=[],this.__modelsInOtherDocumentIds=this.parent.getAttribute(this.foreignKeyName)),this.isEmpty())return this.related=[];const r={};for(const s of null!=(e=this.__modelsInOtherDocumentIds)?e:[]){const e=null!=(t=Bm(s))?t:Fm(s);e in r||(r[e]=new Set),null==(n=r[e])||n.add(Hm(s))}const i=(await Promise.all(Object.entries(r).map((e=>{let[t,n]=e;return this.relatedClass.from(t).all({$in:[...n]})})))).reduce(((e,t)=>(e.push(...t),e)),[]);return this.related=[...this.__modelsInSameDocument,...this.__newModels,...i],this.related}associate(e){const t=this.parent.getAttribute(this.foreignKeyName),n=Gh.from(e);this.parent.setAttribute(this.foreignKeyName,t.concat(n))}disassociate(e){const t=this.parent.getAttribute(this.foreignKeyName),n=Gh.from(e);this.parent.setAttribute(this.foreignKeyName,t.filter((e=>!n.equals(Gh.from(e)))))}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.related=[],this.__newModels=[],this.__modelsInSameDocument=[];const t=this.parent.getAttribute(this.foreignKeyName);e.forEach((e=>{var n;rm(t,e.getAttribute(this.localKeyName)),null==(n=this.related)||n.push(e),this.__newModels.push(e)})),this.parent.setAttribute(this.foreignKeyName,t)}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ev(super.clone(e),(e=>{this.cloneSolidData(e)}))}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],this.parent.getAttribute(this.foreignKeyName))}async __synchronizeRelated(e){var t,n;const{SetPropertyOperation:r,AddPropertyOperation:i,RemovePropertyOperation:s}=qg(),a=this.parent.static().getFieldRdfProperty(this.foreignKeyName),o=this.localKeyName,l=nv(null!=(t=this.related)?t:[],o),u=nv(null!=(n=e.related)?n:[],o),c=ev(new WeakMap,(t=>t.set(e.parent,this.parent)));this.parent.operations.filter((e=>!e.exists()&&(e instanceof r||e instanceof i||e instanceof s)&&e.property===a)).map((e=>um(e.value))).flat().map((e=>u.get(e instanceof Gh?e.toString():e))).filter((e=>!!e)).forEach((e=>{var t;if(l.hasKey(e.getAttribute(o)))return;const n=e.clone({clones:c});null==(t=this.related)||t.push(n),l.add(n)}));const d=await Promise.all(this.parent.getAttribute(this.foreignKeyName).map((async e=>{const t=l.get(e),n=u.get(e);return t&&n?(await t.static().synchronize(t,n),t):t})));this.related=[...d.filter((e=>!!e)),...this.__newModels]}}const Zg=Tm(tf,[jg,Sg]);class Yg extends Zg{async load(){var e;if(this.__modelInSameDocument)return this.related=this.__modelInSameDocument;const t=null!=(e=this.__modelInOtherDocumentId)?e:this.parent.getAttribute(this.foreignKeyName);if(!t)return this.related=null;const n=await this.relatedClass.find(t);return this.related=n}reset(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0];delete this.related,delete this.__modelInSameDocument,delete this.__modelInSameDocument,e&&(this.parent.unsetAttribute(this.foreignKeyName),this.related=e,this.__newModel=e)}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ev(super.clone(e),(e=>{this.cloneSolidData(e)}))}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);this.loadDocumentModels([],e?[e]:[])}async __synchronizeRelated(e){var t;if(!this.related||!e.related||this.related.url!==e.related.url)return;const n=this.parent.getAttribute(this.foreignKeyName);await this.related.static().synchronize(this.related,e.related),this.__newModel||this.related.url===n?this.related=null!=(t=this.__newModel)?t:this.related:e.related.url===n&&(this.related=e.related.clone({clones:ev(new WeakMap,(t=>t.set(e.parent,this.parent)))}))}}const Qg=Tm(rf,[jg,Ig]);class Xg extends Qg{async load(){return this.isEmpty()?this.related=null:this.__modelInSameDocument||this.__modelInOtherDocumentId?(this.related=await(async()=>this.__modelInSameDocument?this.__modelInSameDocument:this.__modelInOtherDocumentId?this.relatedClass.find(this.__modelInOtherDocumentId):null)(),this.related):this.related=null}reset(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0];delete this.related,delete this.__newModel,delete this.__modelInSameDocument,e&&(e.unsetAttribute(this.foreignKeyName),this.related=e,this.__newModel=e)}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ev(super.clone(e),(e=>{this.cloneSolidData(e)}))}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}}class ey extends ef{constructor(e,t){super(e,t,"resourceUrls","url")}isEmpty(){return!1}setForeignAttributes(e){this.parent.url&&(e.resourceUrls=am([...e.resourceUrls,this.parent.url]))}async load(){var e;const t=this.relatedClass.collection,n=Lm(this.parent.url);return this.related=await this.relatedClass.from(null!=(e=Bm(n))?e:Fm(n)).find(n),this.relatedClass.collection=t,this.related}}class ty extends ef{constructor(e){super(e,Af("Tombstone"))}create(){const e=Af("Tombstone");this.related=new e({url:this.parent.metadata.url,resourceUrl:this.parent.url,deletedAt:new Date})}async load(){return null}setForeignAttributes(){}}const ny=Dm(kf,[class{async deleteModels(e){const t=this.decantDocumentModelsByContainer(e);await Promise.all(Object.entries(t).map((e=>{let[t,n]=e;return this.deleteContainerDocumentsModels(t,n)})))}decantDocumentModelsByContainer(e){const t=this.decantModelsByDocument(e);return Object.entries(t).reduce(((e,t)=>{var n,r;let[i,s]=t;const a=null!=(n=Bm(i))?n:Fm(i);return(e[a]=null!=(r=e[a])?r:[]).push({documentUrl:i,models:s}),e}),{})}decantModelsByDocument(e){return e.reduce(((e,t)=>{var n;const r=t.requireDocumentUrl();return(e[r]=null!=(n=e[r])?n:[]).push(t),e}),{})}async deleteContainerDocumentsModels(e,t){const n=await this.requireEngine().readMany(e,{$in:t.map((e=>{let{documentUrl:t}=e;return t}))});await Promise.all(t.map((t=>{let{documentUrl:r,models:i}=t;return this.deleteDocumentModels(n,e,r,i)})))}async deleteDocumentModels(e,t,n,r){const i=e[n];if(!i)return;const s=this.requireEngine(),a=r.filter((e=>e.exists())).map((e=>e.url));if(!i["@graph"].some((e=>!a.some((t=>t===e["@id"]))))){const e=r.filter((e=>e.isRelationLoaded("tombstone"))).map((e=>e.tombstone));return 0===e.length?await s.delete(t,n):await s.update(t,n,{$overwrite:{"@graph":e.map((e=>e.serializeToJsonLD(!1)))}}),void r.forEach((e=>e.setDocumentExists(!1)))}await s.update(t,n,{"@graph":{$updateItems:{$where:{"@id":{$in:a}},$unset:!0}}})}},class{serializeToJsonLD(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Fg.forModel(this.static()).serialize(this,{includeRelations:e})}async parseEngineDocumentAttributesFromJsonLD(e,t){var n,r;const i=e,s=null!=(n=i["@graph"].find((e=>e["@id"]===t)))?n:pm(Eh,`Resource '${t}' not found on document`),a=await vg.resourceFromJsonLDGraph(i,t,s),o=this.static("fields"),l={};l[this.static("primaryKey")]=t;for(const[u,c]of Object.entries(o)){if(!c.rdfProperty)continue;const e=(null!=(r=a.propertiesIndex[c.rdfProperty])?r:c.rdfPropertyAliases.reduce(((e,t)=>{var n;return e.concat(null!=(n=a.propertiesIndex[t])?n:[])}),[])).map((e=>1===e.type?new Gh(e.value):e.value)),[t,...n]=e;void 0!==t&&(l[u]=n.length>0?[t,...n]:t)}return l}convertEngineFiltersToJsonLD(e,t){const n={},r=Fg.forModel(this.static()),i=this.static("rdfsClasses"),s=i.map((e=>r.processExpandedIRI(e))),a=[];i.length>0&&(a.push({$contains:s}),a.push({$contains:i})),1===i.length&&(a.push({$eq:s[0]}),a.push({$eq:i[0]})),this.static("rdfsClassesAliases").forEach((e=>{e.length>0&&a.push({$contains:e}),1===e.length&&a.push({$eq:e[0]})})),e.$in&&(n.$in=e.$in,delete e.$in);const o=this.convertAttributeValuesToJsonLD(e,{compactIRIs:t,keepEmptyValues:!1});return a.length>0&&(o["@type"]={$or:a}),Object.keys(o).length>0&&(n["@graph"]={$contains:o}),n}convertEngineUpdatesToJsonLD(e,t){const n=this.convertAttributeValuesToJsonLD(e,{compactIRIs:t,keepEmptyValues:!0});for(const[r,i]of Object.entries(n))null===i&&(n[r]={$unset:!0});return n}convertAttributeValuesToJsonLD(e,t){return Fg.forModel(this.static(),t.compactIRIs).serialize(this,{includeContext:!1,includeTypes:!1,includeRelations:!1,keepEmptyValues:t.keepEmptyValues,attributes:e})}},class{get isPublic(){var e,t;return null!=(t=null==(e=this._publicPermissions)?void 0:e.includes(dv.Read))?t:null}get isPrivate(){return this._publicPermissions?!this._publicPermissions.includes(dv.Read):null}async fetchPublicPermissionsIfMissing(){this._publicPermissions||await this.fetchPublicPermissions()}async fetchPublicPermissions(){const e=Af("SolidACLAuthorization"),t=this.requireDocumentUrl(),n=e.requireFetch(),r=await n(t,{method:"HEAD"}),i=new fv(t,[],r.headers);this._publicPermissions=i.getPublicPermissions()}async updatePublicPermissions(e){const t=Af("SolidACLAuthorization");await this.withEngine(t.requireEngine(),(()=>this.updateAuthorizations(e))),this._publicPermissions=e}trackPublicPermissions(){const e=this.static().requireFinalEngine();if(!(e instanceof kg))return{documentPermissions:{},stopTracking(){}};const t={},n=e.addListener({onRDFDocumentLoaded(e,n){if(!n.headers)return;const r=new fv(e,[],n.headers);t[e]=r.getPublicPermissions()}});return{documentPermissions:t,stopTracking:n}}async updateAuthorizations(e){this.relatedAuthorizations.enable();const t=await this.loadRelationIfUnloaded("authorizations"),n=Af("SolidACLAuthorization"),r=e.map((e=>n.modeFromSolidDocumentPermission(e))),i=t.filter((e=>e.agentClasses.includes(cv("foaf:Agent")))),s=i.map((e=>e.modes)).flat();if(r.length!==s.length||r.some((e=>s.includes(e))))if(this.relatedAuthorizations.isDocumentACL())if(0!==r.length)if(0!==i.length)for(const a of i)await a.update({modes:r});else await this.createPublicAuthorization(r);else{for(const e of i)await e.delete();this.relatedAuthorizations.related=om(t,i)}else await this.createDocumentACLResource(r)}async createDocumentACLResource(e){this.relatedAuthorizations.enable();const t=Af("SolidACLAuthorization"),n=this.authorizations.filter((e=>e.modes.includes(t.rdfTerm("acl:Control")))).map((e=>ev(new t(e.getAttributes()),(t=>{var n,r;t.accessTo=[this.requireDocumentUrl()],t.accessToClasses=[],t.default=[],t.mintUrl(this.relatedAuthorizations.requireACLUrl(),!1,null!=(r=null==(n=qm(e.url))?void 0:n.fragment)?r:Rm())}))));for(const r of n)await r.save();this.relatedAuthorizations.related=n,this.relatedAuthorizations.effectiveACLUrl=this.relatedAuthorizations.aclUrl,await this.createPublicAuthorization(e)}async createPublicAuthorization(e){var t;this.relatedAuthorizations.enable();const n=Af("SolidACLAuthorization"),r=await n.createInDocument({agentClasses:[n.rdfTerm("foaf:Agent")],accessTo:[this.requireDocumentUrl()],modes:e},this.relatedAuthorizations.requireACLUrl(),"public");null==(t=this.relatedAuthorizations.related)||t.push(r)}}]);class ry extends ny{constructor(){super(...arguments),this._sourceSubject={}}static getFieldDefinition(e,t){var n;if(e.endsWith(".*")){const n=this.getFieldDefinition(e.slice(0,-2),Array.isArray(t)&&t.length>0?t[0]:void 0);if(!lf(n))throw new Eh("Can't get item field definition for non-array field");return{type:n.items.type,rdfProperty:n.rdfProperty,rdfPropertyAliases:n.rdfPropertyAliases,required:!1}}return null!=(n=this.fields[e])?n:$g(t,this.getDefaultRdfContext()+e,[],!1)}static getFieldRdfProperty(e){var t;const n=this.fields[e];return n&&!n.rdfProperty?null:null!=(t=null==n?void 0:n.rdfProperty)?t:this.getDefaultRdfContext()+e}static getRdfPropertyField(e){var t,n;return null!=(n=(null!=(t=this.rdfPropertyFields)?t:this.rdfPropertyFields=function(e){return Object.entries(e).reduce((function(e,t){var n=L(t,2),r=n[0];return e[n[1]]=r,e}),{})}(nv(Object.keys(this.fields),(e=>this.getFieldRdfProperty(e)))))[e])?n:null}static requireFetch(){const e=this.requireFinalEngine();if(!(e instanceof kg))throw new Eh(`Could not get fetch from ${this.modelName} model`);return e.getFetch()}static requireFieldRdfProperty(e){var t;return null!=(t=this.getFieldRdfProperty(e))?t:pm(`Couldn't get required property for rdf field '${e}'`)}static from(e){return this.collection=e,this}static at(e){return this.from(e)}static boot(e){super.boot(e);const t=this;if(!t.collection.match(/^\w+:\/\/.*\/$/))throw new Th(t.name,`SolidModel collections must be valid container urls (ending with a trailing slash), '${t.collection}' isn't.`);t.rdfContexts=this.bootRdfContexts(),t.rdfsClasses=this.bootRdfsClasses(),t.rdfsClassesAliases=t.rdfsClassesAliases.map((e=>{var n;return am(null!=(n=e.map((e=>rg(e,t.rdfContexts,t.getDefaultRdfContext()))))?n:[])})),t.fields=this.bootFields()}static aliasRdfPrefixes(e){var t;this.ensureBooted();for(const[n,r]of Object.entries(e)){const e=this.rdfsClasses.reduce(((e,t)=>(t.startsWith(n)&&e.push(t.replace(n,r)),e)),[]);e.length>0&&this.rdfsClassesAliases.push(e);for(const i of Object.values(this.fields))(null==(t=i.rdfProperty)?void 0:t.startsWith(n))&&i.rdfPropertyAliases.push(i.rdfProperty.replace(n,r))}}static resetRdfAliases(){this.rdfsClassesAliases=[];for(const e of Object.values(this.fields))e.rdfPropertyAliases&&(e.rdfPropertyAliases=[])}static replaceRdfPrefixes(e){var t;this.ensureBooted();for(const[n,r]of Object.entries(e)){this.rdfsClasses=this.rdfsClasses.map((e=>e.replace(n,r)));for(const e of Object.values(this.fields))(null==(t=e.rdfProperty)?void 0:t.startsWith(n))&&(e.rdfProperty=e.rdfProperty.replace(n,r))}}static createFromEngineDocument(e,t,n){return this.instance().createFromEngineDocument(e,t,n)}static async find(e){var t;const n=this.instance().serializeKey(e),r=Hm(n),i=null!=(t=Bm(r))?t:Fm(r);this.ensureBooted();try{const{documentPermissions:e,stopTracking:t}=this.instance().trackPublicPermissions(),s=await this.requireEngine().readOne(i,r),a=await this.instance().createFromEngineDocument(r,s,n);return t(),a._publicPermissions=e[r],a}catch(s){return null}}static async all(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this.prepareEngineFilters(e);const{documentPermissions:t,stopTracking:n}=this.instance().trackPublicPermissions(),r=await this.withCollection((()=>super.all(e)));return n(),r.forEach((e=>e._publicPermissions=t[e.requireDocumentUrl()])),r}static prepareEngineFilters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=!(this.requireFinalEngine()instanceof kg);return this.instance().convertEngineFiltersToJsonLD(e,t)}static rdfTerm(e){return cv(e,{extraContext:this.rdfContexts,defaultPrefix:Object.values(this.rdfContexts).shift()})}static async newFromJsonLD(e,t,n){const r=Uv(e),i=await vg.fromJsonLD(r,null!=t?t:this.collection),s=await i.toJsonLD(),a=null!=n?n:this.findResourceId(i.statements,t),o=i.resource(a),l=t||Hm(a),u=await this.instance().parseEngineDocumentAttributes(l,s,a);return this.hasAutomaticTimestamp(pf.CreatedAt)&&(u.createdAt=null==o?void 0:o.getPropertyValue(rg("purl:created"))),this.hasAutomaticTimestamp(pf.UpdatedAt)&&(u.updatedAt=null==o?void 0:o.getPropertyValue(rg("purl:modified"))),ev(this.newInstance(Hf(u)),(async t=>{await t.loadDocumentModels(l,s),t.reset(),t._sourceSubject=e["@id"]?function(e){var t=qm(e);return t?Hf({containerUrl:Lv(t),documentName:t.path?t.path.split("/").pop():null,resourceHash:t.fragment}):{}}(e["@id"]):{};for(const e of this.relations){const n=t.requireRelation(e),r=n.getLoadedModels();n.enabled&&(tv(n,Eg).reset(r),r.forEach((e=>e.reset())))}}))}static async createFromJsonLD(e,t,n){return ev(await this.newFromJsonLD(e,t,n),(e=>e.save(t)))}static async createInDocument(e,t,n){return ev(new this(e),(e=>e.saveInDocument(t,n)))}static async synchronize(e,t){if(this!==e.static())return e.static().synchronize(e,t);if(e.getPrimaryKey()!==t.getPrimaryKey())throw new Eh("Can't synchronize different models");if(await e.loadRelationIfUnloaded("operations"),await t.loadRelationIfUnloaded("operations"),(0!==e.operations.length||0!==t.operations.length)&&e.getHistoryHash()!==t.getHistoryHash()){e.addHistoryOperations(t.operations),t.addHistoryOperations(e.operations);for(const n of om(this.relations,this.reservedRelations)){const r=e.requireRelation(n),i=t.requireRelation(n);r.enabled&&i.enabled&&(await tv(r,Dg).__synchronizeRelated(i),await tv(i,Dg).__synchronizeRelated(r))}}}static bootRdfContexts(e){var t,n,r,i;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=null!=e?e:this,o=Object.getPrototypeOf(a),l=null==(t=Object.getOwnPropertyDescriptor(a,"rdfContext"))?void 0:t.value,u={...s,...null!=(r=null==(n=Object.getOwnPropertyDescriptor(a,"rdfContexts"))?void 0:n.value)?r:{}};return null!=u.default||(u.default=null!=l?l:Object.values(u).find((e=>!!e))),o?this.bootRdfContexts(o,u):{...u,default:null!=(i=u.default)?i:"http://www.w3.org/ns/solid/terms#",solid:"http://www.w3.org/ns/solid/terms#",crdt:"https://vocab.noeldemartin.com/crdt/",ldp:"http://www.w3.org/ns/ldp#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#"}}static bootRdfsClasses(e){var t,n,r;const i=null!=e?e:this,s=null==(t=Object.getOwnPropertyDescriptor(i,"rdfsClass"))?void 0:t.value,a=null==(n=Object.getOwnPropertyDescriptor(i,"rdfsClasses"))?void 0:n.value;if(a&&a.length>0)return am(null!=(r=null==a?void 0:a.map((e=>this.rdfTerm(e))))?r:[]);if(s)return[this.rdfTerm(s)];const o=Object.getPrototypeOf(i);return o?this.bootRdfsClasses(o):[this.rdfTerm(this.getDefaultRdfContext()+this.modelName)]}static bootFields(){var e,t,n,r,i;const s=this,a=s.pureInstance(),o=s.fields,l=s.getDefaultRdfContext();a.static().hasAutomaticTimestamp(pf.CreatedAt)&&delete o[pf.CreatedAt],a.static().hasAutomaticTimestamp(pf.UpdatedAt)&&delete o[pf.UpdatedAt];for(const[u,c]of Object.entries(o))c.rdfProperty=rg(null!=(e=c.rdfProperty)?e:`${l}${u}`,s.rdfContexts,l),c.rdfPropertyAliases=null!=(n=null==(t=c.rdfPropertyAliases)?void 0:t.map((e=>rg(e,s.rdfContexts,l))))?n:[];return null==(r=o[s.primaryKey])||delete r.rdfProperty,null==(i=o[s.primaryKey])||delete i.rdfPropertyAliases,o}static getDefaultRdfContext(){var e;return null!=(e=this.rdfContexts.default)?e:""}static async withCollection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const n=this.collection;if("string"!=typeof e&&(t=e,e=""),!t)throw new Eh("Invalid method given to withCollection (SolidModel internals)");this.collection=e||n;const r=await t();return this.collection=n,r}static findResourceId(e,t){var n;const r=e.reduce(((e,t)=>{var n,r;return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===t.predicate.value&&(e[t.subject.value]=null!=(n=e[t.subject.value])?n:[],null==(r=e[t.subject.value])||r.push(t.object.value)),e}),{}),i=null==(n=Object.entries(r).find((e=>{let[t,n]=e;return!this.rdfsClasses.some((e=>!n.includes(e)))})))?void 0:n[0];if(!i)throw new Eh("Couldn't find matching resource in JSON-LD");return t?Um(t,i):i}initialize(e,t){var n;this._documentExists=t,this._sourceDocumentUrl=null!=(n=this._sourceDocumentUrl)?n:null,this._trackedDirtyAttributes={},this._removedResourceUrls=[],this._usesRdfAliases=!1,super.initialize(e,t)}initializeRelations(){super.initializeRelations(),this.initializeRelationsEnabling(),this.initializeMetadataRelation()}initializeRelationsEnabling(){this.static().hasAutomaticTimestamps()||this._proxy.relatedMetadata.disable(),this._proxy.tracksHistory()||(this._proxy.relatedOperations.disable(),this._proxy.relatedTombstone.disable()),this._proxy.relatedAuthorizations.disable()}initializeMetadataRelation(){if(!this._proxy.relatedMetadata.enabled)return;const e=Af("Metadata").newInstance(Hf({resourceUrl:this._attributes[this.static("primaryKey")],createdAt:this._attributes.createdAt,updatedAt:this._attributes.updatedAt}),!1);e.resourceUrl&&e.mintUrl(this.getDocumentUrl()||void 0,this._documentExists),this._proxy.relatedMetadata.attach(e),delete this._attributes.createdAt,delete this._attributes.updatedAt,delete this._originalAttributes.createdAt,delete this._originalAttributes.updatedAt}static(e){return super.static(e)}save(e){return this.static().withCollection(e||this.guessCollection(),(()=>super.save()))}async saveInDocument(e,t){return this.exists()?function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];dm(e)||pm.apply(void 0,[t].concat(r))}(this.getDocumentUrl()===e,Eh,"Model already exists and is not stored in the given document"):this.mintUrl(e,!0,t),await this.save(),this}delete(){return this.static().withCollection(this.guessCollection(),(()=>super.delete()))}async softDelete(){if(!this.static().hasAutomaticTimestamps())throw new Eh("Cannot soft delete a model without automatic timestamps");if(this.isSoftDeleted())return this;const e=new Date;return this.metadata.setAttribute(pf.UpdatedAt,e),this.metadata.setAttribute("deletedAt",e),await this.save(),this}async registerInTypeIndex(e){const t=new(Af("SolidDocument"))({url:this.getDocumentUrl()});await t.register(e,this.static())}mintUrl(e,t,n){this.setAttribute(this.static("primaryKey"),this.newUrl(e,n)),e&&(this._documentExists=null==t||t)}toJsonLD(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e={ids:!0,timestamps:!0,history:!0,...e};const t=this.clone();return e.ids||t.getRelatedModels().forEach((e=>e.setAttribute("url",null))),e.timestamps||t.getRelatedModels().forEach((e=>{e.relatedMetadata.related=null,delete e.relatedMetadata.__modelInSameDocument,delete e.relatedMetadata.__modelInOtherDocumentId,delete e.relatedMetadata.__newModel})),e.history||t.getRelatedModels().forEach((e=>{e.relatedOperations.related=[],e.relatedOperations.__newModels=[],delete e.relatedOperations.__modelsInSameDocument,delete e.relatedOperations.__modelsInOtherDocumentIds})),t.serializeToJsonLD()}async toTurtle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){return(new Ld.exports.TurtleWriter).quadsToString(e)}(await Rv(this.toJsonLD(e)))}getIdAttribute(){return this.getAttribute("url")}setExists(e){this._documentExists=e&&this._documentExists,super.setExists(e)}documentExists(){return this._documentExists}setDocumentExists(e){this._documentExists=e,Object.values(this._relations).filter(Eg).filter((e=>e.enabled&&e.useSameDocument)).map((e=>e.getLoadedModels())).flat().forEach((t=>t.setDocumentExists(e)))}isDirty(e,t){var n,r;if(e)return this.static("timestamps").includes(e)&&(null==(n=this.metadata)?void 0:n.isDirty(e))||super.isDirty(e);if(super.isDirty())return!0;if(t)return null==(r=this.metadata)?void 0:r.isDirty("deletedAt");const i=this.getDocumentModels().filter((e=>e.isDirty(void 0,!0))),s=this.getRemovedDocumentModels();return i.length+s.length>0}isSoftDeleted(){var e;return!!(null==(e=this.metadata)?void 0:e.deletedAt)}enableHistory(){this._history=!0}disableHistory(){this._history=!1}disableTombstone(){this._tombstone=!1}enableTombstone(){this._tombstone=!0}leavesTombstone(){var e;return null!=(e=this._tombstone)?e:this.static("tombstone")}cleanDirty(e){super.cleanDirty(),this._documentExists=!0,this._trackedDirtyAttributes={},this._removedResourceUrls=[],Object.values(this._relations).filter(Mg).filter((e=>e.enabled&&e.useSameDocument)).forEach((e=>{e.__modelsInSameDocument=e.__modelsInSameDocument||[],e.__modelsInSameDocument.push(...e.__newModels),e.__newModels=[]})),Object.values(this._relations).filter(Lg).filter((e=>e.enabled&&e.useSameDocument&&!!e.__newModel)).forEach((e=>{e.__modelInSameDocument=e.__newModel,delete e.__newModel})),e||this.getDocumentModels().forEach((e=>e.cleanDirty(!0)))}fixMalformedAttributes(){var e,t,n;super.fixMalformedAttributes(),this.relatedMetadata.enabled&&(this.static().hasAutomaticTimestamp(pf.CreatedAt)&&(this.metadata.createdAt=null!=(e=this.getAttribute("createdAt"))?e:new Date),this.static().hasAutomaticTimestamp(pf.UpdatedAt)&&(this.metadata.updatedAt=null!=(n=null!=(t=this.getAttribute("updatedAt"))?t:this.getAttribute("createdAt"))?n:new Date))}tracksHistory(){var e;return!this.static().historyDisabled.has(this)&&(null!=(e=this._history)?e:this.static("history"))}withoutTrackingHistory(e){if(!this.tracksHistory())return e();const t=()=>(this.static().historyDisabled.delete(this),!0);this.static().historyDisabled.set(this);const n=e();return function(e){return"then"in e}(n)?n.then((e=>t()&&e)):t()&&n}getHistoryHash(){const e=this.getRelatedModels().map((e=>{var t;return null!=(t=e.operations)?t:[]})).flat();return 0===e.length?null:function(e){return function(e){for(var t=0;t<e.length;t++)e[t]=xm(e[t]);return e.join("")}(function(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)hm(r,bm(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(hm(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,hm(r,i),r}(e))}(sm(e,"url").reduce(((e,t)=>e+t.url),""))}rebuildAttributesFromHistory(){var e,t;if(!this.hasRelation("operations")||!this.isRelationLoaded("operations"))throw new Eh("Can't rebuild attributes from history if 'operations'  relation isn't loaded");if(0===this.operations.length)return;const n=zg("PropertyOperation"),r=sm(this.operations,"date"),i=new Set(Object.keys(this._attributes)),s=Object.entries(this.static("fields")).filter((e=>{let[t,n]=e;return n.type===sf.Array})).map((e=>{let[t]=e;return t}));i.delete(this.static("primaryKey")),i.delete(pf.CreatedAt),i.delete(pf.UpdatedAt),s.forEach((e=>this.setAttribute(e,[]))),r.forEach((e=>{if(e instanceof n){const t=this.static().getRdfPropertyField(e.property);t&&i.delete(t)}e.apply(this)})),i.forEach((e=>this.unsetAttribute(e))),this.setAttribute("createdAt",null==(e=r[0])?void 0:e.date),this.setAttribute("updatedAt",null==(t=r[r.length-1])?void 0:t.date)}getDocumentUrl(){return this.url?Hm(this.url):null}requireDocumentUrl(){var e;return null!=(e=this.getDocumentUrl())?e:pm(Eh,"Failed getting required document url")}usesRdfAliases(){return this._usesRdfAliases}getSourceDocumentUrl(){return this._sourceDocumentUrl}setSourceDocumentUrl(e){this._sourceDocumentUrl=e}requireContainerUrl(){var e;return null!=(e=this.getContainerUrl())?e:pm(Eh,"Failed getting required container url")}getContainerUrl(){const e=this.getDocumentUrl();return e?Bm(e):null}getSourceContainerUrl(){const e=this.getSourceDocumentUrl();return e?Bm(e):null}setAttribute(e,t){const n=this.getPrimaryKey();super.setAttribute(e,t);const r=this.getPrimaryKey();n!==r&&this.onPrimaryKeyUpdated(r,n)}unsetAttribute(e){var t,n;return(null==(n=null==(t=this.static("fields"))?void 0:t[e])?void 0:n.type)===sf.Array?this.setAttributeValue(e,[]):super.unsetAttribute(e)}setCreatedAtAttribute(e){var t;(null!=(t=this.metadata)?t:this).setAttributeValue("createdAt",e)}setUpdatedAtAttribute(e){var t;(null!=(t=this.metadata)?t:this).setAttributeValue("updatedAt",e)}getCreatedAtAttribute(){var e,t;return null!=(t=null==(e=this.metadata)?void 0:e.getAttributeValue("createdAt"))?t:super.getAttributeValue("createdAt")}getUpdatedAtAttribute(){var e,t;return null!=(t=null==(e=this.metadata)?void 0:e.getAttributeValue("updatedAt"))?t:super.getAttributeValue("updatedAt")}getDeletedAtAttribute(){var e,t;return null!=(t=null==(e=this.metadata)?void 0:e.getAttributeValue("deletedAt"))?t:super.getAttributeValue("deletedAt")}getDocumentModels(e){const t=null!=e?e:new Set;if(t.has(this))return[...t];const n=this.getDocumentUrl(),r=e=>e.forEach((e=>t.add(e)));t.add(this);for(const i of Object.values(this._relations))i.enabled&&i.loaded&&Eg(i)&&i.useSameDocument&&(Lg(i)&&i.__newModel&&r(i.__newModel.getDocumentModels(t)),Mg(i)&&r(i.__newModels.map((e=>e.getDocumentModels(t))).flat()),r(i.getLoadedModels().filter((e=>e.getDocumentUrl()===n)).map((e=>e.getDocumentModels(t))).flat()));return[...t]}getRemovedDocumentModels(){const e=new Set;for(const t of Object.values(this._relations))t.enabled&&t.loaded&&Eg(t)&&Mg(t)&&t.__removedDocumentModels.forEach((t=>e.add(t)));return[...e]}getDirtyDocumentModels(){return this.getDocumentModels().filter((e=>e.isDirty()))}requireRelation(e){return super.requireRelation(e)}getRelationModel(e){return super.getRelationModel(e)}getRelationModels(e){return super.getRelationModels(e)}setRelationModel(e,t){return super.setRelationModel(e,t)}setRelationModels(e,t){return super.setRelationModels(e,t)}getRelatedModels(e){const t=null!=e?e:new Set;if(t.has(this))return[...t];t.add(this);for(const n of Object.values(this._relations))n.enabled&&[...Lg(n)&&n.__newModel?n.__newModel.getRelatedModels(t):[],...Mg(n)?n.__newModels.map((e=>e.getRelatedModels(t))).flat():[],...n.getLoadedModels().map((e=>e.getRelatedModels(t))).flat()].forEach((e=>t.add(e)));return[...t]}metadataRelationship(){const e=Af("Metadata");return this.hasOne(e,"resourceUrl").usingSameDocument(!0).onDelete("cascade")}operationsRelationship(){return new Wg(this).usingSameDocument(!0).onDelete("cascade")}tombstoneRelationship(){return new ty(this)}authorizationsRelationship(){return new Jg(this)}onMoved(e,t){t&&this.setSourceDocumentUrl(t),this.setAttribute("url",e),this.cleanDirty()}getDefaultCollection(){return`solid://${super.getDefaultCollection()}/`}async createFromEngineDocument(e,t,n){const r=await vg.resourceFromJsonLDGraph(t,n||e),i=await(async()=>{const r=await this.parseEngineDocumentAttributes(e,t,n);return r[this.static("primaryKey")]=new Gh(n||e),this.newInstance(r,!0)})();return await i.loadDocumentModels(e,t),ev(i,(t=>{t._sourceDocumentUrl=Vm(e,{fragment:!1}),t._usesRdfAliases=this.static("rdfsClassesAliases").some((e=>!e.some((e=>!r.isType(e)))))}))}async createManyFromEngineDocuments(e){const t=[this.static("rdfsClasses"),...this.static("rdfsClassesAliases")];return(await Promise.all(Object.entries(e).map((async e=>{let[n,r]=e;const i=await vg.fromJsonLD(r);return Promise.all(i.resources.filter((e=>!!e.url&&t.some((t=>!t.some((t=>!e.isType(t))))))).map((async e=>this.createFromEngineDocument(n,r,e.url))))})))).flat()}async loadDocumentModels(e,t){const n=this.requireEngine();await Promise.all(Object.values(this._relations).filter((e=>e.enabled&&Eg(e))).map((async r=>r.relatedClass.withEngine(n,(()=>r.__loadDocumentModels(e,t))))))}async beforeSave(e){var t;const n=this.isDirty(pf.UpdatedAt)||!!(null==(t=this.metadata)?void 0:t.isDirty(pf.UpdatedAt));await super.beforeSave(),!this.url&&this.static("mintsUrls")&&this.mintUrl(),e||(await Promise.all(this.getDirtyDocumentModels().map((async e=>e.exists()||e.beforeCreate()))),await this.beforeDocumentSave(),await Promise.all(this.getDirtyDocumentModels().map((async e=>e.exists()&&e.beforeUpdate()))),this.reconcileModelTimestamps(n))}async beforeDocumentSave(){let e=[];const t=new Set,n=()=>(e=this.getDirtyDocumentModels().filter((e=>!t.has(e))),e.length>0);for(;n();)this.static("mintsUrls")&&this.mintDocumentModelsKeys(e),await Promise.all(e.map((async e=>{e!==this&&e.isDirty()&&await e.beforeSave(!0),t.add(e)})))}async beforeCreate(){for(const e of Object.values(this._relations))e.enabled&&Cg(e)&&e.__beforeParentCreate()}async beforeUpdate(){this.tracksHistory()&&this.isDirty(void 0,!0)&&(await this.addDirtyHistoryOperations(),await Promise.all(this.operations.map((async e=>{e.exists()||(await e.beforeCreate(),await e.beforeSave(!0),this.mintDocumentModelsKeys([e]))}))))}async performSave(){const e=this.getDirtyDocumentModels().map((e=>[e,e.exists()]));try{await super.performSave()}catch(t){if(!(t instanceof Oh))throw t;this.url=this.newUniqueUrl(this.url),await super.performSave()}e.forEach((e=>{let[t,n]=e;t._wasRecentlyCreated=t._wasRecentlyCreated||!n}))}async performDelete(){this.tracksHistory()&&this.leavesTombstone()&&this.relatedTombstone.create(),await super.performDelete()}async afterSave(e){await super.afterSave(),e||await Promise.all(this.getDirtyDocumentModels().map((e=>e.afterSave(!0))))}onPrimaryKeyUpdated(e,t){var n,r;const i=this.getDocumentUrl()||void 0,s=this.documentExists(),a=Object.values(this._relations).filter((e=>e.enabled&&Og(e)));for(const o of a)o.getLoadedModels().forEach((n=>{const r=n.getAttribute(o.foreignKeyName);n.setAttribute(o.foreignKeyName,Array.isArray(r)?ev(r.slice(0),(n=>im(n,t,e))):e)}));null==(n=this.metadata)||n.mintUrl(i,s),null==(r=this.operations)||r.map((e=>e.mintUrl(i,s)))}async syncDirty(){const e=this.getDocumentUrl(),t=()=>this.requireEngine().create(e?Lm(e):this.static("collection"),this.toEngineDocument(),e||void 0),n=()=>this.requireEngine().update(Lm(e),e,{"@graph":{$push:this.serializeToJsonLD()}}),r=()=>this.requireEngine().update(Lm(e),e,this.getDirtyEngineDocumentUpdates());return await(()=>this._documentExists?this._exists?r():n():t())(),this.getSerializedPrimaryKey()}async deleteModelsFromEngine(e){await this.deleteModels(e)}async addDirtyHistoryOperations(){if(await this.loadRelationIfUnloaded("operations"),"url"in this._dirtyAttributes)throw new Eh(`It wasn't possible to generate the changes history for a model because its primary key was modified from '${this.url}' to '${this._originalAttributes.url}'.`);if(0===this.operations.length){const e=Hf(Vf(this._originalAttributes,[this.static("primaryKey")]));for(const[t,n]of Object.entries(e))null===n||Array.isArray(n)&&0===n.length||t in this._trackedDirtyAttributes&&this._trackedDirtyAttributes[t]===n||this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(t),date:this.metadata.createdAt,value:this.getOperationValue(t,n)})}for(const[e,t]of Object.entries(this._dirtyAttributes))e in this._trackedDirtyAttributes&&this._trackedDirtyAttributes[e]===t||(Array.isArray(t)?this.addArrayHistoryOperations(e,t,this._originalAttributes[e]):this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(e),date:this.metadata.updatedAt,value:this.getOperationValue(e,t)}));this.metadata.isDirty("deletedAt")&&this.metadata.deletedAt&&this.relatedOperations.attachDeleteOperation({date:this.metadata.deletedAt})}addHistoryOperations(e){const t=zg("PropertyOperation"),n=new Set(this.operations.map((e=>e.url))),r=[],i=new Set,s=Object.keys(this.static("fields")).reduce(((e,t)=>{const n=this.static().getFieldRdfProperty(t);return n&&(e[n]=t),e}),{});for(const a of e){if(n.has(a.url))continue;const e=a.clone();e.reset(),e.url=a.url,r.push(e),a instanceof t&&a.property in s&&i.add(a.property)}this.setRelationModels("operations",sm([...this.operations,...r],["date","url"])),this.removeDuplicatedHistoryOperations(),this.rebuildAttributesFromHistory();for(const a of i){const e=s[a];this._trackedDirtyAttributes[e]=this._dirtyAttributes[e]}}removeDuplicatedHistoryOperations(){const e=zg("PropertyOperation"),t=[],n=[],r=this.operations.filter((e=>{var t;return e.date.getTime()===(null==(t=this.metadata.createdAt)?void 0:t.getTime())}));for(const i of r)i instanceof e&&(t.includes(i.property)?(n.push(i.url),i.exists()&&this._removedResourceUrls.push(i.url)):t.push(i.property));this.setRelationModels("operations",this.operations.filter((e=>!n.includes(e.url))))}hasOne(e,t,n){return new Xg(this,e,t,n)}hasMany(e,t,n){return new Hg(this,e,t,n)}belongsToOne(e,t,n){return new Yg(this,e,t,n)}belongsToMany(e,t,n){return new Gg(this,e,t,n)}isContainedBy(e){return new ey(this,e)}toEngineDocument(){return{"@graph":[...this.getDirtyDocumentModels().map((e=>e.serializeToJsonLD(!1)))]}}getDirtyEngineDocumentUpdates(e){const t=[],n=this.requireEngine(),r=this.getDirtyDocumentModels(),i=this.getRemovedDocumentModels();if(!e){for(const e of r){if(e===this)continue;if(!e.exists()){t.push({$push:e.serializeToJsonLD(!1)});continue}const r=e.withEngine(n,(e=>e.getDirtyEngineDocumentUpdates(!0)))["@graph"];"$apply"in r?t.push(...r.$apply):t.push(r)}for(const e of i)e.getDocumentModels().forEach((e=>t.push({$updateItems:{$where:{"@id":e.url},$unset:!0}})))}if(super.isDirty()&&this.url){const e=super.getDirtyEngineDocumentUpdates(),n=!(this.requireFinalEngine()instanceof kg);t.push({$updateItems:{$where:{"@id":this.url},$update:this.convertEngineUpdatesToJsonLD(e,n)}})}return this._removedResourceUrls.forEach((e=>t.push({$updateItems:{$where:{"@id":e},$unset:!0}}))),1===t.length?{"@graph":t[0]}:{"@graph":{$apply:t}}}async parseEngineDocumentAttributes(e,t,n){return this.parseEngineDocumentAttributesFromJsonLD(t,n||e)}castAttribute(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.castAttribute((()=>{var n;const r=null==e;switch(null==(n=t.definition)?void 0:n.type){case sf.Array:{const t=r?[]:um(e),n=am(t);return t.length!==n.length&&console.warn("An array field had duplicate values, this is not supported in Solid models."),n}case sf.Any:if(!Array.isArray(e))return e;if(0===e.length)return;if(1===e.length)return e[0]}return r?void 0:e})(),t)}newUrl(e,t){var n,r,i,s;return`${e=null!=e?e:Um(this.static("collection"),null!=(r=null==(n=this._sourceSubject)?void 0:n.documentName)?r:Rm())}#${t=null!=(s=null!=t?t:null==(i=this._sourceSubject)?void 0:i.resourceHash)?s:this.static("defaultResourceHash")}`}newUniqueUrl(e){var t;const n=null==(t=qm(e=null!=e?e:this.newUrl()))?void 0:t.fragment;return`${Hm(e)}-${Sm()}${n?`#${n}`:""}`}guessCollection(){var e;if(this.url)return null!=(e=Bm(this.url))?e:void 0}mintDocumentModelsKeys(e){const t=this.requireDocumentUrl(),n=this._documentExists;for(const r of e)r.url||r.mintUrl(t,n,Rm());for(const r of e)for(const e of Object.values(r._relations))e.enabled&&e.getLoadedModels().forEach((t=>e.setForeignAttributes(t)))}getOperationValue(e,t){const n=this.static().getFieldDefinition(e,t);return lf(n)?nm(um(t,!0).map((t=>this.getOperationValue(`${e}.*`,t)))):t&&n.type===sf.Key?new Gh(t):t}addArrayHistoryOperations(e,t,n){const r=um(this.getOperationValue(e,n),!0),i=um(this.getOperationValue(e,t),!0),{added:s,removed:a}=tm(r,i,((e,t)=>e instanceof Gh&&t instanceof Gh?e.equals(t):e===t));s.length>0&&this.relatedOperations.attachAddOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:nm(s)}),a.length>0&&this.relatedOperations.attachRemoveOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:nm(a)})}reconcileModelTimestamps(e){var t,n,r;const[i,...s]=null!=(t=this.operations)?t:[];if(i)return void this.setAttribute(pf.UpdatedAt,s.reduce(((e,t)=>e>t.date?e:t.date),i.date));if(e)return;const a=null!=(r=this._originalAttributes[pf.UpdatedAt])?r:null==(n=this.metadata)?void 0:n._originalAttributes[pf.UpdatedAt];if(!a)return;const o=Object.keys(this._dirtyAttributes);o[1]||o[0]&&o[0]!==pf.UpdatedAt||this.setAttribute(pf.UpdatedAt,a)}}function iy(e,t){return Sf(t?e:ry,null!=t?t:e)}ry.primaryKey="url",ry.classFields=["_history","_publicPermissions","_tombstone"],ry.rdfContexts={},ry.rdfsClasses=[],ry.rdfsClassesAliases=[],ry.reservedRelations=["metadata","operations","tombstone","authorizations"],ry.defaultResourceHash="it",ry.mintsUrls=!0,ry.history=!1,ry.tombstone=!0,ry.historyDisabled=new WeakMap;const sy={resourceUrl:{type:sf.Key,required:!0,rdfProperty:"resource"},date:{type:sf.Date,required:!0}};var ay=iy({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Operation",timestamps:!1,fields:sy});class oy extends ay{apply(e){}newUrl(e,t){if(!this.resourceUrl)return super.newUrl(e,t);const n=null!=t?t:Rm();return`${this.resourceUrl}-operation-${n}`}}const ly={...sy,property:{type:sf.Key,required:!0}};var uy=iy(oy,{rdfsClass:"PropertyOperation",fields:ly});class cy extends uy{apply(e){const t=e.static().getRdfPropertyField(this.property);t&&this.applyPropertyUpdate(e,t)}applyPropertyUpdate(e,t){}}var dy=iy(cy,{rdfsClass:"AddPropertyOperation",fields:{...ly,value:{type:sf.Any,required:!0}}});class py extends dy{applyPropertyUpdate(e,t){const n=e.getAttributeValue(t);if(!Array.isArray(n))throw new Eh("Can't apply Add operation to non-array field (should be Set instead)");e.setAttributeValue(t,[...n,...um(this.value)])}}var hy=iy(oy,{rdfsClass:"DeleteOperation"});class fy extends hy{apply(e){e.metadata.setAttribute("deletedAt",this.date)}}var my=iy({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Metadata",timestamps:!1,fields:{resourceUrl:{type:sf.Key,required:!0,rdfProperty:"resource"},createdAt:sf.Date,updatedAt:sf.Date,deletedAt:sf.Date}});class vy extends my{getCreatedAtAttribute(){return this.getAttributeValue("createdAt")}getUpdatedAtAttribute(){return this.getAttributeValue("updatedAt")}newUrl(e,t){return this.resourceUrl?`${this.resourceUrl}-metadata`:super.newUrl(e,t)}}var gy=iy(cy,{rdfsClass:"RemovePropertyOperation",fields:{...ly,value:{type:sf.Any,required:!0}}});class yy extends gy{applyPropertyUpdate(e,t){const n=e.getAttributeValue(t);if(!Array.isArray(n))throw new Eh("Can't apply Remove operation to non-array field (use Unset instead)");e.setAttributeValue(t,om(n,this.castModelAttribute(e,t,um(this.value))))}castModelAttribute(e,t,n){var r;const i=e.constructor;return(null!=(r=yy.attributeCasters.get(i))?r:this.createAttributeCaster(i))(t,n)}createAttributeCaster(e){const t=class extends e{castAttribute(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.castAttribute(e,t)}}.pureInstance();return ev(((e,n)=>t.castAttribute(n,{definition:t.static().getFieldDefinition(e)})),(t=>yy.attributeCasters.set(e,t)))}}yy.attributeCasters=new WeakMap;var by=iy(cy,{rdfsClass:"SetPropertyOperation",fields:{...ly,value:{type:sf.Any,required:!0}}});class wy extends by{applyPropertyUpdate(e,t){e.setAttributeValue(t,this.value)}}class xy extends vy{}xy.rdfsClass="Tombstone";var _y=iy(cy,{rdfsClass:"UnSetPropertyOperation"});class ky extends _y{}const Sy={AddPropertyOperation:py,DeleteOperation:fy,Metadata:vy,Operation:oy,PropertyOperation:cy,RemovePropertyOperation:yy,SetPropertyOperation:wy,Tombstone:xy,UnsetPropertyOperation:ky};var Ry=iy({rdfContexts:{acl:"http://www.w3.org/ns/auth/acl#"},rdfsClass:"Authorization",timestamps:!1,fields:{agents:{rdfProperty:"agent",type:sf.Array,items:sf.Key},agentClasses:{rdfProperty:"agentClass",type:sf.Array,items:sf.Key},agentGroups:{rdfProperty:"agentGroup",type:sf.Array,items:sf.Key},accessTo:{type:sf.Array,items:sf.Key},accessToClasses:{rdfProperty:"accessToClass",type:sf.Array,items:sf.Key},default:{type:sf.Array,items:sf.Key},modes:{rdfProperty:"mode",type:sf.Array,items:sf.Key}}});const Ay={[dv.Read]:"http://www.w3.org/ns/auth/acl#Read",[dv.Write]:"http://www.w3.org/ns/auth/acl#Write",[dv.Append]:"http://www.w3.org/ns/auth/acl#Append",[dv.Control]:"http://www.w3.org/ns/auth/acl#Control"};class Iy extends Ry{static get fetch(){return this.requireFetch()}static modeFromSolidDocumentPermission(e){return Ay[e]}}var Cy=iy({rdfContexts:{solid:"http://www.w3.org/ns/solid/terms#"},rdfsClass:"TypeRegistration",timestamps:!1,fields:{forClass:{type:sf.Key,required:!0},instance:sf.Key,instanceContainer:sf.Key}});class Ey extends Cy{}var Oy=iy({rdfsClass:"ldp:Resource",timestamps:!1,fields:{updatedAt:{type:sf.Date,rdfProperty:"purl:modified"}}});class Dy extends Oy{static async fromTypeIndex(e,t){const n=this.requireFinalEngine(),r=n instanceof kg?n.getFetch():void 0;return(await function(e,t,n){return Kv.apply(this,arguments)}(e,t.rdfsClasses,r)).map((e=>this.newInstance({url:e},!0)))}async register(e,t){const n=new Ey({forClass:t.rdfsClasses[0],instance:this.url});n.mintUrl(e,!0,Rm()),await n.withEngine(this.requireEngine(),(()=>n.save(Lm(e))))}}const Ty=["http://www.w3.org/ns/iana/media-types/text/turtle#Resource","http://www.w3.org/ns/iana/media-types/application/rdf+xml#Resource","http://www.w3.org/ns/iana/media-types/application/ld+json#Resource","http://www.w3.org/ns/ldp#Container","http://www.w3.org/ns/ldp#BasicContainer"];class Py extends Gg{constructor(e){super(e,Dy,"resourceUrls")}get container(){return this.parent}async load(){if(this.isEmpty())return this.related=[];if(this.parent.requireFinalEngine()instanceof kg)return super.load();const e=this.parent.requireEngine(),t=await e.readMany(this.container.requireDocumentUrl());return this.related=Object.entries(t).map((e=>{let[t,n]=e;return new Dy({url:t,updatedAt:this.getLatestUpdateDate(n["@graph"])})})),this.related}async __loadDocumentModels(e,t){if(!(Dy.requireFinalEngine()instanceof kg))return super.__loadDocumentModels(e,t);const n=this.parent.resourceUrls,r=vg.reduceJsonLDGraph(t,this.parent.url),i=t["@graph"].filter((e=>{var t;if(-1===n.indexOf(e["@id"]))return!1;const r=um(null!=(t=e["@type"])?t:[]);return Ty.some((e=>r.includes(e)))})).map((e=>e["@id"])),s=await Promise.all(i.map((t=>Dy.createFromEngineDocument(e,r,t))));this.protectedSolidBelongsTo.loadDocumentModels(s,[])}getLatestUpdateDate(e){const t=e.reduce(((e,t)=>{var n,r,i,s;const{"@value":a}=null!=(s=null!=(i=null!=(r=null!=(n=t["purl:modified"])?n:t["http://purl.org/dc/terms/modified"])?r:t["purl:created"])?i:t["http://purl.org/dc/terms/created"])?s:{"@value":0},o=new Date(a).getTime();return Math.max(e,o)}),0);return new Date(t)}}class jy extends Xh{constructor(e,t){super(e,t,"resourceUrls","url")}setForeignAttributes(e){e.url&&(this.parent.resourceUrls=am([...this.parent.resourceUrls,e.url]))}async load(){return this.related=this.isEmpty()?[]:await this.relatedClass.from(this.parent.url).all({$in:this.parent.resourceUrls}),this.related}async create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.relatedClass.newInstance(e);return await this.save(t),t}async save(e){var t;if(!this.parent.exists())throw new Eh("Cannot save a model because the container doesn't exist");return await e.save(this.parent.url),this.parent.requireFinalEngine()instanceof kg?this.parent.setOriginalAttribute("resourceUrls",[...this.parent.resourceUrls,e.getDocumentUrl()]):await this.parent.update({resourceUrls:[...this.parent.resourceUrls,e.getDocumentUrl()]}),this.loaded&&(null==(t=this.related)||t.push(e)),e}}var My=iy({rdfsClass:"ldp:Container",timestamps:!1,fields:{name:{type:sf.String,rdfProperty:"rdfs:label"},description:{type:sf.String,rdfProperty:"rdfs:comment"},resourceUrls:{type:sf.Array,rdfProperty:"ldp:contains",items:sf.Key},createdAt:{type:sf.Date,rdfProperty:"purl:created"},updatedAt:{type:sf.Date,rdfProperty:"purl:modified"}}});class Ly extends My{static async fromTypeIndex(e,t){const n=this.requireFinalEngine(),r=n instanceof kg?n.getFetch():void 0;return(await function(e,t,n){return Jv.apply(this,arguments)}(e,t.rdfsClasses,r)).map((e=>this.newInstance({url:e},!0)))}documentsRelationship(){return new Py(this)}async register(e,t){const n=new Ey({forClass:t.rdfsClasses[0],instanceContainer:this.url});n.mintUrl(e,!0,Rm()),await n.withEngine(this.requireEngine(),(()=>n.save(Lm(e))))}contains(e){return new jy(this,e)}newUrl(){const e=this.hasAttribute("name")&&Mm(this.getAttribute("name"))||Rm();return Nm(this.static("collection"),e)}newUniqueUrl(e){const t=zm(e=null!=e?e:this.newUrl());return Nm(Lm(e),`${t}-${Sm()}`)}}var $y=iy({rdfContexts:{solid:"http://www.w3.org/ns/solid/terms#"},rdfsClass:"TypeIndex",timestamps:!1});class Uy extends $y{static async createPublic(e){const t=await function(e,t){return Hv.apply(this,arguments)}(e,Uy.requireFetch()),n=await this.findOrFail(t);return await n.updatePublicPermissions([dv.Read]),n}static async createPrivate(e){const t=await function(e,t){return Wv.apply(this,arguments)}(e,Uy.requireFetch());return await this.findOrFail(t)}}jy.inverseRelationClasses=[ey],ey.inverseRelationClasses=[jy];class AuthenticationCancelledError extends n{}const Ny=r(class extends zu{constructor(){super(...arguments),t(this,"cache")}async get(e){const t=await this.open(),n=await t.match(e);return null!=n?n:null}async store(e,t){const n=await this.open();await n.put(e,t)}async replace(e,t){const n=await this.open();0!==(await n.keys(e)).length&&await n.put(e,t)}async open(){if(!this.cache){const e=new s;caches.open("app").then((t=>e.resolve(t))),this.cache=e}return this.cache}});function Fy(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Fy),r}var By,zy=((By=zy||{})[By.None=0]="None",By[By.RenderStrategy=1]="RenderStrategy",By[By.Static=2]="Static",By),qy=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(qy||{});function Vy({visible:e=!0,features:t=0,ourProps:n,theirProps:r,...i}){var s;let a=function(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map((e=>[e,void 0]))));for(let r in n)Object.assign(t,{[r](e,...t){let i=n[r];for(let n of i){if(e instanceof Event&&e.defaultPrevented)return;n(e,...t)}}});return t}(r,n),o=Object.assign(i,{props:a});if(e||2&t&&a.static)return Hy(o);if(1&t){return Fy(null==(s=a.unmount)||s?0:1,{0:()=>null,1:()=>Hy({...i,props:{...a,hidden:!0,style:{display:"none"}}})})}return Hy(o)}function Hy({props:e,attrs:t,slots:n,slot:r,name:i}){var s;let{as:a,...o}=Ky(e,["unmount","static"]),l=null==(s=n.default)?void 0:s.call(n,r),u={};if(r){let e=!1,t=[];for(let[n,i]of Object.entries(r))"boolean"==typeof i&&(e=!0),!0===i&&t.push(n);e&&(u["data-headlessui-state"]=t.join(" "))}if("template"===a){if(l=Wy(null!=l?l:[]),Object.keys(o).length>0||Object.keys(t).length>0){let[e,...n]=null!=l?l:[];if(!function(e){return null!=e&&("string"==typeof e.type||"object"==typeof e.type||"function"==typeof e.type)}(e)||n.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${i} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(o).concat(Object.keys(t)).sort(((e,t)=>e.localeCompare(t))).map((e=>`  - ${e}`)).join(`\n`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join(`\n`)].join(`\n`));return Vs(e,Object.assign({},o,u))}return Array.isArray(l)&&1===l.length?l[0]:l}return ma(a,Object.assign({},o,u),l)}function Wy(e){return e.flatMap((e=>e.type===Ss?Wy(e.children):[e]))}function Jy(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function Ky(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let Gy=0;function Zy(){return++Gy}var Yy,Qy=((Yy=Qy||{}).Space=" ",Yy.Enter="Enter",Yy.Escape="Escape",Yy.Backspace="Backspace",Yy.Delete="Delete",Yy.ArrowLeft="ArrowLeft",Yy.ArrowUp="ArrowUp",Yy.ArrowRight="ArrowRight",Yy.ArrowDown="ArrowDown",Yy.Home="Home",Yy.End="End",Yy.PageUp="PageUp",Yy.PageDown="PageDown",Yy.Tab="Tab",Yy);var Xy=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Xy||{});function eb(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=null!=r?r:-1,s=(()=>{switch(e.focus){case 0:return n.findIndex((e=>!t.resolveDisabled(e)));case 1:{let e=n.slice().reverse().findIndex(((e,n,r)=>!(-1!==i&&r.length-n-1>=i)&&!t.resolveDisabled(e)));return-1===e?e:n.length-1-e}case 2:return n.findIndex(((e,n)=>!(n<=i)&&!t.resolveDisabled(e)));case 3:{let e=n.slice().reverse().findIndex((e=>!t.resolveDisabled(e)));return-1===e?e:n.length-1-e}case 4:return n.findIndex((n=>t.resolveId(n)===e.id));case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}})();return-1===s?r:s}function tb(e){var t;return null==e||null==e.value?null:null!=(t=e.value.$el)?t:e.value}let nb=Symbol("Context");var rb=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(rb||{});function ib(){return Ur(nb,null)}function sb(e){$r(nb,e)}function ab(e,t){if(e)return e;let n=null!=t?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function ob(e,t){let n=Qn(ab(e.value.type,e.value.as));return di((()=>{n.value=ab(e.value.type,e.value.as)})),Nr((()=>{var e;n.value||!tb(t)||tb(t)instanceof HTMLButtonElement&&(null==(e=tb(t))||!e.hasAttribute("type"))&&(n.value="button")})),n}const lb="undefined"==typeof window||"undefined"==typeof document;function ub(e){if(lb)return null;if(e instanceof Node)return e.ownerDocument;if(null!=e&&e.hasOwnProperty("value")){let t=tb(e);if(t)return t.ownerDocument}return document}function cb({container:e,accept:t,walk:n,enabled:r}){Nr((()=>{let i=e.value;if(!i||void 0!==r&&!r.value)return;let s=ub(e);if(!s)return;let a=Object.assign((e=>t(e)),{acceptNode:t}),o=s.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,a,!1);for(;o.nextNode();)n(o.currentNode)}))}let db=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var pb,hb=((pb=hb||{})[pb.First=1]="First",pb[pb.Previous=2]="Previous",pb[pb.Next=4]="Next",pb[pb.Last=8]="Last",pb[pb.WrapAround=16]="WrapAround",pb[pb.NoScroll=32]="NoScroll",pb),fb=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(fb||{}),mb=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(mb||{});function vb(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(db))}var gb=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(gb||{});function yb(e,t=0){var n;return e!==(null==(n=ub(e))?void 0:n.body)&&Fy(t,{0:()=>e.matches(db),1(){let t=e;for(;null!==t;){if(t.matches(db))return!0;t=t.parentElement}return!1}})}function bb(e){let t=ub(e);yr((()=>{t&&!yb(t.activeElement,0)&&wb(e)}))}function wb(e){null==e||e.focus({preventScroll:!0})}let xb=["textarea","input"].join(",");function _b(e,t=(e=>e)){return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let s=r.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function kb(e,t,n=!0,r=null){var i;let s=null!=(i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:null==e?void 0:e.ownerDocument)?i:document,a=Array.isArray(e)?n?_b(e):e:vb(e);r=null!=r?r:s.activeElement;let o,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,a.indexOf(r))-1;if(4&t)return Math.max(0,a.indexOf(r))+1;if(8&t)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=32&t?{preventScroll:!0}:{},d=0,p=a.length;do{if(d>=p||d+p<=0)return 0;let e=u+d;if(16&t)e=(e+p)%p;else{if(e<0)return 3;if(e>=p)return 1}o=a[e],null==o||o.focus(c),d+=l}while(o!==s.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,xb))&&n}(o)&&o.select(),o.hasAttribute("tabindex")||o.setAttribute("tabindex","0"),2}function Sb(e,t,n){lb||Nr((r=>{document.addEventListener(e,t,n),r((()=>document.removeEventListener(e,t,n)))}))}function Rb(e,t,n=pa((()=>!0))){function r(r,i){if(!n.value||r.defaultPrevented)return;let s=i(r);if(null===s||!s.ownerDocument.documentElement.contains(s))return;let a=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e);for(let e of a){if(null===e)continue;let t=e instanceof HTMLElement?e:tb(e);if(null!=t&&t.contains(s))return}return!yb(s,gb.Loose)&&-1!==s.tabIndex&&r.preventDefault(),t(r,s)}let i=Qn(null);Sb("mousedown",(e=>{var t,r;n.value&&(i.value=(null==(r=null==(t=e.composedPath)?void 0:t.call(e))?void 0:r[0])||e.target)}),!0),Sb("click",(e=>{!i.value||(r(e,(()=>i.value)),i.value=null)}),!0),Sb("blur",(e=>r(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}var Ab=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ab||{});let Ib=ti({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup:(e,{slots:t,attrs:n})=>()=>{let{features:r,...i}=e;return Vy({ourProps:{"aria-hidden":2==(2&r)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4==(4&r)&&2!=(2&r)&&{display:"none"}}},theirProps:i,slot:{},attrs:n,slots:t,name:"Hidden"})}});function Cb(e={},t=null,n=[]){for(let[r,i]of Object.entries(e))Ob(n,Eb(t,r),i);return n}function Eb(e,t){return e?e+"["+t+"]":t}function Ob(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())Ob(e,Eb(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,`${n}`]):null==n?e.push([t,""]):Cb(n,t,e)}function Db(e){var t;let n=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(n)for(let r of n.elements)if("INPUT"===r.tagName&&"submit"===r.type||"BUTTON"===r.tagName&&"submit"===r.type||"INPUT"===r.nodeName&&"image"===r.type)return void r.click()}function Tb(e,t,n){let r=Qn(null==n?void 0:n.value),i=pa((()=>void 0!==e.value));return[pa((()=>i.value?e.value:r.value)),function(e){return i.value||(r.value=e),null==t?void 0:t(e)}]}var Pb=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Pb||{});function jb(){let e=Qn(0);return function(e,t,n){lb||Nr((r=>{window.addEventListener(e,t,n),r((()=>window.removeEventListener(e,t,n)))}))}("keydown",(t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)})),e}function Mb(e,t,n,r){lb||Nr((i=>{(e=null!=e?e:window).addEventListener(t,n,r),i((()=>e.removeEventListener(t,n,r)))}))}var Lb=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Lb||{});let $b=Object.assign(ti({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:Object,default:Qn(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:r}){let i=Qn(null);r({el:i,$el:i});let s=pa((()=>ub(i)));!function({ownerDocument:e},t){let n=Qn(null);function r(){var t;n.value||(n.value=null==(t=e.value)?void 0:t.activeElement)}function i(){!n.value||(wb(n.value),n.value=null)}di((()=>{Br(t,((e,t)=>{e!==t&&(e?r():i())}),{immediate:!0})})),mi(i)}({ownerDocument:s},pa((()=>Boolean(16&e.features))));let a=function({ownerDocument:e,container:t,initialFocus:n},r){let i=Qn(null),s=Qn(!1);return di((()=>s.value=!0)),mi((()=>s.value=!1)),di((()=>{Br([t,n,r],((a,o)=>{if(a.every(((e,t)=>(null==o?void 0:o[t])===e))||!r.value)return;let l=tb(t);!l||function(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}((()=>{var t,r;if(!s.value)return;let a=tb(n),o=null==(t=e.value)?void 0:t.activeElement;if(a){if(a===o)return void(i.value=o)}else if(l.contains(o))return void(i.value=o);a?wb(a):kb(l,hb.First|hb.NoScroll)===fb.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.value=null==(r=e.value)?void 0:r.activeElement}))}),{immediate:!0,flush:"post"})})),i}({ownerDocument:s,container:i,initialFocus:pa((()=>e.initialFocus))},pa((()=>Boolean(2&e.features))));!function({ownerDocument:e,container:t,containers:n,previousActiveElement:r},i){var s;Mb(null==(s=e.value)?void 0:s.defaultView,"focus",(e=>{if(!i.value)return;let s=new Set(null==n?void 0:n.value);s.add(t);let a=r.value;if(!a)return;let o=e.target;o&&o instanceof HTMLElement?function(e,t){var n;for(let r of e)if(null!=(n=r.value)&&n.contains(t))return!0;return!1}(s,o)?(r.value=o,wb(o)):(e.preventDefault(),e.stopPropagation(),wb(a)):wb(r.value)}),!0)}({ownerDocument:s,container:i,containers:e.containers,previousActiveElement:a},pa((()=>Boolean(8&e.features))));let o=jb();function l(){let e=tb(i);!e||Fy(o.value,{[Pb.Forwards]:()=>kb(e,hb.First),[Pb.Backwards]:()=>kb(e,hb.Last)})}return()=>{let r={ref:i},{features:s,initialFocus:a,containers:o,...u}=e;return ma(Ss,[Boolean(4&s)&&ma(Ib,{as:"button",type:"button",onFocus:l,features:Ab.Focusable}),Vy({ourProps:r,theirProps:{...t,...u},slot:{},attrs:t,slots:n,name:"FocusTrap"}),Boolean(4&s)&&ma(Ib,{as:"button",type:"button",onFocus:l,features:Ab.Focusable})])}}}),{features:Lb});let Ub="body > *",Nb=new Set,Fb=new Map;function Bb(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function zb(e){let t=Fb.get(e);!t||(null===t["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}let qb=Symbol("ForcePortalRootContext");let Vb=ti({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(e,{slots:t,attrs:n})=>($r(qb,e.force),()=>{let{force:r,...i}=e;return Vy({theirProps:i,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})})});let Hb=ti({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let r=Qn(null),i=pa((()=>ub(r))),s=Ur(qb,!1),a=Ur(Wb,null),o=Qn(!0===s||null==a?function(e){let t=ub(e);if(!t){if(null===e)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}(r.value):a.resolveTarget());return Nr((()=>{s||null!=a&&(o.value=a.resolveTarget())})),mi((()=>{var e,t;let n=null==(e=i.value)?void 0:e.getElementById("headlessui-portal-root");!n||o.value===n&&o.value.children.length<=0&&(null==(t=o.value.parentElement)||t.removeChild(o.value))})),()=>{if(null===o.value)return null;let i={ref:r,"data-headlessui-portal":""};return ma(_s,{to:o.value},Vy({ourProps:i,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}}),Wb=Symbol("PortalGroupContext"),Jb=ti({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let r=Un({resolveTarget:()=>e.target});return $r(Wb,r),()=>{let{target:r,...i}=e;return Vy({theirProps:i,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}}),Kb=Symbol("StackContext");var Gb=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Gb||{});function Zb({type:e,enabled:t,element:n,onUpdate:r}){let i=Ur(Kb,(()=>{}));function s(...e){null==r||r(...e),i(...e)}di((()=>{Br(t,((t,r)=>{t?s(0,e,n):!0===r&&s(1,e,n)}),{immediate:!0,flush:"sync"})})),mi((()=>{t.value&&s(1,e,n)})),$r(Kb,s)}let Yb=Symbol("DescriptionContext");function Qb({slot:e=Qn({}),name:t="Description",props:n={}}={}){let r=Qn([]);return $r(Yb,{register:function(e){return r.value.push(e),()=>{let t=r.value.indexOf(e);-1!==t&&r.value.splice(t,1)}},slot:e,name:t,props:n}),pa((()=>r.value.length>0?r.value.join(" "):void 0))}let Xb=ti({name:"Description",props:{as:{type:[Object,String],default:"p"}},setup(e,{attrs:t,slots:n}){let r=function(){let e=Ur(Yb,null);if(null===e)throw new Error("Missing parent");return e}(),i=`headlessui-description-${Zy()}`;return di((()=>mi(r.register(i)))),()=>{let{name:s="Description",slot:a=Qn({}),props:o={}}=r,l=e;return Vy({ourProps:{...Object.entries(o).reduce(((e,[t,n])=>Object.assign(e,{[t]:tr(n)})),{}),id:i},theirProps:l,slot:a.value,attrs:t,slots:n,name:s})}}});var ew,tw=((ew=tw||{})[ew.Open=0]="Open",ew[ew.Closed=1]="Closed",ew);let nw=Symbol("DialogContext");function rw(e){let t=Ur(nw,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,rw),t}return t}let iw="DC8F892D-2EBD-447C-A4C8-A03058436FF4",sw=ti({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:iw},initialFocus:{type:Object,default:null}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:i}){var s;let a=Qn(!1);di((()=>{a.value=!0}));let o=Qn(0),l=ib(),u=pa((()=>e.open===iw&&null!==l?Fy(l.value,{[rb.Open]:!0,[rb.Closed]:!1}):e.open)),c=Qn(new Set),d=Qn(null),p=Qn(null),h=pa((()=>ub(d)));if(i({el:d,$el:d}),e.open===iw&&null===l)throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if("boolean"!=typeof u.value)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${u.value===iw?void 0:e.open}`);let f=pa((()=>a.value&&u.value?0:1)),m=pa((()=>0===f.value)),v=pa((()=>o.value>1)),g=null!==Ur(nw,null),y=pa((()=>v.value?"parent":"leaf"));(function(e,t=Qn(!0)){Nr((n=>{if(!t.value||!e.value)return;let r=e.value,i=ub(r);if(i){Nb.add(r);for(let e of Fb.keys())e.contains(r)&&(zb(e),Fb.delete(e));i.querySelectorAll(Ub).forEach((e=>{if(e instanceof HTMLElement){for(let t of Nb)if(e.contains(t))return;1===Nb.size&&(Fb.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),Bb(e))}})),n((()=>{if(Nb.delete(r),Nb.size>0)i.querySelectorAll(Ub).forEach((e=>{if(e instanceof HTMLElement&&!Fb.has(e)){for(let t of Nb)if(e.contains(t))return;Fb.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),Bb(e)}}));else for(let e of Fb.keys())zb(e),Fb.delete(e)}))}}))})(d,pa((()=>!!v.value&&m.value))),Zb({type:"Dialog",enabled:pa((()=>0===f.value)),element:d,onUpdate:(e,t,n)=>{if("Dialog"===t)return Fy(e,{[Gb.Add](){c.value.add(n),o.value+=1},[Gb.Remove](){c.value.delete(n),o.value-=1}})}});let b=Qb({name:"DialogDescription",slot:pa((()=>({open:u.value})))}),w=`headlessui-dialog-${Zy()}`,x=Qn(null),_={titleId:x,panelRef:Qn(null),dialogState:f,setTitleId(e){x.value!==e&&(x.value=e)},close(){t("close",!1)}};return $r(nw,_),Rb((()=>{var e,t,n;return[...Array.from(null!=(t=null==(e=h.value)?void 0:e.querySelectorAll("body > *, [data-headlessui-portal]"))?t:[]).filter((e=>!(!(e instanceof HTMLElement)||e.contains(tb(p))||_.panelRef.value&&e.contains(_.panelRef.value)))),null!=(n=_.panelRef.value)?n:d.value]}),((e,t)=>{_.close(),yr((()=>null==t?void 0:t.focus()))}),pa((()=>0===f.value&&!v.value))),Mb(null==(s=h.value)?void 0:s.defaultView,"keydown",(e=>{e.defaultPrevented||e.key===Qy.Escape&&0===f.value&&(v.value||(e.preventDefault(),e.stopPropagation(),_.close()))})),Nr((e=>{var t;if(0!==f.value||g)return;let n=h.value;if(!n)return;let r=function(){let e=[],t=[],n={enqueue(e){t.push(e)},addEventListener:(e,t,r,i)=>(e.addEventListener(t,r,i),n.add((()=>e.removeEventListener(t,r,i)))),requestAnimationFrame(...e){let t=requestAnimationFrame(...e);n.add((()=>cancelAnimationFrame(t)))},nextFrame(...e){n.requestAnimationFrame((()=>{n.requestAnimationFrame(...e)}))},setTimeout(...e){let t=setTimeout(...e);n.add((()=>clearTimeout(t)))},add(t){e.push(t)},dispose(){for(let t of e.splice(0))t()},async workQueue(){for(let e of t.splice(0))await e()}};return n}();function i(e,t,n){let i=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),r.add((()=>{Object.assign(e.style,{[t]:i})}))}let s=null==n?void 0:n.documentElement,a=(null!=(t=n.defaultView)?t:window).innerWidth-s.clientWidth;if(i(s,"overflow","hidden"),a>0){i(s,"paddingRight",`${a-(s.clientWidth-s.offsetWidth)}px`)}if(/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0){let e=window.pageYOffset;i(s,"position","fixed"),i(s,"marginTop",`-${e}px`),i(s,"width","100%"),r.add((()=>window.scrollTo(0,e)))}e(r.dispose)})),Nr((e=>{if(0!==f.value)return;let t=tb(d);if(!t)return;let n=new IntersectionObserver((e=>{for(let t of e)0===t.boundingClientRect.x&&0===t.boundingClientRect.y&&0===t.boundingClientRect.width&&0===t.boundingClientRect.height&&_.close()}));n.observe(t),e((()=>n.disconnect()))})),()=>{let t={...n,ref:d,id:w,role:"dialog","aria-modal":0===f.value||void 0,"aria-labelledby":x.value,"aria-describedby":b.value},{open:i,initialFocus:s,...a}=e,o={open:0===f.value};return ma(Vb,{force:!0},(()=>[ma(Hb,(()=>ma(Jb,{target:d.value},(()=>ma(Vb,{force:!1},(()=>ma($b,{initialFocus:s,containers:c,features:m.value?Fy(y.value,{parent:$b.features.RestoreFocus,leaf:$b.features.All&~$b.features.FocusLock}):$b.features.None},(()=>Vy({ourProps:t,theirProps:a,slot:o,attrs:n,slots:r,visible:0===f.value,features:zy.RenderStrategy|zy.Static,name:"Dialog"}))))))))),ma(Ib,{features:Ab.Hidden,ref:p})]))}}});ti({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n}){let r=rw("DialogOverlay"),i=`headlessui-dialog-overlay-${Zy()}`;function s(e){e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),r.close())}return()=>Vy({ourProps:{id:i,"aria-hidden":!0,onClick:s},theirProps:e,slot:{open:0===r.dialogState.value},attrs:t,slots:n,name:"DialogOverlay"})}}),ti({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:r}){let i=rw("DialogBackdrop"),s=`headlessui-dialog-backdrop-${Zy()}`,a=Qn(null);return r({el:a,$el:a}),di((()=>{if(null===i.panelRef.value)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")})),()=>{let r=e,o={id:s,ref:a,"aria-hidden":!0};return ma(Vb,{force:!0},(()=>ma(Hb,(()=>Vy({ourProps:o,theirProps:{...t,...r},slot:{open:0===i.dialogState.value},attrs:t,slots:n,name:"DialogBackdrop"})))))}}});let aw=ti({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n,expose:r}){let i=rw("DialogPanel"),s=`headlessui-dialog-panel-${Zy()}`;function a(e){e.stopPropagation()}return r({el:i.panelRef,$el:i.panelRef}),()=>Vy({ourProps:{id:s,ref:i.panelRef,onClick:a},theirProps:e,slot:{open:0===i.dialogState.value},attrs:t,slots:n,name:"DialogPanel"})}}),ow=ti({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"}},setup(e,{attrs:t,slots:n}){let r=rw("DialogTitle"),i=`headlessui-dialog-title-${Zy()}`;return di((()=>{r.setTitleId(i),mi((()=>r.setTitleId(null)))})),()=>Vy({ourProps:{id:i},theirProps:e,slot:{open:0===r.dialogState.value},attrs:t,slots:n,name:"DialogTitle"})}});function lw(e,t){return e===t}var uw,cw=((uw=cw||{})[uw.Open=0]="Open",uw[uw.Closed=1]="Closed",uw),dw=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(dw||{}),pw=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(pw||{});let hw=Symbol("ListboxContext");function fw(e){let t=Ur(hw,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,fw),t}return t}let mw=ti({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>lw},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:r}){let i=Qn(1),s=Qn(null),a=Qn(null),o=Qn(null),l=Qn([]),u=Qn(""),c=Qn(null),d=Qn(1);function p(e=(e=>e)){let t=null!==c.value?l.value[c.value]:null,n=_b(e(l.value.slice()),(e=>tb(e.dataRef.domRef))),r=t?n.indexOf(t):null;return-1===r&&(r=null),{options:n,activeOptionIndex:r}}let h=pa((()=>e.multiple?1:0)),[f,m]=Tb(pa((()=>e.modelValue)),(e=>r("update:modelValue",e)),pa((()=>e.defaultValue))),v={listboxState:i,value:f,mode:h,compare(t,n){if("string"==typeof e.by){let r=e.by;return(null==t?void 0:t[r])===(null==n?void 0:n[r])}return e.by(t,n)},orientation:pa((()=>e.horizontal?"horizontal":"vertical")),labelRef:s,buttonRef:a,optionsRef:o,disabled:pa((()=>e.disabled)),options:l,searchQuery:u,activeOptionIndex:c,activationTrigger:d,closeListbox(){e.disabled||1!==i.value&&(i.value=1,c.value=null)},openListbox(){e.disabled||0!==i.value&&(i.value=0)},goToOption(t,n,r){if(e.disabled||1===i.value)return;let s=p(),a=eb(t===Xy.Specific?{focus:Xy.Specific,id:n}:{focus:t},{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.disabled});u.value="",c.value=a,d.value=null!=r?r:1,l.value=s.options},search(t){if(e.disabled||1===i.value)return;let n=""!==u.value?0:1;u.value+=t.toLowerCase();let r=(null!==c.value?l.value.slice(c.value+n).concat(l.value.slice(0,c.value+n)):l.value).find((e=>e.dataRef.textValue.startsWith(u.value)&&!e.dataRef.disabled)),s=r?l.value.indexOf(r):-1;-1===s||s===c.value||(c.value=s,d.value=1)},clearSearch(){e.disabled||1!==i.value&&""!==u.value&&(u.value="")},registerOption(e,t){let n=p((n=>[...n,{id:e,dataRef:t}]));l.value=n.options,c.value=n.activeOptionIndex},unregisterOption(e){let t=p((t=>{let n=t.findIndex((t=>t.id===e));return-1!==n&&t.splice(n,1),t}));l.value=t.options,c.value=t.activeOptionIndex,d.value=1},select(t){e.disabled||m(Fy(h.value,{0:()=>t,1:()=>{let e=Hn(v.value.value).slice(),n=Hn(t),r=e.findIndex((e=>v.compare(n,Hn(e))));return-1===r?e.push(n):e.splice(r,1),e}}))}};return Rb([a,o],((e,t)=>{var n;v.closeListbox(),yb(t,gb.Loose)||(e.preventDefault(),null==(n=tb(a))||n.focus())}),pa((()=>0===i.value))),$r(hw,v),sb(pa((()=>Fy(i.value,{0:rb.Open,1:rb.Closed})))),()=>{let{name:r,modelValue:s,disabled:a,...o}=e,l={open:0===i.value,disabled:a,value:f.value};return ma(Ss,[...null!=r&&null!=f.value?Cb({[r]:f.value}).map((([e,t])=>ma(Ib,Jy({features:Ab.Hidden,key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:e,value:t})))):[],Vy({ourProps:{},theirProps:{...n,...Ky(o,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:l,slots:t,attrs:n,name:"Listbox"})])}}}),vw=ti({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"}},setup(e,{attrs:t,slots:n}){let r=fw("ListboxLabel"),i=`headlessui-listbox-label-${Zy()}`;function s(){var e;null==(e=tb(r.buttonRef))||e.focus({preventScroll:!0})}return()=>{let a={open:0===r.listboxState.value,disabled:r.disabled.value};return Vy({ourProps:{id:i,ref:r.labelRef,onClick:s},theirProps:e,slot:a,attrs:t,slots:n,name:"ListboxLabel"})}}}),gw=ti({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"}},setup(e,{attrs:t,slots:n,expose:r}){let i=fw("ListboxButton"),s=`headlessui-listbox-button-${Zy()}`;function a(e){switch(e.key){case Qy.Space:case Qy.Enter:case Qy.ArrowDown:e.preventDefault(),i.openListbox(),yr((()=>{var e;null==(e=tb(i.optionsRef))||e.focus({preventScroll:!0}),i.value.value||i.goToOption(Xy.First)}));break;case Qy.ArrowUp:e.preventDefault(),i.openListbox(),yr((()=>{var e;null==(e=tb(i.optionsRef))||e.focus({preventScroll:!0}),i.value.value||i.goToOption(Xy.Last)}))}}function o(e){if(e.key===Qy.Space)e.preventDefault()}function l(e){i.disabled.value||(0===i.listboxState.value?(i.closeListbox(),yr((()=>{var e;return null==(e=tb(i.buttonRef))?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),i.openListbox(),function(e){requestAnimationFrame((()=>requestAnimationFrame(e)))}((()=>{var e;return null==(e=tb(i.optionsRef))?void 0:e.focus({preventScroll:!0})}))))}r({el:i.buttonRef,$el:i.buttonRef});let u=ob(pa((()=>({as:e.as,type:t.type}))),i.buttonRef);return()=>{var r,c;let d={open:0===i.listboxState.value,disabled:i.disabled.value,value:i.value.value};return Vy({ourProps:{ref:i.buttonRef,id:s,type:u.value,"aria-haspopup":!0,"aria-controls":null==(r=tb(i.optionsRef))?void 0:r.id,"aria-expanded":i.disabled.value?void 0:0===i.listboxState.value,"aria-labelledby":i.labelRef.value?[null==(c=tb(i.labelRef))?void 0:c.id,s].join(" "):void 0,disabled:!0===i.disabled.value||void 0,onKeydown:a,onKeyup:o,onClick:l},theirProps:e,slot:d,attrs:t,slots:n,name:"ListboxButton"})}}}),yw=ti({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(e,{attrs:t,slots:n,expose:r}){let i=fw("ListboxOptions"),s=`headlessui-listbox-options-${Zy()}`,a=Qn(null);function o(e){switch(a.value&&clearTimeout(a.value),e.key){case Qy.Space:if(""!==i.searchQuery.value)return e.preventDefault(),e.stopPropagation(),i.search(e.key);case Qy.Enter:if(e.preventDefault(),e.stopPropagation(),null!==i.activeOptionIndex.value){let e=i.options.value[i.activeOptionIndex.value];i.select(e.dataRef.value)}0===i.mode.value&&(i.closeListbox(),yr((()=>{var e;return null==(e=tb(i.buttonRef))?void 0:e.focus({preventScroll:!0})})));break;case Fy(i.orientation.value,{vertical:Qy.ArrowDown,horizontal:Qy.ArrowRight}):return e.preventDefault(),e.stopPropagation(),i.goToOption(Xy.Next);case Fy(i.orientation.value,{vertical:Qy.ArrowUp,horizontal:Qy.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),i.goToOption(Xy.Previous);case Qy.Home:case Qy.PageUp:return e.preventDefault(),e.stopPropagation(),i.goToOption(Xy.First);case Qy.End:case Qy.PageDown:return e.preventDefault(),e.stopPropagation(),i.goToOption(Xy.Last);case Qy.Escape:e.preventDefault(),e.stopPropagation(),i.closeListbox(),yr((()=>{var e;return null==(e=tb(i.buttonRef))?void 0:e.focus({preventScroll:!0})}));break;case Qy.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(i.search(e.key),a.value=setTimeout((()=>i.clearSearch()),350))}}r({el:i.optionsRef,$el:i.optionsRef});let l=ib(),u=pa((()=>null!==l?l.value===rb.Open:0===i.listboxState.value));return()=>{var r,a,l,c;let d={open:0===i.listboxState.value};return Vy({ourProps:{"aria-activedescendant":null===i.activeOptionIndex.value||null==(r=i.options.value[i.activeOptionIndex.value])?void 0:r.id,"aria-multiselectable":1===i.mode.value||void 0,"aria-labelledby":null!=(c=null==(a=tb(i.labelRef))?void 0:a.id)?c:null==(l=tb(i.buttonRef))?void 0:l.id,"aria-orientation":i.orientation.value,id:s,onKeydown:o,role:"listbox",tabIndex:0,ref:i.optionsRef},theirProps:e,slot:d,attrs:t,slots:n,features:zy.RenderStrategy|zy.Static,visible:u.value,name:"ListboxOptions"})}}}),bw=ti({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n,expose:r}){let i=fw("ListboxOption"),s=`headlessui-listbox-option-${Zy()}`,a=Qn(null);r({el:a,$el:a});let o=pa((()=>null!==i.activeOptionIndex.value&&i.options.value[i.activeOptionIndex.value].id===s)),l=pa((()=>Fy(i.mode.value,{0:()=>i.compare(Hn(i.value.value),Hn(e.value)),1:()=>Hn(i.value.value).some((t=>i.compare(Hn(t),Hn(e.value))))}))),u=pa((()=>Fy(i.mode.value,{1:()=>{var e;let t=Hn(i.value.value);return(null==(e=i.options.value.find((e=>t.some((t=>i.compare(Hn(t),Hn(e.dataRef.value)))))))?void 0:e.id)===s},0:()=>l.value}))),c=pa((()=>({disabled:e.disabled,value:e.value,textValue:"",domRef:a})));function d(t){if(e.disabled)return t.preventDefault();i.select(e.value),0===i.mode.value&&(i.closeListbox(),yr((()=>{var e;return null==(e=tb(i.buttonRef))?void 0:e.focus({preventScroll:!0})})))}function p(){if(e.disabled)return i.goToOption(Xy.Nothing);i.goToOption(Xy.Specific,s)}function h(){e.disabled||o.value||i.goToOption(Xy.Specific,s,0)}function f(){e.disabled||!o.value||i.goToOption(Xy.Nothing)}return di((()=>{var e,t;let n=null==(t=null==(e=tb(a))?void 0:e.textContent)?void 0:t.toLowerCase().trim();void 0!==n&&(c.value.textValue=n)})),di((()=>i.registerOption(s,c))),mi((()=>i.unregisterOption(s))),di((()=>{Br([i.listboxState,l],(()=>{0===i.listboxState.value&&(!l.value||Fy(i.mode.value,{1:()=>{u.value&&i.goToOption(Xy.Specific,s)},0:()=>{i.goToOption(Xy.Specific,s)}}))}),{immediate:!0})})),Nr((()=>{0===i.listboxState.value&&(!o.value||0!==i.activationTrigger.value&&yr((()=>{var e,t;return null==(t=null==(e=tb(a))?void 0:e.scrollIntoView)?void 0:t.call(e,{block:"nearest"})})))})),()=>{let{disabled:r}=e,i={active:o.value,selected:l.value,disabled:r};return Vy({ourProps:{id:s,ref:a,role:"option",tabIndex:!0===r?void 0:-1,"aria-disabled":!0===r||void 0,"aria-selected":l.value,disabled:void 0,onClick:d,onFocus:p,onPointermove:h,onMousemove:h,onPointerleave:f,onMouseleave:f},theirProps:Ky(e,["value","disabled"]),slot:i,attrs:n,slots:t,name:"ListboxOption"})}}});var ww,xw=((ww=xw||{})[ww.Open=0]="Open",ww[ww.Closed=1]="Closed",ww),_w=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(_w||{});let kw=Symbol("MenuContext");function Sw(e){let t=Ur(kw,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Sw),t}return t}let Rw=ti({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let r=Qn(1),i=Qn(null),s=Qn(null),a=Qn([]),o=Qn(""),l=Qn(null),u=Qn(1);function c(e=(e=>e)){let t=null!==l.value?a.value[l.value]:null,n=_b(e(a.value.slice()),(e=>tb(e.dataRef.domRef))),r=t?n.indexOf(t):null;return-1===r&&(r=null),{items:n,activeItemIndex:r}}let d={menuState:r,buttonRef:i,itemsRef:s,items:a,searchQuery:o,activeItemIndex:l,activationTrigger:u,closeMenu:()=>{r.value=1,l.value=null},openMenu:()=>r.value=0,goToItem(e,t,n){let r=c(),i=eb(e===Xy.Specific?{focus:Xy.Specific,id:t}:{focus:e},{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.disabled});o.value="",l.value=i,u.value=null!=n?n:1,a.value=r.items},search(e){let t=""!==o.value?0:1;o.value+=e.toLowerCase();let n=(null!==l.value?a.value.slice(l.value+t).concat(a.value.slice(0,l.value+t)):a.value).find((e=>e.dataRef.textValue.startsWith(o.value)&&!e.dataRef.disabled)),r=n?a.value.indexOf(n):-1;-1===r||r===l.value||(l.value=r,u.value=1)},clearSearch(){o.value=""},registerItem(e,t){let n=c((n=>[...n,{id:e,dataRef:t}]));a.value=n.items,l.value=n.activeItemIndex,u.value=1},unregisterItem(e){let t=c((t=>{let n=t.findIndex((t=>t.id===e));return-1!==n&&t.splice(n,1),t}));a.value=t.items,l.value=t.activeItemIndex,u.value=1}};return Rb([i,s],((e,t)=>{var n;d.closeMenu(),yb(t,gb.Loose)||(e.preventDefault(),null==(n=tb(i))||n.focus())}),pa((()=>0===r.value))),$r(kw,d),sb(pa((()=>Fy(r.value,{0:rb.Open,1:rb.Closed})))),()=>{let i={open:0===r.value};return Vy({ourProps:{},theirProps:e,slot:i,slots:t,attrs:n,name:"Menu"})}}}),Aw=ti({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"}},setup(e,{attrs:t,slots:n,expose:r}){let i=Sw("MenuButton"),s=`headlessui-menu-button-${Zy()}`;function a(e){switch(e.key){case Qy.Space:case Qy.Enter:case Qy.ArrowDown:e.preventDefault(),e.stopPropagation(),i.openMenu(),yr((()=>{var e;null==(e=tb(i.itemsRef))||e.focus({preventScroll:!0}),i.goToItem(Xy.First)}));break;case Qy.ArrowUp:e.preventDefault(),e.stopPropagation(),i.openMenu(),yr((()=>{var e;null==(e=tb(i.itemsRef))||e.focus({preventScroll:!0}),i.goToItem(Xy.Last)}))}}function o(e){if(e.key===Qy.Space)e.preventDefault()}function l(t){e.disabled||(0===i.menuState.value?(i.closeMenu(),yr((()=>{var e;return null==(e=tb(i.buttonRef))?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),i.openMenu(),function(e){requestAnimationFrame((()=>requestAnimationFrame(e)))}((()=>{var e;return null==(e=tb(i.itemsRef))?void 0:e.focus({preventScroll:!0})}))))}r({el:i.buttonRef,$el:i.buttonRef});let u=ob(pa((()=>({as:e.as,type:t.type}))),i.buttonRef);return()=>{var r;let c={open:0===i.menuState.value};return Vy({ourProps:{ref:i.buttonRef,id:s,type:u.value,"aria-haspopup":!0,"aria-controls":null==(r=tb(i.itemsRef))?void 0:r.id,"aria-expanded":e.disabled?void 0:0===i.menuState.value,onKeydown:a,onKeyup:o,onClick:l},theirProps:e,slot:c,attrs:t,slots:n,name:"MenuButton"})}}}),Iw=ti({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(e,{attrs:t,slots:n,expose:r}){let i=Sw("MenuItems"),s=`headlessui-menu-items-${Zy()}`,a=Qn(null);function o(e){var t;switch(a.value&&clearTimeout(a.value),e.key){case Qy.Space:if(""!==i.searchQuery.value)return e.preventDefault(),e.stopPropagation(),i.search(e.key);case Qy.Enter:if(e.preventDefault(),e.stopPropagation(),null!==i.activeItemIndex.value){null==(t=tb(i.items.value[i.activeItemIndex.value].dataRef.domRef))||t.click()}i.closeMenu(),bb(tb(i.buttonRef));break;case Qy.ArrowDown:return e.preventDefault(),e.stopPropagation(),i.goToItem(Xy.Next);case Qy.ArrowUp:return e.preventDefault(),e.stopPropagation(),i.goToItem(Xy.Previous);case Qy.Home:case Qy.PageUp:return e.preventDefault(),e.stopPropagation(),i.goToItem(Xy.First);case Qy.End:case Qy.PageDown:return e.preventDefault(),e.stopPropagation(),i.goToItem(Xy.Last);case Qy.Escape:e.preventDefault(),e.stopPropagation(),i.closeMenu(),yr((()=>{var e;return null==(e=tb(i.buttonRef))?void 0:e.focus({preventScroll:!0})}));break;case Qy.Tab:e.preventDefault(),e.stopPropagation(),i.closeMenu(),yr((()=>function(e,t){return kb(vb(),t,!0,e)}(tb(i.buttonRef),e.shiftKey?hb.Previous:hb.Next)));break;default:1===e.key.length&&(i.search(e.key),a.value=setTimeout((()=>i.clearSearch()),350))}}function l(e){if(e.key===Qy.Space)e.preventDefault()}r({el:i.itemsRef,$el:i.itemsRef}),cb({container:pa((()=>tb(i.itemsRef))),enabled:pa((()=>0===i.menuState.value)),accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let u=ib(),c=pa((()=>null!==u?u.value===rb.Open:0===i.menuState.value));return()=>{var r,a;let u={open:0===i.menuState.value};return Vy({ourProps:{"aria-activedescendant":null===i.activeItemIndex.value||null==(r=i.items.value[i.activeItemIndex.value])?void 0:r.id,"aria-labelledby":null==(a=tb(i.buttonRef))?void 0:a.id,id:s,onKeydown:o,onKeyup:l,role:"menu",tabIndex:0,ref:i.itemsRef},theirProps:e,slot:u,attrs:t,slots:n,features:zy.RenderStrategy|zy.Static,visible:c.value,name:"MenuItems"})}}}),Cw=ti({name:"MenuItem",props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n,expose:r}){let i=Sw("MenuItem"),s=`headlessui-menu-item-${Zy()}`,a=Qn(null);r({el:a,$el:a});let o=pa((()=>null!==i.activeItemIndex.value&&i.items.value[i.activeItemIndex.value].id===s)),l=pa((()=>({disabled:e.disabled,textValue:"",domRef:a})));function u(t){if(e.disabled)return t.preventDefault();i.closeMenu(),bb(tb(i.buttonRef))}function c(){if(e.disabled)return i.goToItem(Xy.Nothing);i.goToItem(Xy.Specific,s)}function d(){e.disabled||o.value||i.goToItem(Xy.Specific,s,0)}function p(){e.disabled||!o.value||i.goToItem(Xy.Nothing)}return di((()=>{var e,t;let n=null==(t=null==(e=tb(a))?void 0:e.textContent)?void 0:t.toLowerCase().trim();void 0!==n&&(l.value.textValue=n)})),di((()=>i.registerItem(s,l))),mi((()=>i.unregisterItem(s))),Nr((()=>{0===i.menuState.value&&(!o.value||0!==i.activationTrigger.value&&yr((()=>{var e,t;return null==(t=null==(e=tb(a))?void 0:e.scrollIntoView)?void 0:t.call(e,{block:"nearest"})})))})),()=>{let{disabled:r}=e,i={active:o.value,disabled:r};return Vy({ourProps:{id:s,ref:a,role:"menuitem",tabIndex:!0===r?void 0:-1,"aria-disabled":!0===r||void 0,onClick:u,onFocus:c,onPointermove:d,onMousemove:d,onPointerleave:p,onMouseleave:p},theirProps:e,slot:i,attrs:n,slots:t,name:"MenuItem"})}}}),Ew=Symbol("LabelContext");function Ow(){let e=Ur(Ew,null);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Ow),e}return e}function Dw({slot:e={},name:t="Label",props:n={}}={}){let r=Qn([]);return $r(Ew,{register:function(e){return r.value.push(e),()=>{let t=r.value.indexOf(e);-1!==t&&r.value.splice(t,1)}},slot:e,name:t,props:n}),pa((()=>r.value.length>0?r.value.join(" "):void 0))}let Tw=ti({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1}},setup(e,{slots:t,attrs:n}){let r=Ow(),i=`headlessui-label-${Zy()}`;return di((()=>mi(r.register(i)))),()=>{let{name:s="Label",slot:a={},props:o={}}=r,{passive:l,...u}=e,c={...Object.entries(o).reduce(((e,[t,n])=>Object.assign(e,{[t]:tr(n)})),{}),id:i};return l&&(delete c.onClick,delete u.onClick),Vy({ourProps:c,theirProps:u,slot:a,attrs:n,slots:t,name:s})}}});function Pw(e,t){return e===t}let jw=Symbol("RadioGroupContext");function Mw(e){let t=Ur(jw,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Mw),t}return t}let Lw=ti({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Pw},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:r,expose:i}){let s=Qn(null),a=Qn([]),o=Dw({name:"RadioGroupLabel"}),l=Qb({name:"RadioGroupDescription"});i({el:s,$el:s});let[u,c]=Tb(pa((()=>e.modelValue)),(e=>t("update:modelValue",e)),pa((()=>e.defaultValue))),d={options:a,value:u,disabled:pa((()=>e.disabled)),firstOption:pa((()=>a.value.find((e=>!e.propsRef.disabled)))),containsCheckedOption:pa((()=>a.value.some((t=>d.compare(Hn(t.propsRef.value),Hn(e.modelValue)))))),compare(t,n){if("string"==typeof e.by){let r=e.by;return(null==t?void 0:t[r])===(null==n?void 0:n[r])}return e.by(t,n)},change(t){var n;if(e.disabled||d.compare(Hn(u.value),Hn(t)))return!1;let r=null==(n=a.value.find((e=>d.compare(Hn(e.propsRef.value),Hn(t)))))?void 0:n.propsRef;return(null==r||!r.disabled)&&(c(t),!0)},registerOption(e){a.value.push(e),a.value=_b(a.value,(e=>e.element))},unregisterOption(e){let t=a.value.findIndex((t=>t.id===e));-1!==t&&a.value.splice(t,1)}};function p(e){if(!s.value||!s.value.contains(e.target))return;let t=a.value.filter((e=>!1===e.propsRef.disabled)).map((e=>e.element));switch(e.key){case Qy.Enter:Db(e.currentTarget);break;case Qy.ArrowLeft:case Qy.ArrowUp:if(e.preventDefault(),e.stopPropagation(),kb(t,hb.Previous|hb.WrapAround)===fb.Success){let e=a.value.find((e=>{var t;return e.element===(null==(t=ub(s))?void 0:t.activeElement)}));e&&d.change(e.propsRef.value)}break;case Qy.ArrowRight:case Qy.ArrowDown:if(e.preventDefault(),e.stopPropagation(),kb(t,hb.Next|hb.WrapAround)===fb.Success){let e=a.value.find((e=>{var t;return e.element===(null==(t=ub(e.element))?void 0:t.activeElement)}));e&&d.change(e.propsRef.value)}break;case Qy.Space:{e.preventDefault(),e.stopPropagation();let t=a.value.find((e=>{var t;return e.element===(null==(t=ub(e.element))?void 0:t.activeElement)}));t&&d.change(t.propsRef.value)}}}$r(jw,d),cb({container:pa((()=>tb(s))),accept:e=>"radio"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let h=`headlessui-radiogroup-${Zy()}`;return()=>{let{disabled:t,name:i,...a}=e,c={ref:s,id:h,role:"radiogroup","aria-labelledby":o.value,"aria-describedby":l.value,onKeydown:p};return ma(Ss,[...null!=i&&null!=u.value?Cb({[i]:u.value}).map((([e,t])=>ma(Ib,Jy({features:Ab.Hidden,key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:e,value:t})))):[],Vy({ourProps:c,theirProps:{...n,...Ky(a,["modelValue","defaultValue"])},slot:{},attrs:n,slots:r,name:"RadioGroup"})])}}});var $w=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))($w||{});let Uw=ti({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{attrs:t,slots:n,expose:r}){let i=Mw("RadioGroupOption"),s=`headlessui-radiogroup-option-${Zy()}`,a=Dw({name:"RadioGroupLabel"}),o=Qb({name:"RadioGroupDescription"}),l=Qn(null),u=pa((()=>({value:e.value,disabled:e.disabled}))),c=Qn(1);r({el:l,$el:l}),di((()=>i.registerOption({id:s,element:l,propsRef:u}))),mi((()=>i.unregisterOption(s)));let d=pa((()=>{var e;return(null==(e=i.firstOption.value)?void 0:e.id)===s})),p=pa((()=>i.disabled.value||e.disabled)),h=pa((()=>i.compare(Hn(i.value.value),Hn(e.value)))),f=pa((()=>p.value?-1:h.value||!i.containsCheckedOption.value&&d.value?0:-1));function m(){var t;!i.change(e.value)||(c.value|=2,null==(t=l.value)||t.focus())}function v(){c.value|=2}function g(){c.value&=-3}return()=>{let r=Ky(e,["value","disabled"]),i={checked:h.value,disabled:p.value,active:Boolean(2&c.value)};return Vy({ourProps:{id:s,ref:l,role:"radio","aria-checked":h.value?"true":"false","aria-labelledby":a.value,"aria-describedby":o.value,"aria-disabled":!!p.value||void 0,tabIndex:f.value,onClick:p.value?void 0:m,onFocus:p.value?void 0:v,onBlur:p.value?void 0:g},theirProps:r,slot:i,attrs:t,slots:n,name:"RadioGroupOption"})}}}),Nw=Tw,Fw=Xb,Bw=Symbol("GroupContext"),zw=ti({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let r=Qn(null),i=Dw({name:"SwitchLabel",props:{onClick(){!r.value||(r.value.click(),r.value.focus({preventScroll:!0}))}}}),s=Qb({name:"SwitchDescription"});return $r(Bw,{switchRef:r,labelledby:i,describedby:s}),()=>Vy({theirProps:e,ourProps:{},slot:{},slots:t,attrs:n,name:"SwitchGroup"})}}),qw=ti({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,default:!1},name:{type:String,optional:!0},value:{type:String,optional:!0}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:r,expose:i}){let s=Ur(Bw,null),a=`headlessui-switch-${Zy()}`,[o,l]=Tb(pa((()=>e.modelValue)),(e=>t("update:modelValue",e)),pa((()=>e.defaultChecked)));function u(){l(!o.value)}let c=Qn(null),d=null===s?c:s.switchRef,p=ob(pa((()=>({as:e.as,type:n.type}))),d);function h(e){e.preventDefault(),u()}function f(e){e.key===Qy.Space?(e.preventDefault(),u()):e.key===Qy.Enter&&Db(e.currentTarget)}function m(e){e.preventDefault()}return i({el:d,$el:d}),()=>{let{name:t,value:i,...l}=e,u={checked:o.value},c={id:a,ref:d,role:"switch",type:p.value,tabIndex:0,"aria-checked":o.value,"aria-labelledby":null==s?void 0:s.labelledby.value,"aria-describedby":null==s?void 0:s.describedby.value,onClick:h,onKeyup:f,onKeypress:m};return ma(Ss,[null!=t&&null!=o.value?ma(Ib,Jy({features:Ab.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:o.value,name:t,value:i})):null,Vy({ourProps:c,theirProps:{...n,...Ky(l,["modelValue","defaultChecked"])},slot:u,attrs:n,slots:r,name:"Switch"})])}}}),Vw=Tw,Hw=Xb;const Ww={spacing:{edge:"2rem",content:"1280px"},fontSizes:{"4xl":"2.5rem"}},Jw={};const Kw={css(e){if(/^spacing\.\d+$/.test(e))return.25*parseInt(e.substring(8))+"rem";const t=e.split(".").reduce(((e,t)=>null==e?void 0:e[t]),Ww);return"string"==typeof t?t:"0px"},mergeClasses(...e){const t=e.reduce(((e,t)=>{var n,r;const i=function(e){return e.reduce(((e,t)=>{var n,r,i,s,a;const o=null!=(s=null==(i=null==(r=null==(n=t.match(/((hover|focus):)*(px-|text-(xs|md|lg|(\d)*xl)|text-|bg-|ring-offset-(\d)+|ring-offset-|ring-(\d)+|ring-)/))?void 0:n[0])?void 0:r.replace(/\d+/,"[digits]"))?void 0:i.replace(/xs|md|lg|(\d)*xl/,"[size]"))?s:"others";return(null!=(a=e[o])?a:e[o]=[]).push(t),e}),{})}(t.split(" "));return null==(r=i.others)||r.push(...null!=(n=e.others)?n:[]),Object.assign(e,i),e}),{});return Object.values(t).map((e=>e.join(" "))).join(" ")},pixels(e){var t;return null!=(t=Jw[e])?t:Jw[e]=function(e){if(/\d+px/.test(e))return parseInt(e.slice(0,-2));const t=document.createElement("div");return t.style.position="fixed",t.style.width=e,document.body.append(t),d(t.clientWidth,(()=>t.remove()))}(this.css(e))}};function Gw(e){return{type:Array,default:null!=e?e:()=>[]}}function Zw(e=!1){return{type:Boolean,default:e}}function Yw(e,t){var n;const r=Object.values(e);return{type:String,default:null!=(n=null!=t?t:r[0])?n:null,validator:e=>r.includes(e)}}function Qw(e,t){var n;return null!=(n=Ur(e))?n:i(null!=t?t:`Could not resolve '${e}' injection key`)}function Xw(e){return{type:e,default:null}}function ex(e=null){return{type:Object,default:e}}function tx(){return{type:Array,required:!0}}function nx(e){return{type:e,required:!0}}function rx(){return{type:Number,required:!0}}function ix(){return{type:Object,required:!0}}function sx(){return{type:String,required:!0}}function ax(e=null){return{type:String,default:e}}function ox(e,t){var n,r;let i=null!=(r=null==(n=history.state)?void 0:n[e])?r:t;return new ir(((t,n)=>({get:()=>(t(),i),set(t){var r;const s=null!=(r=history.state)?r:{};i=t,history.replaceState({...s,[e]:i},""),n()}})))}const lx=ti({__name:"HeadlessButton",props:{url:ax(),route:ax(),routeParams:ex((()=>({}))),routeQuery:ex((()=>({})))},setup(e,{expose:t}){const n=Qn(null),r=pa((()=>e.route?{tag:"router-link",props:{to:$({name:e.route,params:e.routeParams,query:e.routeQuery})}}:e.url?{tag:"a",props:{target:"_blank",href:e.url}}:{tag:"button",props:{type:"button"}}));return t(zx(n)),(e,t)=>(Os(),Ms(Ai(r.value.tag),Ys({ref_key:"$root",ref:n},r.value.props),{default:Tr((()=>[Ti(e.$slots,"default")])),_:3},16))}}),ux=Object.freeze(Object.defineProperty({__proto__:null,default:lx},Symbol.toStringTag,{value:"Module"})),cx=ti({__name:"HeadlessForm",props:{form:ix()},emits:["submit"],setup:(e,{emit:t})=>($r("form",e.form),(n,r)=>(Os(),js("form",{onSubmit:r[0]||(r[0]=mo((n=>async function(){e.form.submit()&&t("submit",e.form.data())}()),["prevent"]))},[Ti(n.$slots,"default")],32)))}),dx=Object.freeze(Object.defineProperty({__proto__:null,default:cx},Symbol.toStringTag,{value:"Module"}));class px{constructor(e){t(this,"value"),this.value=e}}const hx=ti({__name:"HeadlessInput",props:{id:ax(),name:ax(),placeholder:ax(),modelValue:Xw([String,Number]),type:ax("text"),error:ax(),initialFocus:Zw(),disabled:Zw()},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){var r,i,s;const a=Ur("form",null),o=pa((()=>{if(!a||!e.name)return null;if(e.name.match(/\[\d+\]$/)){const[t,n]=e.name.split("["),r=a.input(t),i=parseInt(n.slice(0,-1));return r?{get value(){var e;return null==(e=r.value)?void 0:e[i]},get error(){return r.error},update(e){const t=r.value,n=t[i];r.update([...t.slice(0,i),n instanceof px?n.update(e):e,...t.slice(i+1)])}}:null}return a.input(e.name)})),l=pa((()=>{var t,n;return null!=(n=null==(t=o.value)?void 0:t.value)?n:e.modelValue})),u=pa((()=>{var t,n;return null!=(n=null==(t=o.value)?void 0:t.error)?n:e.error})),c={id:null!=(r=e.id)?r:F(),type:e.type,name:null!=(i=e.name)?i:void 0,placeholder:null!=(s=e.placeholder)?s:void 0,get error(){return u.value},get disabled(){return e.disabled},get value(){return l.value instanceof px?l.value.value:l.value},update(){var e;n("update:modelValue",d(null==(e=this.inputElement)?void 0:e.value,(e=>{var t;return null==(t=o.value)?void 0:t.update(e)})))}};return di((()=>{var t;e.initialFocus&&(null==(t=c.inputElement)||t.focus())})),$r("input",c),t({...zx((()=>{var e;return null!=(e=c.inputElement)?e:null})),get value(){return null==c?void 0:c.value},get hasErrors(){return!!(null==c?void 0:c.error)}}),(e,t)=>Ti(e.$slots,"default",{hasErrors:!!c.error})}}),fx=Object.freeze(Object.defineProperty({__proto__:null,default:hx},Symbol.toStringTag,{value:"Module"})),mx=["id"],vx=ti({__name:"HeadlessInputError",setup(e){const t=Qw("input","<HeadlessInputError> must be a child of a <HeadlessInput>");return(e,n)=>tr(t).error?(Os(),js("p",{key:0,id:`${tr(t).id}-error`},He(tr(t).error),9,mx)):Js("",!0)}}),gx=Object.freeze(Object.defineProperty({__proto__:null,default:vx},Symbol.toStringTag,{value:"Module"})),yx=["id","name","placeholder","value","type","aria-invalid","aria-describedby","disabled"],bx=ti({__name:"HeadlessInputInput",setup(e){const t=Qw("input","<HeadlessInputInput> must be a child of a <HeadlessInput>");return(e,n)=>(Os(),js("input",{id:tr(t).id,ref:e=>tr(t).inputElement=e,name:tr(t).name,placeholder:tr(t).placeholder,value:tr(t).value,type:tr(t).type,"aria-invalid":tr(t).error?"true":"false","aria-describedby":tr(t).error?`${tr(t).id}-error`:void 0,disabled:tr(t).disabled,onInput:n[0]||(n[0]=e=>tr(t).update())},null,40,yx))}}),wx=Object.freeze(Object.defineProperty({__proto__:null,default:bx},Symbol.toStringTag,{value:"Module"})),xx=["for"],_x=ti({__name:"HeadlessInputLabel",setup(e){const t=Qw("input","<HeadlessInputLabel> must be a child of a <HeadlessInput>");return(e,n)=>(Os(),js("label",{for:tr(t).id},[Ti(e.$slots,"default")],8,xx))}}),kx=Object.freeze(Object.defineProperty({__proto__:null,default:_x},Symbol.toStringTag,{value:"Module"})),Sx=["id","name","placeholder","value","aria-invalid","aria-describedby"],Rx=ti({__name:"HeadlessInputTextArea",setup(e){const t=Qw("input","<HeadlessInputTextArea> must be a child of a <HeadlessInput>");return(e,n)=>{var r;return Os(),js("textarea",{id:tr(t).id,ref:e=>tr(t).inputElement=e,name:tr(t).name,placeholder:tr(t).placeholder,value:null!=(r=tr(t).value)?r:void 0,"aria-invalid":tr(t).error?"true":"false","aria-describedby":tr(t).error?`${tr(t).id}-error`:void 0,onInput:n[0]||(n[0]=e=>tr(t).update())},null,40,Sx)}}}),Ax=Object.freeze(Object.defineProperty({__proto__:null,default:Rx},Symbol.toStringTag,{value:"Module"})),Ix=ti({__name:"HeadlessLink",props:{route:ax(),routeParams:ex((()=>({}))),routeQuery:ex((()=>({}))),url:ax(),internal:Zw()},setup(e){const t=pa((()=>e.route?"router-link":e.url?"a":"button")),n=pa((()=>({a:{href:e.url,target:e.internal?null:"_blank"},button:{type:"button"},"router-link":{to:$({name:e.route,params:e.routeParams,query:e.routeQuery})}})));return(e,r)=>(Os(),Ms(Ai(t.value),function(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ut(t)&&(e.class=Fe(t)),n&&(e.style=Me(n)),e}(qs(n.value[t.value])),{default:Tr((()=>[Ti(e.$slots,"default")])),_:3},16))}}),Cx=Object.freeze(Object.defineProperty({__proto__:null,default:Ix},Symbol.toStringTag,{value:"Module"})),Ex=["model-value"],Ox=["value","selected"],Dx=ti({inheritAttrs:!1}),Tx=ti({...Dx,__name:"HeadlessSelect",props:{label:ax(),labelClass:ax(),labelTextClass:ax(),options:tx(),modelValue:nx([String,Number]),showLabel:Zw(!1)},emits:["update:modelValue"],setup(e,{emit:t}){const n=Qn(null);function r(){var r;n.value&&t("update:modelValue",null==(r=e.options[n.value.selectedIndex])?void 0:r.value)}return(t,i)=>{const s=Ii("wobbly-border");return Os(),js("label",{class:Fe(e.labelClass)},[e.label?(Os(),js("span",{key:0,class:Fe([e.labelTextClass||e.showLabel||"sr-only"])},He(e.label),3)):Js("",!0),wi((Os(),js("select",Ys({ref_key:"$select",ref:n,"model-value":e.modelValue},t.$attrs,{onChange:r}),[(Os(!0),js(Ss,null,Oi(e.options,((t,n)=>(Os(),js("option",{key:n,value:t.value,selected:e.modelValue===t.value},He(t.text),9,Ox)))),128))],16,Ex)),[[s]])],2)}}}),Px=Object.freeze(Object.defineProperty({__proto__:null,default:Tx},Symbol.toStringTag,{value:"Module"}));function jx(e,t){const n=new RegExp(`/([^/]+)${W(t)}`);return Object.entries(e).reduce(((e,[t,{default:r}])=>{var i;const s=null==(i=t.match(n))?void 0:i[1];return d(e,(()=>{s&&(e[s]=r)}))}),{})}const Mx={};async function Lx(e){await $x(document.createElement("div"),{duration:e})}async function $x(e,t){var n,r,i,s,a,o,l,u,c,d,p,h,f,m,v,g,y,b,w,x,_,k;null==(r=null==(n=t.before)?void 0:n.addClasses)||r.split(" ").forEach((t=>e.classList.add(t))),null==(s=null==(i=t.before)?void 0:i.removeClasses)||s.split(" ").forEach((t=>e.classList.remove(t))),(null==(a=t.before)?void 0:a.append)&&e.append(t.before.append),(null==(o=t.before)?void 0:o.prepend)&&e.prepend(t.before.prepend),(null==(l=t.before)?void 0:l.styles)&&Object.assign(e.style,t.before.styles);const S=e.animate($({top:null==(c=null!=(u=t.boundingRects)?u:t.boundingPositions)?void 0:c.map((e=>`${e.top}px`)),left:null==(p=null!=(d=t.boundingRects)?d:t.boundingPositions)?void 0:p.map((e=>`${e.left}px`)),width:null==(f=null!=(h=t.boundingRects)?h:t.boundingDimensions)?void 0:f.map((e=>`${e.width}px`)),height:null==(v=null!=(m=t.boundingRects)?m:t.boundingDimensions)?void 0:v.map((e=>`${e.height}px`)),...null==(y=Object.entries(null!=(g=t.classes)?g:{}))?void 0:y.reduce(((e,[t,n])=>(e[t]=function(e,t){const n=t.map((t=>`${t}-${e}`));if(n.some((e=>!(e in Mx)))){const r=document.createElement("div"),i=document.createElement("div");i.style.opacity="0",i.append(r),document.body.append(i);for(const s in n){const i=n[s],a=t[s];i in Mx||(r.classList.add(a),Mx[i]=getComputedStyle(r)[e],r.classList.remove(a))}i.remove()}return n.map((e=>Mx[e]))}(t,n),e)),{}),...t.styles}),{duration:t.duration,fill:t.fill,easing:t.easing});await S.finished,null==(w=null==(b=t.after)?void 0:b.addClasses)||w.split(" ").forEach((t=>e.classList.add(t))),null==(_=null==(x=t.after)?void 0:x.removeClasses)||_.split(" ").forEach((t=>e.classList.remove(t))),(null==(k=t.after)?void 0:k.resetStyles)&&e.removeAttribute("style")}async function Ux(e,t){await Promise.all(Object.values(t).filter((e=>!!e)).map((({element:t,...n})=>$x(t,{...e,...n}))))}function Nx(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth}function Fx(e,t){var n;return null!=(n=e.querySelector(t))?n:i(`Could not find child element with '${t}' selector`)}function Bx(e){return{getRootElement:()=>{var t,n;return null!=(n=null==(t=e.value)?void 0:t.getRootElement())?n:null},focus:t=>{var n;return null==(n=e.value)?void 0:n.focus(t)},isFocused:()=>{var t;return!!(null==(t=e.value)?void 0:t.isFocused())},blur:()=>{var t;return null==(t=e.value)?void 0:t.blur()},scrollIntoView:()=>{var t;return null==(t=e.value)?void 0:t.scrollIntoView()}}}function zx(e){const t="function"==typeof e?e:()=>e.value;return{getRootElement:()=>{var e;return null!=(e=t())?e:null},focus(e={}){var n;const r=t(),i=null==(n=e.scrollIntoView)||n;r&&(i&&!Nx(r)&&this.scrollIntoView(),r.focus())},isFocused:()=>{var e;return!!(null==(e=t())?void 0:e.matches(":focus"))},blur(){const e=t();e&&e.blur()},scrollIntoView:()=>{var e;return null==(e=t())?void 0:e.scrollIntoView()}}}const qx=jx(Object.assign({"/src/framework/components/headless/HeadlessButton.vue":ux,"/src/framework/components/headless/HeadlessForm.vue":dx,"/src/framework/components/headless/HeadlessInput.vue":fx,"/src/framework/components/headless/HeadlessInputError.vue":gx,"/src/framework/components/headless/HeadlessInputInput.vue":wx,"/src/framework/components/headless/HeadlessInputLabel.vue":kx,"/src/framework/components/headless/HeadlessInputTextArea.vue":Ax,"/src/framework/components/headless/HeadlessLink.vue":Cx,"/src/framework/components/headless/HeadlessSelect.vue":Px}),".vue");var Vx=(e=>(e["Primary"]="primary",e["Solid"]="brand-solid",e["Danger"]="danger",e))(Vx||{}),Hx=(e=>(e["Start"]="start",e["Center"]="center",e["End"]="end",e))(Hx||{});const Wx=ti({__name:"CoreButton",props:{disabled:Zw(),color:Yw(Vx),class:ax(""),alignment:Yw(Hx),secondary:Zw(),tinted:Zw(),clear:Zw(),wobblyBorder:ex()},setup(e,{expose:t}){function n(t){const n=i[t];if(e.disabled)return"clear"===a.value?"text-gray-700 opacity-50 cursor-not-allowed":"bg-gray-300 text-gray-700 opacity-75 cursor-not-allowed";switch(a.value){case"primary":return["text-white",n.baseBackground,n.accentHoverBackground,n.baseFocusRing].join(" ");case"secondary":return["hover:text-white focus:text-white",e.tinted?`${n.tintedBackground} ${n.tintedText}`:"bg-gray-300 text-gray-700",n.accentHoverBackground,n.accentFocusHoverBackground,n.baseFocusBackground,n.baseFocusRing].join(" ");case"clear":return"text-gray-700 hover:bg-gray-200 focus:bg-gray-100 focus:hover:bg-gray-200 focus:ring-gray-200"}}const r=Qn(null),i={[Vx.Primary]:{baseBackground:"bg-primary-600",baseFocusBackground:"focus:bg-primary-600",baseFocusRing:"focus:ring-primary-600",tintedBackground:"bg-primary-gray-300",tintedText:"text-primary-gray-700",accentHoverBackground:"hover:bg-primary-700",accentFocusHoverBackground:"focus:hover:bg-primary-700"},[Vx.Solid]:{baseBackground:"bg-brand-solid-500",baseFocusBackground:"focus:bg-brand-solid-500",baseFocusRing:"focus:ring-brand-solid-500",tintedBackground:"bg-brand-solid-gray-300",tintedText:"text-brand-solid-gray-700",accentHoverBackground:"hover:bg-brand-solid-700",accentFocusHoverBackground:"focus:hover:bg-brand-solid-700"},[Vx.Danger]:{baseBackground:"bg-red-500",baseFocusBackground:"focus:bg-red-500",baseFocusRing:"focus:ring-red-500",tintedBackground:"bg-red-gray-300",tintedText:"text-red-gray-700",accentHoverBackground:"hover:bg-red-700",accentFocusHoverBackground:"focus:hover:bg-red-700"}},s={[Hx.Start]:"justify-start",[Hx.Center]:"justify-center",[Hx.End]:"justify-end"},a=pa((()=>e.secondary?"secondary":e.clear?"clear":"primary")),o=pa((()=>{const t=["inline-flex items-center px-2.5 py-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2",s[e.alignment],n(e.color)].join(" ");return e.class?Kw.mergeClasses(t,e.class):t}));return t(Bx(r)),(t,n)=>{const i=Si("HeadlessButton"),s=Ii("wobbly-border");return wi((Os(),Ms(i,{ref_key:"$root",ref:r,class:Fe(o.value),disabled:e.disabled},{default:Tr((()=>[Ti(t.$slots,"default")])),_:3},8,["class","disabled"])),[[s,e.wobblyBorder]])}}}),Jx={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},Kx=[Bs("g",{fill:"currentColor"},[Bs("path",{d:"M7.172 14.243a1 1 0 1 1-1.415-1.415l7.071-7.07a1 1 0 1 1 1.415 1.414l-7.071 7.07Z"}),Bs("path",{d:"M5.757 7.172a1 1 0 0 1 1.415-1.415l7.07 7.071a1 1 0 1 1-1.414 1.415l-7.07-7.071Z"})],-1)];const Gx={name:"pepicons-times",render:function(e,t){return Os(),js("svg",Jx,Kx)}};function Zx(e,t){const n=qu.on(e,t);mi((()=>n()))}function Yx(e){return"number"!=typeof e?e:{duration:e}}async function Qx(e,t){await $x(e,{...Yx(t),before:{styles:{opacity:"0"}},after:{resetStyles:!0}})}async function Xx(e,t){await $x(e,{...Yx(t),styles:{opacity:["0","1"]}})}async function e_(e,t){await $x(e,{...Yx(t),styles:{opacity:["1","0"]}})}async function t_(e,t){const n=e.clientHeight;await $x(e,{...Yx(t),styles:{height:["0px",`${n}px`]}})}async function n_(e,t){await $x(e,{...Yx(t),styles:{transform:["scale(1)","scale(.95)"]}})}async function r_(e,t){await $x(e,{...Yx(t),styles:{transform:["scale(.95)","scale(1)"]}})}async function i_(e,t){const n=e.clientHeight;await $x(e,{...Yx(t),styles:{height:[`${n}px`,"0px"]}})}async function s_(e,t){await $x(e,{...Yx(t),styles:{transform:["translateY(100%)","translateY(0)"]}})}async function a_(e,t){await $x(e,{...Yx(t),styles:{transform:["translateY(0)","translateY(100%)"]}})}const o_={class:"fixed inset-0 flex items-center justify-center m-edge"},l_=ti({__name:"AppModal",props:{modal:ix(),title:ax(),childIndex:rx(),noPadding:Zw(),cancellable:Zw(!0),headerBorder:Zw()},setup(e,{expose:t}){let n=Qn(!0),r=Qn(!1);const i=fa().slots,s=Qn(null),a=pa((()=>!e.noPadding)),o=pa((()=>{var t;return null!=(t=PR.modals[e.childIndex])?t:null})),l=pa((()=>e.title||i.title));async function u(){var e;(null==(e=s.value)?void 0:e.$el)&&(n.value||await async function(e,t){const n=Fx(e,".app-modal--panel");await Promise.all([e_(n,{duration:t,easing:"ease-in"}),n_(n,{duration:t,easing:"ease-in"})]),e.classList.add("opacity-0"),e.classList.add("pointer-events-none")}(s.value.$el,300),n.value=!0)}async function c(){var e;(null==(e=s.value)?void 0:e.$el)&&(n.value&&await async function(e,t){const n=Fx(e,".app-modal--panel");e.classList.remove("opacity-0"),e.classList.remove("pointer-events-none"),await Promise.all([Xx(n,{duration:t,easing:"ease-out"}),r_(n,{duration:t,easing:"ease-out"})])}(s.value.$el,200),n.value=!1)}async function d(t){r.value||(qu.emit("modal-will-close",{modal:e.modal,result:t}),await u(),r.value=!0,qu.emit("modal-closed",{modal:e.modal,result:t}))}Zx("close-modal",(async({id:t,result:n})=>{t===e.modal.id&&await d(n)})),Zx("hide-modal",(async({id:t})=>{t===e.modal.id&&await u()})),Zx("show-modal",(async({id:t})=>{t===e.modal.id&&await c()}));const p={close:d};return $r("modal",p),t(p),(t,n)=>{const r=ow,i=Gx,u=Wx,c=aw,p=sw;return Os(),Ms(p,{ref_key:"$root",ref:s,open:!0,class:"relative z-50 opacity-0 pointer-events-none",onClose:n[1]||(n[1]=t=>e.cancellable&&d())},{default:Tr((()=>[Bs("div",o_,[zs(c,{class:"app-modal--panel relative max-w-full max-h-full overflow-hidden flex flex-col rounded-md shadow-xl bg-white"},{default:Tr((()=>[l.value?(Os(),Ms(r,{key:0,as:"h2",class:Fe(["pt-4 pl-4 text-lg font-medium leading-6 text-gray-900",{"pr-14":e.cancellable,"pr-4":!e.cancellable}])},{default:Tr((()=>[Ti(t.$slots,"title",{},(()=>[Hs(He(e.title),1)]))])),_:3},8,["class"])):Js("",!0),e.cancellable?(Os(),Ms(u,{key:1,clear:"","aria-label":t.$t("ui.closeModal"),title:t.$t("ui.closeModal"),class:"absolute w-clickable h-clickable top-2 right-2",onClick:n[0]||(n[0]=e=>d())},{default:Tr((()=>[zs(i,{class:"w-6 h-6","aria-hidden":"true"})])),_:1},8,["aria-label","title"])):Js("",!0),Bs("div",{ref:"content",class:Fe(["flex overflow-auto flex-col mt-4 max-h-full",{"border-t":e.headerBorder,"pl-4 pb-4":a.value,"pr-4":a.value&&(l.value||!e.cancellable),"pr-12":a.value&&!l.value&&e.cancellable}])},[Ti(t.$slots,"default",{close:d})],2),o.value?(Os(),Ms(Ai(o.value.component),Ys({key:2,"child-index":e.childIndex+1,modal:o.value},o.value.props),null,16,["child-index","modal"])):Js("",!0)])),_:3})])])),_:3},512)}}});const u_=r(class extends zu{constructor(){super(...arguments),t(this,"scopes",{}),t(this,"capturedTestUrls",[])}captureLink(e,t){const n=this.getCapturedRoute(e,t),r=e=>e?!0===e?J:"function"==typeof e?e:()=>Ed.push(e):null;return n instanceof Promise?Promise.resolve(n).then((e=>r(e))):r(n)}registerScope(e,t){this.scopes[e]=t}hasCapturedDuringTesting(e){return this.capturedTestUrls.includes(e)}async boot(){await super.boot(),this.registerScope("default",(e=>!!e.startsWith(document.location.origin)&&{path:e.slice(document.location.origin.length)}))}getCapturedRoute(e,t){const n=this.getScopeNames(t);for(const[r,i]of Object.entries(this.scopes)){if(!n.includes(r))continue;const t=i(e);if(t)return t}return iI.isTesting?(this.capturedTestUrls.push(e),!0):null}getScopeNames(e){return e?"string"==typeof e?e.split(",").map((e=>e.trim())):e:Object.keys(this.scopes)}});
/*! @license DOMPurify 2.3.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.4/LICENSE */var c_=Object.hasOwnProperty,d_=Object.setPrototypeOf,p_=Object.isFrozen,h_=Object.getPrototypeOf,f_=Object.getOwnPropertyDescriptor,m_=Object.freeze,v_=Object.seal,g_=Object.create,y_="undefined"!=typeof Reflect&&Reflect,b_=y_.apply,w_=y_.construct;b_||(b_=function(e,t,n){return e.apply(t,n)}),m_||(m_=function(e){return e}),v_||(v_=function(e){return e}),w_||(w_=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var x_,__=T_(Array.prototype.forEach),k_=T_(Array.prototype.pop),S_=T_(Array.prototype.push),R_=T_(String.prototype.toLowerCase),A_=T_(String.prototype.match),I_=T_(String.prototype.replace),C_=T_(String.prototype.indexOf),E_=T_(String.prototype.trim),O_=T_(RegExp.prototype.test),D_=(x_=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return w_(x_,t)});function T_(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return b_(e,t,r)}}function P_(e,t){d_&&d_(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var i=R_(r);i!==r&&(p_(t)||(t[n]=i),r=i)}e[r]=!0}return e}function j_(e){var t=g_(null),n=void 0;for(n in e)b_(c_,e,[n])&&(t[n]=e[n]);return t}function M_(e,t){for(;null!==e;){var n=f_(e,t);if(n){if(n.get)return T_(n.get);if("function"==typeof n.value)return T_(n.value)}e=h_(e)}return function(e){return console.warn("fallback value for",e),null}}var L_=m_(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$_=m_(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),U_=m_(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N_=m_(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),F_=m_(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),B_=m_(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),z_=m_(["#text"]),q_=m_(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),V_=m_(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H_=m_(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W_=m_(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),J_=v_(/\{\{[\s\S]*|[\s\S]*\}\}/gm),K_=v_(/<%[\s\S]*|[\s\S]*%>/gm),G_=v_(/^data-[\-\w.\u00B7-\uFFFF]/),Z_=v_(/^aria-[\-\w]+$/),Y_=v_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Q_=v_(/^(?:\w+script|data):/i),X_=v_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function tk(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var nk=function(){return"undefined"==typeof window?null:window},rk=function(e,t){if("object"!==(void 0===e?"undefined":ek(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(s){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var ik=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nk(),n=function(t){return e(t)};if(n.version="2.3.4",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,i=t.document,s=t.DocumentFragment,a=t.HTMLTemplateElement,o=t.Node,l=t.Element,u=t.NodeFilter,c=t.NamedNodeMap,d=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,p=t.HTMLFormElement,h=t.DOMParser,f=t.trustedTypes,m=l.prototype,v=M_(m,"cloneNode"),g=M_(m,"nextSibling"),y=M_(m,"childNodes"),b=M_(m,"parentNode");if("function"==typeof a){var w=i.createElement("template");w.content&&w.content.ownerDocument&&(i=w.content.ownerDocument)}var x=rk(f,r),_=x&&ee?x.createHTML(""):"",k=i,S=k.implementation,R=k.createNodeIterator,A=k.createDocumentFragment,I=k.getElementsByTagName,C=r.importNode,E={};try{E=j_(i).documentMode?i.documentMode:{}}catch(Be){}var O={};n.isSupported="function"==typeof b&&S&&void 0!==S.createHTMLDocument&&9!==E;var D=J_,T=K_,P=G_,j=Z_,M=Q_,L=X_,$=Y_,U=null,N=P_({},[].concat(tk(L_),tk($_),tk(U_),tk(F_),tk(z_))),F=null,B=P_({},[].concat(tk(q_),tk(V_),tk(H_),tk(W_))),z=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,V=null,H=!0,W=!0,J=!1,K=!1,G=!1,Z=!1,Y=!1,Q=!1,X=!1,ee=!1,te=!0,ne=!0,re=!1,ie={},se=null,ae=P_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),oe=null,le=P_({},["audio","video","img","source","image","track"]),ue=null,ce=P_({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),de="http://www.w3.org/1998/Math/MathML",pe="http://www.w3.org/2000/svg",he="http://www.w3.org/1999/xhtml",fe=he,me=!1,ve=void 0,ge=["application/xhtml+xml","text/html"],ye="text/html",be=void 0,we=null,xe=i.createElement("form"),_e=function(e){return e instanceof RegExp||e instanceof Function},ke=function(e){we&&we===e||(e&&"object"===(void 0===e?"undefined":ek(e))||(e={}),e=j_(e),U="ALLOWED_TAGS"in e?P_({},e.ALLOWED_TAGS):N,F="ALLOWED_ATTR"in e?P_({},e.ALLOWED_ATTR):B,ue="ADD_URI_SAFE_ATTR"in e?P_(j_(ce),e.ADD_URI_SAFE_ATTR):ce,oe="ADD_DATA_URI_TAGS"in e?P_(j_(le),e.ADD_DATA_URI_TAGS):le,se="FORBID_CONTENTS"in e?P_({},e.FORBID_CONTENTS):ae,q="FORBID_TAGS"in e?P_({},e.FORBID_TAGS):{},V="FORBID_ATTR"in e?P_({},e.FORBID_ATTR):{},ie="USE_PROFILES"in e&&e.USE_PROFILES,H=!1!==e.ALLOW_ARIA_ATTR,W=!1!==e.ALLOW_DATA_ATTR,J=e.ALLOW_UNKNOWN_PROTOCOLS||!1,K=e.SAFE_FOR_TEMPLATES||!1,G=e.WHOLE_DOCUMENT||!1,Q=e.RETURN_DOM||!1,X=e.RETURN_DOM_FRAGMENT||!1,ee=e.RETURN_TRUSTED_TYPE||!1,Y=e.FORCE_BODY||!1,te=!1!==e.SANITIZE_DOM,ne=!1!==e.KEEP_CONTENT,re=e.IN_PLACE||!1,$=e.ALLOWED_URI_REGEXP||$,fe=e.NAMESPACE||he,e.CUSTOM_ELEMENT_HANDLING&&_e(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&_e(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(z.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ve=ve=-1===ge.indexOf(e.PARSER_MEDIA_TYPE)?ye:e.PARSER_MEDIA_TYPE,be="application/xhtml+xml"===ve?function(e){return e}:R_,K&&(W=!1),X&&(Q=!0),ie&&(U=P_({},[].concat(tk(z_))),F=[],!0===ie.html&&(P_(U,L_),P_(F,q_)),!0===ie.svg&&(P_(U,$_),P_(F,V_),P_(F,W_)),!0===ie.svgFilters&&(P_(U,U_),P_(F,V_),P_(F,W_)),!0===ie.mathMl&&(P_(U,F_),P_(F,H_),P_(F,W_))),e.ADD_TAGS&&(U===N&&(U=j_(U)),P_(U,e.ADD_TAGS)),e.ADD_ATTR&&(F===B&&(F=j_(F)),P_(F,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&P_(ue,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(se===ae&&(se=j_(se)),P_(se,e.FORBID_CONTENTS)),ne&&(U["#text"]=!0),G&&P_(U,["html","head","body"]),U.table&&(P_(U,["tbody"]),delete q.tbody),m_&&m_(e),we=e)},Se=P_({},["mi","mo","mn","ms","mtext"]),Re=P_({},["foreignobject","desc","title","annotation-xml"]),Ae=P_({},$_);P_(Ae,U_),P_(Ae,N_);var Ie=P_({},F_);P_(Ie,B_);var Ce=function(e){var t=b(e);t&&t.tagName||(t={namespaceURI:he,tagName:"template"});var n=R_(e.tagName),r=R_(t.tagName);if(e.namespaceURI===pe)return t.namespaceURI===he?"svg"===n:t.namespaceURI===de?"svg"===n&&("annotation-xml"===r||Se[r]):Boolean(Ae[n]);if(e.namespaceURI===de)return t.namespaceURI===he?"math"===n:t.namespaceURI===pe?"math"===n&&Re[r]:Boolean(Ie[n]);if(e.namespaceURI===he){if(t.namespaceURI===pe&&!Re[r])return!1;if(t.namespaceURI===de&&!Se[r])return!1;var i=P_({},["title","style","font","a","script"]);return!Ie[n]&&(i[n]||!Ae[n])}return!1},Ee=function(e){S_(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(Be){try{e.outerHTML=_}catch(t){e.remove()}}},Oe=function(e,t){try{S_(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(Be){S_(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!F[e])if(Q||X)try{Ee(t)}catch(Be){}else try{t.setAttribute(e,"")}catch(Be){}},De=function(e){var t=void 0,n=void 0;if(Y)e="<remove></remove>"+e;else{var r=A_(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===ve&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var s=x?x.createHTML(e):e;if(fe===he)try{t=(new h).parseFromString(s,ve)}catch(Be){}if(!t||!t.documentElement){t=S.createDocument(fe,"template",null);try{t.documentElement.innerHTML=me?"":s}catch(Be){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(i.createTextNode(n),a.childNodes[0]||null),fe===he?I.call(t,G?"html":"body")[0]:G?t.documentElement:a},Te=function(e){return R.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},Pe=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},je=function(e){return"object"===(void 0===o?"undefined":ek(o))?e instanceof o:e&&"object"===(void 0===e?"undefined":ek(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Me=function(e,t,r){O[e]&&__(O[e],(function(e){e.call(n,t,r,we)}))},Le=function(e){var t=void 0;if(Me("beforeSanitizeElements",e,null),Pe(e))return Ee(e),!0;if(A_(e.nodeName,/[\u0080-\uFFFF]/))return Ee(e),!0;var r=be(e.nodeName);if(Me("uponSanitizeElement",e,{tagName:r,allowedTags:U}),!je(e.firstElementChild)&&(!je(e.content)||!je(e.content.firstElementChild))&&O_(/<[/\w]/g,e.innerHTML)&&O_(/<[/\w]/g,e.textContent))return Ee(e),!0;if("select"===r&&O_(/<template/i,e.innerHTML))return Ee(e),!0;if(!U[r]||q[r]){if(ne&&!se[r]){var i=b(e)||e.parentNode,s=y(e)||e.childNodes;if(s&&i)for(var a=s.length-1;a>=0;--a)i.insertBefore(v(s[a],!0),g(e))}if(!q[r]&&Ue(r)){if(z.tagNameCheck instanceof RegExp&&O_(z.tagNameCheck,r))return!1;if(z.tagNameCheck instanceof Function&&z.tagNameCheck(r))return!1}return Ee(e),!0}return e instanceof l&&!Ce(e)?(Ee(e),!0):"noscript"!==r&&"noembed"!==r||!O_(/<\/no(script|embed)/i,e.innerHTML)?(K&&3===e.nodeType&&(t=e.textContent,t=I_(t,D," "),t=I_(t,T," "),e.textContent!==t&&(S_(n.removed,{element:e.cloneNode()}),e.textContent=t)),Me("afterSanitizeElements",e,null),!1):(Ee(e),!0)},$e=function(e,t,n){if(te&&("id"===t||"name"===t)&&(n in i||n in xe))return!1;if(W&&!V[t]&&O_(P,t));else if(H&&O_(j,t));else if(!F[t]||V[t]){if(!(Ue(e)&&(z.tagNameCheck instanceof RegExp&&O_(z.tagNameCheck,e)||z.tagNameCheck instanceof Function&&z.tagNameCheck(e))&&(z.attributeNameCheck instanceof RegExp&&O_(z.attributeNameCheck,t)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(t))||"is"===t&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&O_(z.tagNameCheck,n)||z.tagNameCheck instanceof Function&&z.tagNameCheck(n))))return!1}else if(ue[t]);else if(O_($,I_(n,L,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==C_(n,"data:")||!oe[e]){if(J&&!O_(M,I_(n,L,"")));else if(n)return!1}else;return!0},Ue=function(e){return e.indexOf("-")>0},Ne=function(e){var t=void 0,r=void 0,i=void 0,s=void 0;Me("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:F};for(s=a.length;s--;){var l=t=a[s],u=l.name,c=l.namespaceURI;if(r=E_(t.value),i=be(u),o.attrName=i,o.attrValue=r,o.keepAttr=!0,o.forceKeepAttr=void 0,Me("uponSanitizeAttribute",e,o),r=o.attrValue,!o.forceKeepAttr&&(Oe(u,e),o.keepAttr))if(O_(/\/>/i,r))Oe(u,e);else{K&&(r=I_(r,D," "),r=I_(r,T," "));var d=be(e.nodeName);if($e(d,i,r))try{c?e.setAttributeNS(c,u,r):e.setAttribute(u,r),k_(n.removed)}catch(Be){}}}Me("afterSanitizeAttributes",e,null)}},Fe=function e(t){var n=void 0,r=Te(t);for(Me("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)Me("uponSanitizeShadowNode",n,null),Le(n)||(n.content instanceof s&&e(n.content),Ne(n));Me("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,i){var a=void 0,l=void 0,u=void 0,c=void 0,d=void 0;if((me=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!je(e)){if("function"!=typeof e.toString)throw D_("toString is not a function");if("string"!=typeof(e=e.toString()))throw D_("dirty is not a string, aborting")}if(!n.isSupported){if("object"===ek(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(je(e))return t.toStaticHTML(e.outerHTML)}return e}if(Z||ke(i),n.removed=[],"string"==typeof e&&(re=!1),re);else if(e instanceof o)1===(l=(a=De("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?a=l:a.appendChild(l);else{if(!Q&&!K&&!G&&-1===e.indexOf("<"))return x&&ee?x.createHTML(e):e;if(!(a=De(e)))return Q?null:_}a&&Y&&Ee(a.firstChild);for(var p=Te(re?e:a);u=p.nextNode();)3===u.nodeType&&u===c||Le(u)||(u.content instanceof s&&Fe(u.content),Ne(u),c=u);if(c=null,re)return e;if(Q){if(X)for(d=A.call(a.ownerDocument);a.firstChild;)d.appendChild(a.firstChild);else d=a;return F.shadowroot&&(d=C.call(r,d,!0)),d}var h=G?a.outerHTML:a.innerHTML;return K&&(h=I_(h,D," "),h=I_(h,T," ")),x&&ee?x.createHTML(h):h},n.setConfig=function(e){ke(e),Z=!0},n.clearConfig=function(){we=null,Z=!1},n.isValidAttribute=function(e,t,n){we||ke({});var r=be(e),i=be(t);return $e(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(O[e]=O[e]||[],S_(O[e],t))},n.removeHook=function(e){O[e]&&k_(O[e])},n.removeHooks=function(e){O[e]&&(O[e]=[])},n.removeAllHooks=function(){O={}},n}();function sk(e){return ik.sanitize(e,{ADD_ATTR:["target"]})}function ak(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let ok={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const lk=/[&<>"']/,uk=/[&<>"']/g,ck=/[<>"']|&(?!#?\w+;)/,dk=/[<>"']|&(?!#?\w+;)/g,pk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hk=e=>pk[e];function fk(e,t){if(t){if(lk.test(e))return e.replace(uk,hk)}else if(ck.test(e))return e.replace(dk,hk);return e}const mk=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function vk(e){return e.replace(mk,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const gk=/(^|[^\[])\^/g;function yk(e,t){e=e.source||e,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(gk,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n}const bk=/[^\w:]/g,wk=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function xk(e,t,n){if(e){let e;try{e=decodeURIComponent(vk(n)).replace(bk,"").toLowerCase()}catch(Wd){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!wk.test(n)&&(n=function(e,t){_k[" "+e]||(kk.test(e)?_k[" "+e]=e+"/":_k[" "+e]=Ek(e,"/",!0));const n=-1===(e=_k[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(Sk,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(Rk,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(Wd){return null}return n}const _k={},kk=/^[^:]+:\/*[^/]*$/,Sk=/^([^:]+:)[\s\S]*$/,Rk=/^([^:]+:\/*[^/]*)[\s\S]*$/;const Ak={exec:function(){}};function Ik(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Ck(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function Ek(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const s=e.charAt(r-i-1);if(s!==t||n){if(s===t||!n)break;i++}else i++}return e.substr(0,r-i)}function Ok(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Dk(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function Tk(e,t,n,r){const i=t.href,s=t.title?fk(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:i,title:s,text:a,tokens:r.inlineTokens(a,[])};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:s,text:fk(a)}}class Pk{constructor(e){this.options=e||ok}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Ek(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=Ek(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}const n={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,i,s,a,o,l,u,c,d,p,h,f=t[1].trim();const m=f.length>1,v={type:"list",raw:"",ordered:m,start:m?+f.slice(0,-1):"",loose:!1,items:[]};f=m?`\\d{1,9}\\${f.slice(-1)}`:`\\${f}`,this.options.pedantic&&(f=m?f:"[*+-]");const g=new RegExp(`^( {0,3}${f})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(h=!1,t=g.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),u=t[2].split("\n",1)[0],c=e.split("\n",1)[0],this.options.pedantic?(s=2,p=u.trimLeft()):(s=t[2].search(/[^ ]/),s=s>4?1:s,p=u.slice(s),s+=t[1].length),o=!1,!u&&/^ *$/.test(c)&&(n+=c+"\n",e=e.substring(c.length+1),h=!0),!h){const t=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(d=e.split("\n",1)[0],u=d,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!t.test(u));){if(u.search(/[^ ]/)>=s||!u.trim())p+="\n"+u.slice(s);else{if(o)break;p+="\n"+u}o||u.trim()||(o=!0),n+=d+"\n",e=e.substring(d.length+1)}}v.loose||(l?v.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(p),r&&(i="[ ] "!==r[0],p=p.replace(/^\[[ xX]\] +/,""))),v.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:p}),v.raw+=n}v.items[v.items.length-1].raw=n.trimRight(),v.items[v.items.length-1].text=p.trimRight(),v.raw=v.raw.trimRight();const y=v.items.length;for(a=0;a<y;a++){this.lexer.state.top=!1,v.items[a].tokens=this.lexer.blockTokens(v.items[a].text,[]);const e=v.items[a].tokens.filter((e=>"space"===e.type)),t=e.every((e=>{const t=e.raw.split("");let n=0;for(const r of t)if("\n"===r&&(n+=1),n>1)return!0;return!1}));!v.loose&&e.length&&t&&(v.loose=!0,v.items[a].loose=!0)}return v}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(e.type="paragraph",e.text=this.options.sanitizer?this.options.sanitizer(t[0]):fk(t[0]),e.tokens=[],this.lexer.inline(e.text,e.tokens)),e}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:Ck(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,r,i,s,a=e.align.length;for(n=0;n<a;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(a=e.rows.length,n=0;n<a;n++)e.rows[n]=Ck(e.rows[n],e.header.length).map((e=>({text:e})));for(a=e.header.length,r=0;r<a;r++)e.header[r].tokens=[],this.lexer.inlineTokens(e.header[r].text,e.header[r].tokens);for(a=e.rows.length,r=0;r<a;r++)for(s=e.rows[r],i=0;i<s.length;i++)s[i].tokens=[],this.lexer.inlineTokens(s[i].text,s[i].tokens);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:fk(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):fk(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=Ek(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),Tk(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return Tk(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const i=r[1]||r[2]||"";if(!i||i&&(""===n||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let i,s,a=n,o=0;const l="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(s=i.length,r[3]||r[4]){a+=s;continue}if((r[5]||r[6])&&n%3&&!((n+s)%3)){o+=s;continue}if(a-=s,a>0)continue;if(s=Math.min(s,s+a+o),Math.min(n,s)%2){const t=e.slice(1,n+r.index+s);return{type:"em",raw:e.slice(0,n+r.index+s+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,n+r.index+s-1);return{type:"strong",raw:e.slice(0,n+r.index+s+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=fk(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;return"@"===n[2]?(e=fk(this.options.mangle?t(n[1]):n[1]),r="mailto:"+e):(e=fk(n[1]),r=e),{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=fk(this.options.mangle?t(n[0]):n[0]),r="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=fk(n[0]),r="www."===n[1]?"http://"+e:e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):fk(n[0]):n[0]:fk(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:e}}}}const jk={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ak,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};jk.def=yk(jk.def).replace("label",jk._label).replace("title",jk._title).getRegex(),jk.bullet=/(?:[*+-]|\d{1,9}[.)])/,jk.listItemStart=yk(/^( *)(bull) */).replace("bull",jk.bullet).getRegex(),jk.list=yk(jk.list).replace(/bull/g,jk.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+jk.def.source+")").getRegex(),jk._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jk._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,jk.html=yk(jk.html,"i").replace("comment",jk._comment).replace("tag",jk._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),jk.paragraph=yk(jk._paragraph).replace("hr",jk.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jk._tag).getRegex(),jk.blockquote=yk(jk.blockquote).replace("paragraph",jk.paragraph).getRegex(),jk.normal=Ik({},jk),jk.gfm=Ik({},jk.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),jk.gfm.table=yk(jk.gfm.table).replace("hr",jk.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jk._tag).getRegex(),jk.gfm.paragraph=yk(jk._paragraph).replace("hr",jk.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",jk.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jk._tag).getRegex(),jk.pedantic=Ik({},jk.normal,{html:yk(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",jk._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ak,paragraph:yk(jk.normal._paragraph).replace("hr",jk.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",jk.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Mk={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ak,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ak,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function Lk(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function $k(e){let t,n,r="";const i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}Mk._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",Mk.punctuation=yk(Mk.punctuation).replace(/punctuation/g,Mk._punctuation).getRegex(),Mk.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Mk.escapedEmSt=/\\\*|\\_/g,Mk._comment=yk(jk._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Mk.emStrong.lDelim=yk(Mk.emStrong.lDelim).replace(/punct/g,Mk._punctuation).getRegex(),Mk.emStrong.rDelimAst=yk(Mk.emStrong.rDelimAst,"g").replace(/punct/g,Mk._punctuation).getRegex(),Mk.emStrong.rDelimUnd=yk(Mk.emStrong.rDelimUnd,"g").replace(/punct/g,Mk._punctuation).getRegex(),Mk._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Mk._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Mk._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Mk.autolink=yk(Mk.autolink).replace("scheme",Mk._scheme).replace("email",Mk._email).getRegex(),Mk._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Mk.tag=yk(Mk.tag).replace("comment",Mk._comment).replace("attribute",Mk._attribute).getRegex(),Mk._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Mk._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Mk._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Mk.link=yk(Mk.link).replace("label",Mk._label).replace("href",Mk._href).replace("title",Mk._title).getRegex(),Mk.reflink=yk(Mk.reflink).replace("label",Mk._label).replace("ref",jk._label).getRegex(),Mk.nolink=yk(Mk.nolink).replace("ref",jk._label).getRegex(),Mk.reflinkSearch=yk(Mk.reflinkSearch,"g").replace("reflink",Mk.reflink).replace("nolink",Mk.nolink).getRegex(),Mk.normal=Ik({},Mk),Mk.pedantic=Ik({},Mk.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:yk(/^!?\[(label)\]\((.*?)\)/).replace("label",Mk._label).getRegex(),reflink:yk(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Mk._label).getRegex()}),Mk.gfm=Ik({},Mk.normal,{escape:yk(Mk.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Mk.gfm.url=yk(Mk.gfm.url,"i").replace("email",Mk.gfm._extended_email).getRegex(),Mk.breaks=Ik({},Mk.gfm,{br:yk(Mk.br).replace("{2,}","*").getRegex(),text:yk(Mk.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class Uk{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ok,this.options.tokenizer=this.options.tokenizer||new Pk,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:jk.normal,inline:Mk.normal};this.options.pedantic?(t.block=jk.pedantic,t.inline=Mk.pedantic):this.options.gfm&&(t.block=jk.gfm,this.options.breaks?t.inline=Mk.breaks:t.inline=Mk.gfm),this.tokenizer.rules=t}static get rules(){return{block:jk,inline:Mk}}static lex(e,t){return new Uk(t).lex(e)}static lexInline(e,t){return new Uk(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,r,i,s;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))r=t[t.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),s=i.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let n,r,i,s,a,o,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,s.index)+"["+Dk("a",s[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,s.index)+"["+Dk("a",s[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,s.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(a||(o=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,o))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,$k))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,$k))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i,Lk))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(o=n.raw.slice(-1)),a=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class Nk{constructor(e){this.options=e||ok}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+fk(r,!0)+'">'+(n?e:fk(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:fk(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=xk(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+fk(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=xk(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class Fk{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class Bk{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++,n=e+"-"+r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}}class zk{constructor(e){this.options=e||ok,this.options.renderer=this.options.renderer||new Nk,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Fk,this.slugger=new Bk}static parse(e,t){return new zk(t).parse(e)}static parseInline(e,t){return new zk(t).parseInline(e)}parse(e,t=!0){let n,r,i,s,a,o,l,u,c,d,p,h,f,m,v,g,y,b,w,x="";const _=e.length;for(n=0;n<_;n++)if(d=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(w=this.options.extensions.renderers[d.type].call({parser:this},d),!1!==w||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)))x+=w||"";else switch(d.type){case"space":continue;case"hr":x+=this.renderer.hr();continue;case"heading":x+=this.renderer.heading(this.parseInline(d.tokens),d.depth,vk(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":x+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(u="",l="",s=d.header.length,r=0;r<s;r++)l+=this.renderer.tablecell(this.parseInline(d.header[r].tokens),{header:!0,align:d.align[r]});for(u+=this.renderer.tablerow(l),c="",s=d.rows.length,r=0;r<s;r++){for(o=d.rows[r],l="",a=o.length,i=0;i<a;i++)l+=this.renderer.tablecell(this.parseInline(o[i].tokens),{header:!1,align:d.align[i]});c+=this.renderer.tablerow(l)}x+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(d.tokens),x+=this.renderer.blockquote(c);continue;case"list":for(p=d.ordered,h=d.start,f=d.loose,s=d.items.length,c="",r=0;r<s;r++)v=d.items[r],g=v.checked,y=v.task,m="",v.task&&(b=this.renderer.checkbox(g),f?v.tokens.length>0&&"paragraph"===v.tokens[0].type?(v.tokens[0].text=b+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&"text"===v.tokens[0].tokens[0].type&&(v.tokens[0].tokens[0].text=b+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:b}):m+=b),m+=this.parse(v.tokens,f),c+=this.renderer.listitem(m,y,g);x+=this.renderer.list(c,p,h);continue;case"html":x+=this.renderer.html(d.text);continue;case"paragraph":x+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(c=d.tokens?this.parseInline(d.tokens):d.text;n+1<_&&"text"===e[n+1].type;)d=e[++n],c+="\n"+(d.tokens?this.parseInline(d.tokens):d.text);x+=t?this.renderer.paragraph(c):c;continue;default:{const e='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return x}parseInline(e,t){t=t||this.renderer;let n,r,i,s="";const a=e.length;for(n=0;n<a;n++)if(r=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))s+=i||"";else switch(r.type){case"escape":case"text":s+=t.text(r.text);break;case"html":s+=t.html(r.text);break;case"link":s+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":s+=t.image(r.href,r.title,r.text);break;case"strong":s+=t.strong(this.parseInline(r.tokens,t));break;case"em":s+=t.em(this.parseInline(r.tokens,t));break;case"codespan":s+=t.codespan(r.text);break;case"br":s+=t.br();break;case"del":s+=t.del(this.parseInline(r.tokens,t));break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return s}}function qk(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),Ok(t=Ik({},qk.defaults,t||{})),n){const r=t.highlight;let i;try{i=Uk.lex(e,t)}catch(Wd){return n(Wd)}const s=function(e){let s;if(!e)try{t.walkTokens&&qk.walkTokens(i,t.walkTokens),s=zk.parse(i,t)}catch(Wd){e=Wd}return t.highlight=r,e?n(e):n(null,s)};if(!r||r.length<3)return s();if(delete t.highlight,!i.length)return s();let a=0;return qk.walkTokens(i,(function(e){"code"===e.type&&(a++,setTimeout((()=>{r(e.text,e.lang,(function(t,n){if(t)return s(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),a--,0===a&&s()}))}),0))})),void(0===a&&s())}try{const n=Uk.lex(e,t);return t.walkTokens&&qk.walkTokens(n,t.walkTokens),zk.parse(n,t)}catch(Wd){if(Wd.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+fk(Wd.message+"",!0)+"</pre>";throw Wd}}qk.options=qk.setOptions=function(e){var t;return Ik(qk.defaults,e),t=qk.defaults,ok=t,qk},qk.getDefaults=ak,qk.defaults=ok,qk.use=function(...e){const t=Ik({},...e),n=qk.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach((e=>{if(e.extensions&&(r=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=n.renderers?n.renderers[e.name]:null;n.renderers[e.name]=t?function(...n){let r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");n[e.level]?n[e.level].unshift(e.tokenizer):n[e.level]=[e.tokenizer],e.start&&("block"===e.level?n.startBlock?n.startBlock.push(e.start):n.startBlock=[e.start]:"inline"===e.level&&(n.startInline?n.startInline.push(e.start):n.startInline=[e.start]))}e.childTokens&&(n.childTokens[e.name]=e.childTokens)}))),e.renderer){const n=qk.defaults.renderer||new Nk;for(const t in e.renderer){const r=n[t];n[t]=(...i)=>{let s=e.renderer[t].apply(n,i);return!1===s&&(s=r.apply(n,i)),s}}t.renderer=n}if(e.tokenizer){const n=qk.defaults.tokenizer||new Pk;for(const t in e.tokenizer){const r=n[t];n[t]=(...i)=>{let s=e.tokenizer[t].apply(n,i);return!1===s&&(s=r.apply(n,i)),s}}t.tokenizer=n}if(e.walkTokens){const n=qk.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens.call(this,t),n&&n.call(this,t)}}r&&(t.extensions=n),qk.setOptions(t)}))},qk.walkTokens=function(e,t){for(const n of e)switch(t.call(qk,n),n.type){case"table":for(const e of n.header)qk.walkTokens(e.tokens,t);for(const e of n.rows)for(const n of e)qk.walkTokens(n.tokens,t);break;case"list":qk.walkTokens(n.items,t);break;default:qk.defaults.extensions&&qk.defaults.extensions.childTokens&&qk.defaults.extensions.childTokens[n.type]?qk.defaults.extensions.childTokens[n.type].forEach((function(e){qk.walkTokens(n[e],t)})):n.tokens&&qk.walkTokens(n.tokens,t)}},qk.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");Ok(t=Ik({},qk.defaults,t||{}));try{const n=Uk.lexInline(e,t);return t.walkTokens&&qk.walkTokens(n,t.walkTokens),zk.parseInline(n,t)}catch(Wd){if(Wd.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+fk(Wd.message+"",!0)+"</pre>";throw Wd}},qk.Parser=zk,qk.parser=zk.parse,qk.Renderer=Nk,qk.TextRenderer=Fk,qk.Lexer=Uk,qk.lexer=Uk.lex,qk.Tokenizer=Pk,qk.Slugger=Bk,qk.parse=qk,qk.options,qk.setOptions,qk.use,qk.walkTokens,qk.parseInline,zk.parse,Uk.lex;const Vk=["topLeft","topRight","bottomRight","bottomLeft"];function Hk(e={}){const t={min:50,max:150,topLeft:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,...e};return K(2).map((()=>Vk.map((e=>function(e,t){const{min:n,max:r,...i}=t;return i[e]?`${G(n,r)}px`:"0"}(e,t))).join(" "))).join(" / ")}const Wk={mounted(e,{value:t}){!1!==t&&(!0!==t&&t||(t={}),e.style.borderRadius=Hk(t))}},Jk=Object.freeze(Object.defineProperty({__proto__:null,sortedCorners:Vk,randomWobblyBorderRadius:Hk,default:Wk},Symbol.toStringTag,{value:"Module"}));function Kk(e){var t,n,r;return{url:null!=(t=Gk(e,"url"))?t:"#",classes:null!=(n=Gk(e,"class"))?n:"",color:null!=(r=Gk(e,"color"))?r:Vx.Primary}}function Gk(e,t){var n;return null==(n=e.match(new RegExp(`${t}="([^"]+)"`)))?void 0:n[1]}function Zk(e){return e.split("\n").join(" ")}function Yk({url:e,text:t,title:n,color:r,classes:i}){let s=!e.startsWith("/"),a=!1;const o=Hk(),l=`${function(e){switch(e){case Vx.Solid:return"text-brand-solid-700 focus-visible:ring-brand-solid-100 focus-visible:bg-brand-solid-100";case Vx.Danger:return"text-red-700 focus-visible:ring-red-100 focus-visible:bg-red-100";default:return"text-primary-700 focus-visible:ring-primary-200 focus-visible:bg-primary-200"}}(r)} ${null!=i?i:""}`;if(e.startsWith("action:")){return Zk(`<button\n            type="button"\n            style="border-radius:${o}" ${n&&`title="${n}"`||""}\n            class="${"no-underline hover:underline focus-visible:outline-none focus-visible:ring-2"} ${l}"\n            data-markdown-action="${e.substring("action:".length)}"\n        >${t}</button>`)}return e.startsWith("blank:")&&(s=!0,a=!0,e=e.substring("blank:".length)),Zk(`<a\n        href="${e}"\n        style="border-radius:${o}" ${n&&`title="${n}"`||""}\n        ${s?'target="_blank"':""}\n        ${a?'data-disable-auto-linking="true"':""}\n        class="core-link no-underline hover:underline focus-visible:outline-none focus-visible:ring-2 ${l}"\n    >${t}</a>`)}function Qk(e){return qk(function(e){const t=Z(e,/<CoreLink([^>]*)>([^<]+)<\/CoreLink>/g);for(const[n,r,i]of t){const{url:t,classes:s,color:a}=Kk(r);e=e.replace(n,Yk({url:t,text:i,color:a,classes:s}))}return e}(e))}const Xk=ti({__name:"CoreMarkdown",props:{text:sx(),actions:ex((()=>({}))),tag:ax("div"),raw:Zw(),heading:Zw(),inline:Zw(),autoLink:ax()},setup(e){const t=()=>ma(e.tag,{class:e.raw||"prose",innerHTML:sk(n.value),onClick:r}),n=pa((()=>{const t=Qk(e.text);return e.heading?t.replace("<p>","<span>").replace("</p>","</span>"):e.inline?t.replace("<p>","").replace("</p>",""):t}));async function r(t){var n,r;const{target:i}=t;Y(i,HTMLElement)&&(i.dataset.markdownAction?null==(r=(n=e.actions)[i.dataset.markdownAction])||r.call(n):async function(t,n){if(t.dataset.disableAutoLinking||!Y(t,HTMLAnchorElement))return;const r=u_.captureLink(t.href,e.autoLink?`${e.autoLink}, default`:"default");if(r instanceof Promise)return void async function(e,t,n){e.preventDefault();const r=await n;if(!r)return void("_blank"===t.target?window.open(t.href):location.href=t.href);await r()}(n,t,r);await async function(e,t){if(!t)return;e.preventDefault(),await t()}(n,r)}(i,t))}return(e,n)=>(Os(),Ms(t))}}),eS={key:0,class:"text-xl font-semibold"},tS={class:"flex flex-row-reverse items-end space-x-2 space-x-reverse mt-4"},nS=ti({__name:"ConfirmModal",props:{title:ax(),message:ax(),acceptText:ax(),acceptColor:Yw(Vx),cancelText:ax(),showCancel:Zw(!0)},setup:e=>(t,n)=>{const r=Xk,i=Wx,s=l_,a=Ii("initial-focus");return Os(),Ms(s,{cancellable:!1},{default:Tr((({close:n})=>[e.title?(Os(),js("h2",eS,He(e.title),1)):Js("",!0),zs(r,{class:"mt-2",text:e.message||t.$t("ui.confirm")},null,8,["text"]),Bs("div",tS,[wi((Os(),Ms(i,{color:e.acceptColor,onClick:e=>n(!0)},{default:Tr((()=>[Hs(He(e.acceptText||t.$t("ui.confirm_accept")),1)])),_:2},1032,["color","onClick"])),[[a]]),e.showCancel?(Os(),Ms(i,{key:0,clear:"",onClick:e=>n(!1)},{default:Tr((()=>[Hs(He(e.cancelText||t.$t("ui.confirm_cancel")),1)])),_:2},1032,["onClick"])):Js("",!0)])])),_:1})}}),rS=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},iS={class:"relative flex flex-col flex-grow items-center justify-center w-full h-full max-w-content print:h-auto print:block"};const sS=rS({},[["render",function(e,t){return Os(),js("main",iS,[Ti(e.$slots,"default")])}]]),aS={width:"1.2em",height:"0.4229226361031519em",viewBox:"0 0 1047 369"},oS=[Bs("path",{"fill-rule":"evenodd",d:"M757.88 83.95c-.24 2.05-1.1 3.9-2.59 5.55-1.49 1.65-2.35 3.5-2.59 5.55-.39 3.33-1.55 5.54-3.5 6.61-3.98 2.92-19.78 3.56-47.41 1.92l-20.57-.82-1.34 11.54c-.86 7.44-.27 11.28 1.79 11.52.26.03.64.07 1.15.13.54-.2 1.07-.27 1.58-.21 6.02-.34 19.55-.47 40.6-.37 21.33-.13 34.58-.03 39.74.31l2.69.31c10.77 1.25 17.25 7.07 19.43 17.46.61 3.71.87 5.95.78 6.72-.27 2.31-2 6.01-5.18 11.1-3.82 6.06-6.5 9-8.04 8.82l-.77-.09-1.15-.13c-4.1-.47-14.42-.11-30.93 1.1-16.49.95-26.87 1.96-31.16 3.02-2.94.7-9.47.98-19.6.85-1.31.11-2.88.19-4.71.24-1.54-.18-2.69-.31-3.46-.4-.51-.06-1.3-.02-2.35.12-1.06.14-1.74.45-2.06.93-.32.48-.66 1.22-1.04 2.22-.35.74-.61 1.88-.79 3.42-.15 1.28-.23 3.09-.24 5.43.02 2.08-.07 5.06-.25 8.94.1 3.65.1 7.03 0 10.14l.02 23.4 17.57 3.2c19.06 3.77 32.69 7.29 40.89 10.58 8.23 3.03 14.63 7.28 19.19 12.75 2.53 2.89 7.51 6.98 14.96 12.26 5.77 4.05 9.62 7.87 11.54 11.47 2.18 3.63 2.91 8.53 2.2 14.68-.59 5.13-1.33 9.21-2.19 12.22-2.88 11.37-4.47 17.29-4.79 17.77-.92 1.19-2.4 1.67-4.46 1.43-4.36-.5-9.45-3.69-15.27-9.57-28.67-28.53-52.37-43.89-71.1-46.05-3.33-.39-5.8-.41-7.4-.08-2.65.47-4.43 1.18-5.31 2.11-.63.97-1.11 2.86-1.44 5.68-1.2 5.84-2.57 9.84-4.12 12-1.9 2.9-3.05 6.15-3.47 9.74-.39 3.33-4.33 10.42-11.82 21.25-7.24 10.86-13.65 19.09-19.23 24.68-8.76 8.34-23.06 12.8-42.88 13.37-4.68-.02-7.78-.12-9.32-.3-4.62-.53-10.53-2.26-17.73-5.17-9.45-3.69-15.76-7.54-18.94-11.55-3.18-4.01-5.61-11.05-7.3-21.12-1.67-7.99-2.29-13.91-1.84-17.76.12-1.03 1.14-5.33 3.05-12.9 2.32-8.83 5.25-16.16 8.78-21.99 3.79-5.8 9.78-12.65 17.97-20.54 7.33-7.21 17.24-13.08 29.73-17.62 20.65-7.75 36.24-11.01 46.76-9.8l5.77.67 2.33-23.52 1.9-23.18-12.99-2.28-4.23-.49c-7.44-.86-15.83-.27-25.16 1.77-13.59 2.85-25.38 3.69-35.39 2.53-5.64-.65-13.75-2.5-24.32-5.54-10.02-3.24-16.97-6.12-20.84-8.65-3.61-2.5-5.19-5.67-4.75-9.52.12-1.03.55-2.54 1.3-4.53 2.37-7 6.44-11.86 12.22-14.57 5.77-2.71 14.78-4.14 27.01-4.28 7.27.06 14.05-.06 20.32-.38 6.28-.31 14.6-.39 24.98-.23 19.73.2 31.04.21 33.92.03 2.91-.44 4.54-2.2 4.9-5.28.5-4.36.58-8.38.23-12.06-.25-2.37-.71-3.98-1.39-4.84-.68-.86-2.69-1.48-6.02-1.87-4.36-.5-16.29-.72-35.8-.63-28.92.55-50.43.01-64.54-1.62-3.59-.42-6.38-1-8.38-1.75-2.48-1.07-4.53-3.51-6.17-7.34-1.61-4.09-2.2-7.92-1.79-11.52.59-5.13 5.05-9.94 13.37-14.44 8.58-4.47 18.1-7 28.57-7.61 22.02-1.61 42.27-1.35 60.74.79 6.93.8 10.54-.08 10.83-2.65.36-3.08-.24-6.92-1.79-11.52-1.26-4.83-2.7-8.11-4.32-9.86-2.07-2.32-2.99-4.51-2.75-6.56.06-.51.55-2.54 1.48-6.07 1.48-6.07 4.97-10.34 10.45-12.83 4.43-2.35 9.06-4.15 13.88-5.41 4-.84 6.38-1.21 7.15-1.12 1.03.12 2.67 1.61 4.94 4.47 1.76 2.8 3.4 7.67 4.94 14.61 1.82 6.71 2.54 11.73 2.16 15.07-.36 3.08.97 6.22 3.98 9.43 2.04 2.58 4.09 3.98 6.14 4.22 1.54.18 4.15.09 7.83-.26 14.5-1.7 25.59-2.11 33.29-1.22 4.62.53 10.7 1.89 18.25 4.06 11.08 3.1 17.67 5.68 19.77 7.75 1.39 1.46 1.83 4.37 1.33 8.73s-1.44 6.85-2.81 7.47c-1.37.62-2.25 2.6-2.64 5.93zM634.86 270.93c.4-1.25.71-2.78.92-4.57.18-1.54-.25-2.37-1.27-2.49-1.03-.12-3.42.38-7.19 1.51-12.88 3.45-23.07 8.38-30.57 14.79-5.15 4.08-9.14 5.96-11.96 5.63-2.57-.3-5.32 1.07-8.27 4.11-2.69 3.07-4.69 6.87-6 11.39-.35.74-.61 1.88-.79 3.42-.27 2.31 1.59 5.38 5.56 9.22 3.52 3.27 6.69 5.06 9.51 5.39 2.05.24 3.86.32 5.43.24 12.01-.43 21.32-4.55 27.95-12.36 2.12-2.61 4.94-7.88 8.46-15.79 3.8-8.14 6.54-14.97 8.22-20.5zM990.6 56.85c3.14-2.4 7.36-3.26 12.67-2.56 5.54.73 9.63 2.68 12.26 5.85.6.78 1.82 2.24 3.65 4.36 2.06 2.15 3.4 3.62 4 4.4 5.36 5.64 10.54 19.83 15.52 42.57 5.37 25.14 7.45 42.33 6.23 51.56-.61 4.62-1.88 7.97-3.8 10.07-7.25 8.67-14.72 12.74-22.4 12.19-5.08-.67-8.87-3.99-11.37-9.96-2.5-5.97-5.13-18.06-7.89-36.28-1.21-8.62-3.37-16.3-6.47-23.05-2.19-4.75-3.86-9.91-5.01-15.46-1.12-5.78-2.15-10.38-3.11-13.8-1.87-5.41-2.57-9.85-2.12-13.32.27-2.08.6-3.68.99-4.8 1.66-5.42 3.94-9.35 6.84-11.78zm-86.13 174.66c-.18 1.39-.2 4.2-.06 8.45.17 4.02 1.07 10.59 2.68 19.73 1.84 9.17 3.34 13.83 4.5 13.98 1.39.18 4.22-2.61 8.51-8.39 4.32-6.01 7.36-11.24 9.12-15.71 1.41-3.57 2.64-5.76 3.69-6.56 1.05-.8 3.72-1.51 8.03-2.11 4.8-.78 8.12-1.04 9.97-.8.23.03.56.19.99.48l.35.05c1.96 1.2 4.06 5.7 6.32 13.52 2.83 8.83 3.84 16.25 3.05 22.25-.85 6.46-4.03 12.74-9.53 18.82-14.55 15.93-28.74 24.63-42.56 26.09-5.03.74-9.05.92-12.05.52-3.69-.49-8.88-3.05-15.54-7.69-7.99-5.28-13.38-11.63-16.16-19.05-2.75-7.64-4.67-20.7-5.75-39.16-.54-10.17 1.21-30.49 5.23-60.97 2.01-15.24 4-27.66 5.98-37.26 5.74-27.43 12.92-44.45 21.54-51.06 3.92-3.01 7.03-4.36 9.34-4.05 3 .4 6.87 2.2 11.62 5.41 4.74 3.21 7.57 5.82 8.48 7.81 1.53 4.43 1.58 12.07.14 22.92-1.49 11.31-4.15 23.41-7.96 36.3-3.72 12.19-6.06 21.87-7 29.02-.98 7.39-2.68 25.6-2.92 27.45zM345.99 31.16c23.54.58 51.84 1.89 84.9 3.93 32.62 2.02 53 4.37 61.13 7.05 5.11 2.06 7.43 7.01 6.94 14.84-.54 8.7-2.66 18.39-6.38 29.08-4.21 11.53-7.96 26.36-11.26 44.49-5.9 31.94-18.71 62.59-38.42 91.94-11.54 17.19-25.87 33.55-42.98 49.08-17.09 15.1-33.05 26.12-47.89 33.06L329.12 315l-3.17 19.45c-2.57 13.38-5.9 21.25-9.97 23.62-5.43 3.16-20.59 4.62-45.46 4.4-25.77.15-42.2 1.1-49.3 2.85-6.69 2.21-20.25 2.68-40.69 1.42-18.7-1.16-29.07-2.89-31.12-5.2-2.04-2.31-3.03-11.1-2.96-26.38l.11-22.92-25.62-19.92c-16.24-12.79-34.55-30.95-54.92-54.48-20.38-23.53-33.63-42.25-39.76-56.16-6.92-15.27-12.88-35.29-17.9-60.05-4.99-25.2-7.05-44.97-6.16-59.32.97-15.66 2.4-24.74 4.3-27.24 3.8-5 18.77-6.92 44.89-5.74 17.4 1.07 52.72 1.73 105.98 1.96 53.28-.2 82.79-.78 88.52-1.74 5.3-.98 38.67-.45 100.1 1.6zM234.44 53.63c-2.78 2-16.19 3.69-40.24 5.08-6.77.38-12.33 1.35-16.69 2.94-2.93 1.28-5.62 3.52-8.08 6.72-2.43 2.96-3.84 6.16-4.24 9.59-.32 2.75 1.22 6.52 4.6 11.31 3.41 4.57 6.38 7 8.89 7.29 8.69 1.01 23.8.67 45.33-1.01 21.75-1.65 35.18-3.46 40.28-5.42 1.96-.93 5.49-1.34 10.57-1.21 8.34.04 14.69-2.7 19.04-8.23 2.71-3.4 4.27-6.81 4.66-10.24.58-5.03-1.99-9.85-7.72-14.46-3.4-2.71-8.75-4.49-16.08-5.34-7.55-.87-15.55-.87-24 0-9.36.77-14.81 1.76-16.34 2.98zm-24.75 72.6c-1.79 1.42-3.37 2.04-4.74 1.89-.92-.11-2.39.65-4.44 2.27-2.04 1.62-4.55 2.26-7.53 1.91-3.89-.45-8.59 1.09-14.1 4.63-5.28 3.56-9.38 7.96-12.31 13.18-3.46 5.86-5.31 9.82-5.55 11.88-.21 1.83.6 4.82 2.44 8.98 3.9 8.34 10.2 13.01 18.9 14.01 12.58 1.46 29.16-4.51 49.72-17.89 10.03-6.49 17.33-9.47 21.9-8.94 2.75.32 6.4 1.78 10.97 4.4 6.49 4 10.81 7.74 12.96 11.24 2.37 3.52 3.23 8.14 2.57 13.86-.82 7.09-2.71 13.37-5.66 18.82-2.72 5.48-10.64 18.82-23.76 40.03-5.69 9.08-10.7 15.34-15.04 18.78-4.11 3.47-10.27 6.58-18.47 9.34-6.72 2-11.35 3.9-13.88 5.7-2.53 1.79-3.96 4.18-4.31 7.15-.26 2.29-.26 4.26.01 5.91.95 9.85 4.18 17.99 9.69 24.42 2.63 3.32 5.78 5.19 9.44 5.61 9.15 1.06 26.32-10.05 51.51-33.34 13.21-11.92 19.94-19.02 20.21-21.31.24-2.06 2.44-6.09 6.62-12.1 9.34-12.6 15.84-29.7 19.51-51.3 1.41-8.18 2.21-13.08 2.4-14.68.69-5.95.49-13.27-.58-21.98-1.23-9.42-3.51-16.75-6.84-22.01-3.1-5.23-8.52-10.49-16.26-15.79l-11.6-7.95-23.34-2.7c-4.35-.5-7.91-.8-10.68-.89-2.75-.32-5.05-.47-6.9-.45-1.83-.21-3.69-.2-5.57.05-1.86.02-3.27.2-4.24.55-.71.15-2.38.54-5 1.16-2.37.42-4.39.88-6.07 1.38-5.68.97-9.66 2.36-11.96 4.18z"},null,-1)];const lS={name:"app-umai",render:function(e,t){return Os(),js("svg",aS,oS)}},uS=(...e)=>Vu.translate(...e),cS={class:"text-red-600 mt-2 text-2xl font-medium"},dS=ti({__name:"ErrorReport",props:{report:ix()},setup(e){const t=pa((()=>e.report.description===uS("errors.unsupportedBrowser_indexedDB")));return(n,r)=>{const i=lS,s=Xk,a=Wx,o=sS;return Os(),Ms(o,null,{default:Tr((()=>[zs(i,{class:"h-auto w-[250px] max-w-[60vw] fill-red-600","aria-hidden":"true"}),Bs("h1",cS,He(e.report.title),1),e.report.description?(Os(),Ms(s,{key:0,text:e.report.description,class:"text-center mt-4"},null,8,["text"])):Js("",!0),t.value?(Os(),js(Ss,{key:1},[n.$browser.isFirefox?(Os(),Ms(s,{key:0,text:n.$t("errors.unsupportedBrowser_indexedDBHelpFirefox"),class:"mt-1"},null,8,["text"])):Js("",!0),zs(a,{url:"https://caniuse.com/#feat=indexeddb",color:"danger",class:"mt-3"},{default:Tr((()=>[Hs(He(n.$t("errors.unsupportedBrowser_indexedDBHelp")),1)])),_:1})],64)):Js("",!0)])),_:1})}}}),pS={class:"fixed inset-0 bg-dark-overlay flex items-center justify-center z-10"},hS={class:"bg-white p-4 rounded-md"},fS=ti({__name:"LoadingModal",props:{text:ax("Loading...")},setup:e=>(t,n)=>(Os(),js("div",pS,[Bs("div",hS,He(e.text),1)]))}),mS=ti({__name:"MarkdownModal",props:{title:ax(),content:sx()},setup:e=>(t,n)=>{const r=Xk,i=l_;return Os(),Ms(i,{title:e.title},{default:Tr((()=>[zs(r,{text:e.content},null,8,["text"])])),_:1},8,["title"])}}),vS=ti({__name:"CoreLink",props:{color:Yw(Vx),secondary:Zw()},setup(e){const t={[Vx.Primary]:{text:"text-primary-700",hoverText:"hover:text-primary-700",focusVisibleRing:"focus-visible:ring-primary-200",focusVisibleBackground:"focus-visible:bg-primary-200"},[Vx.Solid]:{text:"text-brand-solid-700",hoverText:"hover:text-brand-solid-700",focusVisibleRing:"focus-visible:ring-brand-solid-100",focusVisibleBackground:"focus-visible:bg-brand-solid-100"},[Vx.Danger]:{text:"text-red-700",hoverText:"hover:text-red-700",focusVisibleRing:"focus-visible:ring-red-100",focusVisibleBackground:"focus-visible:bg-red-100"}},n=pa((()=>{const n=t[e.color];return(e.secondary?["text-gray-700",n.hoverText,n.focusVisibleBackground,n.focusVisibleRing]:["hover:underline",n.text,n.focusVisibleBackground,n.focusVisibleRing]).join(" ")}));return(e,t)=>{const r=Si("HeadlessLink"),i=Ii("wobbly-border");return wi((Os(),Ms(r,{class:Fe(["core-link inline-block focus-visible:outline-none focus-visible:ring-4",n.value])},{default:Tr((()=>[Ti(e.$slots,"default")])),_:3},8,["class"])),[[i]])}}}),gS={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},yS=[Bs("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[Bs("path",{d:"M11.026 5.232a1 1 0 0 1 1.409.128l3.333 4a1 1 0 0 1-1.536 1.28l-3.334-4a1 1 0 0 1 .128-1.408Z"}),Bs("path",{d:"M11.026 14.768a1 1 0 0 1-.128-1.408l3.334-4a1 1 0 0 1 1.536 1.28l-3.333 4a1 1 0 0 1-1.409.128Z"}),Bs("path",{d:"M14 10a1 1 0 0 1-1 1H5a1 1 0 1 1 0-2h8a1 1 0 0 1 1 1Z"})],-1)];const bS={name:"pepicons-arrow-right",render:function(e,t){return Os(),js("svg",gS,yS)}};const wS=rS({},[["render",function(e,t){const n=Si("HeadlessForm");return Os(),Ms(n,null,{default:Tr((()=>[Ti(e.$slots,"default")])),_:3})}]]),xS={key:0,class:"prose w-full"},_S=ti({__name:"CoreFormErrors",setup(e){const t=Qw("form");return(e,n)=>tr(t).showErrors.value?(Os(),js("div",xS,[(Os(!0),js(Ss,null,Oi(tr(t).errors.value,((e,t)=>(Os(),js("p",{key:t,class:"text-sm text-red-600"},He(e),1)))),128))])):Js("",!0)}}),kS=ti({inheritAttrs:!1}),SS=ti({...kS,__name:"CoreInput",props:{name:ax(),label:ax(),placeholder:ax(),color:Yw(Vx),modelValue:Xw([String,Number]),showErrors:Zw(),error:ax(),disabled:Zw(),bordered:Zw(),wobblyBorder:ex(),initialFocus:Zw()},emits:["update:modelValue"],setup(e,{expose:t}){const n={[Vx.Primary]:"focus:placeholder:text-primary-500 focus:bg-primary-100 focus:ring-primary-500",[Vx.Solid]:"focus:placeholder:text-brand-solid-400 focus:bg-brand-solid-100 focus:ring-brand-solid-500",[Vx.Danger]:"focus:placeholder:text-red-400 focus:bg-red-100 focus:ring-red-500"},r=Qn(null),i=pa((()=>n[e.color]));return t(Bx(r)),(t,n)=>{const s=Si("HeadlessInputLabel"),a=Si("HeadlessInputInput"),o=Si("HeadlessInputError"),l=Si("HeadlessInput"),u=Ii("wobbly-border");return Os(),Ms(l,{ref_key:"$root",ref:r,name:e.name,placeholder:e.placeholder,"model-value":e.modelValue,error:e.error,"initial-focus":e.initialFocus,disabled:e.disabled,"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e))},{default:Tr((({hasErrors:n})=>[e.label?(Os(),Ms(s,{key:0,class:"sr-only"},{default:Tr((()=>[Hs(He(e.label),1)])),_:1})):Js("",!0),wi(zs(a,Ys({class:["bg-gray-100 px-3 py-2 focus:outline-none",i.value,e.disabled?"text-gray-400 opacity-75":"text-gray-700",n&&"ring-1 ring-inset ring-red-500",e.bordered&&!n&&"ring-1 ring-inset ring-gray-300"]},t.$attrs),null,16,["class"]),[[u,e.wobblyBorder]]),e.showErrors?(Os(),Ms(o,{key:1,class:"mt-1 text-sm text-red-700 opacity-75"})):Js("",!0)])),_:1},8,["name","placeholder","model-value","error","initial-focus","disabled"])}}}),RS={class:"flex flex-col md:flex-row"},AS=ti({__name:"CoreInputSubmit",props:{name:sx(),color:Yw(Vx),label:ax(),placeholder:ax()},setup:e=>(t,n)=>{const r=SS,i=Wx,s=_S;return Os(),js("div",null,[Bs("div",RS,[zs(r,{"initial-focus":"",class:"z-10 flex-grow","aria-describedby":"input-submit-errors",color:e.color,name:e.name,label:e.label,"show-errors":!1,placeholder:e.placeholder,"wobbly-border":t.$ui.isMobile?{}:{topRight:!1,bottomRight:!1}},null,8,["color","name","label","placeholder","wobbly-border"]),zs(i,{type:"submit",class:"mt-2 focus:z-20 md:mt-0",alignment:"center",color:e.color,"wobbly-border":t.$ui.isMobile?{}:{topLeft:!1,bottomLeft:!1}},{default:Tr((()=>[Ti(t.$slots,"default")])),_:3},8,["color","wobbly-border"])]),zs(s,{id:"input-submit-errors",class:"mt-2"})])}}),IS={width:"1.2em",height:"1.2em",viewBox:"0 0 352 322"},CS=[Ws('<g fill="none"><path d="M87.973 282.353l-60.732-105.33a31.6 31.6 0 010-31.538L87.973 40.233c5.646-9.784 16.08-15.795 27.321-15.795H236.68c11.266 0 21.727 6.011 27.321 15.795l60.758 105.304a31.6 31.6 0 010 31.537l-60.732 105.33c-5.646 9.784-16.08 15.795-27.321 15.795H115.372a31.846 31.846 0 01-27.4-15.846z" fill="#FFF"></path><path d="M93.151 275.197l-57.115-99.06c-5.308-9.185-5.308-20.504 0-29.663l57.115-99.086a29.742 29.742 0 0125.734-14.857h114.23c10.59 0 20.426 5.646 25.734 14.857l57.167 99.034c5.308 9.185 5.308 20.504 0 29.663l-57.141 99.138a29.742 29.742 0 01-25.734 14.858H118.937a29.787 29.787 0 01-25.786-14.884z" fill="currentColor"></path><path d="M118.469 142.233h117.534a2.649 2.649 0 002.654-2.654v-22.04c0-14.65-11.891-26.54-26.54-26.54h-70.568c-20.53-.026-37.157 16.6-37.157 37.13-.026 7.833 6.27 14.104 14.077 14.104zm11.527 97.368h70.229c21.207 0 38.432-17.225 38.432-38.432 0-7.078-5.724-12.828-12.828-12.828H106.942a2.537 2.537 0 00-2.55 2.55v23.054c-.026 14.181 11.475 25.656 25.604 25.656z" fill="#F7F7F7"></path><path d="M109.596 139.319l87.663 87.662c5.802 5.803 15.196 5.803 20.998 0l15.196-15.196c5.803-5.802 5.803-15.196 0-20.998l-87.637-87.663c-5.802-5.802-15.196-5.802-20.998 0l-15.196 15.196c-5.855 5.803-5.855 15.222-.026 20.999z" fill="#F7F7F7"></path><path fill="#444" opacity=".3" d="M198.69 228.464l-51.495-40.123h11.397zm-54.33-126.797l40.565 40.566h13.765z"></path></g>',1)];const ES={name:"app-solid-emblem",render:function(e,t){return Os(),js("svg",IS,CS)}},OS=e=>"string"==typeof e&&e.trim().length>0||"number"==typeof e||"string"!=typeof e&&e?null:uS("validation.required"),DS=Object.freeze(Object.defineProperty({__proto__:null,default:OS},Symbol.toStringTag,{value:"Module"}));const TS=Object.entries(Object.assign({"/src/framework/forms/rules/required.ts":DS})).reduce(((e,[t,n])=>{var r;const i=null==(r=t.match(/([^/]+)\.ts/))?void 0:r[1];return d(e,(()=>{i&&(e[i]=n.default)}))}),{});class PS{constructor(e,n=[]){t(this,"rules"),t(this,"errors",[]),t(this,"value"),t(this,"form"),this.value=e,this.rules=n}get error(){var e;return null!=(e=this.errors[0])?e:null}setForm(e){this.form=e}update(e){var t;this.value=e,(null==(t=this.form)?void 0:t.submitted)&&this.validate()}validate(){return this.errors=c(this.rules).map((e=>{var t;return(null!=(t=TS[e])?t:i(`Unknown '${e}' validation rule`))(this.value)})).filter().toArray(),0===this.errors.length}}const jS=class extends Q{constructor(e={}){super(),t(this,"submitted"),t(this,"errors"),t(this,"showErrors"),t(this,"inputs"),this.inputs=Un(Object.entries(e).reduce(((e,[t,n])=>{var r,i;return(e[t]=new PS(null!=(r=n.default)?r:jS.getDefaultValue(n.type),null==(i=n.rules)?void 0:i.split("|"))).setForm(this),e}),{}));const n=this.submitted=Qn(!1),r=this.errors=pa((()=>E(Object.values(this.inputs).map((e=>e.error)))));this.showErrors=pa((()=>n.value&&r.value.length>0))}static getDefaultValue(e){var t,n;if(e.type===LS.Object)throw new Error("Object input fields must provide the default value.");return this.defaultInputValues=null!=(t=this.defaultInputValues)?t:{[LS.String]:"",[LS.Boolean]:!1,[LS.Number]:0,[LS.Object]:{}},e.multi?[]:null==(n=this.defaultInputValues)?void 0:n[e.type]}input(e){return this.inputs[e]}data(e){var t;return e?null==(t=this.inputs[e])?void 0:t.value:Object.entries(this.inputs).reduce(((e,[t,n])=>(e[t]=n.value,e)),{})}submit(){return this.submitted.value=!0,!Object.values(this.inputs).map((e=>e.validate())).some((e=>!e))}__get(e){var t;return null==(t=this.inputs[e])?void 0:t.value}__set(e,t){var n;null==(n=this.inputs[e])||n.update(t)}};let MS=jS;t(MS,"defaultInputValues");var LS=(e=>(e["String"]="string",e["Boolean"]="boolean",e["Number"]="number",e["Object"]="object",e))(LS||{});function $S(e){return new MS(null!=e?e:{})}const US={class:"ml-1"},NS=ti({__name:"AppLoginModal",setup(e){const t=$S({url:{type:LS.String,default:"https://",rules:"required"}});return(e,n)=>{const r=Xk,i=ES,s=AS,a=wS,o=l_;return Os(),Ms(o,{title:e.$t("menu.logIn")},{default:Tr((({close:n})=>[zs(r,{text:e.$t("home.onboarding.loginWithSolid_info"),class:"max-w-md"},null,8,["text"]),e.$auth.isLoggedIn()?Js("",!0):(Os(),Ms(a,{key:0,form:tr(t),onSubmit:e=>async function(e){/^https?:\/\//.test(t.url)||(t.url="https://"+t.url),await nI.login(t.url)&&e()}(n)},{default:Tr((()=>[zs(s,{class:"mt-4",name:"url",color:"brand-solid",label:e.$t("home.onboarding.loginWithSolid_label"),placeholder:e.$t("home.onboarding.loginWithSolid_placeholder")},{default:Tr((()=>[zs(i,{class:"h-6 w-6 text-brand-solid-500","aria-hidden":"true"}),Bs("span",US,He(e.$t("home.onboarding.loginWithSolid_submit")),1)])),_:1},8,["label","placeholder"])])),_:2},1032,["form","onSubmit"]))])),_:1},8,["title"])}}}),FS={class:"flex flex-col items-center justify-center flex-grow w-full h-full p-8"},BS={key:0,class:"font-medium text-2xl"},zS={class:"font-medium text-2xl"},qS={key:0,class:"text-center text-sm text-gray-500 mt-4"},VS=ti({__name:"NotFound",setup(e){const t=uS("errors.notFound_login"),n=uS("errors.notFound_loginButton"),[r,i]=t.split("%LOGIN_BUTTON%");return(e,t)=>{const s=bS,a=vS;return Os(),js("div",FS,[e.$cloud.syncing?(Os(),js("p",BS,He(e.$t("errors.notFound_syncing")),1)):(Os(),js(Ss,{key:1},[Bs("h1",zS,He(e.$t("errors.notFound")),1),zs(a,{route:"home",class:"mt-2 !flex items-center"},{default:Tr((()=>[Bs("span",null,He(e.$t("errors.notFound_goHome")),1),zs(s,{class:"ml-1 mt-0.5 h-5 w-5"})])),_:1}),e.$auth.isLoggedIn()?Js("",!0):(Os(),js("p",qS,[Hs(He(tr(r)),1),zs(a,{class:"text-gray-500 underline hover:text-gray-700",onClick:t[0]||(t[0]=t=>e.$ui.openModal(NS))},{default:Tr((()=>[Hs(He(tr(n)),1)])),_:1}),Hs(He(tr(i)),1)]))],64))])}}}),HS={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},WS=[Bs("path",{fill:"currentColor",d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2m0 14H4V8h16zm-2-1h-6v-2h6zM7.5 17l-1.41-1.41L8.67 13l-2.59-2.59L7.5 9l4 4z"},null,-1)];const JS={name:"ic-baseline-terminal",render:function(e,t){return Os(),js("svg",HS,WS)}},KS={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},GS=[Bs("g",{fill:"currentColor"},[Bs("path",{"fill-rule":"evenodd",d:"M15.5 6.5h-8a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1Zm-7 8v-6h6v6h-6Z","clip-rule":"evenodd"}),Bs("path",{d:"M6.5 13.5h-2a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v2h-2v-1h-6v6h1v2Z"})],-1)];const ZS={name:"pepicons-duplicate",render:function(e,t){return Os(),js("svg",KS,GS)}},YS={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},QS=[Bs("path",{fill:"currentColor",d:"m15.3 14.89l2.77 2.77a1 1 0 0 1 0 1.41a1 1 0 0 1-1.41 0l-2.59-2.58A6 6 0 0 1 11 18V9.04a1 1 0 0 0-2 0V18a6 6 0 0 1-3.07-1.51l-2.59 2.58a1 1 0 0 1-1.41 0a1 1 0 0 1 0-1.41l2.77-2.77A6 6 0 0 1 4.07 13H1a1 1 0 1 1 0-2h3V8.41L.93 5.34a1 1 0 0 1 0-1.41a1 1 0 0 1 1.41 0l2.1 2.1h11.12l2.1-2.1a1 1 0 0 1 1.41 0a1 1 0 0 1 0 1.41L16 8.41V11h3a1 1 0 1 1 0 2h-3.07c-.1.67-.32 1.31-.63 1.89M15 5H5a5 5 0 1 1 10 0"},null,-1)];const XS={name:"zondicons-bug",render:function(e,t){return Os(),js("svg",YS,QS)}},eR={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},tR=[Bs("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"},null,-1)];const nR={name:"mdi-github",render:function(e,t){return Os(),js("svg",eR,tR)}},rR={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},iR=[Bs("g",{fill:"currentColor"},[Bs("path",{d:"M11.732 9.36a1 1 0 1 1 1.536 1.28l-5 6a1 1 0 1 1-1.536-1.28l5-6Z"}),Bs("path",{d:"M6.732 4.64a1 1 0 0 1 1.536-1.28l5 6a1 1 0 1 1-1.536 1.28l-5-6Z"})],-1)];const sR={name:"pepicons-angle-right",render:function(e,t){return Os(),js("svg",rR,iR)}},aR={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},oR=[Bs("g",{fill:"currentColor"},[Bs("path",{d:"M6.732 10.64a1 1 0 1 1 1.536-1.28l5 6a1 1 0 1 1-1.536 1.28l-5-6Z"}),Bs("path",{d:"M8.268 10.64a1 1 0 1 1-1.536-1.28l5-6a1 1 0 1 1 1.536 1.28l-5 6Z"})],-1)];const lR={name:"pepicons-angle-left",render:function(e,t){return Os(),js("svg",aR,oR)}},uR={class:"px-4 pt-1 pb-4"},cR={class:"flex justify-between"},dR={class:"font-medium text-lg flex items-center"},pR={key:0,class:"flex flex-row-reverse space-x-reverse space-x-2 mr-10"},hR={class:"hidden group-hover:block group-hover:ml-2 group-focus:block group-focus:ml-2"},fR={class:"hidden group-hover:block group-hover:ml-2 group-focus:block group-focus:ml-2"},mR={class:"hidden group-hover:block group-hover:ml-2 group-focus:block group-focus:ml-2"},vR={class:"hidden group-hover:block group-hover:ml-2 group-focus:block group-focus:ml-2"},gR={key:1,class:"flex flex-row justify-end mt-4"},yR=["textContent"],bR=ti({__name:"ErrorReportModal",props:{reports:tx()},setup(e){const t=Qn(0),n=pa((()=>e.reports[t.value])),r=pa((()=>n.value.description?`${n.value.title}: ${n.value.description}`:n.value.title)),i=pa((()=>n.value.details)),s=pa((()=>{var e;const t=encodeURIComponent(r.value),n=encodeURIComponent(["[Please, explain here what you were trying to do when this error appeared]","","Error details:","```",X(null!=(e=i.value)?e:"Details missing from report",1800-t.length-iI.sourceUrl.length).trim(),"```"].join("\n"));return`${iI.sourceUrl}/issues/new?title=${t}&body=${n}`}));function a(){window.error=n.value.error,PR.showSnackbar(uS("errors.addedToConsole"))}async function o(){await navigator.clipboard.writeText(`${r.value}\n\n${i.value}`),PR.showSnackbar(uS("errors.copiedToClipboard"))}return Br(n.value,(()=>MR.see(n.value)),{immediate:!0}),(r,l)=>{const u=Xk,c=lR,d=Wx,p=sR,h=nR,f=XS,m=ZS,v=JS,g=l_;return Os(),Ms(g,{"no-padding":"",cancellable:!!i.value},{default:Tr((({close:g})=>[Bs("div",uR,[Bs("div",cR,[Bs("h2",dR,[zs(u,{text:n.value.title,heading:""},null,8,["text"]),e.reports.length>1?(Os(),js(Ss,{key:0},[Hs(" ("+He(t.value+1)+"/"+He(e.reports.length)+") ",1),zs(d,{clear:"","wobbly-border":{topRight:!1,bottomRight:!1},disabled:0===t.value,title:r.$t("errors.previousReport"),"aria-label":r.$t("errors.previousReport"),onClick:l[0]||(l[0]=e=>t.value--)},{default:Tr((()=>[zs(c,{class:"w-6 h-6","aria-hidden":"true"})])),_:1},8,["disabled","title","aria-label"]),zs(d,{clear:"","wobbly-border":{topLeft:!1,bottomLeft:!1},disabled:t.value===e.reports.length-1,title:r.$t("errors.nextReport"),"aria-label":r.$t("errors.nextReport"),onClick:l[1]||(l[1]=e=>t.value++)},{default:Tr((()=>[zs(p,{class:"w-6 h-6","aria-hidden":"true"})])),_:1},8,["disabled","title","aria-label"])],64)):Js("",!0)]),i.value?(Os(),js("div",pR,[zs(d,{clear:"",class:"group",title:r.$t("errors.reportToGithub"),"aria-label":r.$t("errors.reportToGithub"),url:s.value},{default:Tr((()=>[zs(h,{class:"w-6 h-6","aria-hidden":"true"}),Bs("span",hR,He(r.$t("errors.reportToGithub")),1)])),_:1},8,["title","aria-label","url"]),r.$errors.sentryConfigured&&null!==n.value.sentryId?(Os(),Ms(d,{key:0,clear:"",class:"group",title:n.value.sentryId?r.$t("errors.viewSentryId"):r.$t("errors.reportToSentry"),"aria-label":n.value.sentryId?r.$t("errors.viewSentryId"):r.$t("errors.reportToSentry"),onClick:l[2]||(l[2]=()=>{return n.value.sentryId?(e=n.value.sentryId,void PR.showSnackbar(uS("errors.viewSentryIdSuccess",{sentryId:e}))):async function(){const e=n.value.sentryId=await MR.reportToSentry(n.value.error);e?PR.showSnackbar(uS("errors.reportToSentrySuccess",{sentryId:e})):PR.showSnackbar(uS("errors.reportToSentryFailed"))}();var e})},{default:Tr((()=>[zs(f,{class:"w-6 h-6","aria-hidden":"true"}),Bs("span",fR,He(n.value.sentryId?r.$t("errors.viewSentryId"):r.$t("errors.reportToSentry")),1)])),_:1},8,["title","aria-label"])):Js("",!0),zs(d,{clear:"",class:"group",title:r.$t("errors.copyToClipboard"),"aria-label":r.$t("errors.copyToClipboard"),onClick:o},{default:Tr((()=>[zs(m,{class:"w-6 h-6","aria-hidden":"true"}),Bs("span",mR,He(r.$t("errors.copyToClipboard")),1)])),_:1},8,["title","aria-label"]),zs(d,{clear:"",class:"group",title:r.$t("errors.inspectInConsole"),"aria-label":r.$t("errors.inspectInConsole"),onClick:a},{default:Tr((()=>[zs(v,{class:"w-6 h-6","aria-hidden":"true"}),Bs("span",vR,He(r.$t("errors.inspectInConsole")),1)])),_:1},8,["title","aria-label"])])):Js("",!0)]),n.value.description?(Os(),Ms(u,{key:0,text:n.value.description,class:"mt-2"},null,8,["text"])):Js("",!0),i.value?Js("",!0):(Os(),js("div",gR,[zs(d,{color:"danger",onClick:g},{default:Tr((()=>[Hs(He(r.$t("ui.error_accept")),1)])),_:2},1032,["onClick"])]))]),i.value?(Os(),js("pre",{key:0,class:"overflow-auto p-4 h-full text-xs text-red-900 bg-gray-200",textContent:He(i.value)},null,8,yR)):Js("",!0)])),_:1},8,["cancellable"])}}}),wR={};const xR=e=>`(?:(\\d+(?:(?:.|,)\\d+)?)${e})?`,_R=e=>`(?:([\\d:]+)\\s*${e})?`,kR=[xR("Y"),xR("M"),xR("W"),xR("D")].join(""),SR=[xR("H"),xR("M"),xR("S")].join(""),RR=[_R("y(?:s|ears?)?"),_R("months?"),_R("w(?:s|eeks?)?"),_R("d(?:ays?)?"),_R("h(?:ours?)?"),_R("m(?:in(?:s|utes?)?)?"),_R("s(?:ec(?:s|onds?)?)?")].join("(?:\\s|,)*"),AR=new RegExp(`P${kR}(?:T${SR})?`),IR=new RegExp(RR);function CR(e,t){const n=e.match(t);if(!n)return null;const r=K(8).map((()=>[])),i=e=>{var t,i;const s=n[e],[a,...o]=null!=(t=null==s?void 0:s.split(":").map((e=>e.trim())))?t:[],l=E([a,...null!=(i=null==r?void 0:r[e])?i:[]]);return 0===l.length?null:(o.forEach(((t,n)=>{var i;null==(i=r[e+n+1])||i.push(t)})),l.map((e=>e?parseFloat(e.replace(",",".")):0)).reduce(((e,t)=>e+t),0))},s=$({years:i(1),months:i(2),weeks:i(3),days:i(4),hours:i(5),minutes:i(6),seconds:i(7)});return o(s)?null:s}const ER=768;var OR=(e=>(e["ConfirmModal"]="confirm-modal",e["ErrorReportModal"]="error-report-modal",e["ErrorReport"]="error-report",e["LoadingModal"]="loading-modal",e["MarkdownModal"]="markdown-modal",e["NotFound"]="not-found",e))(OR||{}),DR=(e=>(e["Error"]="error",e["Info"]="info",e))(DR||{});class TR extends zu{constructor(){super(...arguments),t(this,"$layout",null),t(this,"modalCallbacks",{}),t(this,"components",{"confirm-modal":Wn(nS),"error-report":Wn(dS),"error-report-modal":Wn(bR),"loading-modal":Wn(fS),"markdown-modal":Wn(mS),"not-found":Wn(VS)})}setLayoutElement(e){this.$layout=e}alert(e,t){const n="string"==typeof t?e:void 0;t=null!=t?t:e,this.openModal(this.components["confirm-modal"],{title:n,message:t,showCancel:!1})}async confirm(e={}){const t="string"==typeof e?{message:e}:e,n=await this.openModal(this.components["confirm-modal"],t);return!!(await n.afterClose)}async openModal(e,t){const n=F(),r={},i={id:n,props:null!=t?t:{},component:Wn(e),beforeClose:new Promise((e=>r.willClose=e)),afterClose:new Promise((e=>r.closed=e))},s=this.modals.at(-1),a=this.modals.concat(i);return this.modalCallbacks[i.id]=r,this.setState({modals:a}),await yr(),await(s&&qu.emit("hide-modal",{id:s.id})),await Promise.all([s||qu.emit("show-overlays-backdrop"),qu.emit("show-modal",{id:i.id})]),i}async closeModal(e,t){await qu.emit("close-modal",{id:e,result:t})}renderDuration(e){return e&&(n=e=>{const t=function(e){return CR(e,AR)}(e);return t?function(e){return E([e.years&&(1===e.years?"1 year":`${e.years} years`),e.months&&(1===e.months?"1 month":`${e.months} months`),e.weeks&&(1===e.weeks?"1 week":`${e.weeks} weeks`),e.days&&(1===e.days?"1 day":`${e.days} days`),e.hours&&(1===e.hours?"1 hour":`${e.hours} hours`),e.minutes&&`${e.minutes} min`,e.seconds&&(1===e.seconds?"1 second":`${e.seconds} seconds`)]).join(" ")}(t):e},null!=(r=wR[t=e])?r:wR[t]=n(t));var t,n,r}async runOperation(e,t={}){try{t.blocking&&this.showLoading(t.loadingMessage),await e(),t.successMessage&&this.showSnackbar(t.successMessage)}finally{t.blocking&&this.hideLoading()}}async showMarkdown(e,t){const n="string"==typeof t?e:null;t=null!=t?t:e,await this.openModal(this.components["markdown-modal"],{title:n,content:t})}showSnackbar(e,t={}){var n,r;const i={id:F(),message:e,actions:null!=(n=t.actions)?n:[],style:null!=(r=t.style)?r:"info"};return this.setState({snackbars:[...this.snackbars,i]}),setTimeout((()=>this.hideSnackbar(i.id)),5e3),i.id}hideSnackbar(e){const t=this.snackbars.findIndex((t=>t.id===e));-1!==t&&this.setState({snackbars:ee(this.snackbars,t)})}async showLoading(e){if(this.loadingModal){(await this.loadingModal).props.text=e}else this.loadingModal=new s,this.loadingModal.resolve(await this.openModal(this.components["loading-modal"],{text:e}))}async hideLoading(){if(!this.loadingModal)return;const e=await this.loadingModal;this.loadingModal=null,await this.closeModal(e.id)}resolveComponent(e){return this.components[e]}registerComponent(e,t){this.components[e]=Wn(t)}scrollLayout(e){var t;null==(t=this.$layout)||t.scrollTo(e)}updateHeaderHeight(e){this.setState({headerHeight:e})}restoreHeader(){this.setState({headerHidden:!1})}hideHeader(){this.setState({headerHidden:!0})}async boot(){await super.boot(),this.watchWindowMedia(),this.watchModalEvents()}getInitialState(){return{animations:!window.matchMedia("(prefers-reduced-motion)").matches,headerHeight:0,headerHidden:!1,loadingModal:null,modals:[],snackbars:[],layout:this.getCurrentLayout()}}getComputedStateDefinitions(){return{isMobile:({layout:e})=>"mobile"===e,isDesktop:({layout:e})=>"desktop"===e}}getCurrentLayout(){return window.innerWidth>ER?"desktop":"mobile"}watchWindowMedia(){const e=()=>this.setState({layout:this.getCurrentLayout()});window.matchMedia(`(min-width: ${ER}px)`).addEventListener("change",e),e()}watchModalEvents(){qu.on("modal-will-close",(({modal:e,result:t})=>{var n,r;null==(r=null==(n=this.modalCallbacks[e.id])?void 0:n.willClose)||r.call(n,t),1===this.modals.length&&qu.emit("hide-overlays-backdrop")})),qu.on("modal-closed",(async({modal:e,result:t})=>{var n,r;this.setState({modals:this.modals.filter((t=>t.id!==e.id))}),null==(r=null==(n=this.modalCallbacks[e.id])?void 0:n.closed)||r.call(n,t),delete this.modalCallbacks[e.id];const i=this.modals.at(-1);await(i&&qu.emit("show-modal",{id:i.id}))}))}}t(TR,"persist",["animations"]);const PR=r(TR);class jR extends zu{constructor(){super(...arguments),t(this,"forceReporting",!1),t(this,"sentryConfigured",!1),t(this,"enabled",!0),t(this,"sentryInitialized",!1),t(this,"handlers",[])}enable(){this.enabled=!0}disable(){this.enabled=!1}async inspect(e){const t=Array.isArray(e)?e:[await this.createErrorReport(e)];PR.openModal(PR.resolveComponent(OR.ErrorReportModal),{reports:t})}reportDevelopmentError(e,t){iI.isDevelopment&&(t&&console.warn(t),this.logError(e))}async report(e,t){var n;if(await this.handleError(e))return;if((iI.isDevelopment||iI.isTesting)&&this.logError(e),!this.enabled)throw e;let r;if(this.reportErrors()&&(r=null!=(n=await this.reportToSentry(e))?n:void 0),!iI.isMounted){const t=await this.createStartupErrorReport(e,r);return void(t&&this.setState({startupErrors:this.startupErrors.concat(t)}))}const i=await this.createErrorReport(e,r),s={report:i,seen:!1,date:new Date};PR.showSnackbar(null!=t?t:uS("errors.notice"),{style:DR.Error,actions:[{text:uS("errors.viewDetails"),handler:()=>PR.openModal(PR.resolveComponent(OR.ErrorReportModal),{reports:[i]})}]}),this.setState({logs:[s].concat(this.logs)})}async reportToSentry(e){await this.initializeSentry();try{const{captureException:t}=await Fu((()=>import("./sentry.lazy.24ce2b26.js")),1?[]:void 0);return d(t(e),(t=>console.error(`Error reported to Sentry: '${t}'`,e)))}catch(t){console.error("Failed reporting an error to Sentry",e,t)}return null}handleErrors(e){return this.handlers.push(e),()=>te(this.handlers,e)}see(e){this.setState({logs:this.logs.map((t=>t.report!==e?t:{...t,seen:!0}))})}seeAll(){this.setState({logs:this.logs.map((e=>({...e,seen:!0})))})}async boot(){await super.boot(),this.sentryConfigured=!!iI.env("SENTRY_DSN"),ne("errorReporting")&&(this.forceReporting=re(ie("errorReporting")))}getInitialState(){return{reporting:!1,logs:[],startupErrors:[]}}getComputedStateDefinitions(){return{hasErrors:({logs:e})=>e.length>0,hasNewErrors:({logs:e})=>e.some((e=>!e.seen)),hasStartupErrors:({startupErrors:e})=>e.length>0}}reportErrors(){return this.sentryConfigured&&(this.reporting||this.forceReporting)}logError(e){console.error(e),se(e)&&e.cause&&this.logError(e.cause)}async createErrorReport(e,t){if("string"==typeof e)return{sentryId:t,title:e};if(e instanceof Bd){const n=await e.response.text();return this.createErrorReportFromError(e,{sentryId:t,title:"Unsuccessful Request",details:`Response body:\n${n}\n\nStack trace:\n${e.stack}`})}return e instanceof Error||e instanceof n?this.createErrorReportFromError(e,{sentryId:t}):{title:uS("errors.unknown"),sentryId:t,error:e}}async createStartupErrorReport(e,t){return e instanceof ServiceBootError?e.cause instanceof ServiceBootError?null:this.createErrorReport(e.cause,t):this.createErrorReport(e,t)}createErrorReportFromError(e,t={}){return{title:e.name,description:e.message,details:e.stack,error:e,...t}}async initializeSentry(){if(!this.sentryInitialized)try{const{init:e}=await Fu((()=>import("./sentry.lazy.24ce2b26.js")),1?[]:void 0);e({dsn:iI.env("SENTRY_DSN")}),this.sentryInitialized=!0}catch(e){console.error("Failed initializing Sentry",e)}}async handleError(e){for(const t of this.handlers)if(await t(e))return!0;return!1}}t(jR,"persist",["reporting"]);const MR=r(jR);let LR,$R;const UR=new WeakMap,NR=new WeakMap,FR=new WeakMap,BR=new WeakMap,zR=new WeakMap;let qR={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return NR.get(e);if("objectStoreNames"===t)return e.objectStoreNames||FR.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return WR(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function VR(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($R||($R=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(JR(this),t),WR(UR.get(this))}:function(...t){return WR(e.apply(JR(this),t))}:function(t,...n){const r=e.call(JR(this),t,...n);return FR.set(r,t.sort?t.sort():[t]),WR(r)}}function HR(e){return"function"==typeof e?VR(e):(e instanceof IDBTransaction&&function(e){if(NR.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));NR.set(e,t)}(e),t=e,(LR||(LR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,qR):e);var t}function WR(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(WR(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&UR.set(t,e)})).catch((()=>{})),zR.set(t,e),t}(e);if(BR.has(e))return BR.get(e);const t=HR(e);return t!==e&&(BR.set(e,t),zR.set(t,e)),t}const JR=e=>zR.get(e);const KR=["get","getKey","getAll","getAllKeys","count"],GR=["put","add","delete","clear"],ZR=new Map;function YR(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ZR.get(t))return ZR.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=GR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!KR.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return ZR.set(t,s),s}!function(e){qR=e(qR)}((e=>({...e,get:(t,n,r)=>YR(t,n)||e.get(t,n,r),has:(t,n)=>!!YR(t,n)||e.has(t,n)})));const QR="app",XR="files",eA=1e3;const tA=r(class extends zu{constructor(){super(...arguments),t(this,"connection"),t(this,"connectionTimeout")}async get(e){const t=await this.connect(),n=await t.get(XR,e);return null!=n?n:null}async has(e){const t=await this.connect();return!!(await t.getKey(XR,e))}async getUrls(){return(await this.connect()).getAllKeys(XR)}async store(e,t,n){const r=await this.connect();await r.put(XR,{url:e,mimeType:t,blob:n})}async rename(e,t){const n=await this.transaction("readwrite"),r=await n.store.get(e);r&&(r.url=t,n.store.delete(e),n.store.put(r)),await n.done}async delete(e){const t=await this.connect();await t.delete(XR,e)}async deleteAll(){const e=await this.transaction("readwrite"),t=await e.store.getAllKeys();await Promise.all(t.map((t=>e.store.delete(t)))),await e.done}async boot(){await super.boot(),qu.on("logout",(()=>this.deleteAll()))}async transaction(e){return(await this.connect()).transaction(XR,e)}async connect(){var e;const t=null!=(e=this.connection)?e:await this.openDatabaseConnection();return d(t,(e=>this.rememberDatabaseConnection(e)))}openDatabaseConnection(){return new Promise(((e,t)=>{(function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=WR(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(WR(a.result),e.oldVersion,e.newVersion,WR(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),o})(QR,1,{upgrade(e){e.objectStoreNames.contains(XR)||e.createObjectStore(XR,{keyPath:"url"})},blocked:()=>t(new Error(`Could not open '${QR}' database because it is blocked`))}).then(e).catch(t)}))}rememberDatabaseConnection(e){this.connectionTimeout&&window.clearTimeout(this.connectionTimeout),this.connection=e,this.connectionTimeout=window.setTimeout((()=>this.forgetDatabaseConnection()),eA)}forgetDatabaseConnection(){var e;null==(e=this.connection)||e.close(),this.connection=void 0,this.connectionTimeout=void 0}});const nA=r(class extends zu{getInitialState(){return{online:!0}}}),rA=new WeakMap,iA=new WeakMap;function sA(e){var n;return null!=(n=rA.get(e))?n:function(e){var n;const r=e,i=(e,t)=>{e.timestamps=r.timestamps,e.history=r.history,t(),e.timestamps=[],e.history=!1},s=(t(n=class extends r{initialize(e,t){i(this._proxy.static(),(()=>super.initialize(e,t)))}fixMalformedAttributes(){i(this.static(),(()=>super.fixMalformedAttributes()))}},"timestamps",!1),t(n,"history",!1),n);return rA.set(r,s),iA.set(s,r),If({[`Remote${e.modelName}`]:s}),s}(e)}class aA extends zu{async boot(){await super.boot(),await this.initIndexedDBSupport()}getInitialState(){return{supportsIndexedDB:null,supportsSharing:"share"in navigator,supportsPrinting:"print"in window,supportsWakeLocking:"wakeLock"in navigator,isFirefox:!!(navigator&&navigator.userAgent&&/firefox/i.test(navigator.userAgent))}}async initIndexedDBSupport(){null===this.supportsIndexedDB&&this.setState({supportsIndexedDB:await this.isIndexedDBSupported()})}async isIndexedDBSupported(){try{const e="browser-storage://capabilities-check";return await tA.store(e,"",new Blob),await tA.delete(e),!0}catch(Wd){return!1}}}t(aA,"persist",["supportsIndexedDB"]);const oA=r(aA);class CookbookExistsError extends n{constructor(e){super(`Cookbook with url '${e.url}' already exists`),t(this,"cookbook"),this.cookbook=e}}const lA=iy({rdfContexts:{schema:"https://schema.org/"},rdfsClass:"schema:HowToStep",history:!0,fields:{text:{type:sf.String,required:!0},position:{type:sf.Number,required:!0}}}),uA=Object.freeze(Object.defineProperty({__proto__:null,default:lA},Symbol.toStringTag,{value:"Module"}));class cA extends lA{}const dA=Object.freeze(Object.defineProperty({__proto__:null,default:cA},Symbol.toStringTag,{value:"Module"})),pA=iy({rdfContexts:{schema:"https://schema.org/",purl:"http://purl.org/dc/terms/"},rdfsClass:"schema:ItemList",history:!1,timestamps:!1,fields:{name:sf.String,description:sf.String,creatorWebId:{type:sf.Key,rdfProperty:"purl:creator"},itemUrls:{type:sf.Array,rdfProperty:"schema:itemListElement",items:sf.Key}}}),hA=Object.freeze(Object.defineProperty({__proto__:null,default:pA},Symbol.toStringTag,{value:"Module"})),fA=iy({rdfContexts:{schema:"https://schema.org/"},rdfsClass:"schema:ListItem",history:!1,timestamps:!1,fields:{recipeUrl:{type:sf.Key,rdfProperty:"schema:item",required:!0}}}),mA=Object.freeze(Object.defineProperty({__proto__:null,default:fA},Symbol.toStringTag,{value:"Module"}));class vA extends fA{recipeRelationship(){return this.belongsToOne(LA,"recipeUrl")}}const gA=Object.freeze(Object.defineProperty({__proto__:null,default:vA},Symbol.toStringTag,{value:"Module"}));class yA extends pA{constructor(){super(...arguments),t(this,"isRegistered",!1)}get recipes(){var e,t;if(this.isRelationLoaded("items"))return E(null!=(t=null==(e=this.items)?void 0:e.map((({recipe:e})=>e)))?t:[])}itemsRelationship(){return this.belongsToMany(vA,"itemUrls").onDelete("cascade").usingSameDocument(!0)}route(){return{name:"viewer",query:{url:this.url}}}has(e){var t;return!!(null==(t=this.items)?void 0:t.some((t=>t.recipeUrl===e.url)))}}const bA=Object.freeze(Object.defineProperty({__proto__:null,default:yA},Symbol.toStringTag,{value:"Module"})),wA={"½":.5,"¼":.25},xA=Object.entries(wA).reduce(((e,[t,n])=>(e[n.toString()]=t,e)),{}),_A={grams:{g:1,grams:1,kg:1e3,kilograms:1e3,cups:200,lb:453.5924,pounds:453.5924,oz:28.34952,ounces:28.34952,tsp:5,tbsp:15,tbl:15},milliliters:{ml:1,milliliters:1,l:1e3,liters:1e3,pt:473,pint:473}},kA={cups:" cups",grams:" grams",kilograms:" kilograms",liters:" liters",milliliters:" milliliters",ounces:" ounces",pint:" pint",pounds:" pounds",tbl:" tbl",tbsp:" tbsp",tsp:" tsp"},SA="{quantity}",[RA,AA,IA,CA]=function(){const e=`(?:(?:\\d+[.,\\d]*)|${Object.keys(wA).join("|")})`,t="to|-|~",n=`(?<quantityValue>(?:${`${e}\\s*(?:${t})\\s*${e}`})|(?:${e}))`,r=Object.values(_A).reduce(((e,t)=>[...e,Object.keys(t).join("|")]),[]).join("|");return[new RegExp(`.*?(?<quantity>${n}\\s*(?:(?<quantityUnit>${r})(?:\\s+|$))).*?`,"i"),new RegExp(`.*?(?<quantity>${n}\\s*).*?`,"i"),new RegExp(t,"i"),Object.entries(_A).reduce(((e,[t,n])=>(Object.entries(n).forEach((([n,r])=>{e[n]=(e,n)=>{var i,s;return[Array.isArray(e)?[e[0]*r,e[1]*r]:e*r,t,r,null!=(s=null!=(i=kA[null!=n?n:""])?i:n)?s:""]}})),e)),{})]}();function EA(e){var t;return null!=(t=wA[e])?t:parseFloat(e.replace(",","."))}function OA(e){var t;const n=e.toString();return null!=(t=xA[n])?t:n}function DA(e){var t,n,r,i;const s=e,a=null!=(t=e.match(RA))?t:e.match(AA),o=(null==(n=null==a?void 0:a.groups)?void 0:n.quantity)?e.replace(a.groups.quantity.trim(),SA):e,l=null==(r=null==a?void 0:a.groups)?void 0:r.quantityUnit,[u,c,d,p]=function(e,t){var n,r,i;if(!e)return[];const s=e.match(IA)?e.split(IA).map(EA):EA(e);return null!=(i=null==(r=CA[null!=(n=null==t?void 0:t.trim().toLowerCase())?n:""])?void 0:r.call(CA,s,t))?i:[s]}(null==(i=null==a?void 0:a.groups)?void 0:i.quantityValue,l);return $({template:o,original:s,quantity:u,unit:c,unitMultiplier:d,renderQuantity:void 0!==u?Array.isArray(u)?e=>o.replace(SA,e.map(OA).join(" - ")):e=>o.replace(SA,`${OA(e)}${null!=p?p:""}`):()=>s})}function TA(e){return e<10?Math.round(100*e)/100:Math.round(e)}function PA(e){return e.sort(((e,t)=>function(e,t){const n=e.original.toLowerCase().includes("optional"),r=t.original.toLowerCase().includes("optional");if(n&&!r)return-1;if(!n&&r)return 1;if(e.unit&&!t.unit)return 1;if(!e.unit&&t.unit)return-1;const i=Array.isArray(e.quantity)?e.quantity[0]:e.quantity,s=Array.isArray(t.quantity)?t.quantity[0]:t.quantity;if(!i&&!s)return ae(t.original,e.original);if(i&&!s)return 1;if(!i&&s)return-1;const a=ae(i,s);return 0===a?ae(t.original,e.original):a}(t,e))),e}const jA=iy({rdfContexts:{schema:"https://schema.org/",purl:"http://purl.org/dc/terms/"},rdfsClass:"schema:Recipe",history:!0,tombstone:!1,fields:{name:{type:sf.String,required:!0},description:sf.String,imageUrls:{type:sf.Array,items:sf.Key,rdfProperty:"schema:image"},servings:{type:sf.String,rdfProperty:"schema:recipeYield"},prepTime:sf.String,cookTime:sf.String,ingredients:{type:sf.Array,items:sf.String,rdfProperty:"schema:recipeIngredient"},instructionStepUrls:{type:sf.Array,items:sf.Key,rdfProperty:"schema:recipeInstructions"},listUrls:{type:sf.Array,items:sf.Key,rdfProperty:"purl:isReferencedBy"},externalUrls:{type:sf.Array,items:sf.Key,rdfProperty:"schema:sameAs"}}}),MA=Object.freeze(Object.defineProperty({__proto__:null,default:jA},Symbol.toStringTag,{value:"Module"}));class LA extends jA{get imageUrl(){return this.imageUrls.length>0?this.imageUrls[0]:void 0}get slug(){if(!this.url)return null;const e=e=>{var t,n;return null!=(n=null==(t=this.url.substring(e).replaceAll("/","-").match(/([^#]+)(#.*)?$/))?void 0:t[1])?n:null};return FA.remoteCookbookUrl&&this.url.startsWith(FA.remoteCookbookUrl)?e(FA.remoteCookbookUrl.length):this.url.startsWith(FA.localCookbookUrl)?e(FA.localCookbookUrl.length):null}get sortedExternalUrls(){const e=this.externalUrls.map((e=>{var t,n;return{url:e,domain:null==(n=null==(t=oe(e))?void 0:t.domain)?void 0:n.replace(/^www\./,"")}}));return le(e,((e,t)=>ae(e.domain,t.domain))).map((({url:e})=>e))}get sortedIngredients(){return this.sortedIngredientsBreakdown.map((({original:e})=>e))}get sortedIngredientsBreakdown(){const e=this.ingredients.map(DA);return PA(e),e}get servingsBreakdown(){var e;const t=this.servings,[n]=null!=(e=null==t?void 0:t.match(/\d+/))?e:[];return t&&n?{original:t,quantity:parseInt(n),renderQuantity:e=>t.replace(n,e.toString())}:null}get sortedInstructions(){var e;return le(null!=(e=this.instructions)?e:[],"position")}get autoLinks(){return E([this.url,this.getDocumentUrl(),...this.externalUrls])}route(e="show"){return"viewer"===e?{name:"viewer",query:{url:this.url}}:{name:`recipes.${e}`,params:{recipe:this.slug}}}is(e){return this.url===e.url||this.externalUrls.some((t=>t===e.url))}instructionsRelationship(){return this.belongsToMany(cA,"instructionStepUrls").onDelete("cascade").usingSameDocument(!0)}listsRelationship(){return this.belongsToMany(yA,"listUrls")}toExternalJsonLD(e={}){var t,n,r,i,s;const a=this.toJsonLD({ids:null!=(n=e.includeIds)?n:null==(t=this.url)?void 0:t.startsWith("http"),timestamps:null!=(r=e.includeHistory)&&r,history:null!=(i=e.includeHistory)&&i});return(null==(s=this.imageUrl)?void 0:s.startsWith("solid://"))&&delete a["image"],a}download(e={}){var t;const n=null!=(t=this.slug)?t:"recipe",r=this.toExternalJsonLD(e);ue(`${n}.json`,JSON.stringify(r),"application/json")}async updatePublicPermissions(e){var t;await super.updatePublicPermissions(e),(null==(t=this.imageUrl)?void 0:t.startsWith(this.requireContainerUrl()))&&await new Dy({url:this.imageUrl}).updatePublicPermissions(e)}newUrl(e,t){return`${e=null!=e?e:ce(this.static("collection"),de(this.name)||pe())}#${t=null!=t?t:this.static("defaultResourceHash")}`}}const $A=Object.freeze(Object.defineProperty({__proto__:null,default:LA},Symbol.toStringTag,{value:"Module"}));function UA(e){return e.replace(/^[^:]+:\/\//,"")}class NA extends zu{constructor(){super(...arguments),t(this,"cookbook",new s),t(this,"tmpRecipes",{})}async initializeRemote(e,t){const n=nI.requireAuthenticator().engine,r=await Ly.withEngine(n,(async()=>{const n=he(t,de(e)),r=await Ly.find(n);if(r)throw new CookbookExistsError(r);return new Ly({url:n,name:e})}));await this.initializeRemoteUsing(r)}async initializeRemoteUsing(e){const t=nI.requireUser(),n=nI.requireAuthenticator().engine;await Ly.withEngine(n,(async()=>{var n;const r=null!=(n=t.privateTypeIndexUrl)?n:await nI.createPrivateTypeIndex();await e.save(),await e.register(r,LA)})),await this.initializeRemoteCookbook(e),await this.reloadRecipes()}getTmpRecipe(e){var t;return null!=(t=this.tmpRecipes[e])?t:null}saveTmpRecipe(e){return d(F(),(t=>this.tmpRecipes[t]=e))}async deleteRecipe(e){if(this.isRemote)return await e.softDelete(),void(await JA.syncIfOnline(e));e.imageUrl&&await tA.has(e.imageUrl)&&await tA.delete(e.imageUrl),await e.delete()}async updatePublicRecipeListing(e,t){var n;const r=await this.loadPublicRecipesList();if(t&&!r.has(e)&&(r.relatedItems.attach({recipeUrl:e.url}),e.listUrls=h([...e.listUrls,r.url])),!t&&r.has(e)){const t=null==(n=r.items)?void 0:n.find((t=>t.recipeUrl===e.url));t&&r.relatedItems.detach(t),e.listUrls=e.listUrls.filter((e=>e!==r.url))}(r.exists()||r.items&&r.items.length>0)&&await yA.withEngine(nI.requireAuthenticator().engine,(()=>r.save())),r.exists()&&r.wasRecentlyCreated()&&!r.isRegistered&&await this.registerPublicRecipesList(r),e.isDirty()&&(await e.save(),await JA.sync(e))}async removePublicRecipeListing(e){var t,n;const r=null!=(t=this.publicRecipesList)?t:this.publicRecipesList=await this.findPublicRecipesList();if(!r)return;const i=null==(n=r.items)?void 0:n.find((t=>t.recipeUrl===e.url));i&&r.relatedItems.detach(i),await yA.withEngine(nI.requireAuthenticator().engine,(()=>r.save()))}mendRecipe(e){this.mendRecipeInstructions(e),e.fixMalformedAttributes()}foundRecipeUsingRdfAliases(){this.setState({usingRdfAliases:!0}),this.replaceRdfAliases()}autoLink(e){var t;return null!=(t=this.recipesAutoLinks[UA(e)])?t:null}async boot(){await super.boot(),await nI.booted,await oA.booted,this.cookbook.onResolve((()=>this.setState({created:!0}))),this.cookbook.onReset((()=>this.setState({created:!1}))),this.cookbook.onReject((()=>this.setState({created:!1}))),this.aliasRdfPrefixes(),oA.supportsIndexedDB&&(await this.loadCookbook(),await this.loadRecipes(),await this.enqueueFileUploads(),qu.on("login",(async e=>{await this.loadCookbook(),yA.setEngine(e.authenticator.engine),Ey.setEngine(e.authenticator.engine)})),qu.on("logout",(async()=>{this.cookbook.reset(),this.resetModelDefinitions(),this.setState({remoteCookbookUrl:null,allRecipes:c(),usingRdfAliases:!1})})),LA.on("deleted",(e=>{this.setState({allRecipes:this.allRecipes.without([e])}),qu.emit("recipe-deleted")})),LA.on("created",(e=>{this.setState({allRecipes:this.allRecipes.concat([e])}),qu.emit("recipe-created")})),LA.on("updated",(()=>this.setState({allRecipes:this.allRecipes.slice(0)}))))}getInitialState(){return{created:this.cookbook.isResolved(),localCookbookUrl:LA.collection,remoteCookbookUrl:null,publicRecipesList:null,allRecipes:c([]),usingRdfAliases:!1}}getComputedStateDefinitions(){return{isLocal:({remoteCookbookUrl:e})=>!e,isRemote:({remoteCookbookUrl:e})=>!!e,recipes:({allRecipes:e})=>e.filter((e=>!e.isSoftDeleted())),recipesAutoLinks:(e,{recipes:t})=>t.toArray().reduce(((e,t)=>d(e,(e=>{t.autoLinks.forEach((n=>e[UA(n)]=t))}))),{})}}async initializeRemoteCookbook(e){await this.migrateLocalRecipes(e.url),function(e,t){e.collection=t;const n=rA.get(e);n&&(n.collection=t)}(LA,e.url),e.url!==this.remoteCookbookUrl&&this.setState({remoteCookbookUrl:e.url}),this.cookbook.resolve(e)}getCookbookModels(){return[LA,cA,yA,vA]}aliasRdfPrefixes(){this.usingRdfAliases?this.replaceRdfAliases():this.getCookbookModels().forEach((e=>e.aliasRdfPrefixes({"https://schema.org/":"http://schema.org/"})))}replaceRdfAliases(){this.getCookbookModels().forEach((e=>{e.resetRdfAliases(),e.replaceRdfPrefixes({"https://schema.org/":"http://schema.org/"}),e.aliasRdfPrefixes({"http://schema.org/":"https://schema.org/"})}))}async loadRecipes(){const e=[],t=LA.collection,n=LA.requireEngine(),r=(await n.getCollections()).filter((e=>e.startsWith(t)));for(const i of r){const t=await LA.from(i).all();e.push(...t)}LA.collection=t,this.allRecipes=c(e)}async loadCookbook(){var e,t;if(nI.isLoggedIn()){const e=nI.authenticator.engine;await Ly.withEngine(e,(async()=>d(await this.findCookbook(),(e=>e&&this.initializeRemoteCookbook(e)))))}else LA.collection=null!=(e=this.remoteCookbookUrl)?e:this.localCookbookUrl,yA.collection=null!=(t=this.remoteCookbookUrl)?t:yA.collection,this.cookbook.resolve(new Ly({url:LA.collection,name:"cookbook"}))}async loadPublicRecipesList(){var e,t;return this.publicRecipesList=null!=(t=null!=(e=this.publicRecipesList)?e:await this.findPublicRecipesList())?t:this.newPublicRecipesList(),this.publicRecipesList}async reloadRecipes(){await this.loadRecipes()}async findCookbook(e=!0){var t,n;const r=nI.requireUser();try{return null!=(n=null!=(t=await this.findCookbookInTypeIndex(r.privateTypeIndexUrl))?t:await this.findCookbookInTypeIndex(r.publicTypeIndexUrl))?n:null}catch(i){if(!e)throw i;return await nI.refreshUserProfile(),await nI.createPrivateTypeIndex(),this.findCookbook(!1)}}async findCookbookInTypeIndex(e){var t;if(!e)return null;return null!=(t=(await Ly.fromTypeIndex(e,LA))[0])?t:null}async findPublicRecipesList(){if(!nI.isLoggedIn())return null;const e=nI.requireUser();if(e.publicTypeIndexUrl){const t=nI.requireAuthenticator(),n=t.engine,r=await function(e,t,n){return Sp.apply(this,arguments)}(e.publicTypeIndexUrl,yA.rdfsClasses,t.requireAuthenticatedFetch());for(const e of r){const t=await yA.withEngine(n,(()=>yA.find(e)));if(null==t?void 0:t.isPublic)return t}}return null}newPublicRecipesList(){var e;const t=nI.requireUser(),n=null!=(e=this.remoteCookbookUrl)?e:i("Cannot create a recipes list without a remote cookbook");return new yA({url:`${n}public#it`,name:t.name?`${t.name}'s Public Recipes`:"Public Recipes",creatorWebId:t.webId})}async migrateLocalRecipes(e){const t=await LA.all(),n=LA.requireEngine(),r=e=>"@id"in e&&e["@id"].startsWith(LA.collection),i=t=>{const n=t["@id"],r=n.replace(LA.collection,e);return t["@id"]=r,[n,r]},s=e=>{const t=Object.entries(e);return r(e)&&(i(e),1===t.length)?[]:t.reduce(((e,[t,n])=>(se(n)&&e.push(..."image"===t&&r(n)?[i(n)]:s(n)),e)),[])};for(const a of t){if(a.url.startsWith(e))continue;const t=a.url,r=a.url.replace(LA.collection,e),i=N(t),o=N(r),l=await n.readOne(LA.collection,i),u=s(l);await Promise.all(u.map((async([e,t])=>{await tA.rename(e,t),JA.enqueueFileUpload(a,t)}))),await n.create(e,l,o),await n.delete(LA.collection,i),a.onMoved(r),JA.onModelMoved(t,r)}}async enqueueFileUploads(){if(!this.remoteCookbookUrl)return;const e=await tA.getUrls();for(const t of e){const e=this.recipes.find((e=>e.imageUrls.includes(t)));t.startsWith(this.remoteCookbookUrl)&&e&&JA.enqueueFileUpload(e,t)}}async registerPublicRecipesList(e){var t;const n=nI.requireUser(),r=nI.requireAuthenticator().engine,i=null!=(t=n.publicTypeIndexUrl)?t:await nI.createPublicTypeIndex();await Promise.all(yA.rdfsClasses.map((async t=>{const n=new Ey({forClass:t,instance:e.url});n.mintUrl(i,!0,F()),await Ey.withEngine(r,(()=>n.save(fe(i))))}))),await yA.withEngine(r,(()=>e.updatePublicPermissions([Hd.Read]))),e.isRegistered=!0}mendRecipeInstructions(e){var t;if(e.instructions||e.setRelationModels("instructions",[]),(null==(t=e.instructions)?void 0:t.length)===e.instructionStepUrls.length)return;const{protocol:n}=me(e.url);e.instructionStepUrls=K(e.instructionStepUrls.length).map((t=>{const r=e.instructionStepUrls[t];if(r.startsWith(n))return r;const i=e.relatedInstructions.attach({text:r,position:t+1});return i.mintUrl(e.requireDocumentUrl(),!0,F()),i.url}))}resetModelDefinitions(){LA.collection=this.localCookbookUrl,this.getCookbookModels().forEach((e=>{e.resetRdfAliases(),e.replaceRdfPrefixes({"http://schema.org/":"https://schema.org/"}),e.aliasRdfPrefixes({"https://schema.org/":"http://schema.org/"})}))}}t(NA,"persist",["remoteCookbookUrl","usingRdfAliases"]);const FA=r(NA);class BA extends Ly{recipesRelationship(){return this.contains(LA)}route(){return{name:"viewer",query:{url:this.url}}}}const zA=Object.freeze(Object.defineProperty({__proto__:null,default:BA},Symbol.toStringTag,{value:"Module"}));const qA=r(class extends zu{constructor(){super(...arguments),t(this,"engine",new kg(((...e)=>nI.fetch(...e)))),t(this,"autoLinks",new s),t(this,"collectionsAutoLinks",new WeakMap),t(this,"recipesContainersRequested",new Set)}get active(){return Ed.currentRouteIs("viewer")}get autoLinksReady(){return this.autoLinks.isResolved()}async waitAutoLinksReady(){await this.autoLinks}getRecipeContainer(e){var t;return null!=(t=this.recipesContainers.get(Hn(e)))?t:null}async view(e){var t,n,r,i;const s=null==(n=null==(t=this.recipe)?void 0:t.lists)?void 0:n.find((t=>t.url===e)),a=null==(i=null==(r=this.collection)?void 0:r.recipes)?void 0:i.find((t=>(null==t?void 0:t.url)===e)),o=this.recipe&&this.getRecipeContainer(this.recipe),l=(null==o?void 0:o.url)===e?o:null;return s?(await this.loadRecipesList(s),void this.setState({list:s,hasSeenCollection:!0,recipe:null,container:null})):a?(a.setRelationModels("lists",E([this.list])),void this.setState({recipe:a,list:null,container:null})):void(l?this.setState({container:l,hasSeenCollection:!0,recipe:null,list:null}):this.setState({recipe:null,list:null,container:null}))}async search(e){return this.cachingDocuments((async()=>await this.findRecipe(e)||await this.findRecipesList(e)||await this.findRecipesContainer(e)))}async preloadList(e){this.collectionsAutoLinks.has(e)||await this.loadRecipesList(e)}async preloadContainer(e){this.recipesContainersRequested.has(e)||await this.loadRecipesContainer(e)}autoLink(e){var t,n,r,i,s;const a=null!=(i=null!=(r=this.collection)?r:null==(n=null==(t=this.recipe)?void 0:t.lists)?void 0:n[0])?i:this.recipe&&this.getRecipeContainer(this.recipe),o=a&&(null==(s=this.collectionsAutoLinks.get(a))?void 0:s[UA(e)]);return a&&o?{recipe:o,collection:a}:null}async boot(){await super.boot(),await nI.booted,await FA.booted}getInitialState(){return{recipe:null,list:null,container:null,recipesContainers:new WeakMap,hasSeenCollection:!1}}getComputedStateDefinitions(){return{collection:({list:e,container:t})=>{var n;return null!=(n=null!=e?e:t)?n:null}}}async cachingDocuments(e){this.engine.setConfig({cachesDocuments:!0});const t=await e();return this.engine.clearCache(),this.engine.setConfig({cachesDocuments:!1}),t}async findRecipe(e){try{const t=await LA.withEngine(this.engine,(async()=>{var t,n;const r=await LA.all({$in:[N(e)]});return await(null==(t=r[0])?void 0:t.loadRelationIfUnloaded("lists")),null!=(n=r[0])?n:null}));return!!t&&(this.setState({recipe:t}),!0)}catch(t){return Y(t,Ud)||MR.report(t),!1}}async findRecipesList(e){try{const t=await yA.withEngine(this.engine,(async()=>{var t;return null!=(t=(await yA.all({$in:[N(e)]}))[0])?t:null}));return!!t&&(await this.loadRecipesList(t),this.setState({list:t,hasSeenCollection:!0}),!0)}catch(t){return Y(t,Ud)||MR.report(t),!1}}async findRecipesContainer(e){const t=await this.loadRecipesContainer(e);return!!t&&(this.setState({container:t,hasSeenCollection:!0}),!0)}async loadRecipesList(e){await yA.withEngine(this.engine,(()=>e.loadRelationIfUnloaded("items"))),await vA.withEngine(this.engine,(()=>{var t,n;return Promise.all(null!=(n=null==(t=e.items)?void 0:t.map((e=>e.loadRelationIfUnloaded("recipe"))))?n:[])})),this.setAutoLinks(e)}async loadRecipesContainer(e){var t;this.recipesContainersRequested.add(e);const n=await BA.withEngine(this.engine,(async()=>{const t=await BA.find(e);return await(null==t?void 0:t.loadRelation("recipes")),t}));return n&&n.recipes&&0!==n.recipes.length?(this.replaceCurrentRecipeInstance(n),this.setState({recipesContainers:new WeakMap(null==(t=n.recipes)?void 0:t.map((e=>[e,n])))}),this.setAutoLinks(n),n):null}replaceCurrentRecipeInstance(e){if(!this.recipe||!e.recipes)return;const t=e.recipes.findIndex((e=>{var t;return e.url===(null==(t=this.recipe)?void 0:t.url)}));null!==t&&-1!==t&&(e.recipes[t]=Hn(this.recipe))}setAutoLinks(e){var t;this.collectionsAutoLinks.set(e,(null!=(t=e.recipes)?t:[]).reduce(((e,t)=>d(e,(e=>{t.autoLinks.forEach((n=>e[UA(n)]=t))}))),{})),this.autoLinks.isResolved()||this.autoLinks.resolve()}}),VA=10,HA=class extends zu{constructor(){super(...arguments),t(this,"handlers",new Map),t(this,"asyncLock",new ve),t(this,"engine",null),t(this,"syncInterval",null)}async sync(e){nI.isLoggedIn()&&!qA.active&&await this.asyncLock.run((async()=>{const t=Date.now();this.status="syncing";try{await this.pullChanges(e),await this.pushChanges(e),await this.uploadFiles(),await ge({milliseconds:Math.max(0,1e3-(Date.now()-t))})}catch(n){MR.report(n,uS("errors.sync"))}finally{this.status="online"}}))}async syncIfOnline(e){nA.online&&await this.sync(e)}async registerHandler(e,t){var n;await(null==(n=t.initialize)?void 0:n.call(t)),this.engine&&sA(e).setEngine(this.engine),this.handlers.set(e,t),e.on("created",(e=>t.active&&this.createRemoteModel(e))),e.on("updated",(e=>t.active&&this.updateRemoteModel(e)))}enqueueFileUpload(e,t){var n,r;const i=Object.assign({},this.dirtyFileUrls);(null!=(r=i[n=e.url])?r:i[n]=new Set).add(t),this.dirtyFileUrls=i}removeFileUpload(e,t){var n;const r=Object.assign({},this.dirtyFileUrls),i=null!=(n=r[e])?n:r[e]=new Set;i.delete(t),0===i.size&&delete r[e],this.dirtyFileUrls=r}onModelMoved(e,t){e in this.localModelUpdates&&this.setState({localModelUpdates:{...ye(this.localModelUpdates,e),[t]:this.localModelUpdates[e]}})}async boot(){await super.boot(),await Promise.all([...this.handlers.values()].map((e=>e.booted))),nI.authenticator&&this.initializeEngine(nI.authenticator),qu.on("login",(({authenticator:e})=>this.initializeEngine(e))),qu.on("logout",(()=>this.setState({status:"disconnected",dirtyFileUrls:{},dirtyRemoteModels:be([],"url"),remoteOperationUrls:{},localModelUpdates:{}}))),qu.once("application-mounted",(async()=>{this.startupSync?await this.sync():this.status=nI.isLoggedIn()?"online":"disconnected"})),this.updateSyncInterval(this.autoSync)}getInitialState(){return{autoSync:10,status:"disconnected",startupSync:!0,dirtyFileUrls:{},dirtyRemoteModels:be([],"url"),remoteOperationUrls:{},localModelUpdates:{}}}getComputedStateDefinitions(){return{dirty:(e,{pendingUpdates:t})=>t>0,online:({status:e})=>"online"===e,offline:({status:e})=>"offline"===e,syncing:({status:e})=>"syncing"===e,disconnected:({status:e})=>"disconnected"===e,pendingUpdates:({dirtyFileUrls:e,localModelUpdates:t})=>Object.values(t).reduce(((e,t)=>e+t),0)+Object.values(e).reduce(((e,t)=>e+t.size),0)}}onStateUpdated(e){super.onStateUpdated(e),"autoSync"in e&&this.updateSyncInterval(e.autoSync)}initializeEngine(e){this.engine=e.engine,sA(xy).setEngine(this.requireEngine());for(const t of this.handlers.keys())sA(t).setEngine(this.engine)}requireEngine(){var e;return null!=(e=this.engine)?e:i("Could not get required Engine")}updateSyncInterval(e){this.syncInterval&&clearInterval(this.syncInterval),this.syncInterval=e?window.setInterval((()=>this.sync()),60*e*1e3):null}async pullChanges(e){const t=be(e?[e]:this.getLocalModels(),"url"),n=e?await this.fetchRemoteModelsForLocal(e):await this.fetchRemoteModels(t.getItems()),r=be(n,(e=>e instanceof xy?e.resourceUrl:e.url));await this.synchronizeModels(t,r),this.setState({dirtyRemoteModels:be(r.getItems().filter((e=>e.isDirty())),"url"),remoteOperationUrls:r.getItems().reduce(((e,t)=>(e[t.url]=t.getRelatedModels().map((e=>{var t;return null!=(t=e.operations)?t:[]})).flat().map((e=>e.url)),e)),{})})}async pushChanges(e){const t=nI.requireAuthenticator().requireAuthenticatedFetch(),n=this.dirtyRemoteModels.getItems().filter((t=>!e||t.url===e.url)),r=be(this.getLocalModelsWithRemoteFileUrls(),(({model:e})=>e.url));await Promise.all(n.map((async e=>{var n,i;if(e.isSoftDeleted()){const s=r.get(e.url);if(await Promise.all(null!=(n=null==s?void 0:s.remoteFileUrls.map((e=>t(e,{method:"DELETE"}))))?n:[]),s){const e=this.handlers.get(s.model.static());await(null==(i=null==e?void 0:e.beforeDeletingModel)?void 0:i.call(e,s.model))}return e.enableHistory(),e.enableTombstone(),await e.delete(),void(await(null==s?void 0:s.model.delete()))}await e.save()}))),this.setState({dirtyRemoteModels:e?this.dirtyRemoteModels.filter(((t,n)=>n!==e.url)):be([],"url"),remoteOperationUrls:n.reduce(((e,t)=>(e[t.url]=t.getRelatedModels().map((e=>{var t;return null!=(t=e.operations)?t:[]})).flat().map((e=>e.url)),e)),this.remoteOperationUrls),localModelUpdates:e?ye(this.localModelUpdates,e.url):{}})}async uploadFiles(){const e=nI.requireAuthenticator().requireAuthenticatedFetch();for(const[t,n]of Object.entries(this.dirtyFileUrls))for(const r of n){const n=await tA.get(r);if(n){const i=await e(r,{method:"PUT",headers:{"Content-Type":n.mimeType},body:n.blob});if(!we(i))continue;await tA.delete(r),await Ny.replace(r,new Response(n.blob)),await this.updateFilePermissions(t,r)}this.removeFileUpload(t,r)}}async synchronizeModels(e,t){const n=new Set;for(const r of t.items()){if(r instanceof xy){const t=e.get(r.resourceUrl);t&&(await t.delete(),n.add(r.resourceUrl));continue}const t=this.getLocalModel(r,e);await ry.synchronize(t,r),await this.reconcileInconsistencies(t,r),await t.save(),e.add(t),n.add(t.url)}for(const[r,i]of e){if(n.has(r))continue;const e=this.getRemoteModel(i,t);await ry.synchronize(i,e),t.add(e)}}createRemoteModel(e){const t=this.cloneLocalModel(e),n=be(this.dirtyRemoteModels.getItems(),"url");n.add(t),this.setState({dirtyRemoteModels:n,localModelUpdates:{...this.localModelUpdates,[e.url]:1}})}async updateRemoteModel(e){var t;const n=this.getRemoteModel(e,this.dirtyRemoteModels),r=null!=(t=this.localModelUpdates[e.url])?t:0;if(await ry.synchronize(e,n),!this.dirtyRemoteModels.hasKey(n.url)){const e=be(this.dirtyRemoteModels.getItems(),"url");e.add(n),this.setState({dirtyRemoteModels:e})}this.setState({localModelUpdates:e.isSoftDeleted()?ye(this.localModelUpdates,e.url):{...this.localModelUpdates,[e.url]:r+1}})}async updateFilePermissions(e,t){const n=this.findLocalModel(e);if(!n)return;const r=new Dy({url:t}),i=await this.getModelPublicPermissions(n),s=await this.getModelPublicPermissions(r);(i.length!==s.length||i.some((e=>!s.includes(e))))&&await r.updatePublicPermissions(i)}getLocalModel(e,t){var n;return null!=(n=t.get(e.url))?n:this.cloneRemoteModel(e)}getRemoteModel(e,t){var n;return null!=(n=t.get(e.url))?n:this.cloneLocalModel(e)}async getModelPublicPermissions(e){return await e.fetchPublicPermissionsIfMissing(),e._publicPermissions}cloneLocalModel(e){const t=e.static(),n=sA(e.static());return d(e.clone({constructors:[[t,n]]}),(e=>{this.cleanRemoteModel(e)}))}cloneRemoteModel(e){var t;const n=e.static(),r=function(e){var t;return null!=(t=iA.get(e))?t:i(`Couldn't find local class for ${e.modelName}`)}(n);for(const i of this.handlers.keys())if(i===r){null==(t=this.handlers.get(i))||t.mendRemoteModel(e);break}return e.clone({constructors:[[n,r]]})}async fetchRemoteModels(e){const t=await Promise.all([...this.handlers.entries()].map((async([e,t])=>{if(!t.active)return[];const n=[],r=sA(e),i=new Set([r.collection]),s=new Set;for(;i.size>s.size;){const e=[...i].find((e=>!s.has(e))),a=await Ly.withEngine(this.requireEngine(),(()=>Ly.find(e)));if(s.add(e),!a)continue;const o=a.resourceUrls.filter((e=>{const t=e.endsWith("/");return t&&i.add(e),!t})),l=xe(o.filter((e=>!/\.(jpe?|pn)g$/.test(e))),VA);for(const i of l){const e=await r.all({$in:i});e.some((e=>e.usesRdfAliases()))&&t.foundModelUsingRdfAliases(),n.push(...e)}}return n})));return this.completeRemoteModels(e,t.flat())}async fetchRemoteModelsForLocal(e){const t=await sA(e.static()).find(e.url);return this.completeRemoteModels([e],E([t]))}async completeRemoteModels(e,t){const n=sA(xy),r=t.map((e=>e.url)),i=e.filter((e=>!r.includes(e.url))).map((e=>e.requireDocumentUrl())),s=await n.all({$in:i});return t.concat(s)}async reconcileInconsistencies(e,t){e.rebuildAttributesFromHistory(),e.setAttributes(t.getAttributes()),this.getSameDocumentRelations(e.static()).forEach((n=>{var r,i;const s=null!=(r=e.getRelationModels(n))?r:[],a=be(null!=(i=t.getRelationModels(n))?i:[],"url");s.forEach((e=>{var t,n;e.isRelationLoaded("operations")&&(e.rebuildAttributesFromHistory(),e.setAttributes(null!=(n=null==(t=a.get(e.url))?void 0:t.getAttributes())?n:{}))}))})),e.isDirty()&&(await e.save(),await ry.synchronize(e,t))}findLocalModel(e){const t=[...this.handlers.values()];for(const n of t){const t=n.getLocalModels().find((t=>t.url===e));if(t)return t}return null}getLocalModels(){return[...this.handlers.values()].map((e=>e.active?e.getLocalModels():[])).flat()}getLocalModelsWithRemoteFileUrls(){return[...this.handlers.values()].map((e=>e.active?e.getLocalModelsWithRemoteFileUrls():[])).flat()}getSameDocumentRelations(e){var t;return HA.sameDocumentRelations.has(e)||HA.sameDocumentRelations.set(e,e.relations.filter((t=>{if(ry.reservedRelations.includes(t))return!1;const n=e.instance().requireRelation(t);return Eg(n)&&n.useSameDocument}))),null!=(t=HA.sameDocumentRelations.get(e))?t:[]}cleanRemoteModel(e){var t;const n=this.remoteOperationUrls[e.url];if(!n)return;const r=e.getRelatedModels().filter((e=>!Y(e,Iy)&&!Y(e,vy)&&!Y(e,oy)));for(const i of r){const e=null!=(t=i.operations)?t:[];i.setRelationModels("operations",e.filter((e=>!!n.includes(e.url)&&(e.cleanDirty(!0),!0)))),i.rebuildAttributesFromHistory(),i.cleanDirty(!0),i.metadata.cleanDirty(!0),i.setRelationModels("operations",e),i.rebuildAttributesFromHistory()}}};let WA=HA;t(WA,"persist",["autoSync","startupSync","localModelUpdates"]),t(WA,"sameDocumentRelations",new WeakMap);const JA=r(WA);class KA{constructor(){t(this,"name"),t(this,"authenticatedFetch"),t(this,"booted"),t(this,"listeners",c([])),t(this,"_engine")}get engine(){var e;return this._engine=null!=(e=this._engine)?e:new kg(this.requireAuthenticatedFetch()),this._engine}getAuthenticatedFetch(){var e;return null!=(e=this.authenticatedFetch)?e:null}requireAuthenticatedFetch(){var e;return null!=(e=this.authenticatedFetch)?e:i("Authenticated fetch is not ready")}addListener(e){return this.listeners.includes(e)||this.listeners.push(e),()=>{this.removeListener(e)}}removeListener(e){this.listeners.includes(e)&&this.listeners.remove(e)}async boot(){if(this.booted)return this.booted;this.booted=new s,await this.restoreSession(),this.booted.resolve()}async initAuthenticatedFetch(e){this.authenticatedFetch=e,await this.notifyListeners("onAuthenticatedFetchReady",e)}async startSession(e){const t={authenticator:this,...e};return await this.notifyListeners("onSessionStarted",t),t}async failSession(e,t){await this.notifyListeners("onSessionFailed",e,t)}async endSession(){await this.notifyListeners("onSessionEnded")}async notifyListeners(e,...t){await Promise.all(this.listeners.toArray().map((async n=>{const r=n[e];await(null==r?void 0:r(...t))})))}}const GA="local-storage-authenticator";const ZA="inrupt-authenticator";const YA={},QA={localStorage:new class extends KA{async login(e,t){var n,r,s,a;const o=null!=(n=prompt("What is your webId?",e))?n:i(AuthenticationCancelledError);return t=null!=t?t:{webId:o,name:null!=(r=prompt("What is your name?","John Doe"))?r:i(AuthenticationCancelledError),cloaked:!1,writableProfileUrl:o,storageUrls:[null!=(s=prompt("Where is your storage?","http://localhost:4000/"))?s:i(AuthenticationCancelledError)],privateTypeIndexUrl:null!=(a=prompt("Where is the type index?","http://localhost:4000/settings/privateTypeIndex"))?a:i(AuthenticationCancelledError),oidcIssuerUrl:e},l.set(GA,{loginUrl:e,user:t}),location.reload(),await ge({seconds:60}),i("Browser should have redirected, but it didn't")}async logout(){l.remove(GA),await this.endSession()}async restoreSession(){l.has(GA)&&(await this.initAuthenticatedFetch(window.fetch.bind(window)),await this.startSession(l.require(GA)))}},inrupt:new class extends KA{constructor(){super(...arguments),t(this,"_fetch"),t(this,"_login"),t(this,"_logout"),t(this,"_handleIncomingRedirect")}async login(e){return l.set(ZA,!0),await this._login({oidcIssuer:e,clientId:iI.clientID.client_id,clientName:iI.clientID.client_name,redirectUrl:iI.clientID.redirect_uris[0]}),await ge({seconds:60}),i("Browser should have redirected, but it didn't")}async logout(){await this._logout(),await this.endSession()}async restoreSession(){const{fetch:e,handleIncomingRedirect:t,login:n,logout:r}=await Fu((()=>import("./index.e9bdf506.js").then((e=>e.i))),1?["assets/index.e9bdf506.js","assets/noeldemartin-utils.esm.87e89d40.js"]:void 0);this._fetch=e,this._login=n,this._logout=r,this._handleIncomingRedirect=t,await this.loginFromRedirect()}async loginFromRedirect(){if(!l.has(ZA))return;const e=await this._handleIncomingRedirect(window.location.href);l.remove(ZA),(null==e?void 0:e.isLoggedIn)&&e.webId&&await this.initSession(e.webId)}async initSession(e){await this.initAuthenticatedFetch(this._fetch);try{const t=await nI.requireUserProfile(e);await this.startSession({user:t,loginUrl:e})}catch(t){await this.failSession(e,t)}}}};function XA(e){return YA[e]}const eI="auth.flashRoute";class tI extends zu{isLoggedIn(){return this.loggedIn}requireAuthenticator(){var e;return null!=(e=this.authenticator)?e:i("Could not get authenticator")}requireUser(){var e;return null!=(e=this.user)?e:i("Could not get user profile")}requireUserProfile(e){return this.getUserProfile(e,!0)}async getUserProfile(e,t=!1){var n;return null!=(n=this.profiles[e])?n:d(await function(e){return mp.apply(this,arguments)}(e,{fetch:this.fetch,required:t}),(e=>e&&this.rememberProfile(e)))}async refreshUserProfile(){if(!this.isLoggedIn())return;this.setState({profiles:ye(this.profiles,[this.user.webId])});const e=await this.requireUserProfile(this.user.webId);this.setState({session:{...this.session,user:e}})}async login(e,t){var n,r,i;if(t=null!=(n=null!=t?t:this.preferredAuthenticator)?n:"default",this.loggedIn)return!0;if(this.ongoing)throw new Error("Authentication already in progress");const s=setTimeout((()=>this.stale=!0),1e4);this.ongoing=!0;try{const n=await this.getUserProfile(e),a=null!=(i=null==n?void 0:n.oidcIssuerUrl)?i:T(null!=(r=null==n?void 0:n.webId)?r:e),o=await this.bootAuthenticator(t);return this.rememberCurrentRoute(),this.setState({dismissed:!1,ignorePreviousSessionError:!0,previousSession:{loginUrl:e,avatarUrl:null==n?void 0:n.avatarUrl,authenticator:t,error:Gu("auth.stuckConnecting")}}),await o.login(a),!0}catch(a){return a instanceof AuthenticationCancelledError||(iI.isMounted?MR.report(a):this.setState({loginError:a})),!1}finally{clearTimeout(s),this.ongoing=!1,this.stale=!1}}async reconnect(e=!1){this.loggedIn||!this.previousSession||null!==this.previousSession.error&&!e||await this.login(this.previousSession.loginUrl,this.previousSession.authenticator)}async logout(e=!1){(e||await PR.confirm({title:uS("menu.logOut_confirmTitle"),message:JA.dirty?uS("menu.logOut_confirmMessageWithWarning"):uS("menu.logOut_confirmMessage"),acceptText:uS("menu.logOut"),acceptColor:Vx.Danger}))&&this.previousSession&&(this.setState({previousSession:null}),this.isLoggedIn()&&await this.authenticator.logout(),await Hh().purgeDatabase(),await Ed.push({name:"home"}),await qu.emit("logout"))}dismiss(){this.setState({dismissed:!0})}async createPrivateTypeIndex(){if(!this.isLoggedIn())throw new Error("Can't create a type index because the user is not logged in");const e=this.user,t=await function(e,t){return kp.apply(this,arguments)}(e,this.authenticator.requireAuthenticatedFetch());return d(t,(()=>{e.privateTypeIndexUrl=t,this.rememberProfile(e)}))}async createPublicTypeIndex(){if(!this.isLoggedIn())throw new Error("Can't create a type index because the user is not logged in");const e=this.user,t=await function(e,t){return _p.apply(this,arguments)}(e,this.authenticator.requireAuthenticatedFetch());return await Uy.withEngine(this.authenticator.engine,(async()=>{const e=await Uy.find(t);await(null==e?void 0:e.updatePublicPermissions([Hd.Read]))})),d(t,(()=>{e.publicTypeIndexUrl=t,this.rememberProfile(e)}))}async boot(){var e,t;await super.boot(),await MR.booted,ne("authenticator")&&this.setState({preferredAuthenticator:ie("authenticator")}),ne("refreshProfile")&&this.setState({staleProfiles:h(this.staleProfiles.concat(E([null==(e=this.session)?void 0:e.user.webId,null==(t=this.previousSession)?void 0:t.loginUrl])))}),await this.restorePreviousSession(),await this.restoreFlashRoute(),await this.startupReconnect()}getInitialState(){return{autoReconnect:!0,loginError:null,session:null,dismissed:!1,ongoing:!1,stale:!1,ignorePreviousSessionError:!1,previousSession:null,preferredAuthenticator:null,profiles:{},staleProfiles:[]}}getComputedStateDefinitions(){return{authenticator:e=>{var t,n;return null!=(n=null==(t=e.session)?void 0:t.authenticator)?n:null},error:e=>{var t,n,r;return e.loginError?null!=(t=e.loginError)?t:null:e.ignorePreviousSessionError?null:null!=(r=null==(n=e.previousSession)?void 0:n.error)?r:null},fetch:(e,{authenticator:t})=>{var n;return null!=(n=null==t?void 0:t.getAuthenticatedFetch())?n:window.fetch.bind(window)},loggedIn:e=>!!e.session,userAvatarUrl:e=>{var t,n,r,i,s;return null!=(s=null!=(i=null==(n=null==(t=e.session)?void 0:t.user)?void 0:n.avatarUrl)?i:null==(r=e.previousSession)?void 0:r.avatarUrl)?s:null},wasLoggedIn:e=>{var t;return!!(null==(t=e.previousSession)?void 0:t.loginUrl)},hasLoggedIn:(e,t)=>t.loggedIn||t.wasLoggedIn,user:e=>{var t,n;return null!=(n=null==(t=e.session)?void 0:t.user)?n:null}}}serializePersistedState(e){var t;return(null==(t=e.previousSession)?void 0:t.error)instanceof Error&&(e.previousSession.error=e.previousSession.error.message),e}rememberCurrentRoute(){var e;l.set(eI,{path:(e=Ed.currentRoute.value).path,query:e.query,hash:e.hash,params:e.params})}async restorePreviousSession(){this.previousSession&&await this.bootAuthenticator(this.previousSession.authenticator)}async restoreFlashRoute(){const e=l.pull(eI);e&&await Ed.replace(e)}async startupReconnect(){this.reconnectOnStartup()&&await this.reconnect()}reconnectOnStartup(){return!1!==Ed.currentRoute.value.meta.reconnect&&(ne("autoReconnect")?re(ie("autoReconnect")):this.autoReconnect)}async bootAuthenticator(e){const t=XA(e);return t.addListener({onSessionStarted:async e=>{this.setState({session:e,previousSession:{authenticator:t.name,loginUrl:e.loginUrl,avatarUrl:e.user.avatarUrl,error:null}}),(e.user.cloaked||!e.user.writableProfileUrl||this.staleProfiles.includes(e.user.webId))&&await this.refreshUserProfile(),Iy.setEngine(e.authenticator.engine),await qu.emit("login",e)},onSessionFailed:async(e,n)=>{this.setState({previousSession:{authenticator:t.name,loginUrl:e,error:n}})},onSessionEnded:()=>this.setState({session:null}),onAuthenticatedFetchReady:e=>qu.emit("authenticated-fetch-ready",e)}),await t.boot(),t}rememberProfile(e){this.setState({profiles:{...this.profiles,[e.webId]:e},staleProfiles:_e(this.staleProfiles,e.webId)})}}t(tI,"persist",["autoReconnect","dismissed","previousSession","profiles","staleProfiles"]);const nI=r(tI),rI={"@context":"https://www.w3.org/ns/solid/oidc-context.jsonld",client_id:"https://umai.noeldemartin.com/clientid.jsonld",client_name:"Umai",redirect_uris:["https://umai.noeldemartin.com/"],client_uri:"https://umai.noeldemartin.com/",logo_uri:"https://umai.noeldemartin.com/android-chrome-512x512.png",scope:"openid profile offline_access webid",grant_types:["refresh_token","authorization_code"],response_types:["code"]};const iI=r(class extends zu{constructor(){super(),t(this,"name"),t(this,"clientID"),t(this,"isDevelopment"),t(this,"isProduction"),t(this,"isStaging"),t(this,"isTesting"),t(this,"sourceUrl"),t(this,"version"),t(this,"versionName"),t(this,"releaseNotesUrl");const e="302a2b559c74d65c25ca2c4a7faa28d2c3e8aa2a\n";this.name=rI.client_name,this.clientID=rI,this.isDevelopment=!1,this.isProduction=!0,this.isStaging=!1,this.isTesting=!1,this.sourceUrl="https://github.com/noeldemartin/umai",this.version="0.1.9",this.versionName=this.formatVersionName(this.isStaging||this.isDevelopment?(this.isStaging?"staging.":"dev.")+e.toString().substring(0,7):this.version),this.releaseNotesUrl=this.sourceUrl+(this.isStaging||this.isDevelopment?`/tree/${e}`:`/releases/tag/${this.versionName}`)}env(e){return{VITE_DEFAULT_PROXY_URL:"https://proxy.noeldemartin.com/fetch",VITE_APP_DOMAIN:"https://umai.noeldemartin.com",VITE_SENTRY_DSN:"https://0b0fb30a1f46455c846ce37bdb75a2ad@o424851.ingest.sentry.io/4503941584846848",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}[`VITE_${e}`]}async reload(e){e&&ke(e),location.reload(),await new Promise((()=>{}))}async boot(){await super.boot(),await nI.booted,await FA.booted,this.isOnboarding=!Ed.currentRouteIs("viewer")&&!nI.isLoggedIn()&&null===nI.previousSession&&FA.recipes.isEmpty(),qu.on("recipe-created",(async()=>{this.isOnboarding&&(this.setState({isOnboarding:!1,onboardingCompleting:!0}),await Lx(500),this.setState({onboardingCompleting:!1}))})),qu.on("recipe-deleted",(async()=>{nI.isLoggedIn()||null!==nI.previousSession||FA.recipes.length>0||this.setState({isOnboarding:!0})})),qu.on("logout",(()=>this.setState({isOnboarding:!0}))),qu.once("application-mounted",(()=>this.setState({isMounted:!0})))}getInitialState(){return{isMounted:!1,isOnboarding:!1,onboardingCompleting:!1}}formatVersionName(e){var t;return/\d/.test(null!=(t=e[0])?t:"")?`v${e}`:e}}),sI=10;class aI{constructor(){t(this,"_modelBindings"),t(this,"_runtimeHistory"),t(this,"_replacements"),t(this,"_originalReplace")}get previousRoute(){var e,t;return null!=(t=null==(e=this.runtimeHistory)?void 0:e[1])?t:null}get modelBindings(){var e;return null!=(e=this._modelBindings)?e:i("modelBindings not initialized in framework router")}get runtimeHistory(){var e;return null!=(e=this._runtimeHistory)?e:i("runtimeHistory not initialized in framework router")}get replacements(){var e;return null!=(e=this._replacements)?e:i("replacements not initialized in framework router")}get originalReplace(){var e;return null!=(e=this._originalReplace)?e:i("originalReplace not initialized in framework router")}initialize(e){this._modelBindings={},this._runtimeHistory=[],this._replacements=new WeakMap,this._originalReplace=e,this.beforeEach(Se((()=>this.handleGithubPagesRedirect()))),this.beforeEach((e=>this.onCurrentRouteChanged(e)))}registerModelBinding(e,t){this.modelBindings[e]=t}getModelBinding(e){var t;return null!=(t=this.modelBindings[e])?t:null}getQueryParam(e){return this.getQueryParams()[e]}getQueryParams(){return this.currentRoute.value.query}hasNavigated(){return this.runtimeHistory.length>1}previousRouteWas(e){var t,n;return"string"==typeof e?(null==(t=this.previousRoute)?void 0:t.name)===e:e.test(Re(null==(n=this.previousRoute)?void 0:n.name))}currentRouteIs(e){return"string"==typeof e?this.currentRoute.value.name===e:e.test(Re(this.currentRoute.value.name))}async replace(e){return this.replacements.set(this.currentRoute.value,e),this.originalReplace.call(this,e)}onCurrentRouteChanged(e){const t=this.runtimeHistory[0];if(t&&this.replacements.get(t))return this.runtimeHistory[0]=e,void this.replacements.delete(t);this.runtimeHistory.unshift(e),this.runtimeHistory.splice(sI)}handleGithubPagesRedirect(){const e=l.pull("github-pages-redirect");e&&this.replace(e)}}function oI(e){if("function"==typeof e.component){const t=e.component;return d(e,(e=>{e.component=async()=>{const{default:n}=await t();return cI(n,e.meta)}}))}return e.component?d(e,(e=>{e.component=cI(e.component,e.meta)})):e}function lI(e){return!e||Object.values(e).some((e=>!e))}function uI(e,t){const n=Ur(nc),r=Qn([]),i=Qn(null);function s(){i.value=function(){try{return Object.entries(n.params).reduce(((e,[t,n])=>{if(Array.isArray(n))return e;const s=Ed.getModelBinding(t);return s?d(e,(e=>{e[t]=s.find(n),s.subscribe&&r.value.push(s.subscribe(n,(e=>{i.value&&(i.value[t]=e?new Proxy(e,{}):null)})))})):e}),Object.assign({},n.params))}catch(e){return null}}(),lI(i.value)?PR.hideHeader():PR.restoreHeader()}return Br(pa((()=>(null==t?void 0:t.title)?"string"==typeof t.title?t.title:lI(i.value)?null:t.title(i.value):null)),(e=>dI(e)),{immediate:!0}),function(e){const t=Ur(Xu,{}).value;t&&gd(t,"leaveGuards",e)}((()=>PR.restoreHeader())),function(e){const t=Ur(Xu,{}).value;t&&gd(t,"updateGuards",e)}((()=>s())),mi((()=>{r.value.forEach((e=>e())),r.value=[]})),s(),()=>{var n;if((null==(n=null==t?void 0:t.requiresIndexedDB)||n)&&!oA.supportsIndexedDB){const e={title:uS("errors.unsupportedBrowser"),description:uS("errors.unsupportedBrowser_indexedDB")};return ma(PR.resolveComponent(OR.ErrorReport),{report:e})}return lI(i.value)?ma(PR.resolveComponent(OR.NotFound)):ma(e,i.value)}}function cI(e,t){return ti({setup:()=>uI(e,t)})}function dI(e){document.title=e?`${e} | ${iI.name}`:iI.name}function pI(e){return e.routes=e.routes.map(oI),function(e){const t=e.replace,n=ye(Object.getOwnPropertyDescriptors(aI.prototype),["constructor"]);for(const[r,i]of Object.entries(n))Object.defineProperty(e,r,i);return d(e,(e=>e.initialize(t)))}(Id(e))}function hI(e){const t=Ec();return d(pI({history:t,routes:e}),(e=>Ed.setInstance(e)))}
/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var fI="store";function mI(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function vI(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function gI(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;bI(e,n,[],e._modules.root,!0),yI(e,n,t)}function yI(e,t,n){var r=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,s={};mI(i,(function(t,n){s[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return s[n]()},enumerable:!0})})),e._state=Un({data:t}),e.strict&&function(e){Br((function(){return e._state.data}),(function(){}),{deep:!0,flush:"sync"})}(e),r&&n&&e._withCommit((function(){r.data=null}))}function bI(e,t,n,r,i){var s=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a]&&0&&console.error("[vuex] duplicate namespace "+a+" for the namespaced module "+n.join("/")),e._modulesNamespaceMap[a]=r),!s&&!i){var o=xI(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit((function(){o[l]=r.state}))}var u=r.context=function(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var s=_I(n,r,i),a=s.payload,o=s.options,l=s.type;return o&&o.root||(l=t+l),e.dispatch(l,a)},commit:r?e.commit:function(n,r,i){var s=_I(n,r,i),a=s.payload,o=s.options,l=s.type;o&&o.root||(l=t+l),e.commit(l,a,o)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return wI(e,t)}},state:{get:function(){return xI(e.state,n)}}}),i}(e,a,n);r.forEachMutation((function(t,n){!function(e,t,n,r){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,r.state,t)}))}(e,a+n,t,u)})),r.forEachAction((function(t,n){var r=t.root?n:a+n,i=t.handler||t;!function(e,t,n,r){(e._actions[t]||(e._actions[t]=[])).push((function(t){var i,s=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return(i=s)&&"function"==typeof i.then||(s=Promise.resolve(s)),e._devtoolHook?s.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):s}))}(e,r,i,u)})),r.forEachGetter((function(t,n){!function(e,t,n,r){if(e._wrappedGetters[t])return;e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)}}(e,a+n,t,u)})),r.forEachChild((function(r,s){bI(e,t,n.concat(s),r,i)}))}function wI(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var s=i.slice(r);Object.defineProperty(n,s,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function xI(e,t){return t.reduce((function(e,t){return e[t]}),e)}function _I(e,t,n){var r;return null!==(r=e)&&"object"==typeof r&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var kI="vuex bindings",SI="vuex:mutations",RI="vuex:actions",AI="vuex",II=0;function CI(e,t){nu({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[kI]},(function(n){n.addTimelineLayer({id:SI,label:"Vuex Mutations",color:EI}),n.addTimelineLayer({id:RI,label:"Vuex Actions",color:EI}),n.addInspector({id:AI,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===AI)if(n.filter){var r=[];PI(r,t._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[TI(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===AI){var r=n.nodeId;wI(t,r),n.state=function(e,t,n){t="root"===n?t:t[n];var r=Object.keys(t),i={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(r.length){var s=function(e){var t={};return Object.keys(e).forEach((function(n){var r=n.split("/");if(r.length>1){var i=t,s=r.pop();r.forEach((function(e){i[e]||(i[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),i=i[e]._custom.value})),i[s]=jI((function(){return e[n]}))}else t[n]=jI((function(){return e[n]}))})),t}(t);i.getters=Object.keys(s).map((function(e){return{key:e.endsWith("/")?DI(e):e,editable:!1,value:jI((function(){return s[e]}))}}))}return i}((i=t._modules,a=(s=r).split("/").filter((function(e){return e})),a.reduce((function(e,t,n){var r=e[t];if(!r)throw new Error('Missing module "'+t+'" for path "'+s+'".');return n===a.length-1?r:r._children}),"root"===s?i:i.root._children)),"root"===r?t.getters:t._makeLocalGettersCache,r)}var i,s,a})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===AI){var r=n.nodeId,i=n.path;"root"!==r&&(i=r.split("/").filter(Boolean).concat(i)),t._withCommit((function(){n.set(t._state.data,i,n.state.value)}))}})),t.subscribe((function(e,t){var r={};e.payload&&(r.payload=e.payload),r.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(AI),n.sendInspectorState(AI),n.addTimelineEvent({layerId:SI,event:{time:Date.now(),title:e.type,data:r}})})),t.subscribeAction({before:function(e,t){var r={};e.payload&&(r.payload=e.payload),e._id=II++,e._time=Date.now(),r.state=t,n.addTimelineEvent({layerId:RI,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:r}})},after:function(e,t){var r={},i=Date.now()-e._time;r.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},e.payload&&(r.payload=e.payload),r.state=t,n.addTimelineEvent({layerId:RI,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:r}})}})}))}var EI=8702998,OI={label:"namespaced",textColor:16777215,backgroundColor:6710886};function DI(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function TI(e,t){return{id:t||"root",label:DI(t),tags:e.namespaced?[OI]:[],children:Object.keys(e._children).map((function(n){return TI(e._children[n],t+n+"/")}))}}function PI(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[OI]:[]}),Object.keys(t._children).forEach((function(i){PI(e,t._children[i],n,r+i+"/")}))}function jI(e){try{return e()}catch(Wd){return Wd}}var MI=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},LI={namespaced:{configurable:!0}};LI.namespaced.get=function(){return!!this._rawModule.namespaced},MI.prototype.addChild=function(e,t){this._children[e]=t},MI.prototype.removeChild=function(e){delete this._children[e]},MI.prototype.getChild=function(e){return this._children[e]},MI.prototype.hasChild=function(e){return e in this._children},MI.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},MI.prototype.forEachChild=function(e){mI(this._children,e)},MI.prototype.forEachGetter=function(e){this._rawModule.getters&&mI(this._rawModule.getters,e)},MI.prototype.forEachAction=function(e){this._rawModule.actions&&mI(this._rawModule.actions,e)},MI.prototype.forEachMutation=function(e){this._rawModule.mutations&&mI(this._rawModule.mutations,e)},Object.defineProperties(MI.prototype,LI);var $I=function(e){this.register([],e,!1)};function UI(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;UI(e.concat(r),t.getChild(r),n.modules[r])}}$I.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},$I.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},$I.prototype.update=function(e){UI([],this.root,e)},$I.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new MI(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&mI(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},$I.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},$I.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var NI=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new $I(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=i;var s=this,a=this.dispatch,o=this.commit;this.dispatch=function(e,t){return a.call(s,e,t)},this.commit=function(e,t,n){return o.call(s,e,t,n)},this.strict=r;var l=this._modules.root.state;bI(this,l,[],this._modules.root),yI(this,l),n.forEach((function(e){return e(t)}))},FI={state:{configurable:!0}};function BI(){return d(new NI({}),(e=>Bu.setInstance(e)))}NI.prototype.install=function(e,t){e.provide(t||fI,this),e.config.globalProperties.$store=this,void 0!==this._devtools&&this._devtools&&CI(e,this)},FI.state.get=function(){return this._state.data},FI.state.set=function(e){},NI.prototype.commit=function(e,t,n){var r=this,i=_I(e,t,n),s=i.type,a=i.payload,o={type:s,payload:a},l=this._mutations[s];l&&(this._withCommit((function(){l.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(o,r.state)})))},NI.prototype.dispatch=function(e,t){var n=this,r=_I(e,t),i=r.type,s=r.payload,a={type:i,payload:s},o=this._actions[i];if(o){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,n.state)}))}catch(Wd){}var l=o.length>1?Promise.all(o.map((function(e){return e(s)}))):o[0](s);return new Promise((function(e,t){l.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,n.state)}))}catch(Wd){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,n.state,e)}))}catch(Wd){}t(e)}))}))}},NI.prototype.subscribe=function(e,t){return vI(e,this._subscribers,t)},NI.prototype.subscribeAction=function(e,t){return vI("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},NI.prototype.watch=function(e,t,n){var r=this;return Br((function(){return e(r.state,r.getters)}),t,Object.assign({},n))},NI.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},NI.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),bI(this,this.state,e,this._modules.get(e),n.preserveState),yI(this,this.state)},NI.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete xI(t.state,e.slice(0,-1))[e[e.length-1]]})),gI(this)},NI.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},NI.prototype.hotUpdate=function(e){this._modules.update(e),gI(this,!0)},NI.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(NI.prototype,FI);const zI=r(class extends zu{constructor(){super(...arguments),t(this,"activeElements",new Set),t(this,"elementsLeaving",new Set),t(this,"elementsChildren",new WeakMap),t(this,"elementsConfig",new WeakMap),t(this,"elementsSourceTransitions",new WeakMap),t(this,"elementsTargetTransitions",new WeakMap),t(this,"elementsTarget",new WeakMap),t(this,"elementsReady",new WeakMap),t(this,"elementsFreezingInPlace",new WeakMap),t(this,"transitions",{})}defineGlobalEnterTransition(e,t){this.transitions[e]=t}defineGlobalLeaveTransition(e,t){this.transitions[e]=t}defineGlobalElementTransition(e,t){this.transitions[e]=t}freezeInPlace(e){this.elementsFreezingInPlace.set(e)}registerElementConfig(e,t){this.elementsConfig.set(e,t),this.elementsChildren.set(e,[])}updateElementConfig(e,t){this.elementsConfig.set(e,t)}async showElement(e){this.elementsConfig.get(e)&&(this.activeElements.add(e),this.registerElementHierarchy(e),await d(this.addElement(e),(t=>this.elementsReady.set(e,t))))}async hideElement(e){this.activeElements.has(e)&&(this.activeElements.delete(e),this.elementsLeaving.add(e),this.removeElement(e,this.requireElementConfig(e)).then((()=>{this.elementsLeaving.delete(e)})))}async waitElementsGone(e,t){await Ae(),await Promise.all(c(this.elementsLeaving).filter((n=>{const r=this.requireElementConfig(n);return r.name===e&&(!t||r.id===t)})).map((e=>this.elementsSourceTransitions.get(e))))}async waitElementsReady(e){await Promise.all(c(this.activeElements).filter((t=>{var n;return(null==(n=this.elementsConfig.get(t))?void 0:n.name)===e})).map((e=>this.elementsReady.get(e))))}async boot(){await super.boot(),this.defineGlobalEnterTransition("fadeIn",(e=>Xx(e,700))),this.defineGlobalLeaveTransition("fadeOut",(e=>e_(e,700)))}__get(e){return this.transitions[e]}requireElementConfig(e){var t;return null!=(t=this.elementsConfig.get(e))?t:i("Couldn't get required element config")}registerElementHierarchy(e){var t;let n=e.parentElement;for(;null!==n;)null==(t=this.elementsChildren.get(n))||t.push(e),n=n.parentElement}async addElement(e){PR.animations&&Ed.hasNavigated()&&(e.style.opacity="0",await yr(),await this.elementsTargetTransitions.get(e),e.removeAttribute("style"),await this.runEnterElementTransition(e))}async removeElement(e,t){if(!PR.animations)return;const n=await this.freezeElement(e);if(!n)return;const r=this.findElementTarget(e,t),i=r?this.runElementTransition(n,e,t,r):this.runLeaveElementTransition(n,e);this.elementsSourceTransitions.set(e,i),await i,n.remove()}findElementTarget(e,t){var n;const r=null!=(n=this.elementsTarget.get(e))?n:c(this.activeElements).find((e=>{const n=this.requireElementConfig(e);return this.isTargetConfig(n,t)}));if(!r)return null;const i=this.requireElementConfig(r);return i&&i.name&&i.name in t.transitions?(this.elementsTarget.set(e,r),{element:r,config:i,transition:t.transitions[i.name]}):null}isTargetConfig(e,t){return!!t.id&&!!t.name&&t.id===e.id&&t.name in e.transitions}async freezeElement(e){const t=e.getBoundingClientRect();return await Ae(),this.elementsFreezingInPlace.has(e)?this.freezeElementInPlace(e,t):this.freezeElementInWrapper(e,t)}freezeElementInPlace(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`}freezeElementInWrapper(e,t){var n;const r=document.createElement("div");return r.classList.add("element-transitions-wrapper"),r.style.position="fixed",r.style.top=`${t.top}px`,r.style.left=`${t.left}px`,r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.append(e),(null!=(n=document.getElementById("element-transitions-container"))?n:document.body).append(r),r}async runEnterElementTransition(e){const t=this.requireElementConfig(e),n=c(this.elementsLeaving).map((e=>({element:e,config:this.requireElementConfig(e)}))).find((({config:e})=>this.isTargetConfig(e,t)));if(n&&this.elementsTarget.set(n.element,e),!t.transitions.enter)return;const r=Ed.previousRoute?Re(Ed.previousRoute.name):null,i=r&&r in t.transitions.enter?t.transitions.enter[r]:t.transitions.enter["*"];i&&await this.runSafeTransition(i,e,n)}async runLeaveElementTransition(e,t){const n=this.requireElementConfig(t);if(!n.transitions.leave)return;const r=Re(Ed.currentRoute.value.name),i=r in n.transitions.leave?n.transitions.leave[r]:n.transitions.leave["*"];i&&await this.runSafeTransition(i,e,t)}runElementTransition(e,t,n,r){var i;const s="function"==typeof n.blocking?n.blocking(r.config,r.element):null!=(i=n.blocking)&&i;return d(this.runSafeTransition(r.transition,e,t,r),(e=>{s&&this.elementsTargetTransitions.set(r.element,e)}))}async runSafeTransition(e,...t){try{await e(...t)}catch(n){if(iI.isProduction)return;MR.report(n)}}});function qI(e){if(!e)return;const t=function(e){return"transitions"in e}(e)?e:{transitions:e};return{...t,transitions:{...t.transitions,enter:"function"==typeof t.transitions.enter?{"*":t.transitions.enter}:t.transitions.enter,leave:"function"==typeof t.transitions.leave?{"*":t.transitions.leave}:t.transitions.leave}}}const VI={beforeMount(e,{value:t}){const n=qI(t);n&&zI.registerElementConfig(e,n)},mounted(e){zI.showElement(e)},beforeUnmount(e){zI.hideElement(e)},updated(e,{value:t}){const n=qI(t);n&&zI.updateElementConfig(e,n)}},HI=Object.freeze(Object.defineProperty({__proto__:null,default:VI},Symbol.toStringTag,{value:"Module"})),WI=new WeakMap,JI={mounted(e,{value:t}){const n={focus(){e.matches(":focus-visible")&&t(!0)},blur(){t(!1)}};"Storybook"in window&&function(e,t){for(;e;){if(e.matches(t))return!0;e=e.parentElement}return!1}(e,".\\:focus-visible")&&t(!0),WI.set(e,n),e.addEventListener("focus",n.focus),e.addEventListener("blur",n.blur)},unmounted(e){const t=WI.get(e);t&&(e.removeEventListener("focus",t.focus),e.removeEventListener("blur",t.blur))}},KI=Object.freeze(Object.defineProperty({__proto__:null,default:JI},Symbol.toStringTag,{value:"Module"})),GI={mounted(e,{value:t}){!1!==t&&e.focus()}},ZI=Object.freeze(Object.defineProperty({__proto__:null,default:GI},Symbol.toStringTag,{value:"Module"}));function YI(e,t){e.innerHTML=sk(t)}const QI={mounted(e,{value:t}){YI(e,t)},updated(e,{value:t}){YI(e,t)}},XI=Object.freeze(Object.defineProperty({__proto__:null,default:QI},Symbol.toStringTag,{value:"Module"})),eC={...jx(Object.assign({"/src/directives/wobbly-border.ts":Jk}),".ts"),...jx(Object.assign({"/src/framework/directives/element-transitions.ts":HI,"/src/framework/directives/focus-visible.ts":KI,"/src/framework/directives/initial-focus.ts":ZI,"/src/framework/directives/safe-html.ts":XI}),".ts")},tC=[{name:"errors.404",path:"/:path(.*)*",component:{created:()=>PR.hideHeader(),beforeRouteLeave:()=>PR.restoreHeader(),render:()=>ma(PR.resolveComponent(OR.NotFound))}}],nC={$app:iI,$auth:nI,$autoLinking:u_,$browser:oA,$cache:Ny,$cloud:JA,$elementTransitions:zI,$errors:MR,$events:qu,$files:tA,$lang:Ju,$network:nA,$ui:PR};function rC(e=(()=>!1)){return d((t=>e(t)||(e=>(MR.report(e),!0))(t)),(e=>{window.onerror=(t,n,r,i,s)=>e(null!=s?s:t),window.onunhandledrejection=t=>e(t.reason)}))}async function iC(e,t={}){var n,r,i,s,a,o,l,u,c,p,h;const f=rC(t.handleError),m=_o(e),v=[...null!=(n=t.routes)?n:[],...tC],g=await async function(e){return Promise.all([hI(e),BI(),Zu()])}(v),y=[...g,...null!=(r=t.plugins)?r:[]],b={...qx,...null!=(i=t.components)?i:{}},w={...eC,...null!=(s=t.directives)?s:{}},x={...nC,...null!=(a=t.services)?a:{}},_={...QA,...null!=(o=t.authenticators)?o:{}};var k;m.config.errorHandler=f,y.forEach((e=>m.use(e))),Object.assign(m.config.globalProperties,x),Object.entries(b).forEach((([e,t])=>m.component(e,t))),Object.entries(w).forEach((([e,t])=>m.directive(e,t))),Object.entries(_).forEach((([e,t])=>function(e,t){var n;YA[e]=t,t.name=null!=(n=t.name)?n:e}(e,t))),k=XA(null!=(l=t.defaultAuthenticator)?l:"inrupt"),YA.default=k,await(null==(u=t.beforeLaunch)?void 0:u.call(t,m)),await Promise.all(Object.entries(x).map((async([e,t])=>{await t.launch(e.slice(1)).catch(f)}))),await(null==(c=t.beforeMount)?void 0:c.call(t,m)),m.mount(null!=(p=t.selector)?p:"#app"),null==(h=m._container)||h.classList.remove("loading"),qu.emit("application-mounted"),d(document.getElementById("splash"),(async e=>{"0"!==window.getComputedStyle(e).opacity&&(e.style.opacity="0",await ge({ms:600})),e.remove()}))}const sC={class:"p-4"},aC=["onClick"],oC=ti({__name:"AppSnackbar",props:{actions:Gw(),style:Yw(DR)},emits:["hide"],setup(e){const t=pa((()=>e.style===DR.Error)),n=pa((()=>e.style===DR.Info));return(r,i)=>(Os(),js("div",{class:Fe(["flex flex-row rounded-md shadow pointer-events-auto",{"bg-white text-gray-900":n.value,"bg-red-200 text-red-800":t.value}])},[Bs("div",sC,[Ti(r.$slots,"default")]),(Os(!0),js(Ss,null,Oi(e.actions,((e,i)=>(Os(),js("button",{key:i,type:"button",class:Fe(["p-4 text-white rounded-r-md focus:outline-none focus:ring-offset-2 focus:ring-2",{"bg-primary-600 hover:bg-primary-700 focus:ring-primary-700":n.value,"bg-red-500 hover:bg-red-600 focus:ring-red-600":t.value}]),onClick:t=>(e.handler(),r.$emit("hide"))},He(e.text),11,aC)))),128))],2))}}),lC={class:"flex flex-col items-center space-y-4 w-full sm:items-start"},uC=ti({__name:"AppSnackbars",setup:e=>(e,t)=>{const n=Xk,r=oC;return Os(),js("div",{"aria-live":"assertive",class:Fe(["flex fixed inset-0 z-60 items-end px-4 py-6 pointer-events-none sm:p-6",{"bottom-16":e.$route.meta.pageFooter}])},[Bs("div",lC,[zs(io,{duration:{enter:300,leave:200},"enter-active-class":"overflow-hidden","leave-active-class":"overflow-hidden",onLeave:t[0]||(t[0]=e=>tr(i_)(e,{duration:200,easing:"ease-in",fill:"forwards"})),onEnter:t[1]||(t[1]=e=>tr(t_)(e,{duration:300,easing:"ease-out"}))},{default:Tr((()=>[(Os(!0),js(Ss,null,Oi(e.$ui.snackbars,(t=>(Os(),js("div",{key:t.id},[zs(r,{actions:t.actions,style:Me(t.style),onHide:()=>e.$ui.hideSnackbar(t.id)},{default:Tr((()=>[zs(n,{raw:"",text:t.message},null,8,["text"])])),_:2},1032,["actions","style","onHide"])])))),128))])),_:1})])],2)}}),cC={key:0},dC=ti({__name:"AppOverlays",setup(e){let t=Qn(!0);const n=Qn(null),r=pa((()=>{var e;return null!=(e=PR.modals[0])?e:null}));return Zx("show-overlays-backdrop",(async()=>{n.value&&t.value&&(t.value=!1,n.value.classList.remove("opacity-0"),await Xx(n.value,{duration:300,easing:"ease-out"}))})),Zx("hide-overlays-backdrop",(async()=>{n.value&&!t.value&&(t.value=!0,await e_(n.value,{duration:200,easing:"ease-in"}),n.value.classList.add("opacity-0"))})),(e,t)=>{const i=uC;return Os(),js(Ss,null,[Bs("div",{ref_key:"$backdrop",ref:n,class:"fixed inset-0 bg-black/30 pointer-events-none z-50 opacity-0"},null,512),r.value?(Os(),js("aside",cC,[(Os(),Ms(Ai(r.value.component),Ys({"child-index":1,modal:r.value},r.value.props),null,16,["modal"]))])):Js("",!0),zs(i)],64)}}}),pC={},hC=Bs("span",null,"|",-1),fC=Bs("span",null,"|",-1);const mC=rS(pC,[["render",function(e,t){const n=vS;return Os(),js("footer",{class:Fe(["flex items-center justify-center space-x-1 p-4 text-sm font-medium text-primary-700 opacity-75 print:hidden",{"fixed bottom-0 left-0 right-0":e.$router.currentRouteIs(/recipes\.(create|edit)/)}])},[zs(n,{class:"font-medium",onClick:t[0]||(t[0]=t=>e.$ui.showMarkdown(e.$t("footer.about_title"),e.$t("footer.about_content",{sourceUrl:e.$app.sourceUrl})))},{default:Tr((()=>[Hs(He(e.$t("footer.about")),1)])),_:1}),hC,zs(n,{title:e.$t("footer.source_title"),url:e.$app.sourceUrl,class:"mx-1 font-medium"},{default:Tr((()=>[Hs(He(e.$t("footer.source")),1)])),_:1},8,["title","url"]),fC,zs(n,{title:e.$t("footer.version_title"),url:e.$app.releaseNotesUrl,class:"mx-1 font-medium"},{default:Tr((()=>[Hs(He(e.$app.versionName),1)])),_:1},8,["title","url"])],2)}]]),vC={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},gC=[Bs("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"2"},[Bs("path",{"stroke-linejoin":"round",d:"m15.667 8l2.083 2.5L15.667 8Zm0 5l2.083-2.5l-2.083 2.5Z","clip-rule":"evenodd"}),Bs("path",{d:"M16.5 10.5H10m-6-7h9m-9 14h9m0-14v4m0 6v4m-9-14v14"})],-1)];const yC={name:"pepicons-leave",render:function(e,t){return Os(),js("svg",vC,gC)}},bC={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},wC=[Bs("g",{fill:"currentColor"},[Bs("path",{d:"M9 7a1 1 0 0 1 2 0v4a1 1 0 1 1-2 0V7Z"}),Bs("circle",{cx:"10",cy:"14",r:"1"}),Bs("path",{"fill-rule":"evenodd",d:"M2 10a8 8 0 1 0 16 0a8 8 0 0 0-16 0Zm14 0a6 6 0 1 1-12 0a6 6 0 0 1 12 0Z","clip-rule":"evenodd"})],-1)];const xC={name:"pepicons-exclamation-circle",render:function(e,t){return Os(),js("svg",bC,wC)}},_C={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},kC=[Bs("path",{fill:"currentColor","fill-rule":"evenodd",d:"m17.562 13.571l-5.303-6.319a3.5 3.5 0 0 0-.224-.243c.22-1.408-.194-2.902-1.174-4.07C9.553 1.382 7.502.726 5.671 1.26a1 1 0 0 0-.487 1.603l1.741 2.075l-.58.488L4.602 3.35a1 1 0 0 0-1.663.2c-.844 1.712-.554 3.845.754 5.404c.966 1.151 2.342 1.817 3.748 1.861c.068.102.142.2.221.294l5.302 6.319a3 3 0 1 0 4.597-3.857ZM5.226 7.67a3.28 3.28 0 0 1-.656-1.247l.242.288a2 2 0 0 0 2.818.247l.581-.488a2 2 0 0 0 .247-2.817l-.243-.29a3.28 3.28 0 0 1 1.114.863c.705.84.932 1.933.639 2.87a1 1 0 0 0 .416 1.142a1.5 1.5 0 0 1 .343.3l5.303 6.32a1 1 0 0 1-1.533 1.285l-5.301-6.32a1.5 1.5 0 0 1-.242-.404a1 1 0 0 0-1.045-.62c-.964.114-1.986-.3-2.682-1.13Z","clip-rule":"evenodd"},null,-1)];const SC={name:"pepicons-tool",render:function(e,t){return Os(),js("svg",_C,kC)}},RC=ti({__name:"AppHeaderButton",setup(e){const t=pa((()=>!Ie(Ed.currentRoute.value.meta.fullBleedHeader)||iI.onboardingCompleting?"":["text-white hover:bg-black/25 focus:ring-offset-0 focus:ring-0 focus:bg-black/20","focus:hover:bg-black/25 focus:ring-black/30"].join(" ")));return(e,n)=>{const r=Wx;return Os(),Ms(r,{clear:"",class:Fe([t.value,e.$ui.animations&&"transition-colors duration-700"])},{default:Tr((()=>[Ti(e.$slots,"default")])),_:3},8,["class"])}}}),AC={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},IC=[Bs("g",{fill:"currentColor"},[Bs("path",{d:"M10.558 2.25a.75.75 0 0 1 .685.447l.443 1A.75.75 0 0 1 11 4.75H9a.75.75 0 0 1-.703-1.012l.373-1a.75.75 0 0 1 .703-.488h1.185Zm-1.115 15.5a.75.75 0 0 1-.686-.447l-.443-1A.75.75 0 0 1 9 15.25h2a.75.75 0 0 1 .703 1.012l-.373 1a.75.75 0 0 1-.703.488H9.443Zm8.307-7.193a.75.75 0 0 1-.446.686l-1 .443A.75.75 0 0 1 15.25 11V9a.75.75 0 0 1 1.012-.703l1 .373a.75.75 0 0 1 .488.703v1.184ZM2.25 9.442a.75.75 0 0 1 .447-.685l1-.443A.75.75 0 0 1 4.75 9v2a.75.75 0 0 1-1.012.703l-1-.373a.75.75 0 0 1-.488-.703V9.442Zm13.624-4.528a.75.75 0 0 1 .17.8l-.395 1.02a.75.75 0 0 1-1.23.26l-1.414-1.413a.75.75 0 0 1 .219-1.213l.97-.443a.75.75 0 0 1 .843.151l.837.838ZM4.126 15.086a.75.75 0 0 1-.17-.8l.395-1.02a.75.75 0 0 1 1.23-.26l1.414 1.413a.75.75 0 0 1-.219 1.213l-.97.443a.75.75 0 0 1-.842-.151l-.838-.838Zm10.96.788a.75.75 0 0 1-.8.17l-1.02-.395a.75.75 0 0 1-.26-1.23l1.414-1.414a.75.75 0 0 1 1.212.219l.444.97a.75.75 0 0 1-.152.842l-.838.838ZM4.914 4.126a.75.75 0 0 1 .801-.17l1.02.395a.75.75 0 0 1 .26 1.23L5.58 6.995a.75.75 0 0 1-1.213-.219l-.443-.97a.75.75 0 0 1 .152-.843l.837-.837Z"}),Bs("path",{"fill-rule":"evenodd",d:"M5.58 14.42A6.236 6.236 0 0 0 10 16.25a6.236 6.236 0 0 0 4.42-1.83A6.236 6.236 0 0 0 16.25 10a6.236 6.236 0 0 0-1.83-4.42A6.236 6.236 0 0 0 10 3.75a6.236 6.236 0 0 0-4.42 1.83A6.236 6.236 0 0 0 3.75 10c0 1.678.668 3.256 1.83 4.42Zm5.657-3.183A1.737 1.737 0 0 1 10 11.75c-.472 0-.91-.185-1.237-.513A1.737 1.737 0 0 1 8.25 10c0-.472.185-.91.513-1.237A1.737 1.737 0 0 1 10 8.25c.472 0 .91.185 1.237.513c.328.327.513.765.513 1.237c0 .472-.185.91-.513 1.237Z","clip-rule":"evenodd"})],-1)];const CC={name:"pepicons-gear-filled",render:function(e,t){return Os(),js("svg",AC,IC)}},EC={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},OC=[Ws('<g fill="currentColor"><path d="M5.05 14.95a1 1 0 1 1 1.414-1.414A5 5 0 0 0 15 10a1 1 0 1 1 2 0a7 7 0 0 1-11.95 4.95Z"></path><path d="M13.559 12.832a1 1 0 1 1-1.11-1.664l3-2a1 1 0 1 1 1.11 1.664l-3 2Z"></path><path d="M18.832 12.445a1 1 0 0 1-1.664 1.11l-2-3a1 1 0 1 1 1.664-1.11l2 3Zm-3.975-7.594a1 1 0 1 1-1.414 1.414a5 5 0 0 0-8.536 3.536a1 1 0 1 1-2 0a7 7 0 0 1 11.95-4.95Z"></path><path d="M6.349 6.969a1 1 0 0 1 1.11 1.664l-3.001 2a1 1 0 1 1-1.11-1.664l3-2Z"></path><path d="M1.075 7.356a1 1 0 1 1 1.664-1.11l2 3a1 1 0 1 1-1.664 1.11l-2-3Z"></path></g>',1)];const DC={name:"pepicons-refresh",render:function(e,t){return Os(),js("svg",EC,OC)}},TC={class:"cursor-pointer text-gray-700 px-2 py-1 focus:outline-none focus:ring-2 focus:ring-offset-2 hover:bg-gray-200 focus:bg-gray-100 focus:hover:bg-gray-200 focus:ring-gray-200"},PC={class:"mt-2 pl-6"},jC=ti({__name:"CoreDetails",props:{summary:sx()},emits:["open","close"],setup:e=>(t,n)=>{const r=Ii("wobbly-border");return Os(),js("details",{onToggle:n[0]||(n[0]=e=>t.$emit(e.target.open?"open":"close"))},[wi((Os(),js("summary",TC,[Hs(He(e.summary),1)])),[[r]]),Bs("div",PC,[Ti(t.$slots,"default")])],32)}}),MC=ti({inheritAttrs:!1}),LC=ti({...MC,__name:"CoreFluidInput",props:{name:ax(),label:ax(),placeholder:ax(),modelValue:Xw([String,Number]),error:ax(),wrapperClass:ax(""),inline:Zw(),color:Yw(Vx)},emits:["update:modelValue","paste"],setup(e,{expose:t}){const n={[Vx.Primary]:{base:"caret-primary-500 focus:border-primary-600",withErrors:"hover:border-primary-600"},[Vx.Solid]:{base:"caret-brand-solid-500 focus:border-brand-solid-600",withErrors:"hover:border-brand-solid-600"},[Vx.Danger]:{base:"caret-red-500 focus:border-red-600",withErrors:"hover:border-red-600"}},r=Qn(null),i=Qn(null),s=ha(),a=pa((()=>"number"===s.type)),o=pa((()=>{var t;return E(["invisible whitespace-pre border-b-2",a.value&&"pr-5",e.inline?"inline-block py-1":"block py-2",null!=(t=s.class)?t:""]).join(" ")})),l=pa((()=>{var t;const i=n[e.color];return E([i.base,a.value&&"show-spinners",(null==(t=r.value)?void 0:t.hasErrors)?`border-red-500 ${i.withErrors}`:"border-gray-300 md:border-transparent md:hover:border-gray-300",e.inline?"py-1":"py-2"]).join(" ")})),u=pa((()=>{var t;return(null==(t=r.value)?void 0:t.value)||e.placeholder||" "})),c=pa((()=>e.placeholder?function(e){const t=document.createElement("div");return t.style.position="fixed",t.style.opacity="0",t.innerHTML=e,document.body.append(t),d({width:t.clientWidth,height:t.clientHeight},(()=>t.remove()))}(`<span class="${o.value}">${e.placeholder}</span>`).width:60));return t({...Bx(r),get minWidth(){return c.value},getRootElement:()=>i.value}),(t,n)=>{const s=Si("HeadlessInputLabel"),a=Si("HeadlessInputInput"),d=Si("HeadlessInputError"),p=Si("HeadlessInput");return Os(),Ms(p,{ref_key:"$root",ref:r,name:e.name,placeholder:e.placeholder,"model-value":e.modelValue,error:e.error,"onUpdate:modelValue":n[1]||(n[1]=e=>t.$emit("update:modelValue",e))},{default:Tr((()=>[Bs("div",{ref_key:"$wrapper",ref:i,class:Fe(["relative overflow-hidden",`${e.wrapperClass} ${e.inline?"inline-block":""}`])},[e.label?(Os(),Ms(s,{key:0,class:"sr-only"},{default:Tr((()=>[Hs(He(e.label),1)])),_:1})):Js("",!0),Bs("span",{class:Fe(o.value),style:Me(e.modelValue?"":`min-width: ${c.value}px;`)},He(u.value),7),zs(a,Ys({class:["fluid-input absolute inset-0 w-full text-gray-900 border-b-2 hover:border-gray-300 focus:outline-none",l.value]},t.$attrs,{onPaste:n[0]||(n[0]=e=>t.$emit("paste",e))}),null,16,["class"]),zs(d,{class:"mt-4 text-left text-sm text-red-700 opacity-75"})],2)])),_:1},8,["name","placeholder","model-value","error"])}}}),$C={class:"flex items-center h-5"},UC=["id","onUpdate:modelValue","name","onChange"],NC={class:"ml-3 w-full text-sm"},FC=["for"],BC={key:0},zC=ti({__name:"CloudConfiguration",setup(e){const t=Qn([{name:"auto-reconnect",text:uS("cloud.reconnect_onStartup"),enabled:nI.autoReconnect,updated(){nI.autoReconnect=this.enabled}},{name:"startup-sync",text:uS("cloud.sync_onStartup"),enabled:JA.startupSync,updated(){JA.startupSync=this.enabled}},{name:"auto-sync",text:uS("cloud.sync_onInterval").split(" X "),enabled:!!JA.autoSync,value:JA.autoSync||10,updated(){JA.autoSync=!!this.enabled&&this.value}}]);function n(e){return"value"in e}return(e,r)=>{const i=LC,s=jC;return Os(),Ms(s,{summary:e.$t("cloud.advancedOptions")},{default:Tr((()=>[(Os(!0),js(Ss,null,Oi(t.value,(e=>(Os(),js("div",{key:e.name,class:"flex relative items-start py-1"},[Bs("div",$C,[wi(Bs("input",{id:e.name,"onUpdate:modelValue":t=>e.enabled=t,name:e.name,type:"checkbox",class:"w-4 h-4 rounded border-gray-300 cursor-pointer form-checkbox text-brand-solid-600 focus:ring-brand-solid-500 hover:bg-gray-200",onChange:t=>e.updated()},null,40,UC),[[uo,e.enabled]])]),Bs("div",NC,[Bs("label",{for:e.name,class:"inline-flex items-baseline w-full font-medium text-gray-700 cursor-pointer"},[n(e)?(Os(),js(Ss,{key:1},[Bs("span",null,He(e.text[0]),1),Hs("   "),zs(i,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,color:"brand-solid",inline:"",type:"number",onChange:t=>e.updated()},null,8,["modelValue","onUpdate:modelValue","onChange"]),Hs("   "),Bs("span",null,He(e.text[1]),1)],64)):(Os(),js("span",BC,He(e.text),1))],8,FC)])])))),128))])),_:1},8,["summary"])}}}),qC={key:0},VC={class:"flex flex-col items-end space-y-2 mt-4 md:space-x-2 md:space-x-reverse md:space-y-0 md:flex-row-reverse"},HC={class:"ml-2"},WC={class:"ml-2"},JC=ti({__name:"CloudStatusModalConnected",setup(e){const t=pa((()=>p(uS(`cloud.statuses.${JA.status}`)))),n=pa((()=>p(uS(`cloud.statuses.${JA.status}_description`))));return(e,r)=>{const i=Xk,s=zC,a=DC,o=Wx,l=yC,u=l_,c=Ii("initial-focus");return Os(),Ms(u,{title:t.value},{default:Tr((({close:t})=>{var r,u,d,p;return[e.$cloud.online?(Os(),js("div",qC,[zs(i,{text:e.$t("cloud.statuses.online_description",{url:null==(r=e.$auth.user)?void 0:r.webId,name:null!=(p=null==(u=e.$auth.user)?void 0:u.name)?p:null==(d=e.$auth.user)?void 0:d.webId})},null,8,["text"]),zs(s,{class:"mt-4"}),Bs("div",VC,[wi((Os(),Ms(o,{secondary:"",color:"brand-solid",onClick:n=>(e.$cloud.sync(),t())},{default:Tr((()=>[zs(a,{class:"w-6 h-6","aria-hidden":"true"}),Bs("span",HC,He(e.$t("cloud.sync_now")),1)])),_:2},1032,["onClick"])),[[c]]),zs(o,{secondary:"",color:"danger",onClick:n=>(e.$auth.logout(),t())},{default:Tr((()=>[zs(l,{class:"w-6 h-6","aria-hidden":"true"}),Bs("span",WC,He(e.$t("cloud.logout")),1)])),_:2},1032,["onClick"])])])):(Os(),js(Ss,{key:1},[zs(i,{text:n.value},null,8,["text"]),zs(s,{class:"mt-4"})],64))]})),_:1},8,["title"])}}}),KC={width:"1.2em",height:"1.2em",fill:"none",viewBox:"0 0 24 24"},GC=[Bs("circle",{style:{opacity:".25"},cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Bs("path",{style:{opacity:".75"},fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)];const ZC={name:"app-spinner",render:function(e,t){return Os(),js("svg",KC,GC)}},YC={key:0,class:"flex items-center"},QC={key:1,class:"flex flex-col"},XC={class:"flex flex-col items-end space-y-2 mt-4 md:space-x-2 md:space-x-reverse md:space-y-0 md:flex-row-reverse"},eE={class:"ml-2"},tE={class:"ml-2"},nE={class:"ml-1"},rE=ti({__name:"CloudStatusModalDisconnected",setup(e){const t=$S({url:{type:LS.String,default:"https://",rules:"required"}});return(e,n)=>{const r=ZC,i=Xk,s=zC,a=DC,o=Wx,l=yC,u=ES,c=AS,d=vS,p=wS,h=l_,f=Ii("initial-focus");return Os(),Ms(h,{title:e.$t("cloud.login.title"),cancellable:!e.$auth.ongoing},{default:Tr((({close:h})=>{var m,v;return[e.$auth.ongoing?(Os(),js("div",YC,[zs(r,{class:"h-4 w-4 animate-spin text-brand-solid-700","aria-hidden":"true"}),zs(i,{text:e.$auth.stale?e.$t("cloud.login.stale"):e.$t("cloud.login.loading"),actions:{reload:()=>e.$app.reload()},class:"ml-2 text-lg text-gray-700"},null,8,["text","actions"])])):e.$auth.hasLoggedIn?(Os(),js("div",QC,[e.$auth.error?(Os(),Ms(i,{key:0,text:e.$t("cloud.login.info_authError",{url:null==(m=e.$auth.previousSession)?void 0:m.loginUrl}),actions:{"view-error-details":()=>e.$errors.inspect(e.$auth.error)}},null,8,["text","actions"])):(Os(),Ms(i,{key:1,text:e.$t("cloud.login.info_reconnect",{url:null==(v=e.$auth.previousSession)?void 0:v.loginUrl},{plural:e.$cloud.pendingUpdates})},null,8,["text"])),zs(s,{class:"mt-4"}),Bs("div",XC,[wi((Os(),Ms(o,{secondary:"",color:"brand-solid",onClick:n[0]||(n[0]=t=>e.$auth.reconnect(!0))},{default:Tr((()=>[zs(a,{"aria-hidden":"true",class:"h-6 w-6"}),Bs("span",eE,He(e.$t("cloud.reconnect_now")),1)])),_:1})),[[f]]),zs(o,{secondary:"",color:"danger",onClick:t=>(e.$auth.logout(),h())},{default:Tr((()=>[zs(l,{class:"h-6 w-6"}),Bs("span",tE,He(e.$t("cloud.logout")),1)])),_:2},1032,["onClick"])])])):(Os(),Ms(p,{key:2,class:"flex flex-col",form:tr(t),onSubmit:e=>async function(e){/^https?:\/\//.test(t.url)||(t.url="https://"+t.url),await nI.login(t.url)&&e()}(h)},{default:Tr((()=>[zs(i,{text:e.$t("cloud.login.info")},null,8,["text"]),zs(c,{name:"url",class:"mt-2",color:"brand-solid",label:e.$t("cloud.login.url"),placeholder:e.$t("cloud.login.url_placeholder")},{default:Tr((()=>[zs(u,{class:"h-6 w-6 text-brand-solid-500","aria-hidden":"true"}),Bs("span",nE,He(e.$t("cloud.login.submit")),1)])),_:1},8,["label","placeholder"]),e.$auth.dismissed?Js("",!0):(Os(),Ms(d,{key:0,color:"brand-solid",class:"mt-2 text-sm",onClick:t=>(e.$auth.dismiss(),h())},{default:Tr((()=>[Hs(He(e.$t("cloud.login.dismiss")),1)])),_:2},1032,["onClick"]))])),_:2},1032,["form","onSubmit"]))]})),_:1},8,["title","cancellable"])}}});const iE=rS({},[["render",function(e,t){const n=rE,r=JC;return e.$cloud.disconnected?(Os(),Ms(n,{key:0})):(Os(),Ms(r,{key:1}))}]]),sE={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},aE=[Bs("path",{fill:"currentColor",d:"M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10m9.8 4a4 4 0 1 0 0-8a4 4 0 0 0 0 8m0-2a2 2 0 1 1 0-4a2 2 0 0 1 0 4"},null,-1)];const oE={name:"zondicons-view-show",render:function(e,t){return Os(),js("svg",sE,aE)}},lE={class:"font-medium"},uE=["datetime"],cE=ti({__name:"ErrorReportsModal",setup(e){const t=Date.now();function n(e){const n=Math.round((t-e.getTime())/1e3);return n>60?uS("time.minutesAgo",{minutes:Math.round(n/60)}):uS("time.secondsAgo",{seconds:n})}return di((()=>MR.seeAll())),(e,t)=>{const r=Xk,i=oE,s=Wx,a=l_;return Os(),Ms(a,{title:e.$t("errors.logs"),"no-padding":"","header-border":""},{default:Tr((({close:t})=>[Bs("ol",null,[(Os(!0),js(Ss,null,Oi(e.$errors.logs,((a,o)=>(Os(),js("li",{key:o,class:"flex justify-between max-w-prose border-b px-4 py-2 mb-2 last:border-b-0 last:mb-0"},[Bs("div",null,[Bs("h3",lE,He(a.report.title),1),Bs("time",{datetime:a.date.toISOString(),class:"text-xs text-gray-700"},He(n(a.date)),9,uE),a.report.description?(Os(),Ms(r,{key:0,text:a.report.description},null,8,["text"])):Js("",!0)]),zs(s,{clear:"","aria-label":e.$t("errors.viewDetails"),title:e.$t("errors.viewDetails"),onClick:n=>(e.$ui.openModal(bR,{reports:[a.report]}),t())},{default:Tr((()=>[zs(i,{class:"w-4 h-4","aria-hidden":"true"})])),_:2},1032,["aria-label","title","onClick"])])))),128))])])),_:1},8,["title"])}}}),dE={class:"flex justify-between items-center"},pE=ti({__name:"CoreToggle",props:{label:ax(),description:ax(),modelValue:Zw()},emits:["update:modelValue"],setup:e=>(t,n)=>{const r=Vw,i=qw,s=Xk,a=Hw,o=zw;return Os(),Ms(o,{as:"div",class:"flex flex-col justify-between"},{default:Tr((()=>[Bs("div",dE,[e.label?(Os(),Ms(r,{key:0,as:"div",class:"font-medium text-gray-900",passive:""},{default:Tr((()=>[Hs(He(e.label),1)])),_:1})):Js("",!0),zs(i,{class:Fe(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out ml-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",e.modelValue?"bg-primary-600":"bg-gray-200"]),"model-value":e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e))},{default:Tr((()=>[Bs("span",{"aria-hidden":"true",class:Fe(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",e.modelValue?"translate-x-5":"translate-x-0"])},null,2)])),_:1},8,["class","model-value"])]),e.description?(Os(),Ms(a,{key:0,as:"span",class:"mt-2 max-w-prose"},{default:Tr((()=>[zs(s,{text:e.description,class:"text-sm text-gray-500"},null,8,["text"])])),_:1})):Js("",!0)])),_:1})}}),hE=ti({__name:"CoreSelect",props:{label:ax(),options:tx(),modelValue:nx([String,Number])},emits:["update:modelValue"],setup:e=>(t,n)=>{const r=Si("HeadlessSelect");return Os(),Ms(r,Ys({class:"form-select cursor-pointer border-0 hover:bg-gray-100 focus:ring-primary-600 focus:bg-primary-gray-100",label:e.label,"model-value":e.modelValue,options:e.options},t.$attrs,{"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e))}),null,16,["label","model-value","options"])}});const fE=Bs("hr",{class:"mt-3"},null,-1),mE={class:"flex flex-col items-start p-4"},vE=Bs("hr",null,null,-1),gE=Bs("hr",null,null,-1),yE=Bs("hr",null,null,-1),bE=Bs("hr",null,null,-1),wE={class:"p-4"},xE={key:0,class:"flex flex-col mt-2"},_E={for:"proxy-url",class:"font-medium text-sm text-gray-700"},kE=ti({__name:"SettingsModal",setup(e){const t=pa((()=>Ju.locales.map((e=>{var t;return{text:null!=(t=Ju.displayNames[e])?t:e,value:e}}))));return(e,n)=>{const r=hE,i=Xk,s=pE,a=SS,o=l_;return Os(),Ms(o,{title:e.$t("settings.title"),"no-padding":""},{default:Tr((()=>[fE,Bs("div",mE,[zs(r,{"label-class":"flex self-stretch justify-between items-center","label-text-class":"font-medium text-gray-900",label:e.$t("settings.language"),"model-value":e.$i18n.locale,options:t.value,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$lang.change(t))},null,8,["label","model-value","options"]),zs(i,{text:e.$t("settings.language_description"),class:"text-sm text-gray-500"},null,8,["text"])]),vE,zs(s,{modelValue:e.$ui.animations,"onUpdate:modelValue":n[1]||(n[1]=t=>e.$ui.animations=t),class:"p-4",label:e.$t("settings.animations"),description:e.$t("settings.animations_description")},null,8,["modelValue","label","description"]),gE,e.$browser.supportsWakeLocking?(Os(),js(Ss,{key:0},[zs(s,{modelValue:e.$kitchen.useWakeLock,"onUpdate:modelValue":n[2]||(n[2]=t=>e.$kitchen.useWakeLock=t),class:"p-4",label:e.$t("settings.wakeLock"),description:e.$t("settings.wakeLock_description")},null,8,["modelValue","label","description"]),yE],64)):Js("",!0),e.$errors.sentryConfigured?(Os(),js(Ss,{key:1},[zs(s,{modelValue:e.$errors.reporting,"onUpdate:modelValue":n[3]||(n[3]=t=>e.$errors.reporting=t),class:"p-4",label:e.$t("settings.errorReporting"),description:e.$t("settings.errorReporting_description")},null,8,["modelValue","label","description"]),bE],64)):Js("",!0),Bs("div",wE,[zs(s,{modelValue:e.$config.useProxy,"onUpdate:modelValue":n[4]||(n[4]=t=>e.$config.useProxy=t),label:e.$t("settings.proxy"),description:e.$t("settings.proxy_description")},null,8,["modelValue","label","description"]),e.$config.useProxy?(Os(),js("div",xE,[Bs("label",_E,He(e.$t("settings.proxyUrl")),1),zs(a,{id:"proxy-url",modelValue:e.$config.proxyUrl,"onUpdate:modelValue":n[5]||(n[5]=t=>e.$config.proxyUrl=t),bordered:"",class:"mt-2",placeholder:e.$app.env("DEFAULT_PROXY_URL")},null,8,["modelValue","placeholder"])])):Js("",!0)])])),_:1},8,["title"])}}}),SE={class:"relative"},RE=["src"],AE=ti({__name:"AppHeaderUserMenu",setup:e=>(e,t)=>{const n=Si("HeadlessButton"),r=CC,i=RC,s=Aw,a=SC,o=Cw,l=xC,u=yC,c=Iw,d=Rw;return Os(),Ms(d,{as:"div",class:"flex relative items-center"},{default:Tr((()=>[Bs("div",SE,[zs(s,{as:"template"},{default:Tr((()=>[e.$auth.userAvatarUrl?(Os(),Ms(n,{key:0,"aria-label":e.$t("menu.open"),title:e.$t("menu.open"),class:"rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:Tr((()=>[Bs("img",{src:e.$auth.userAvatarUrl,class:"h-8 w-8 rounded-full object-cover",alt:""},null,8,RE)])),_:1},8,["aria-label","title"])):(Os(),Ms(i,{key:1,"aria-label":e.$t("menu.open"),title:e.$t("menu.open")},{default:Tr((()=>[zs(r,{class:"w-7 h-7","aria-hidden":"true"})])),_:1},8,["aria-label","title"]))])),_:1}),e.$errors.hasNewErrors?(Os(),js("div",{key:0,class:Fe(["w-2 h-2 rounded-full bg-red-500 absolute",{"-top-1 -right-1":e.$auth.userAvatarUrl,"top-1 right-1":!e.$auth.userAvatarUrl}])},null,2)):Js("",!0)]),zs(Na,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Tr((()=>[zs(c,{class:"absolute right-0 top-full py-1 mt-2 w-48 bg-white rounded-md ring-1 ring-black ring-opacity-5 shadow-lg origin-top-right focus:outline-none"},{default:Tr((()=>[zs(o,null,{default:Tr((({active:n})=>[Bs("button",{type:"button",class:Fe(["flex items-center justify-between px-4 py-2 w-full text-sm text-gray-700",n&&"bg-gray-100"]),onClick:t[0]||(t[0]=t=>e.$ui.openModal(kE))},[Bs("span",null,He(e.$t("menu.settings")),1),zs(a,{class:"w-4 h-4","aria-hidden":"true"})],2)])),_:1}),e.$errors.hasErrors?(Os(),Ms(o,{key:0},{default:Tr((({active:n})=>[Bs("button",{type:"button",class:Fe(["flex items-center justify-between px-4 py-2 w-full text-sm",{"text-red-500":e.$errors.hasNewErrors,"text-gray-700":!e.$errors.hasNewErrors,"bg-gray-100":n}]),onClick:t[1]||(t[1]=()=>e.$ui.openModal(cE))},[Bs("span",null,He(e.$t("errors.logs")),1),zs(l,{class:"w-4 h-4","aria-hidden":"true"})],2)])),_:1})):Js("",!0),zs(o,null,{default:Tr((({active:n})=>[Bs("button",{type:"button",class:Fe(["flex items-center justify-between px-4 py-2 w-full text-sm text-gray-700",n&&"bg-gray-100"]),onClick:t[2]||(t[2]=t=>e.$auth.hasLoggedIn?e.$auth.logout():e.$ui.openModal(iE))},[Bs("span",null,He(e.$auth.hasLoggedIn?e.$t("menu.logOut"):e.$t("menu.logIn")),1),zs(u,{class:"w-4 h-4","aria-hidden":"true"})],2)])),_:1})])),_:1})])),_:1})])),_:1})}}),IE={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},CE=[Bs("g",{fill:"currentColor"},[Bs("path",{d:"m15.374 5.986l-5 9c-.647 1.165-2.396.194-1.748-.972l5-9c.647-1.165 2.396-.194 1.748.972Z"}),Bs("path",{d:"m5.125 9.72l5 4c1.04.832-.209 2.394-1.25 1.56l-5-4c-1.04-.832.209-2.394 1.25-1.56Z"})],-1)];const EE={name:"pepicons-checkmark",render:function(e,t){return Os(),js("svg",IE,CE)}},OE={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},DE=[Bs("g",{fill:"currentColor"},[Bs("path",{"fill-rule":"evenodd",d:"M10 2a2 2 0 0 1 2 2v7a2 2 0 1 1-4 0V4a2 2 0 0 1 2-2Z","clip-rule":"evenodd"}),Bs("path",{d:"M12 16a2 2 0 1 1-4 0a2 2 0 0 1 4 0Z"})],-1)];const TE={name:"pepicons-exclamation",render:function(e,t){return Os(),js("svg",OE,DE)}},PE={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},jE=[Bs("path",{fill:"currentColor",d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1"},null,-1)];const ME={name:"zondicons-cloud",render:function(e,t){return Os(),js("svg",PE,jE)}},LE={class:"relative w-8 h-8","aria-hidden":"true"},$E={key:1},UE={key:4,class:"text-xs"},NE={class:"sr-only sm:not-sr-only"},FE={key:0,class:"sr-only"},BE={key:1,class:"sr-only"},zE={key:2,class:"sr-only"},qE=ti({__name:"AppHeaderCloudStatus",setup(e){const{t:t}=Pu(),n=pa((()=>JA.dirty?JA.pendingUpdates>9?{badge:"9+",a11y:t("cloud.manyPendingUpdates_a11y")}:{badge:JA.pendingUpdates,a11y:t("cloud.pendingUpdates_a11y",JA.pendingUpdates)}:{badge:null,a11y:t("cloud.pendingUpdates_a11y",0)}));return(e,t)=>{const r=ME,i=DC,s=TE,a=Gx,o=EE,l=RC;return Os(),Ms(l,{onClick:t[0]||(t[0]=t=>e.$ui.openModal(iE))},{default:Tr((()=>[Bs("div",{role:"status",class:Fe(["flex justify-center items-center space-x-2",{"opacity-75":e.$auth.hasLoggedIn&&e.$cloud.disconnected}])},[Bs("div",LE,[zs(r,{class:Fe(["absolute inset-0 w-full h-full",{"text-red-600":e.$auth.error}]),"aria-hidden":"true"},null,8,["class"]),Bs("div",{class:Fe(["flex absolute inset-0 justify-center items-center",[tr(Ie)(e.$route.meta.fullBleedHeader)?"text-gray-900":"text-white",e.$ui.animations?"transition-colors duration-700":""]])},[e.$cloud.syncing?(Os(),Ms(i,{key:0,class:"w-4 h-4 animate-spin","aria-hidden":"true"})):e.$cloud.offline?(Os(),js("span",$E,"!")):e.$auth.error?(Os(),Ms(s,{key:2,class:"w-3 h-3","aria-hidden":"true"})):!e.$auth.hasLoggedIn&&e.$cloud.disconnected?(Os(),Ms(a,{key:3,class:"w-4 h-4","aria-hidden":"true"})):e.$cloud.dirty?(Os(),js("span",UE,He(n.value.badge),1)):(Os(),Ms(o,{key:5,class:"w-4 h-4","aria-hidden":"true"}))],2)]),Bs("span",NE,He(e.$t(`cloud.statuses.${e.$cloud.status}`)),1),e.$cloud.syncing?(Os(),js("span",FE,He(e.$t("cloud.statuses.syncing_description")),1)):e.$auth.error?(Os(),js("span",BE,He(e.$t("cloud.statuses.authError_description")),1)):(Os(),js("span",zE,He(n.value.a11y),1))],2)])),_:1})}}});class VE{constructor(){t(this,"listeners",[])}add(e){return this.listeners.push(e),()=>this.remove(e)}remove(e){te(this.listeners,e)}emit(e,...t){for(const n of this.listeners)"function"==typeof n[e]&&n[e](...t)}}class HE{constructor(e,n,r={}){var i,s;t(this,"recipe"),t(this,"servings"),t(this,"_listeners",new VE),t(this,"_stage"),t(this,"_ingredients"),this.recipe=e,this.servings=n,this._stage=null!=(i=r.stage)?i:"ingredients",this._ingredients=null!=(s=r.ingredients)?s:e.ingredients.reduce(((e,t)=>(e[t]=!1,e)),{})}static async fromJson(e){var t;await FA.booted;const n=null!=(t=FA.allRecipes.find((t=>t.id===e.recipeId)))?t:i(`Could not find recipe with id '${e.recipeId}' for dish`);return new HE(n,e.servings,{stage:e.stage,ingredients:e.ingredients})}get listeners(){return this._listeners}get stage(){return this._stage}get ingredients(){return this._ingredients}getStageRoute(){return"ingredients"===this.stage?{name:"kitchen.ingredients",params:{recipe:this.recipe.slug}}:"completed"===this.stage?{name:"kitchen.completed",params:{recipe:this.recipe.slug}}:{name:"kitchen.instructions",params:{recipe:this.recipe.slug,step:this.stage}}}updateStage(e){this._stage=e,this._listeners.emit("onUpdated")}updateIngredient(e,t){this._ingredients[e]=t,this._listeners.emit("onUpdated")}toJson(){return{recipeId:this.recipe.id,servings:this.servings,stage:this.stage,ingredients:this.ingredients}}}const WE=Object.freeze(Object.defineProperty({__proto__:null,default:HE},Symbol.toStringTag,{value:"Module"}));class JE{constructor(e,n,r={}){t(this,"name"),t(this,"duration"),t(this,"dish"),t(this,"step"),t(this,"startedAt"),t(this,"pausedAt"),t(this,"_listeners",new VE),this.name=e,this.duration=n,this.dish=r.dish,this.step=r.step,this.startedAt=r.startedAt,this.pausedAt=r.pausedAt}static fromJson(e,t){return new JE(e.name,e.duration,{dish:e.recipeId?t.find((t=>t.recipe.id===e.recipeId)):void 0,step:e.recipeStep,startedAt:"number"==typeof e.startedAt?new Date(e.startedAt):void 0,pausedAt:"number"==typeof e.pausedAt?new Date(e.pausedAt):void 0})}get listeners(){return this._listeners}hasStarted(){return!!this.startedAt}isRunning(){return!!this.startedAt&&!this.pausedAt}isPaused(){return!!this.pausedAt}isOverTime(){if(!this.hasStarted()||this.isPaused())return!1;const e=this.startedAt;return Date.now()>e.getTime()+this.duration}getTimeLeft(e){if(!this.startedAt)return this.duration;if(this.pausedAt)return this.duration-Math.round(this.pausedAt.getTime()-this.startedAt.getTime());const t=e||Date.now();return this.duration-Math.round(t-this.startedAt.getTime())}setDish(e,t){this.dish=e,this.step=t}hasDish(e,t){var n;return e?!!(null==(n=this.dish)?void 0:n.recipe.is(e.recipe))&&(void 0===t||t===this.step):!!this.dish}hasDishStep(){return void 0!==this.step}play(){this.isPaused()?this.resume():this.hasStarted()||this.start()}pause(){!this.isPaused()&&this.hasStarted()&&(this.pausedAt=new Date,this._listeners.emit("onUpdated"),this._listeners.emit("onStoppedRunning"))}stop(){const e=this.isRunning();this.startedAt=void 0,this.pausedAt=void 0,this._listeners.emit("onUpdated"),e&&this._listeners.emit("onStoppedRunning")}toJson(){var e;return{name:this.name,duration:this.duration,recipeId:null==(e=this.dish)?void 0:e.recipe.id,recipeStep:this.step,startedAt:this.startedAt?this.startedAt.getTime():void 0,pausedAt:this.pausedAt?this.pausedAt.getTime():void 0}}start(){this.startedAt=new Date,this._listeners.emit("onUpdated"),this._listeners.emit("onStartedRunning")}resume(){this.startedAt=new Date(Date.now()-this.duration+this.getTimeLeft()),this.pausedAt=void 0,this._listeners.emit("onUpdated"),this._listeners.emit("onStartedRunning")}}const KE=Object.freeze(Object.defineProperty({__proto__:null,default:JE},Symbol.toStringTag,{value:"Module"})),GE={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},ZE=[Bs("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[Bs("path",{d:"M10 5.5a5.5 5.5 0 1 0 0 11a5.5 5.5 0 0 0 0-11ZM2.5 11a7.5 7.5 0 1 1 15 0a7.5 7.5 0 0 1-15 0Z"}),Bs("path",{d:"M2.793 18.207a1 1 0 0 0 1.414 0l1.5-1.5a1 1 0 1 0-1.414-1.414l-1.5 1.5a1 1 0 0 0 0 1.414Zm11.5-2.914a1 1 0 0 1 1.414 0l1.5 1.5a1 1 0 0 1-1.414 1.414l-1.5-1.5a1 1 0 0 1 0-1.414ZM10 7a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0V8a1 1 0 0 1 1-1Z"}),Bs("path",{d:"M14 11a1 1 0 0 1-1 1h-3a1 1 0 1 1 0-2h3a1 1 0 0 1 1 1ZM6.332 3.172L2.574 6.76s-.077-.07-.19-.198c-.257-.292-.697-.881-.821-1.601c-.113-.654.035-1.417.818-2.165c.783-.747 1.551-.86 2.2-.717c.713.157 1.281.624 1.561.894c.123.118.19.199.19.199Zm7.336 0l3.758 3.588s.077-.07.19-.198c.257-.292.697-.881.821-1.601c.113-.654-.035-1.417-.818-2.165c-.783-.747-1.551-.86-2.2-.717c-.713.157-1.281.624-1.561.894c-.123.118-.19.199-.19.199Z"})],-1)];const YE={name:"pepicons-alarm",render:function(e,t){return Os(),js("svg",GE,ZE)}},QE={class:"flex items-center animate-shake"},XE={class:"ml-2"},eO=[Bs("source",{src:"/assets/timer.78285fbc.mp3",type:"audio/mpeg"},null,-1)],tO=ti({__name:"KitchenTimeoutModal",props:{timer:ix()},setup(e){const t=e,n=Qn(null);return Br(n,(async()=>{for(let e=0;e<10;e++){if(!n.value)return;n.value.volume=.1*e,await ge({seconds:2.5})}})),di((()=>t.timer.stop())),(t,r)=>{const i=YE,s=Xk,a=l_;return Os(),Ms(a,null,{title:Tr((()=>[Bs("div",QE,[zs(i,{class:"w-8 h-8","aria-hidden":"true"}),Bs("span",XE,He(t.$t("kitchen.timers.timeout.title")),1)])])),default:Tr((()=>[zs(s,{class:"text-gray-700",text:t.$t("kitchen.timers.timeout.description",{name:e.timer.name})},null,8,["text"]),Bs("audio",{ref_key:"$audio",ref:n,autoplay:"",loop:"",volume:"0"},eO,512)])),_:1})}}}),nO=24*60*60*1e3;class rO extends zu{constructor(){super(...arguments),t(this,"screenLock",null),t(this,"timeouts",new WeakMap)}get active(){return Ed.currentRouteIs(/^kitchen(\.[^.]+)?$/)}findDish(e){return this.dishes.find((t=>t.recipe.is(e)))}async open(e){var t;0!==this.dishes.length&&(this.active||(this.lastPage={showLogo:"home"===Ed.currentRoute.value.name,fullBleedHeader:Ie(Ed.currentRoute.value.meta.fullBleedHeader),route:{name:null!=(t=Ed.currentRoute.value.name)?t:i(),params:Ed.currentRoute.value.params}}),e||1===this.dishes.length?await Ed.push(Ce(null!=e?e:this.dishes[0]).getStageRoute()):await Ed.push({name:"kitchen"}))}async close(){if(!this.lastPage)return;const e=this.lastPage.route;await Ed.push(Hn(e)),this.lastPage=null}async cook(e,t){var n;const r=null!=(n=this.findDish(e))?n:this.addRecipe(e,t);await this.open(r)}addTimer(e){this.timers=this.timers.concat([e]),e.listeners.add({onUpdated:()=>this.onTimerUpdated(),onStartedRunning:()=>this.onTimerStarted(e),onStoppedRunning:()=>this.onTimerStopped(e)})}removeTimer(e){this.timers=_e(this.timers,e),e.stop()}async complete(e){this.setState({dishes:_e(this.dishes,e),timers:0===this.dishes.length?[]:this.timers.filter((t=>!t.hasDish(e)))}),0===this.dishes.length&&this.releaseScreen(),await this.close()}dismiss(){this.dismissedAt=new Date}async boot(){await super.boot(),await qA.booted,qu.on("logout",(()=>{this.timers.forEach((e=>this.onTimerStopped(e))),this.setState({dishes:[],timers:[],lastPage:null})})),document.addEventListener("visibilitychange",(()=>{if(0!==this.dishes.length)switch(document.visibilityState){case"hidden":this.releaseScreen();break;case"visible":this.lockScreen()}})),this.dishes.length>0&&(this.lockScreen(),this.dishes.forEach((e=>{e.listeners.add({onUpdated:()=>this.setState({dishes:this.dishes.slice(0)})})})),this.timers.forEach((e=>{e.listeners.add({onUpdated:()=>this.onTimerUpdated(),onStartedRunning:()=>this.onTimerStarted(e),onStoppedRunning:()=>this.onTimerStopped(e)}),e.isRunning()&&!e.isOverTime()&&this.onTimerStarted(e)})))}getInitialState(){return{dishes:[],timers:[],dismissedAt:null,useWakeLock:!0,lastPage:null}}getComputedStateDefinitions(){return{show:({dismissedAt:e,dishes:t})=>!(!iI.isMounted||qA.active||Ed.currentRouteIs(/^recipes\.(create|edit)$/))&&(t.length>0||!(e&&e.getTime()>Date.now()-nO)&&Ed.currentRouteIs(/^kitchen(\.[^.]+)?|recipes\.show$/))}}serializePersistedState(e){const t=e;return e.dishes&&(t.dishes=e.dishes.map((e=>e.toJson()))),e.timers&&(t.timers=e.timers.map((e=>e.toJson()))),e.dismissedAt&&(t.dismissedAt=e.dismissedAt.getTime()),t}async restorePersistedState(e){const t=await Promise.all(e.dishes.map((e=>HE.fromJson(e))));return{...e,dishes:t,timers:e.timers.map((e=>JE.fromJson(e,t))),dismissedAt:e.dismissedAt?new Date(e.dismissedAt):null}}addRecipe(e,t){const n=new HE(e,t);return n.listeners.add({onUpdated:()=>this.setState({dishes:this.dishes.slice(0)})}),this.dishes.push(n),e.sortedInstructions.forEach((({position:t,text:r})=>{const i=Z(r,/(\d+)\s+minutes?/gi);for(const s of i){const r=new JE(uS("kitchen.timers.new.name_dish",{recipe:e.name,step:t}),60*parseInt(s[1])*1e3);r.setDish(n,t),this.addTimer(r)}})),1===this.dishes.length&&this.lockScreen(),n}lockScreen(){const e=navigator;if(this.useWakeLock&&oA.supportsWakeLocking&&e.wakeLock)try{this.screenLock=e.wakeLock.request("screen").catch((e=>{MR.reportDevelopmentError(e,"Could not request screen wake lock")}))}catch(t){MR.reportDevelopmentError(t,"Could not request screen wake lock")}}releaseScreen(){this.screenLock&&(this.screenLock.then((e=>null==e?void 0:e.release())),this.screenLock=null)}onTimerUpdated(){this.setState({timers:this.timers.slice(0)})}onTimerStarted(e){if(this.timeouts.has(e))return;const t=setTimeout((()=>{PR.openModal(tO,{timer:e}),this.timeouts.delete(e),this.onTimerUpdated()}),e.getTimeLeft());this.timeouts.set(e,t)}onTimerStopped(e){const t=this.timeouts.get(e);t&&(clearTimeout(t),this.timeouts.delete(e))}}t(rO,"persist",["dishes","timers","useWakeLock","dismissedAt","lastPage"]);const iO=r(rO),sO=["inert"],aO={class:"flex relative z-10 justify-between items-center w-full max-w-content px-edge"},oO={class:"relative flex-grow h-full"},lO={key:0,class:"flex absolute left-0 top-1/2 w-full text-gray-900 -translate-y-1/2"},uO={key:1,class:"flex absolute left-0 top-1/2 items-center -translate-y-1/2 w-full"},cO=Bs("span",{"aria-hidden":"true",class:"mr-2"},"← ",-1),dO={key:0,class:"flex space-x-2"},pO=ti({__name:"AppHeader",setup(e){let t=Qn({enterFrom:"opacity-0",leaveTo:"opacity-0"});const n=Qn(null),r=pa((()=>qA.recipe)),i=pa((()=>{var e,t;return r.value&&(null==(t=null==(e=r.value)?void 0:e.lists)?void 0:t[0])})),s=pa((()=>r.value&&qA.getRecipeContainer(r.value))),a=pa((()=>{var e;return null!=(e=i.value)?e:s.value})),o=pa((()=>{var e;return qA.active?qA.recipe&&qA.hasSeenCollection?"back-arrow":null:iO.active?(null==(e=iO.lastPage)?void 0:e.showLogo)?"logo":"back-arrow":iI.isOnboarding||iI.onboardingCompleting||Ed.currentRouteIs(/recipes\.(edit|create)/)?null:Ed.currentRouteIs("home")?"logo":"back-arrow"})),l=pa((()=>{var e,t,n,r;return qA.active?null!=(r=null!=(n=null==(e=a.value)?void 0:e.name)?n:null==(t=qA.collection)?void 0:t.name)?r:uS("viewer.collection.titleFallback"):uS("menu.back")}));return Br(o,((e,n)=>{t.value=n?"logo"===e?{enterFrom:"opacity-0 -translate-x-full",leaveTo:"opacity-0 translate-x-full"}:{enterFrom:"opacity-0 translate-x-full",leaveTo:"opacity-0 -translate-x-full"}:{enterFrom:"opacity-0 -translate-x-full",leaveTo:"opacity-0 -translate-x-full"}})),function(e,t){const n=new ResizeObserver((()=>e.value&&t(e.value)));di((()=>{e.value&&(t(e.value),n.observe(e.value))})),mi((()=>n.disconnect()))}(n,H((e=>PR.updateHeaderHeight(e.clientHeight)),50)),(e,r)=>{const i=lS,s=Si("router-link"),u=Wx,c=qE,d=AE,p=Ii("wobbly-border");return Os(),js("header",{ref_key:"$header",ref:n,class:Fe(["flex relative z-40 flex-col items-center self-stretch pt-edge h-24 shrink-0 print:hidden",{invisible:e.$ui.headerHidden||e.$app.isOnboarding,"text-white":tr(Ie)(e.$route.meta.fullBleedHeader)&&!e.$app.onboardingCompleting,"transition-colors duration-700":e.$ui.animations,"transition-opacity opacity-100":e.$ui.animations&&e.$app.onboardingCompleting}]),inert:e.$ui.headerHidden||e.$app.isOnboarding},[Bs("div",aO,[Bs("div",oO,[zs(Na,{"enter-active-class":e.$ui.animations?"transition duration-700":"","enter-from-class":t.value.enterFrom,"enter-to-class":"opacity-100","leave-active-class":e.$ui.animations?"transition duration-700":"","leave-from-class":"opacity-100","leave-to-class":t.value.leaveTo},{default:Tr((()=>["logo"===o.value?(Os(),js("div",lO,[wi((Os(),Ms(s,{to:{name:"home"},title:"Umai","aria-label":"Umai",class:"flex ring-primary-100 justify-center items-center space-x-2 focus-visible:outline-none focus-visible:bg-primary-100 focus-visible:ring-8"},{default:Tr((()=>[zs(i,{class:"mr-2 w-36 h-12 fill-primary-500"})])),_:1})),[[p]])])):"back-arrow"===o.value?(Os(),js("div",uO,[zs(u,{clear:"",class:"text-white text-left hover:bg-transparent focus:bg-transparent focus:ring-0 focus:ring-offset-0 focus-visible:bg-black/20 focus:hover:bg-transparent",onClick:r[0]||(r[0]=e=>async function(){var e;qA.active?await Ed.push({name:"viewer",query:{url:null==(e=a.value)?void 0:e.url}}):Ed.previousRouteWas("home")?Ed.back():await Ed.push({name:"home"})}())},{default:Tr((()=>[cO,Bs("span",null,He(l.value),1)])),_:1})])):Js("",!0)])),_:1},8,["enter-active-class","enter-from-class","leave-active-class","leave-to-class"])]),e.$viewer.active?Js("",!0):(Os(),js("div",dO,[e.$auth.dismissed?Js("",!0):(Os(),Ms(c,{key:0})),zs(d)]))])],10,sO)}}}),hO={class:"flex flex-col flex-grow self-stretch items-center print:block"},fO=Bs("div",{id:"element-transitions-container"},null,-1),mO=ti({__name:"AppLayout",setup(e){ja((e=>({"02d60e80":n.value})));const t=Qn(null),n=pa((()=>`${PR.headerHeight}px`));return di((()=>t.value&&PR.setLayoutElement(t.value))),(e,n)=>{var r,i;const s=pO,a=mC,o=dC;return Os(),js("div",{id:"app-layout",ref_key:"$root",ref:t,class:"flex flex-col min-w-screen min-h-screen overflow-x-hidden print:block"},[e.$errors.hasStartupErrors||null!=(r=e.$route.meta.header)&&!r?Js("",!0):(Os(),Ms(s,{key:0})),Bs("div",hO,[Ti(e.$slots,"default")]),null==(i=e.$route.meta.footer)||i?(Os(),Ms(a,{key:1})):Js("",!0),zs(o),fO],512)}}}),vO={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},gO=[Bs("path",{fill:"currentColor",d:"M19 19.002V21a1 1 0 0 1-.883.993L18 22H6a1 1 0 0 1-1-1v-1.994a1 1 0 0 1 1-1l12-.004a1 1 0 0 1 1 1M12 2a5 5 0 0 1 4.533 2.888l.06.137l.136-.009a5 5 0 0 1 4.99 3.477l.063.213a5 5 0 0 1-2.696 5.831l-.087.037v1.428a1 1 0 0 1-1 1l-12 .004a1 1 0 0 1-.993-.883l-.007-.117v-1.433l-.123-.055a5 5 0 0 1-2.6-3.001l-.064-.223a5 5 0 0 1 5.193-6.27l.066-.142a5 5 0 0 1 4.302-2.877z"},null,-1)];const yO={name:"tabler-chef-hat-filled",render:function(e,t){return Os(),js("svg",vO,gO)}},bO={class:"fixed bottom-6 left-0 right-0 pointer-events-none p-4 z-30 print:hidden md:p-8"},wO={class:"max-w-content px-edge w-full m-auto flex justify-center md:justify-end"},xO={key:0,class:"flex flex-col space-y-1 items-center"},_O={class:"mx-2 uppercase tracking-wider font-semibold text-sm"},kO={class:"text-sm"},SO={class:"mx-2 uppercase tracking-wider font-semibold text-sm"},RO=ti({__name:"AppKitchen",setup(e){var t,n,r;const i=pa((()=>FA.recipes.first((e=>e.slug===Ed.currentRoute.value.params.recipe)))),s=Qn(null!=(r=null==(n=null==(t=i.value)?void 0:t.servingsBreakdown)?void 0:n.quantity)?r:1);return Zx("recipe-servings-updated",(e=>s.value=e)),(e,t)=>{const n=yO,r=Wx;return Os(),js("div",bO,[Bs("div",wO,[zs(Na,{"enter-active-class":"transition-transform duration-500 delay-1000","enter-from-class":"translate-y-[250%]","enter-to-class":"translate-y-0","leave-active-class":"transition-transform duration-500","leave-from-class":"translate-y-0","leave-to-class":"translate-y-[250%]"},{default:Tr((()=>[e.$kitchen.show?(Os(),js("div",xO,[tr(i)&&0===e.$kitchen.dishes.length?(Os(),js(Ss,{key:0},[zs(r,{class:"pointer-events-auto h-12",onClick:t[0]||(t[0]=t=>tr(i)&&e.$kitchen.cook(tr(i),s.value))},{default:Tr((()=>[zs(n,{class:"w-5 h-5 ml-2","aria-hidden":"true"}),Bs("span",_O,He(e.$t("kitchen.cook")),1)])),_:1}),zs(r,{class:"pointer-events-auto bg-white",clear:"",onClick:t[1]||(t[1]=t=>e.$kitchen.dismiss())},{default:Tr((()=>[Bs("span",kO,He(e.$t("kitchen.dismiss")),1)])),_:1})],64)):(Os(),Ms(r,{key:1,class:"pointer-events-auto h-12",onClick:t[2]||(t[2]=t=>e.$kitchen.open())},{default:Tr((()=>[zs(n,{class:"w-5 h-5 ml-2","aria-hidden":"true"}),Bs("span",SO,He(e.$t("kitchen.open")),1)])),_:1}))])):Js("",!0)])),_:1})])])}}}),AO=ti({__name:"AppRouterView",setup(e){function t(e,t){var n,r;const i=Ed.currentRoute.value.meta;(null!=(r=null==(n=i.enter)?void 0:n.call(i,e))?r:Promise.resolve()).then((()=>t()))}function n(e,t){var n,r,i;const s=null==(n=Ed.previousRoute)?void 0:n.meta;(null!=(i=null==(r=null==s?void 0:s.leave)?void 0:r.call(s,e))?i:Promise.resolve()).then((()=>t()))}return(e,r)=>{const i=Si("router-view");return Os(),Ms(i,null,{default:Tr((({Component:e,route:r})=>[zs(Na,{onEnter:t,onLeave:n},{default:Tr((()=>[(Os(),Ms(Ai(e),{key:r.path}))])),_:2},1024)])),_:1})}}}),IO={},CO={class:"text-red-600 mt-2 text-2xl font-medium"},EO={class:"mt-4 space-y-4 flex flex-col"},OO={class:"mr-1"},DO=Bs("div",{class:"flex-grow"},null,-1),TO={class:"mr-1"},PO=Bs("div",{class:"flex-grow"},null,-1),jO={class:"mr-1"},MO=Bs("div",{class:"flex-grow"},null,-1),LO={class:"mr-1"},$O=Bs("div",{class:"flex-grow"},null,-1);const UO=rS(IO,[["render",function(e,t){const n=lS,r=Xk,i=bS,s=Wx,a=sS;return Os(),Ms(a,{class:"px-edge"},{default:Tr((()=>[zs(n,{class:"h-auto w-[250px] max-w-[60vw] fill-red-600","aria-hidden":"true"}),Bs("h1",CO,He(e.$t("startupCrash.title")),1),zs(r,{text:e.$t("startupCrash.message"),class:"text-center mt-4"},null,8,["text"]),Bs("div",EO,[zs(s,{secondary:"",color:"danger",onClick:t[0]||(t[0]=t=>e.$app.reload())},{default:Tr((()=>[Bs("span",OO,He(e.$t("startupCrash.reload")),1),DO,zs(i,{class:"w-5 h-5","aria-hidden":"true"})])),_:1}),e.$auth.hasLoggedIn?(Os(),Ms(s,{key:0,secondary:"",color:"danger",onClick:t[1]||(t[1]=t=>e.$app.reload({autoReconnect:"false"}))},{default:Tr((()=>[Bs("span",TO,He(e.$t("startupCrash.reloadWithoutAutoReconnect")),1),PO,zs(i,{class:"w-5 h-5","aria-hidden":"true"})])),_:1})):Js("",!0),e.$auth.hasLoggedIn?(Os(),Ms(s,{key:1,secondary:"",color:"danger",onClick:t[2]||(t[2]=t=>e.$auth.logout(!0).then((()=>e.$app.reload())))},{default:Tr((()=>[Bs("span",jO,He(e.$t("startupCrash.logout")),1),MO,zs(i,{class:"w-5 h-5","aria-hidden":"true"})])),_:1})):Js("",!0),zs(s,{secondary:"",color:"danger",onClick:t[3]||(t[3]=t=>e.$errors.inspect(e.$errors.startupErrors))},{default:Tr((()=>[Bs("span",LO,He(e.$t("startupCrash.inspect")),1),$O,zs(i,{class:"w-5 h-5","aria-hidden":"true"})])),_:1})])])),_:1})}]]),NO=ti({__name:"App",setup(e){const{t:t,te:n,locale:r,setLocaleMessage:i}=Pu();return Vu.setInstance({locale:r,translate:t,hasMessage:n,setLocaleMessages:i}),(e,t)=>{const n=UO,r=AO,i=RO,s=mO;return Os(),Ms(s,null,{default:Tr((()=>[e.$errors.hasStartupErrors?(Os(),Ms(n,{key:0})):(Os(),Ms(r,{key:1})),zs(i)])),_:1})}}});qk.use({renderer:{link:(e,t,n)=>Yk({url:null!=e?e:"#",text:n,title:t})}}),Wh(new Bh),If({...Sy,SolidACLAuthorization:Iy,SolidContainer:Ly,SolidDocument:Dy,SolidTypeIndex:Uy,SolidTypeRegistration:Ey}),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[".schema"],n=Ef(e,t);If(n)}(Object.assign({"/src/models/Dish.ts":WE,"/src/models/Recipe.schema.ts":MA,"/src/models/Recipe.ts":$A,"/src/models/RecipeInstructionsStep.schema.ts":uA,"/src/models/RecipeInstructionsStep.ts":dA,"/src/models/RecipesContainer.ts":zA,"/src/models/RecipesList.schema.ts":hA,"/src/models/RecipesList.ts":bA,"/src/models/RecipesListItem.schema.ts":mA,"/src/models/RecipesListItem.ts":gA,"/src/models/Timer.ts":KE}));const FO=[],BO={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},zO=[Bs("g",{fill:"currentColor"},[Bs("path",{d:"M5 11a1 1 0 1 1 0-2h10a1 1 0 1 1 0 2H5Z"}),Bs("path",{d:"M9 5a1 1 0 0 1 2 0v10a1 1 0 1 1-2 0V5Z"})],-1)];const qO={name:"pepicons-plus",render:function(e,t){return Os(),js("svg",BO,zO)}};var VO=(e=>(e["Json"]="json",e["Text"]="text",e))(VO||{});const HO=["for"],WO=["id","name","accept"],JO=ti({__name:"BaseFileInput",props:{accept:{type:String,default:null},parse:{type:String,default:null}},emits:["start","success","error"],setup(e,{emit:t}){const n=F(),r=Qn();function i(){var n,i;const s=null==(i=null==(n=r.value)?void 0:n.files)?void 0:i[0];s&&(t("start"),e.parse?function(e,n){const r=new FileReader,i=e=>n===VO.Json?JSON.parse(e):e;r.onerror=()=>t("error",uS("errors.fileUpload")),r.onload=()=>t("success",i(r.result)),r.readAsText(e)}(s,e.parse):t("success",s))}return(t,s)=>(Os(),js("label",{for:tr(n)},[Ti(t.$slots,"default"),Bs("input",{id:tr(n),ref_key:"input",ref:r,name:tr(n),accept:e.accept,type:"file",class:"sr-only",onChange:s[0]||(s[0]=e=>i())},null,40,WO)],8,HO))}}),KO={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},GO=[Bs("path",{fill:"currentColor","fill-rule":"evenodd",d:"M337.927 348.171c-7.563 2.676-29.153 5.641-74.62-18.744c-49.223-26.427-56.535-48.514-57.616-55.14c.71-8.048.245-16.07-1.13-23.896l.32.465s-4.026-21.496 52.314-56.466c50.423-31.308 73.345-25.077 77.61-23.431c2.751 1.84 5.597 3.58 8.568 5.176a92.7 92.7 0 0 0 17.445 7.117c6.947 6.627 19.705 25.372 21.03 74.67c1.37 49.664-13.229 68.804-21.175 75.575c-8.198 3.707-15.88 8.663-22.746 14.674m105.438-12.293c-3.191-1.696-6.457-3.14-9.718-4.416l2.33-.195s-20.854-9.227-22.67-76.265c-1.821-67.064 19.875-78.496 19.875-78.496l-3.122.119c16.396-8.392 30.48-21.69 39.782-39.21c24.241-45.593 6.891-102.222-38.701-126.47C385.53-13.27 328.919 4.03 304.697 49.667c-9.956 18.726-12.808 39.286-9.667 58.721l-1.056-1.646s5.497 24.342-51.554 59.752c-57.025 35.435-82.76 17.79-82.76 17.79l1.639 2.405c-1.615-1.005-3.185-2.035-4.906-2.92c-45.618-24.242-102.247-6.917-126.47 38.694c-24.215 45.618-6.89 102.229 38.696 126.47c34.009 18.06 74.105 13.028 102.347-9.618l-.609 1.175s20.755-17.074 80.607 15.07c47.231 25.346 54.248 50.178 55.159 59.525c-1.25 34.624 16.81 68.608 49.493 85.958c45.593 24.241 102.222 6.917 126.444-38.695c24.241-45.617 6.916-102.253-38.695-126.469M331.74 40.715c-27.213 29.762-27.778 73.564-1.57 98.32c-12.954-12.462-12.658-38.45.42-63.306c1.69-2.211 6.57-7.488 13.713-5.082c.71.245 1.18.295 1.451.27c1.614.345 3.26.54 4.981.465c10.817-.49 19.21-9.643 18.72-20.485c-.22-4.862-2.23-9.152-5.352-12.469c25.127-16.464 53.985-18.355 65.813-7.557l.44.025c-26.993-24.636-71.134-20.245-98.616 9.819M58.19 216.746c-27.212 29.788-27.777 73.565-1.57 98.321c-12.953-12.463-12.683-38.45.42-63.307c1.69-2.23 6.578-7.481 13.714-5.075c.716.245 1.18.295 1.45.27c1.621.339 3.286.54 4.982.465c10.842-.49 19.21-9.643 18.72-20.491c-.22-4.856-2.23-9.153-5.346-12.463c25.127-16.44 53.978-18.355 65.807-7.557l.44.044c-27.012-24.656-71.16-20.265-98.617 9.793m289.573 149.046c-27.212 29.762-27.777 73.564-1.57 98.346c-12.96-12.488-12.664-38.476.414-63.307c1.696-2.237 6.577-7.488 13.72-5.107c.71.245 1.174.32 1.444.27c1.621.345 3.292.54 4.982.49c10.823-.515 19.215-9.693 18.725-20.51c-.22-4.862-2.236-9.152-5.352-12.469c25.127-16.44 53.96-18.355 65.788-7.557l.44.05c-26.967-24.661-71.134-20.27-98.59 9.794","clip-rule":"evenodd"},null,-1)];const ZO={name:"file-icons-json-ld2",render:function(e,t){return Os(),js("svg",KO,GO)}},YO={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},QO=[Bs("g",{fill:"currentColor"},[Bs("path",{"fill-rule":"evenodd",d:"M13.198 1.22L3.12 11.298a1 1 0 0 0-.282.555l-.705 4.594a1 1 0 0 0 1.14 1.14l4.595-.705a1 1 0 0 0 .555-.281L18.501 6.523a1 1 0 0 0 0-1.414l-3.89-3.89a1 1 0 0 0-1.413 0ZM4.317 15.404l.448-2.924l9.14-9.14l2.475 2.476l-9.14 9.14l-2.923.448Z","clip-rule":"evenodd"}),Bs("path",{d:"m11.442 5.247l1.06-1.061l3.242 3.24l-1.061 1.061l-3.241-3.24Z"})],-1)];const XO={name:"pepicons-pen",render:function(e,t){return Os(),js("svg",YO,QO)}},eD={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},tD=[Bs("g",{fill:"currentColor"},[Bs("path",{"fill-rule":"evenodd",d:"M1.25 10a8.75 8.75 0 1 0 17.5 0a8.75 8.75 0 0 0-17.5 0Zm16 0a7.25 7.25 0 1 1-14.5 0a7.25 7.25 0 0 1 14.5 0Z","clip-rule":"evenodd"}),Bs("path",{"fill-rule":"evenodd",d:"M6.25 10c0 4.522 1.491 8.25 3.75 8.25s3.75-3.728 3.75-8.25S12.259 1.75 10 1.75S6.25 5.478 6.25 10Zm6 0c0 3.762-1.195 6.75-2.25 6.75S7.75 13.762 7.75 10S8.945 3.25 10 3.25s2.25 2.988 2.25 6.75Z","clip-rule":"evenodd"}),Bs("path",{d:"m3.602 5.467l1.006-1.112c.1.09.209.18.325.267c1.271.952 3.3 1.54 5.515 1.54c1.891 0 3.652-.427 4.931-1.158c.308-.176.582-.367.819-.57l.974 1.141a6.73 6.73 0 0 1-1.048.73c-1.516.868-3.534 1.356-5.676 1.356c-2.522 0-4.865-.678-6.415-1.839a6.063 6.063 0 0 1-.431-.355Zm0 9.082l1.006 1.112c.1-.091.209-.18.325-.267c1.271-.952 3.3-1.54 5.515-1.54c1.891 0 3.652.427 4.931 1.158c.308.176.582.367.819.57l.974-1.141a6.841 6.841 0 0 0-1.048-.73c-1.516-.868-3.534-1.356-5.676-1.356c-2.522 0-4.865.678-6.415 1.839a6.06 6.06 0 0 0-.431.355ZM1.75 10.75v-1.5h16.5v1.5H1.75Z"})],-1)];const nD={name:"pepicons-internet",render:function(e,t){return Os(),js("svg",eD,tD)}},rD=["name","value","checked"],iD=ti({__name:"BaseCheckbox",props:{name:{type:String,default:null},class:{type:String,default:""},value:{type:[Number,String],default:null},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:Object,default:null}},emits:["update:modelValue"],setup(e,{emit:t}){var n;const r=null!=(n=e.form)?n:Ur("form",null),i=Qn(),s=pa((()=>{var t,n;return null!=(n=null==r?void 0:r.input(null!=(t=e.name)?t:""))?n:null})),a=pa((()=>{var t,n;return null!=(n=null==(t=s.value)?void 0:t.value)?n:e.modelValue})),o=pa((()=>{var t,n;return $({disabled:e.disabled||null,checked:Array.isArray(null==(t=s.value)?void 0:t.value)&&(null==(n=s.value)?void 0:n.value.includes(e.value))||null})})),l=pa((()=>{const t=e.class.split(" ");return E([e.class,!t.some((e=>e.startsWith("w-")))&&"w-4",!t.some((e=>e.startsWith("h-")))&&"h-4"]).join(" ")}));return(n,r)=>(Os(),js("input",Ys({ref_key:"input",ref:i,type:"checkbox",class:["rounded border-gray-300 cursor-pointer form-checkbox text-primary-600","focus:ring-primary-500 hover:bg-gray-200 disabled:bg-gray-300 disabled:cursor-default",l.value],name:e.name,value:a.value,checked:!!a.value},o.value,{onChange:r[0]||(r[0]=n=>function(){var n,r,a;const o=!!(null==(n=i.value)?void 0:n.matches(":checked"));s.value&&Array.isArray(null==(r=s.value)?void 0:r.value)?s.value.update(o?[...s.value.value,e.value]:_e(s.value.value,e.value)):(null==(a=s.value)||a.update(o),t("update:modelValue",o))}())}),null,16,rD))}}),sD={class:"flex items-center"},aD={class:"flex-shrink-0"},oD=ti({__name:"WebImportModalAdvancedOptions",props:{form:ix()},setup:e=>(t,n)=>{const r=iD,i=LC,s=vS,a=jC;return Os(),Ms(a,{summary:t.$t("webImport.advancedOptions")},{default:Tr((()=>[Bs("div",sD,[zs(r,{id:"use-proxy",name:"useProxy"}),Bs("label",{for:"use-proxy",class:Fe(["ml-2 cursor-pointer inline-flex items-baseline",{"opacity-50":!e.form.useProxy}])},[Bs("span",aD,He(t.$t("webImport.useProxy")),1),zs(i,{name:"proxyUrl",placeholder:"https://","aria-label":t.$t("webImport.useProxy_urlLabel"),disabled:!e.form.useProxy,inline:"",class:Fe(["ml-1",{"pointer-events-none":!e.form.useProxy}])},null,8,["aria-label","disabled","class"])],2)]),zs(s,{class:"text-sm ml-6",onClick:n[0]||(n[0]=e=>t.$ui.showMarkdown(t.$t("webImport.useProxy_helpTitle"),t.$t("webImport.useProxy_helpContent")))},{default:Tr((()=>[Hs(He(t.$t("webImport.useProxy_help")),1)])),_:1})])),_:1},8,["summary"])}});class lD extends zu{updateProxy(e,t){this.setState({useProxy:e,proxyUrl:t})}getInitialState(){return{useProxy:!0,proxyUrl:null}}}t(lD,"persist",["useProxy","proxyUrl"]);const uD=r(lD);class TooManyRequestsError extends n{constructor(e,t){super(`Too many requests for ${e}`),this.url=e,this.proxyUrl=t}}function cD(e){const t=$S({url:{type:LS.String,rules:"required",default:e.websiteUrl},useProxy:{type:LS.Boolean,default:uD.useProxy},proxyUrl:{type:LS.String,default:uD.proxyUrl||iI.env("DEFAULT_PROXY_URL")}});return{form:t,submit:()=>e.scan(async function(){try{const n=t.url,r=!!t.useProxy&&t.proxyUrl;uD.updateProxy(t.useProxy,t.proxyUrl);const i=r?await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:n})}):await fetch(n),s=await i.text();if(429===i.status&&r)throw new TooManyRequestsError(n,r);if(2!==Math.floor(i.status/100))throw new Error(`Got unexpected response code: ${i.status}\n\n${s}`);await e.parseWebsite(n,s)}catch(n){e.failed(t.url,n)}}())}}const dD=ti({__name:"WebImportModalStart",setup(e,{expose:t}){const n=Qw("web-import-modal","<WebImportModalStart> must be a child of a <WebImportModal>"),{form:r,submit:i}=cD(n);return t({submit:i}),(e,t)=>{const n=Xk,s=oD,a=AS,o=wS;return Os(),Ms(o,{form:tr(r),class:"flex flex-col",onSubmit:t[0]||(t[0]=e=>tr(i)())},{default:Tr((()=>[zs(n,{text:e.$t("webImport.info")},null,8,["text"]),zs(s,{form:tr(r),class:"mt-4"},null,8,["form"]),zs(a,{name:"url",label:e.$t("webImport.url_label"),placeholder:e.$t("webImport.url_placeholder"),class:"mt-2 px-2 py-4"},{default:Tr((()=>[Hs(He(e.$t("webImport.submit")),1)])),_:1},8,["label","placeholder"])])),_:1},8,["form"])}}}),pD=ti({inheritAttrs:!1}),hD=ti({...pD,__name:"CoreTextArea",props:{name:ax(),label:ax(),placeholder:ax(),modelValue:ax(),error:ax()},emits:["update:modelValue"],setup(e,{expose:t}){const n=Qn(null),r=Qn(null);return t({...Bx(n),getRootElement:()=>r.value}),(t,i)=>{const s=Si("HeadlessInputLabel"),a=Si("HeadlessInputTextArea"),o=Si("HeadlessInputError"),l=Si("HeadlessInput");return Os(),Ms(l,{ref_key:"$root",ref:n,name:e.name,placeholder:e.placeholder,"model-value":e.modelValue,error:e.error,"onUpdate:modelValue":i[0]||(i[0]=e=>t.$emit("update:modelValue",e))},{default:Tr((({hasErrors:n})=>[Bs("div",{ref_key:"$wrapper",ref:r,class:"relative w-full"},[e.label?(Os(),Ms(s,{key:0,class:"sr-only"},{default:Tr((()=>[Hs(He(e.label),1)])),_:1})):Js("",!0),zs(a,Ys({class:["w-full px-1.5 py-2.5 rounded border focus:outline-none hover:border-primary-500 focus:border-primary-500 focus:shadow-primary-500",{"border-red-500":n}]},t.$attrs),null,16,["class"]),zs(o,{class:"mt-1 text-sm text-red-700 opacity-75"})],512)])),_:1},8,["name","placeholder","model-value","error"])}}}),fD={class:"relative bg-gray-200 rounded"},mD={class:"overflow-auto",style:{"max-height":"250px"}},vD=["textContent"],gD=["aria-label","title"],yD=ti({__name:"CoreClipboard",props:{text:sx(),copyLabel:ax(),successMessage:ax()},setup:e=>(t,n)=>{var r,i;const s=ZS;return Os(),js("div",fD,[Bs("div",mD,[Bs("pre",{class:"flex p-2 items-center text-gray-700 box-content min-h-clickable align-center",textContent:He(e.text)},null,8,vD)]),Bs("button",{type:"button","aria-label":null!=(r=e.copyLabel)?r:t.$t("ui.copyToClipboard"),title:null!=(i=e.copyLabel)?i:t.$t("ui.copyToClipboard"),class:"flex opacity-75 absolute top-2 right-2 justify-center items-center bg-white rounded w-clickable h-clickable hover:bg-gray-100 hover:opacity-100",onClick:n[0]||(n[0]=t=>async function(){var t;await navigator.clipboard.writeText(e.text),PR.showSnackbar(null!=(t=e.successMessage)?t:uS("ui.copiedToClipboard"))}())},[zs(s,{class:"w-6 h-6","aria-hidden":"true"})],8,gD)])}}),bD=ti({__name:"WebImportHtmlModal",props:{url:sx()},setup(e){const t=$S({html:{type:LS.String,rules:"required"}});return(n,r)=>{const i=Xk,s=yD,a=hD,o=Wx,l=wS,u=l_;return Os(),Ms(u,{title:n.$t("webImportHtml.title")},{default:Tr((({close:r})=>[zs(l,{class:"flex flex-col mt-2 space-y-2",form:tr(t),onSubmit:e=>r(tr(t).data())},{default:Tr((()=>[zs(i,{text:n.$t("webImportHtml.info")},null,8,["text"]),zs(s,{text:`view-source:${e.url}`,class:"max-w-prose"},null,8,["text"]),zs(a,{name:"html",label:n.$t("webImportHtml.label"),placeholder:n.$t("webImportHtml.placeholder")},null,8,["label","placeholder"]),zs(o,{type:"submit",class:"py-2 font-medium text-md mt-4",alignment:"center"},{default:Tr((()=>[Hs(He(n.$t("webImportHtml.submit")),1)])),_:1})])),_:2},1032,["form","onSubmit"])])),_:1},8,["title"])}}}),wD=ti({__name:"WebImportModalError",props:{error:ix()},setup(e){const t=Qw("web-import-modal","<WebImportModalError> must be a child of a <WebImportModal>"),{form:n,submit:r}=cD(t),i=pa((()=>{if(Y(e.error,TooManyRequestsError))return e.error.proxyUrl}));return(s,a)=>{const o=Xk,l=oD,u=Wx,c=wS;return Os(),Ms(c,{form:tr(n),class:"flex flex-col mt-2",onSubmit:a[0]||(a[0]=e=>tr(t).retry((()=>tr(r)())))},{default:Tr((()=>[i.value?(Os(),Ms(o,{key:0,text:s.$t("webImport.error_tooManyRequests",{proxyUrl:i.value}),actions:{"view-error-details":()=>s.$errors.inspect(e.error)}},null,8,["text","actions"])):(Os(),Ms(o,{key:1,text:s.$t("webImport.error_info",{url:tr(n).url}),actions:{"view-error-details":()=>s.$errors.inspect(e.error)}},null,8,["text","actions"])),zs(l,{form:tr(n),class:"mt-4"},null,8,["form"]),zs(u,{type:"submit",class:"py-2 font-medium text-md mt-4",alignment:"center"},{default:Tr((()=>[Hs(He(s.$t("webImport.error_submit")),1)])),_:1}),zs(o,{class:"self-center text-sm mt-1",text:s.$t("webImport.error_html",{url:tr(n).url}),actions:{"open-html-form":()=>async function(){const e=await PR.openModal(bD,{url:n.url}),r=await e.beforeClose;if(!r)return await e.afterClose,void t.close();await t.retry((()=>t.parseWebsite(n.url,r.html)))}()}},null,8,["text","actions"])])),_:1},8,["form"])}}}),xD={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_D=[Bs("path",{fill:"currentColor",d:"m8.5 13.5l2.5 3l3.5-4.5l4.5 6H5m16 1V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2"},null,-1)];const kD={name:"mdi-image",render:function(e,t){return Os(),js("svg",xD,_D)}},SD={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},RD=[Bs("path",{fill:"currentColor",d:"M13.3 21H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2v8.3c-.6-.2-1.3-.3-2-.3c-1.1 0-2.2.3-3.1.9L14.5 12L11 16.5l-2.5-3L5 18h8.1c-.1.3-.1.7-.1 1c0 .7.1 1.4.3 2m7.1-2l2.1 2.1l-1.4 1.4l-2.1-2.1l-2.1 2.1l-1.4-1.4l2.1-2.1l-2.1-2.1l1.4-1.4l2.1 2.1l2.1-2.1l1.4 1.4z"},null,-1)];const AD={name:"mdi-image-remove",render:function(e,t){return Os(),js("svg",SD,RD)}},ID=["src","alt"],CD=ti({__name:"RecipeImage",props:{class:ax(""),recipe:ex(),url:ax()},setup(e){let t=Qn(!1),n=Qn();const r=pa((()=>{var t,n;return null!=(n=e.url)?n:null==(t=e.recipe)?void 0:t.imageUrl})),i=pa((()=>e.class.includes("absolute")?e.class:`${e.class} relative`)),s=pa((()=>e.recipe?K(e.recipe.name.length).reduce(((t,n)=>t+e.recipe.name.charCodeAt(n)),0)%255:null));return Br(n,(()=>t.value=!1)),Nr((async()=>n.value=r.value?await async function(e){var t,n,r;const i=T(null!=(t=FA.remoteCookbookUrl)?t:FA.localCookbookUrl),s=async()=>{try{const t=await nI.fetch(e);return 200!==t.status?null:(await Ny.store(e,t),Ny.get(e))}catch(t){return null}};return null!=(r=null!=(n=e.startsWith(i)||e.startsWith("tmp://")?null:e)?n:await(async()=>{const t=await tA.get(e);return t&&URL.createObjectURL(t.blob)})())?r:await(async()=>{var t;const n=null!=(t=await Ny.get(e))?t:await s(),r=await(null==n?void 0:n.blob());return r&&URL.createObjectURL(r)})()}(r.value):void 0)),(r,a)=>{const o=AD,l=kD;return Os(),js("div",{class:Fe(`flex justify-center items-center bg-gray-200 overflow-hidden ${i.value}`),style:Me(s.value?`background: hsl(${s.value} 40% 80%)`:"")},[t.value?(Os(),Ms(o,{key:0,class:"w-full h-2/5 opacity-25","aria-hidden":"true"})):(Os(),Ms(l,{key:1,class:"w-full h-2/5 opacity-25","aria-hidden":"true"})),n.value&&!t.value?(Os(),js("img",{key:2,src:n.value,class:"absolute inset-0 object-cover w-full h-full",alt:e.recipe?r.$t("recipes.imageA11y",{recipe:e.recipe.name}):"",onError:a[0]||(a[0]=e=>t.value=!0)},null,40,ID)):Js("",!0)],6)}}}),ED={class:"relative"},OD={class:"p-4 h-40 prose relative"},DD={key:0,class:"mt-1"},TD=ti({__name:"WebImportModalResultsRecipe",props:{recipe:ix(),wrapperClasses:ax("bg-gray-100"),coverClasses:ax("from-gray-100")},setup:e=>(t,n)=>{const r=CD;return Os(),js("div",{class:Fe(["flex flex-col overflow-hidden rounded-lg border-gray-200 shadow md:flex-row",e.wrapperClasses])},[Bs("div",ED,[zs(r,{url:e.recipe.imageUrl,class:"w-full h-20 md:w-40 md:h-40"},null,8,["url"]),Ti(t.$slots,"image")]),Bs("div",OD,[Ti(t.$slots,"name",{},(()=>[Bs("h3",null,He(e.recipe.name),1)])),e.recipe.description?(Os(),js("div",DD,[Ti(t.$slots,"description",{},(()=>[Bs("p",null,He(e.recipe.description),1)]))])):Js("",!0),Bs("div",{class:Fe(["absolute w-full bottom-0 bg-gradient-to-t to-transparent h-12 pointer-events-none",e.coverClasses])},null,2)])],2)}}),PD={class:"bg-primary-300 shadow text-primary-700 rounded-full p-2 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10"},jD=ti({__name:"WebImportModalResultsRecipeRadio",props:{recipe:ix()},setup:e=>(t,n)=>{const r=EE,i=Nw,s=Fw,a=TD,o=Uw;return Os(),Ms(o,{class:"cursor-pointer focus:outline-none",value:e.recipe},{default:Tr((({active:t,checked:n})=>[zs(a,{class:Fe({"ring-2 ring-offset-2 ring-primary-600":t}),"wrapper-classes":n?"bg-primary-gray-300":"bg-gray-100","cover-classes":n?"from-primary-gray-300":"from-gray-100",recipe:e.recipe},Di({name:Tr((()=>[zs(i,{as:"h3"},{default:Tr((()=>[Hs(He(e.recipe.name),1)])),_:1})])),description:Tr((()=>[zs(s,{as:"p"},{default:Tr((()=>[Hs(He(e.recipe.description),1)])),_:1})])),_:2},[n?{name:"image",fn:Tr((()=>[Bs("div",PD,[zs(r,{class:"w-10 h-10","aria-hidden":"true"})])])),key:"0"}:void 0]),1032,["class","wrapper-classes","cover-classes","recipe"])])),_:1},8,["value"])}}),MD=ti({__name:"WebImportModalResults",props:{recipes:tx(),metadata:ix()},setup(e){const t=Qw("web-import-modal","<WebImportModalResults> must be a child of a <WebImportModal>"),n=$S(),r=Qn(null),i=pa((()=>new LA({name:e.metadata.title,description:e.metadata.description,imageUrls:e.metadata.imageUrls&&h(e.metadata.imageUrls),externalUrls:[e.metadata.url]})));return(s,a)=>{const o=Xk,l=Nw,u=jD,c=Lw,d=TD,p=Wx,h=wS;return Os(),Ms(h,{form:tr(n),class:"flex flex-col",onSubmit:a[1]||(a[1]=n=>async function(){var n,s;t.close(),await Ed.push({name:"recipes.create",state:{tmpRecipe:FA.saveTmpRecipe(null!=(s=null!=(n=r.value)?n:e.recipes[0])?s:i.value)}})}())},{default:Tr((()=>[e.recipes.length>1?(Os(),js(Ss,{key:0},[zs(o,{text:s.$t("webImport.success_infoMultiple")},null,8,["text"]),zs(c,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e)},{default:Tr((()=>[zs(l,{class:"sr-only"},{default:Tr((()=>[Hs(He(s.$t("webImport.success_recipes")),1)])),_:1}),(Os(!0),js(Ss,null,Oi(e.recipes,((e,t)=>(Os(),Ms(u,{key:t,recipe:e,class:"mt-3"},null,8,["recipe"])))),128))])),_:1},8,["modelValue"])],64)):1===e.recipes.length?(Os(),js(Ss,{key:1},[zs(o,{text:s.$t("webImport.success_infoSingle")},null,8,["text"]),zs(d,{class:"mt-4",recipe:e.recipes[0]},null,8,["recipe"])],64)):(Os(),js(Ss,{key:2},[zs(o,{text:s.$t("webImport.success_infoFallback")},null,8,["text"]),zs(d,{class:"mt-4",recipe:i.value},null,8,["recipe"])],64)),zs(p,{type:"submit",class:"self-end mt-4 py-3 px-6 text-md font-medium",disabled:e.recipes.length>1&&!r.value},{default:Tr((()=>[Hs(He(s.$t("webImport.success_import")),1)])),_:1},8,["disabled"])])),_:1},8,["form"])}}}),LD={width:"1.2em",height:"1.2em",viewBox:"0 0 105 105",fill:"currentColor"},$D=[Ws('<circle cx="12.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="0s" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="52.5" r="12.5" fill-opacity=".5"><animate attributeName="fill-opacity" begin="100ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="300ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="600ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="800ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="400ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="700ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="500ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="200ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',9)];const UD={name:"app-scanning",render:function(e,t){return Os(),js("svg",LD,$D)}},ND={class:"flex flex-col flex-grow w-full h-full justify-center items-center p-4 space-y-4"},FD={class:"text-xl text-gray-700"};const BD=rS({},[["render",function(e,t){const n=UD;return Os(),js("div",ND,[zs(n,{class:"w-12 h-12 text-primary-500"}),Bs("p",FD,He(e.$t("webImport.scanning")),1)])}]]),zD=/&[a-z0-9#]{1,8};/,qD={"http://schema.org":"https://schema.org/","http://schema.org/":"https://schema.org/","https://schema.org":"https://schema.org/"};function VD(e){HD(e),function(e){if(e.cookTime||e.prepTime||!e.totalTime)return;e.cookTime=e.totalTime}(e),function(e){if("string"==typeof e.recipeInstructions)return void(e.recipeInstructions=function(e){const t=e.matchAll(/<li[^>]*?>([\S\s]*?)<\/li>/gim),n=c(t).map((([,e])=>e));return n.length>0?n.map(((e,t)=>({"@context":{"@vocab":"https://schema.org/"},"@type":"HowToStep",text:e,position:t+1}))).toArray():{"@context":{"@vocab":"https://schema.org/"},"@type":"HowToStep",text:e,position:1}}(e.recipeInstructions));if(Array.isArray(e.recipeInstructions))e.recipeInstructions=e.recipeInstructions.map(((e,t)=>"object"==typeof e?{position:t+1,...e}:{"@context":{"@vocab":"https://schema.org/"},"@type":"HowToStep",text:e,position:t+1}))}(e),function(e){if(!e.recipeIngredient)return;e.recipeIngredient=[e.recipeIngredient].flat().map((e=>e.trim()))}(e),WD(e)}function HD(e){var t;for(const[n,r]of Object.entries(e))"@context"!==n||"string"!=typeof r?se(r)&&HD(r):e["@context"]={"@vocab":null!=(t=qD[r])?t:r}}function WD(e){if("string"!=typeof e.image||!e.image.startsWith("http:http"))return Array.isArray(e.image)?(e.image=e.image[0],void WD(e)):void("object"!=typeof e.image||(e.image=e.image.url));e.image=e.image.slice(5)}function JD(e,t){var n;const r=e[t];if("string"!=typeof r)return;if(!zD.test(r))return;const i=document.createElement("div");i.innerHTML=r,e[t]=null!=(n=i.textContent)?n:r}async function KD(e,t){const n=await Promise.all(function(e){const t=Z(e,/<script[^>]+type="application\/ld\+json"[^>]*>([\s\S]*?)<\/script>/gim);return c(t).map((([,e])=>JSON.parse(e))).flat().map((e=>se(e)?function(e){return"@graph"in e}(e)?e["@graph"].map((t=>d(t,(()=>{t["@context"]=e["@context"]})))):[e]:[])).flat().filter((e=>!!e))}(t).map((e=>{var t;return VD(e),JD(t=e,"name"),JD(t,"description"),Ee(t.recipeIngredient)&&t.recipeIngredient.forEach(((e,n)=>JD(t.recipeIngredient,n))),Ee(t.recipeInstructions)&&t.recipeInstructions.forEach((e=>{se(e)&&JD(e,"text")})),P(LA.newFromJsonLD(e))})));return E(n).map((t=>d(t,(()=>t.setAttribute("externalUrls",[e])))))}function GD(e,t){var n,r,i,s,a,o,l,u;const c=null!=(r=null==(n=t.match(/<head[^>]*>([\s\S]*?)<\/head>/im))?void 0:n[1])?r:"",d=null!=(s=null!=(i=c.match(/<meta[^>]+name="title"[^>]+content="([^"]+)"[^>]*\/?>/im))?i:c.match(/<meta[^>]+content="([^"]+)"[^>]+name="title"[^>]*\/?>/im))?s:c.match(/<title[^>]*>([\s\S]*?)<\/title>/im),p=null!=(a=c.match(/<meta[^>]+name="description"[^>]+content="([^"]+)"[^>]*\/?>/im))?a:c.match(/<meta[^>]+content="([^"]+)"[^>]+name="description"[^>]*\/?>/im),h=null!=(o=c.match(/<meta[^>]+name="(?:og:image|twitter:image)"[^>]+content="([^"]+)"[^>]*\/?>/im))?o:c.match(/<meta[^>]+content="([^"]+)"[^>]+name="(?:og:image|twitter:image)"[^>]*\/?>/im);return $({url:e.trim(),title:null!=(l=null==d?void 0:d[1])?l:uS("webImport.defaultWebsiteTitle"),description:null!=(u=null==p?void 0:p[1])?u:null,imageUrls:E([null==h?void 0:h[1]])})}const ZD=ti({__name:"WebImportModal",props:{url:ax()},setup(e){var t;let n=Qn(!1),r=Qn(),i=Qn(null!=(t=e.url)?t:void 0),s=Qn(),a=Qn();const o=Qn(null),l=Qn(null),u=pa((()=>{if(!n.value)return s.value?uS("webImport.success_title"):r.value?uS("webImport.error_title"):uS("webImport.title")}));return di((async()=>{await yr(),e.url&&l.value&&l.value.submit()})),$r("web-import-modal",{get websiteUrl(){return i.value},async scan(e){await ge({milliseconds:200}),n.value=!0;try{await e}finally{n.value=!1}},async parseWebsite(e,t){[a.value,s.value]=await Promise.all([GD(e,t),KD(e,t)])},async retry(e){r.value=void 0,await e()},failed(e,t){i.value=e,r.value=t},close:()=>{var e;return null==(e=o.value)?void 0:e.close()}}),(e,t)=>{const i=BD,c=MD,d=wD,p=dD,h=l_;return Os(),Ms(h,{ref_key:"$root",ref:o,title:u.value,cancellable:!n.value},{default:Tr((()=>[n.value?(Os(),Ms(i,{key:0})):a.value&&s.value?(Os(),Ms(c,{key:1,metadata:a.value,recipes:s.value},null,8,["metadata","recipes"])):r.value?(Os(),Ms(d,{key:2,error:r.value},null,8,["error"])):(Os(),Ms(p,{key:3,ref_key:"$start",ref:l},null,512))])),_:1},8,["title","cancellable"])}}}),YD={class:"flex flex-col space-y-4 w-full md:space-x-4 md:space-y-0 md:flex-row md:w-auto"},QD={class:"ml-2 text-center text-lg font-medium md:ml-0 md:mt-2"},XD={class:"ml-2 text-center text-lg font-medium md:ml-0 md:mt-2"},eT={class:"ml-2 text-center text-lg font-medium md:ml-0 md:mt-2"},tT=ti({__name:"RecipeCreateOptions",emits:["optionSelected"],setup(e){const t=pa((()=>PR.isMobile?{}:{min:100,max:200}));return(e,n)=>{const r=nD,i=Si("HeadlessButton"),s=XO,a=ZO,o=JO,l=Ii("initial-focus"),u=Ii("wobbly-border");return Os(),js("div",YD,[wi((Os(),Ms(i,{class:"flex flex-row items-center justify-center bg-gray-300 text-gray-700 px-2 py-3 w-full hover:bg-primary-500 hover:text-white focus:bg-primary-500 focus:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 active:bg-primary-700 active:text-white md:flex-col md:h-40 md:w-40 md:px-3 md:py-3",onClick:n[0]||(n[0]=t=>(e.$ui.openModal(ZD),e.$emit("optionSelected")))},{default:Tr((()=>[zs(r,{class:"w-8 h-8 md:w-12 md:h-12","aria-hidden":"true"}),Bs("span",QD,He(e.$t("recipes.new.fromTheWeb")),1)])),_:1})),[[l,!e.$ui.isMobile],[u,t.value]]),wi((Os(),Ms(i,{class:"flex flex-row items-center justify-center bg-gray-300 text-gray-700 px-2 py-3 w-full hover:bg-primary-500 hover:text-white focus:bg-primary-500 focus:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 active:bg-primary-700 active:text-white md:flex-col md:h-40 md:w-40 md:px-3 md:py-3",route:"recipes.create",onClick:n[1]||(n[1]=t=>e.$emit("optionSelected"))},{default:Tr((()=>[zs(s,{class:"w-8 h-8 md:w-12 md:h-12","aria-hidden":"true"}),Bs("span",XD,He(e.$t("recipes.new.fromScratch")),1)])),_:1})),[[u,t.value]]),wi((Os(),Ms(o,{accept:"application/json, application/ld+json, .json, .jsonld",parse:"json",class:"flex flex-row items-center justify-center bg-gray-300 text-gray-700 px-2 py-3 w-full focus-within:bg-primary-500 focus-within:text-white focus-within:ring-2 focus-within:ring-primary-500 focus-within:ring-offset-2 hover:cursor-pointer hover:bg-primary-500 hover:text-white active:bg-primary-700 active:text-white md:flex-col md:h-40 md:w-40 md:px-3 md:py-3",onError:n[2]||(n[2]=t=>e.$errors.report(t)),onSuccess:n[3]||(n[3]=t=>(async function(e){const t=await LA.createFromJsonLD(e);await Ed.push(t.route()),await JA.syncIfOnline(t)}(t),e.$emit("optionSelected")))},{default:Tr((()=>[zs(a,{class:"w-8 h-8 md:w-12 md:h-12","aria-hidden":"true"}),Bs("span",eT,He(e.$t("recipes.new.fromJsonLD")),1)])),_:1})),[[u,t.value]])])}}});const nT=rS({},[["render",function(e,t){const n=tT,r=l_;return Os(),Ms(r,{title:e.$t("recipes.new.title")},{default:Tr((({close:e})=>[zs(n,{class:"mt-2",onOptionSelected:t=>e()},null,8,["onOptionSelected"])])),_:1},8,["title"])}]]),rT=ti({__name:"HomeRecipesFAB",setup:e=>(e,t)=>{const n=qO,r=Si("HeadlessButton");return Os(),Ms(r,{class:"fixed bottom-edge right-edge z-10 flex justify-center items-center text-white rounded-full shadow-lg bg-primary-600 w-16 h-16 hover:bg-primary-700 active:bg-primary-700 focus:ring-2 focus:ring-offset-2 focus:ring-primary-600","aria-label":e.$t("home.recipes.create"),title:e.$t("home.recipes.create"),onClick:t[0]||(t[0]=t=>e.$ui.openModal(nT))},{default:Tr((()=>[zs(n,{class:"w-8 h-8","aria-hidden":"true"})])),_:1},8,["aria-label","title"])}}),iT=400;async function sT(e,t,n,r){const i=document.createElement("div"),s=Fx(t,".recipe-card--title-wrapper"),a=Fx(t,".recipe-card--title-text"),o=Fx(t,".recipe-card--title-background"),l=Fx(n,".recipe-page--wrapper"),u=Fx(n,".recipe-page--image"),c=t.getBoundingClientRect(),d=u.getBoundingClientRect(),p=r.getBoundingClientRect();await Ux({duration:500,fill:"forwards"},[{element:t,before:{addClasses:"w-full h-full",removeClasses:"aspect-[5/2] hover:opacity-75 rounded-lg",prepend:i},classes:{borderRadius:["rounded-lg","rounded-none"]}},{element:e,before:{addClasses:"z-10"},boundingRects:[c,d]},{element:i,before:{addClasses:"absolute z-10 inset-x-0 top-0 bg-gradient-to-b from-dark-overlay to-transparent"},styles:{opacity:[0,1],height:[`${PR.headerHeight*c.height/d.height}px`,`${PR.headerHeight}px`]}},{element:s,before:{removeClasses:"p-2"},classes:{paddingTop:["p-2","p-4"],paddingRight:["p-2","p-4"],paddingBottom:["p-2","p-4"]},styles:{paddingLeft:[Kw.css("spacing.2"),`${p.left}px`],paddingRight:[Kw.css("spacing.2"),`${window.innerWidth-p.right}px`]}},{element:a,before:{addClasses:"font-semibold"},classes:{textShadow:["text-shadow-transparent","text-shadow"],fontSize:["text-lg",PR.isMobile?"text-2xl":"text-4xl"]}},{element:o,styles:{opacity:[1,0]}},{element:l,before:{addClasses:"!z-20"},after:{removeClasses:"!z-20"}}])}const aT=async(e,t)=>{(null==t?void 0:t.config.name)?await async function(e,t){e.style.opacity="0",await t,e.removeAttribute("style")}(e,zI.waitElementsGone(t.config.name,t.config.id)):Ed.previousRouteWas(/^kitchen(\.[^.]+)?|recipes\.show$/)||await Xx(e,700)},oT=async e=>{Ed.currentRouteIs("recipes.show")?await zI.waitElementsReady("recipe-details"):qA.active?await zI.waitElementsReady("viewer-recipe"):iO.active?await ge({ms:iT}):await e_(e,700)},lT=async(e,t,{element:n})=>{const r=t.getBoundingClientRect(),i=n.getBoundingClientRect();await $x(e,{duration:700,boundingRects:[r,i]})},uT=async(e,t,{element:n})=>{const r=Fx(n,"#viewer-recipe-title");await sT(e,t,n,r),await zI.waitElementsReady("viewer-recipe")},cT=async(e,t,{element:n})=>{const r=Fx(n,"#recipe-details-title");await sT(e,t,n,r),await zI.waitElementsReady("recipe-details")},dT=["data-recipe-url"],pT={class:"z-10 text-lg font-bold text-white"},hT=Bs("span",{"aria-hidden":"true",class:"absolute inset-0"},null,-1),fT={key:0,class:"absolute inset-x-0 bottom-0 p-2 recipe-card--title-wrapper"},mT=Bs("div",{class:"absolute inset-0 bg-gradient-to-t to-transparent from-dark-overlay recipe-card--title-background"},null,-1),vT={class:"relative recipe-card--title-text"},gT=ti({__name:"RecipeCard",props:{recipe:ix(),route:ex(),transitions:Zw(!0)},setup(e){const t=e;let n=Qn(!1);const r=pa((()=>{if(t.transitions)return{name:"recipe-card",id:t.recipe.url,transitions:{enter:aT,leave:oT,"recipe-card":lT,"recipe-details":cT,"viewer-recipe":uT}}}));function i(e){n.value=e}return(t,s)=>{var a;const o=CD,l=Si("router-link"),u=Ii("focus-visible"),c=Ii("element-transitions");return wi((Os(),js("li",{"data-recipe-url":e.recipe.url,class:Fe(["flex overflow-hidden relative flex-col justify-end rounded-lg shadow aspect-[5/2]","hover:opacity-75",n.value&&"ring-2 ring-offset-2 ring-primary-500"])},[zs(o,{recipe:e.recipe,class:"absolute inset-0"},null,8,["recipe"]),Bs("h2",pT,[wi((Os(),Ms(l,{class:"block w-full h-clickable focus-visible:outline-none",to:null!=(a=e.route)?a:e.recipe.route(t.$viewer.active?"viewer":"show")},{default:Tr((()=>[hT,e.recipe.name?(Os(),js("div",fT,[mT,Bs("span",vT,He(e.recipe.name),1)])):Js("",!0)])),_:1},8,["to"])),[[u,i]])])],10,dT)),[[c,tr(r)]])}}}),yT=ti({__name:"RecipesGrid",props:{recipes:tx()},setup(e){const t=Qn();return fi((()=>{if(!t.value)return;const e=t.value.getBoundingClientRect();t.value.style.width=`${e.width}px`,t.value.style.height=`${e.height}px`})),(t,n)=>{const r=gT;return Os(),Ms(io,{tag:"ul","enter-active-class":t.$ui.animations?"transition-all duration-300":"","enter-from-class":"opacity-0","leave-active-class":t.$ui.animations?"!absolute transition-all duration-300":"","leave-to-class":"opacity-0","move-class":t.$ui.animations?"transition-all duration-300":"",class:"grid grid-cols-1 gap-3 my-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",onBeforeLeave:n[0]||(n[0]=e=>t.$elementTransitions.freezeInPlace(e))},{default:Tr((()=>[(Os(!0),js(Ss,null,Oi(e.recipes,(e=>(Os(),Ms(r,{key:e.url,recipe:e},null,8,["recipe"])))),128))])),_:1},8,["enter-active-class","leave-active-class","move-class"])}}}),bT={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},wT=[Bs("g",{fill:"currentColor"},[Bs("path",{"fill-rule":"evenodd",d:"M4.475 4.475a5.5 5.5 0 1 0 7.778 7.778a5.5 5.5 0 0 0-7.778-7.778Zm6.364 6.364a3.5 3.5 0 1 1-4.95-4.95a3.5 3.5 0 0 1 4.95 4.95Z","clip-rule":"evenodd"}),Bs("path",{d:"M11.192 13.314a1.5 1.5 0 1 1 2.122-2.122l3.535 3.536a1.5 1.5 0 1 1-2.121 2.121l-3.536-3.535Z"})],-1)];const xT={name:"pepicons-loop",render:function(e,t){return Os(),js("svg",bT,wT)}},_T={key:0,class:"absolute right-0 overflow-hidden"},kT=ti({__name:"CoreSearchBox",props:{modelValue:sx(),label:ax("Search"),placeholder:ax("Search...")},emits:["update:modelValue","focus","blur"],setup(e,{emit:t}){let n=Qn(!1);const r=Qn(null),i=Qn(null),s=Qn(null);async function a(){var e;n.value=!0,await yr(),null==(e=i.value)||e.focus()}async function o(){var e;n.value=!1,t("update:modelValue",""),t("blur"),await yr(),null==(e=i.value)||e.blur()}function l(){n.value=!!e.modelValue,0===e.modelValue.trim().length?o():t("blur")}return(t,u)=>{const c=LC,d=xT,p=Wx;return Os(),js("div",{ref_key:"$root",ref:r,class:"relative",role:"search"},[zs(Na,{duration:300,onBeforeEnter:u[2]||(u[2]=e=>async function(e){var t,n,a;const o=null==(n=null==(t=s.value)?void 0:t.getRootElement())?void 0:n.clientHeight;r.value&&(r.value.style.height=`${o}px`),e.classList.add("opacity-0"),await yr();const l=null==(a=i.value)?void 0:a.minWidth;await Promise.all([$x(e,{duration:150,after:{removeClasses:"opacity-0"},styles:{opacity:["0","1"]}}),$x(e,{duration:300,styles:{width:["0",`${l}px`]}})])}(e)),onBeforeLeave:u[3]||(u[3]=e=>async function(e){await Promise.all([$x(e,{duration:300,styles:{width:[`${e.clientWidth}px`,"0"]}}),Lx(150).then((()=>$x(e,{duration:150,styles:{opacity:["1","0"]}})))])}(e))},{default:Tr((()=>[n.value?(Os(),js("div",_T,[zs(c,{ref_key:"$input",ref:i,type:"search",role:"searchbox",placeholder:e.placeholder,"model-value":e.modelValue,onBlur:l,onFocus:u[0]||(u[0]=e=>t.$emit("focus")),onKeyup:go(mo(o,["prevent"]),["esc"]),"onUpdate:modelValue":u[1]||(u[1]=e=>t.$emit("update:modelValue",e))},null,8,["placeholder","model-value","onKeyup"])])):Js("",!0)])),_:1}),zs(Na,{duration:300,onBeforeEnter:u[4]||(u[4]=e=>async function(e){e.classList.add("opacity-0"),await Lx(150),await $x(e,{duration:150,after:{removeClasses:"opacity-0"},styles:{opacity:["0","1"]}})}(e)),onBeforeLeave:u[5]||(u[5]=e=>async function(e){await $x(e,{duration:150,after:{addClasses:"opacity-0"},styles:{opacity:["1","0"]}})}(e))},{default:Tr((()=>[n.value?Js("",!0):(Os(),Ms(p,{key:0,ref_key:"$button",ref:s,clear:"","aria-label":e.label,title:e.label,onClick:a},{default:Tr((()=>[zs(d,{class:"w-7 h-7","aria-hidden":"true"})])),_:1},8,["aria-label","title"]))])),_:1})],512)}}}),ST={id:"home-title",class:"my-2 text-xl font-semibold"};const RT=rS({},[["render",function(e,t){return Os(),js("h1",ST,[Ti(e.$slots,"default")])}]]),AT={class:"flex flex-col flex-grow w-full"},IT={class:"flex justify-between items-center relative"},CT=Bs("div",{class:"flex-grow"},null,-1),ET={class:"ml-1 font-semibold uppercase text-xs tracking-wider"},OT={key:0,class:"absolute top-24 bottom-0 inset-x-0 flex-grow items-center justify-center flex"},DT={class:"prose"},TT=ti({__name:"HomeRecipes",setup(e){let t=Qn(""),n=Qn(!1);const r=function(){const e=[],t=Vu.hasMessage("home.recipes.title.0")?null:Ju.fallbackLocale;for(let n=0;;n++){const r=`home.recipes.title.${n}`;if(!Vu.hasMessage(r,t))break;e.push(uS(r))}return Oe(e)||""}(),i=pa((()=>FA.recipes.map((e=>({recipe:e,searchableText:de(e.name).replaceAll("-","")}))))),s=pa((()=>t.value.trim())),a=pa((()=>{const e=de(s.value).replaceAll("-","");return(e.length?i.value.filter((({searchableText:t})=>t.includes(e))):i.value).map((({recipe:e})=>e)).toArray()}));return(e,i)=>{const o=RT,l=qO,u=Wx,c=kT,d=yT,p=Xk,h=rT;return Os(),js("div",AT,[Bs("div",IT,[zs(o,null,{default:Tr((()=>[Hs(He(tr(r)),1)])),_:1}),CT,zs(Na,{"enter-active-class":e.$ui.animations?"transition duration-300":"","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":e.$ui.animations?"transition duration-300":"","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Tr((()=>[!e.$ui.isDesktop||n.value||t.value?Js("",!0):(Os(),Ms(u,{key:0,class:"mr-14 h-9",onClick:i[0]||(i[0]=t=>e.$ui.openModal(nT))},{default:Tr((()=>[zs(l,{class:"w-5 h-5","aria-hidden":"true"}),Bs("span",ET,He(e.$t("home.recipes.create")),1)])),_:1}))])),_:1},8,["enter-active-class","leave-active-class"]),zs(c,{modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=e=>t.value=e),class:"!absolute right-0 top-1/2 -translate-y-1/2",label:e.$t("home.recipes.search_label"),placeholder:e.$t("home.recipes.search_placeholder"),onFocus:i[2]||(i[2]=e=>n.value=!0),onBlur:i[3]||(i[3]=e=>n.value=!1)},null,8,["modelValue","label","placeholder"])]),zs(d,{recipes:a.value,class:"w-full"},null,8,["recipes"]),zs(Na,{"enter-to-class":"opacity-100","enter-active-class":e.$ui.animations?"transition-opacity duration-500":"","enter-from-class":"opacity-0","leave-to-class":"opacity-0","leave-active-class":e.$ui.animations?"transition-opacity duration-500":"","leave-from-class":"opacity-100"},{default:Tr((()=>[0===a.value.length?(Os(),js("div",OT,[Bs("div",DT,[zs(p,{class:"text-2xl font-medium tracking-wide leading-snug text-center",text:e.$t("home.recipes.empty",{search:s.value})},null,8,["text"])])])):Js("",!0)])),_:1},8,["enter-active-class","leave-active-class"]),e.$ui.isMobile?(Os(),Ms(h,{key:0})):Js("",!0)])}}}),PT={class:"flex flex-col w-full justify-center items-center mt-16"};const jT=rS({},[["render",function(e,t){const n=RT,r=Xk,i=tT;return Os(),js("div",PT,[zs(n,null,{default:Tr((()=>[Hs(He(e.$t("home.createRecipe.title")),1)])),_:1}),zs(r,{text:e.$t("home.createRecipe.message")},null,8,["text"]),zs(i,{class:"mt-8"})])}]]),MT={class:"space-y-3"},LT={class:"flex flex-row items-center w-full"},$T={class:"flex flex-row items-center w-full"},UT={class:"flex flex-row items-center self-end mt-4 space-x-3"},NT=ti({__name:"HomeCreateCookbook",setup(e){var t;let n=Qn(!1);const r=$S({name:{type:LS.String,rules:"required",default:"Cookbook"},storageUrl:{type:LS.String,rules:"required",default:null==(t=nI.user)?void 0:t.storageUrls[0]}}),i=Qn(null),s=Qn(null),a=Qn(null),o=pa((()=>he(r.storageUrl,de(r.name))));async function l(e){try{n.value=!0,e?await FA.initializeRemoteUsing(e):await FA.initializeRemote(r.name,r.storageUrl),await JA.sync()}catch(t){if(t instanceof CookbookExistsError)return void async function(e){if(!(await PR.confirm({title:uS("home.createCookbook.exists"),message:uS("home.createCookbook.exists_info",{url:e.url}),acceptText:uS("home.createCookbook.exists_accept")})))return;l(e)}(t.cookbook);throw t}finally{n.value=!1}}return(e,t)=>{const u=RT,c=Xk,d=SS,p=jC,h=vS,f=Wx,m=ZC,v=wS;return Os(),Ms(v,{class:"flex flex-col w-full max-w-prose mx-auto justify-center items-center mt-16",form:tr(r),onSubmit:t[2]||(t[2]=e=>l())},{default:Tr((()=>[zs(u,null,{default:Tr((()=>[Hs(He(e.$t("home.createCookbook.title")),1)])),_:1}),n.value?(Os(),js(Ss,{key:1},[zs(m,{class:"h-8 w-8 animate-spin text-primary-700 mt-2","aria-hidden":"true"}),zs(c,{text:e.$t("home.createCookbook.processing",{url:o.value}),class:"text-center text-lg text-gray-700 mt-4"},null,8,["text"])],64)):(Os(),js(Ss,{key:0},[zs(c,{text:e.$t("home.createCookbook.message"),class:"w-full"},null,8,["text"]),zs(p,{class:"w-full -ml-4 mt-2",summary:e.$t("home.createCookbook.advancedOptions"),onOpen:t[0]||(t[0]=e=>{var t;return async function(){const e=[s.value,a.value].filter((e=>!!e)),t=e.reduce(((e,t)=>Math.max(e,t.clientWidth)),0);for(const n of e)n.style.width=`${t}px`}(),null==(t=i.value)?void 0:t.focus()})},{default:Tr((()=>[Bs("div",MT,[Bs("label",LT,[Bs("span",{ref_key:"$nameLabel",ref:s,class:"font-medium"},He(e.$t("home.createCookbook.nameLabel")),513),zs(d,{ref_key:"$name",ref:i,name:"name",class:"ml-2 flex-grow"},null,512)]),Bs("label",$T,[Bs("span",{ref_key:"$storageUrlLabel",ref:a,class:"font-medium"},He(e.$t("home.createCookbook.storageUrlLabel")),513),zs(d,{name:"storageUrl",class:"ml-2 flex-grow"})]),zs(c,{text:e.$t("home.createCookbook.urlPreview",{url:o.value}),class:"text-sm"},null,8,["text"])])])),_:1},8,["summary"]),Bs("div",UT,[zs(h,{class:"text-sm",onClick:t[1]||(t[1]=t=>e.$ui.showMarkdown(e.$t("home.createCookbook.help_detailsTitle"),e.$t("home.createCookbook.help_detailsContent")))},{default:Tr((()=>[Hs(He(e.$t("home.createCookbook.help")),1)])),_:1}),zs(f,{class:"text-lg",type:"submit"},{default:Tr((()=>[Hs(He(e.$t("home.createCookbook.submit")),1)])),_:1})])],64))])),_:1},8,["form"])}}}),FT={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},BT=[Ws('<g fill="currentColor"><path fill-rule="evenodd" d="M11.27 5.506c0 1.942 1.063 3.308 3 3.994V11a1 1 0 1 0 2 0V1.5a1 1 0 0 0-1.442-.897c-2.316 1.141-3.558 2.8-3.558 4.903Zm2 0c0-.82.319-1.535 1-2.161v3.971c-.695-.411-1-.999-1-1.81Z" clip-rule="evenodd"></path><path d="M13.27 17.5v-5a2 2 0 1 1 4 0v5a2 2 0 0 1-4 0ZM3.283 2.45a1 1 0 1 1 1.998.1c-.08 1.603.002 2.682.2 3.158c.095.23.253.315.712.288a1 1 0 1 1 .114 1.997c-1.258.073-2.229-.446-2.674-1.519c-.343-.828-.444-2.142-.35-4.024Z"></path><path d="M10.717 2.45a1 1 0 1 0-1.998.1c.08 1.603-.002 2.682-.2 3.158c-.096.23-.253.315-.712.288a1 1 0 1 0-.115 1.997c1.258.073 2.23-.446 2.675-1.519c.343-.828.444-2.142.35-4.024Z"></path><path d="M6 2.5a1 1 0 0 1 2 0v9a1 1 0 1 1-2 0v-9Z"></path><path d="M5 17.5v-5a2 2 0 1 1 4 0v5a2 2 0 1 1-4 0Z"></path></g>',1)];const zT={name:"pepicons-knive-fork",render:function(e,t){return Os(),js("svg",FT,BT)}},qT=["id"],VT=ti({__name:"CoreTooltip",props:{text:sx()},setup(e){const t=F(),n=Qn(null);let r=Qn(!1),i=Qn("");const s=e=>{"Escape"!==e.key&&"Esc"!==e.key||o()};async function a(){r.value=!0,document.addEventListener("keydown",s),await yr(),function(){if(!n.value||i.value)return;const e=Kw.pixels("spacing.edge"),t=n.value.getBoundingClientRect(),r=-Math.min(0,t.x-e,window.innerWidth-(t.width-t.x)-e),s=n.value.clientWidth-2*r;i.value=`width:${s+Kw.pixels("spacing.1")}px`}()}function o(){r.value=!1,document.removeEventListener("keydown",s)}return mi((()=>document.removeEventListener("keydown",s))),(s,l)=>(Os(),js("span",{class:"relative",onMouseenter:l[0]||(l[0]=e=>a()),onTouchstart:l[1]||(l[1]=e=>a()),onMouseleave:l[2]||(l[2]=e=>o())},[Ti(s.$slots,"default",{tooltipId:tr(t),openTooltip:a,closeTooltip:o}),Bs("span",{id:tr(t),ref_key:"$wrapper",ref:n,role:"tooltip",class:Fe(["absolute -top-3 left-1/2 bg-gray-700 text-white -translate-x-1/2 -translate-y-full px-2 py-1 rounded-md",{hidden:!r.value,"whitespace-nowrap":!i.value}]),style:Me(i.value)},He(e.text),15,qT),Bs("span",{class:Fe(["absolute pointer-events-none top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 border-t-gray-700 border-transparent border-x-[.75rem] border-y-[.75rem]",{hidden:!r.value}])},null,2)],32))}}),HT={key:0,class:"flex items-center"},WT={class:"ml-1"},JT=ti({__name:"HomeOnboardingLogin",emits:["cancel"],setup(e){const t=$S({url:{type:LS.String,default:"https://",rules:"required"}});return(e,n)=>{const r=ZC,i=Xk,s=ES,a=AS,o=vS,l=wS;return e.$auth.ongoing?(Os(),js("div",HT,[zs(r,{class:"h-4 w-4 animate-spin text-brand-solid-700","aria-hidden":"true"}),zs(i,{text:e.$auth.stale?e.$t("home.onboarding.loginWithSolid_stale"):e.$t("home.onboarding.loginWithSolid_loading"),actions:{reload:()=>e.$app.reload()},class:"ml-2 text-lg text-gray-700"},null,8,["text","actions"])])):(Os(),Ms(l,{key:1,form:tr(t),class:"flex flex-col items-center",onSubmit:n[1]||(n[1]=e=>async function(){/^https?:\/\//.test(t.url)||(t.url="https://"+t.url),await nI.login(t.url)}())},{default:Tr((()=>[zs(i,{text:e.$t("home.onboarding.loginWithSolid_info"),class:"max-w-md text-center"},null,8,["text"]),zs(a,{class:"mt-4",name:"url",color:"brand-solid",label:e.$t("home.onboarding.loginWithSolid_label"),placeholder:e.$t("home.onboarding.loginWithSolid_placeholder")},{default:Tr((()=>[zs(s,{class:"h-6 w-6 text-brand-solid-500","aria-hidden":"true"}),Bs("span",WT,He(e.$t("home.onboarding.loginWithSolid_submit")),1)])),_:1},8,["label","placeholder"]),zs(o,{class:"mt-4 text-sm",onClick:n[0]||(n[0]=t=>e.$emit("cancel"))},{default:Tr((()=>[Hs(He(e.$t("home.onboarding.back")),1)])),_:1})])),_:1},8,["form"]))}}}),KT=ti({__name:"HomeOnboardingCreateRecipe",emits:["cancel"],setup:e=>(e,t)=>{const n=Xk,r=tT,i=vS;return Os(),js(Ss,null,[zs(n,{class:"text-center",text:e.$t("home.onboarding.createRecipe_info")},null,8,["text"]),zs(r,{class:"mt-4"}),zs(i,{class:"mt-4 text-sm",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))},{default:Tr((()=>[Hs(He(e.$t("home.onboarding.back")),1)])),_:1})],64)}}),GT={class:"flex flex-col flex-grow items-center justify-center"},ZT=Bs("h1",{id:"home-title",class:"sr-only"}," Umai ",-1),YT={class:"mt-4 flex flex-col items-center justify-center"},QT={class:"prose max-w-md text-center"},XT={class:"mt-2 flex flex-col items-center"},eP={class:"ml-2"},tP={class:"ml-2"},nP=ti({__name:"HomeOnboarding",setup(e){const t=ox("loggingIn",!1),n=ox("creatingNewRecipe",!1),r=pa((()=>{const e=uS("home.onboarding.welcome",{umai:"%SEPARATOR%"}),[t,n]=e.split("%SEPARATOR%");return{beforeTooltip:null==t?void 0:t.replace(/\s+$/,"&nbsp;"),afterTooltip:null==n?void 0:n.replace(/^\s+/,"&nbsp;")}}));return(e,i)=>{const s=lS,a=KT,o=JT,l=vS,u=VT,c=zT,d=Wx,p=ES,h=Ii("safe-html");return Os(),js("div",GT,[ZT,e.$auth.ongoing?Js("",!0):(Os(),Ms(s,{key:0,class:"h-auto w-[250px] max-w-[60vw] fill-primary-500","aria-hidden":"true"})),Bs("div",YT,[n.value?(Os(),Ms(a,{key:0,onCancel:i[0]||(i[0]=e=>n.value=!1)})):t.value?(Os(),Ms(o,{key:1,onCancel:i[1]||(i[1]=e=>t.value=!1)})):(Os(),js(Ss,{key:2},[Bs("div",QT,[Bs("p",null,[wi(Bs("span",null,null,512),[[h,r.value.beforeTooltip]]),zs(u,{text:e.$t("home.onboarding.umai_title")},{default:Tr((({tooltipId:e,openTooltip:t,closeTooltip:n})=>[zs(l,{"aria-describedby":e,url:"/",internal:"",secondary:"",class:"no-underline font-semibold hover:!text-gray-700",onClick:i[2]||(i[2]=mo((()=>{}),["prevent"])),onFocus:e=>t(),onBlur:e=>n()},{default:Tr((()=>[Hs(" Umai ")])),_:2},1032,["aria-describedby","onFocus","onBlur"])])),_:1},8,["text"]),wi(Bs("span",null,null,512),[[h,r.value.afterTooltip]])]),Bs("p",null,He(e.$t("home.onboarding.getStarted")),1)]),Bs("div",XT,[zs(d,{secondary:"",tinted:"",class:"w-full",onClick:i[3]||(i[3]=e=>n.value=!0)},{default:Tr((()=>[zs(c,{class:"h-6 w-6","aria-hidden":"true"}),Bs("span",eP,He(e.$t("home.onboarding.createRecipe")),1)])),_:1}),zs(d,{secondary:"",tinted:"",color:"brand-solid",class:"group mt-2 w-full",onClick:i[4]||(i[4]=e=>t.value=!0)},{default:Tr((()=>[zs(p,{class:"h-6 w-6 group-hover:text-brand-solid-500 group-focus:text-brand-solid-500","aria-hidden":"true"}),Bs("span",tP,He(e.$t("home.onboarding.loginWithSolid")),1)])),_:1}),zs(l,{secondary:"",color:"brand-solid",class:"mt-1.5 text-xs",onClick:i[5]||(i[5]=t=>e.$ui.showMarkdown(e.$t("home.onboarding.whatIsSolid_title"),e.$t("home.onboarding.whatIsSolid_content")))},{default:Tr((()=>[Hs(He(e.$t("home.onboarding.whatIsSolid")),1)])),_:1})])],64))])])}}}),rP=ti({__name:"Home",setup:e=>(e,t)=>{const n=nP,r=NT,i=jT,s=TT,a=sS,o=Ii("element-transitions");return wi((Os(),Ms(a,{class:"px-edge","aria-labelledby":"home-title"},{default:Tr((()=>[e.$app.isOnboarding?(Os(),Ms(n,{key:0})):e.$auth.loggedIn&&!e.$cookbook.created?(Os(),Ms(r,{key:1})):e.$cookbook.recipes.isEmpty()?(Os(),Ms(i,{key:2})):(Os(),Ms(s,{key:3}))])),_:1})),[[o,{enter:{"recipes.show":()=>e.$elementTransitions.waitElementsGone("recipe-details"),"recipes.create":()=>e.$elementTransitions.waitElementsGone("recipe-form"),kitchen:tr(J),"kitchen.instructions":tr(J),"kitchen.ingredients":tr(J),"kitchen.completed":tr(J),"*":e.$elementTransitions.fadeIn},leave:{"recipes.show":()=>e.$elementTransitions.waitElementsReady("recipe-details"),"recipes.create":()=>e.$elementTransitions.waitElementsReady("recipe-form"),kitchen:()=>tr(ge)({ms:tr(iT)}),"kitchen.instructions":()=>tr(ge)({ms:tr(iT)}),"kitchen.ingredients":()=>tr(ge)({ms:tr(iT)}),"kitchen.completed":()=>tr(ge)({ms:tr(iT)}),"*":e.$elementTransitions.fadeOut}}]])}}),iP={"aria-hidden":"true",class:"block h-0 opacity-0 overflow-hidden pointer-events-none"};const sP=rS({},[["render",function(e,t){return Os(),js("p",iP,` This text is here just to make this div grow... If you're reading this without using some developer tool, this is a bug. Please report it :). It actually needs to be quite long, so just for kicks allow me to add one of my favourite quotes from Sherlock Holmes: "I consider that a man's brain originally is like a little empty attic, and you have to stock it with such furniture as you choose. A fool takes in all the lumber of every sort that he comes across, so that the knowledge which might be useful to him gets crowded out, or at best is jumbled up with a lot of other things so that he has a difficulty in laying his hands upon it. Now the skillful workman is very careful indeed as to what he takes into his brain-attic. He will have nothing but the tools which may help him in doing his work, but of these he has a large assortment, and all in the most perfect order. It is a mistake to think that that little room has elastic walls and can distend to any extent. Depend upon it there comes a time when for every addition of knowledge you forget something that you knew before. It is of the highest importance, therefore, not to have useless facts elbowing out the useful ones." `)}]]),aP={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},oP=[Bs("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[Bs("path",{d:"M10 5.5a5.5 5.5 0 1 0 0 11a5.5 5.5 0 0 0 0-11ZM2.5 11a7.5 7.5 0 1 1 15 0a7.5 7.5 0 0 1-15 0Z"}),Bs("path",{d:"M2.793 3.793a1 1 0 0 1 1.414 0l1.5 1.5a1 1 0 0 1-1.414 1.414l-1.5-1.5a1 1 0 0 1 0-1.414Zm11.5 2.914a1 1 0 0 0 1.414 0l1.5-1.5a1 1 0 0 0-1.414-1.414l-1.5 1.5a1 1 0 0 0 0 1.414ZM13.28 8.375a1 1 0 0 1-.155 1.406l-2.5 2a1 1 0 0 1-1.25-1.562l2.5-2a1 1 0 0 1 1.406.156ZM9 4V2h2v2H9Z"}),Bs("path",{d:"M7.5 2a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2h-3a1 1 0 0 1-1-1Z"})],-1)];const lP={name:"pepicons-stopwatch",render:function(e,t){return Os(),js("svg",aP,oP)}},uP={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},cP=[Ws('<g fill="currentColor"><path fill-rule="evenodd" d="M7.203 4c.13.819.323 1.595.575 2.084c.198.385.586.874 1.118 1.407c.365.365.752.706 1.104.996c.352-.29.74-.631 1.104-.996c.532-.533.92-1.022 1.118-1.407c.252-.489.444-1.265.575-2.084H7.203Zm-.662-2c-.844 0-1.518.697-1.42 1.536C5.246 4.612 5.499 6.026 6 7c.672 1.305 2.218 2.643 3.18 3.393c.485.38 1.155.38 1.64 0C11.783 9.643 13.329 8.305 14 7c.501-.973.754-2.388.88-3.464c.097-.84-.577-1.536-1.421-1.536H6.54Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M12.797 16c-.13-.819-.323-1.595-.575-2.084c-.198-.385-.586-.875-1.118-1.407A15.7 15.7 0 0 0 10 11.513c-.352.29-.74.631-1.104.996c-.532.532-.92 1.022-1.118 1.407c-.252.489-.444 1.265-.575 2.084h5.594Zm.662 2c.844 0 1.518-.697 1.42-1.535c-.125-1.077-.378-2.492-.879-3.465c-.672-1.305-2.218-2.643-3.18-3.393a1.326 1.326 0 0 0-1.64 0C8.217 10.357 6.672 11.695 6 13c-.501.973-.754 2.388-.88 3.465c-.097.838.577 1.535 1.421 1.535h6.918Z" clip-rule="evenodd"></path><path d="M7 15.75s2-1.5 3-1.5s3 1.5 3 1.5v.5H7v-.5Z"></path><path fill-rule="evenodd" d="M4 2.5a1 1 0 0 1 1-1h10a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm0 15a1 1 0 0 1 1-1h10a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Z" clip-rule="evenodd"></path></g>',1)];const dP={name:"pepicons-hourglass",render:function(e,t){return Os(),js("svg",uP,cP)}},pP={class:"sr-only"},hP={class:"w-full"},fP={key:0,class:"h-10 flex items-center justify-between"},mP={class:"flex items-center space-x-2"},vP={key:1,class:"h-10 flex items-center justify-between"},gP={class:"flex items-center space-x-2"},yP={key:2,class:"h-10 flex items-center justify-between"},bP={class:"flex items-center space-x-2"};const wP=rS({},[["render",function(e,t){const n=zT,r=dP,i=lP;return Os(),js("div",null,[Bs("h2",pP,He(e.$t("recipes.metadata")),1),Bs("ul",hP,[e.$slots.servings?(Os(),js("li",fP,[Bs("div",mP,[zs(n,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",null,He(e.$t("recipes.servings")),1)]),Ti(e.$slots,"servings")])):Js("",!0),e.$slots.prepTime?(Os(),js("li",vP,[Bs("div",gP,[zs(r,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",null,He(e.$t("recipes.prepTime")),1)]),Ti(e.$slots,"prepTime")])):Js("",!0),e.$slots.cookTime?(Os(),js("li",yP,[Bs("div",bP,[zs(i,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",null,He(e.$t("recipes.cookTime")),1)]),Ti(e.$slots,"cookTime")])):Js("",!0)])])}]]),xP={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},_P=[Bs("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"2"},[Bs("rect",{width:"6",height:"10",x:"12.784",y:"2.384",rx:"3",transform:"rotate(33.038 12.784 2.384)"}),Bs("rect",{width:"6",height:"10",x:"7.836",y:"6.323",rx:"3",transform:"rotate(33.038 7.836 6.323)"})],-1)];const kP={name:"pepicons-chain",render:function(e,t){return Os(),js("svg",xP,_P)}},SP={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},RP=[Bs("path",{fill:"currentColor",d:"m15.795 11.272l-8 5A1.5 1.5 0 0 1 5.5 15V5a1.5 1.5 0 0 1 2.295-1.272l8 5a1.5 1.5 0 0 1 0 2.544Z"},null,-1)];const AP={name:"pepicons-triangle-right-filled",render:function(e,t){return Os(),js("svg",SP,RP)}},IP={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},CP=[Bs("path",{fill:"currentColor",d:"m4.205 8.728l8-5A1.5 1.5 0 0 1 14.5 5v10a1.5 1.5 0 0 1-2.295 1.272l-8-5a1.5 1.5 0 0 1 0-2.544Z"},null,-1)];const EP={name:"pepicons-triangle-left-filled",render:function(e,t){return Os(),js("svg",IP,CP)}},OP={class:"flex flex-col flex-grow overflow-hidden w-screen min-h-full print:min-h-[auto] print:block"},DP={class:"recipe-page--image fixed inset-x-0 top-0 h-52 md:h-80 print:hidden"},TP={class:"recipe-page--header flex relative justify-start items-end h-52 md:h-80 md:justify-center print:h-auto md:print:h-auto print:block"},PP={class:"recipe-page--header-wrapper flex relative pb-4 w-screen justify-center px-edge overflow-hidden md:w-full"},jP={class:"recipe-page--header-title-wrapper flex-grow mr-8 max-w-prose pointer-events-auto md:pr-36 print:mr-0 md:print:pr-0"},MP=Bs("div",{class:"recipe-page--header-title-filler w-72 flex-shrink-0 hidden md:block md:print:hidden print:hidden"},null,-1),LP={class:"hidden overflow-hidden rounded-lg border border-gray-300 print:block"},$P={key:0,class:"relative overflow-hidden w-full h-52"},UP={key:1,class:"flex bg-gray-200 print-bg p-2 pt-4"},NP={class:"w-1/3 flex flex-col items-center"},FP={class:"flex items-center align-center"},BP={class:"ml-1"},zP={class:"text-sm mt-1"},qP={class:"w-1/3 flex flex-col items-center"},VP={class:"flex items-center align-center"},HP={class:"ml-1"},WP={class:"text-sm mt-1"},JP={class:"w-1/3 flex flex-col items-center"},KP={class:"flex items-center align-center"},GP={class:"ml-1"},ZP={class:"text-sm mt-1"},YP={class:"recipe-page--body relative flex flex-grow flex-row justify-center pt-4 bg-white pointer-events-auto md:px-edge print:block"},QP={key:0,class:"recipe-page--body-switch absolute -translate-x-1/2 -translate-y-full left-1/2 top-0 z-10 flex pt-2 px-3 print:hidden"},XP=Bs("svg",{preserveAspectRatio:"none",class:"absolute -translate-x-1/2 left-1/2 bottom-0 w-[150%] h-full fill-white print:h-auto",viewBox:"0 0 200 80"},[Bs("path",{d:"M40 45C35.003 79.997 0 80 0 80h200s-34.998.004-40-35C154.998 9.996 135.004-.003 100 0 64.996.003 44.997 10.003 40 45Z"})],-1),ej=["aria-label","title"],tj=["aria-label","title"],nj={class:"prose prose-h2:mt-6 px-edge w-screen md:mr-8 md:px-0 md:w-auto md:print:mr-0"},rj={key:0,class:"not-prose"},ij={class:"text-gray-700 print:list-disc print:list-inside print:flex print:flex-wrap print:pl-2"},sj=Bs("span",{class:"flex justify-center items-center w-8 flex-shrink-0 print:hidden"},[Bs("span",{class:"w-2 h-2 bg-gray-300 rounded-full"})],-1),aj={key:1,class:"pl-0 list-none"},oj={class:"flex"},lj={class:"flex justify-center text-lg font-semibold min-w-clickable text-primary-600","aria-hidden":"true"},uj={key:2,class:"hidden print:block"},cj={class:"text-gray-700 pl-2 not-prose"},dj={class:"relative"},pj=[Bs("path",{d:"M0 30.206s71.996 1.005 83-17c11.852-19.392 84.385-15.73 94 0 11.003 18 83 17 83 17z"},null,-1)],hj={class:"relative"},fj={class:"flex items-center space-x-1"},mj={key:1},vj={class:"flex flex-col bg-white flex-grow"},gj={class:"sr-only"},yj={key:0,class:"mb-4"},bj={class:"mt-4"},wj=Bs("div",{class:"flex-grow"},null,-1),xj=ti({__name:"RecipePage",props:{recipe:ex()},setup(e,{expose:t}){var n,r,i;const s=-1;let a=Qn(!1),o=Qn(null!=(i=null==(r=null==(n=e.recipe)?void 0:n.servingsBreakdown)?void 0:r.quantity)?i:1);const l=Qn([]),u=pa((()=>{var t,n,r,i;const a=null==(t=e.recipe)?void 0:t.servingsBreakdown;if(!a)return null;const u=null!=(i=null==(r=null==(n=e.recipe)?void 0:n.servingsBreakdown)?void 0:r.quantity)?i:1,c=le(h([...K(10).map((e=>e+1)).map((e=>e*10**Math.floor(Math.log10(u)))),...l.value,u,o.value]),((e,t)=>e>t?1:-1)).map((e=>({text:a.renderQuantity(e),value:e})));return c.push({text:uS("recipes.servings_custom"),value:s}),c})),c=pa((()=>{var t,n,r;return!!((null==(t=e.recipe)?void 0:t.servings)||(null==(n=e.recipe)?void 0:n.prepTime)||(null==(r=e.recipe)?void 0:r.cookTime))})),d=pa((()=>{var t,n,r;return u.value?null==(t=u.value.find((e=>e.value===o.value)))?void 0:t.text:null!=(r=null==(n=e.recipe)?void 0:n.servings)?r:null})),p=pa((()=>{var t;return(null==(t=e.recipe)?void 0:t.prepTime)&&PR.renderDuration(e.recipe.prepTime)})),f=pa((()=>{var t;return(null==(t=e.recipe)?void 0:t.cookTime)&&PR.renderDuration(e.recipe.cookTime)})),m=pa((()=>e.recipe?E([e.recipe.servings,e.recipe.prepTime,e.recipe.cookTime]).length:3)),v=pa((()=>m.value?m.value*Kw.pixels("spacing.10")+2*Kw.pixels("spacing.4"):0)),g=pa((()=>{var t,n,r,i,a,l;const u=null==(t=e.recipe)?void 0:t.sortedIngredientsBreakdown,c=null==(r=null==(n=e.recipe)?void 0:n.servingsBreakdown)?void 0:r.quantity,d=o.value/(null!=c?c:o.value);return(null==(i=e.recipe)?void 0:i.servings)&&o.value!==s?null!=(l=null==u?void 0:u.map((({quantity:e,original:t,unitMultiplier:n,renderQuantity:r})=>e?Array.isArray(e)?r(e.map((e=>TA(e*d)))):r(TA(e*d/(null!=n?n:1))):t)))?l:[]:null!=(a=null==u?void 0:u.map((({original:e})=>e)))?a:[]})),y=pa((()=>{var t,n;return le(null!=(n=null==(t=e.recipe)?void 0:t.instructions)?n:[],"position")})),b=pa((()=>{var t,n;return(null!=(n=null==(t=e.recipe)?void 0:t.sortedExternalUrls)?n:[]).map((e=>{var t,n;return{url:e,domain:null==(n=null==(t=oe(e))?void 0:t.domain)?void 0:n.replace(/^www\./,"")}}))}));return Nr((async()=>{var t,n,r;if(o.value!==s)return;const i=parseInt(prompt(uS("recipes.servings_customPrompt"))||"NaN");if(!i)return await yr(),void(o.value=null!=(r=null==(n=null==(t=e.recipe)?void 0:t.servingsBreakdown)?void 0:n.quantity)?r:1);l.value.push(i),await yr(),o.value=i})),Br(o,(()=>{o.value!==s&&qu.emit("recipe-servings-updated",o.value)}),{immediate:!0}),t({showPrimaryPanel:async()=>{a.value=!1,PR.isMobile&&await Lx(300)},showSecondaryPanel:async()=>{a.value=!0,PR.isMobile&&await Lx(300)}}),(t,n)=>{var r,i,s,l;const h=CD,w=zT,x=dP,_=lP,k=EP,S=AP,R=Xk,A=kP,I=vS,C=sP,E=hE,O=wP;return Os(),js("div",OP,[Bs("div",DP,[Ti(t.$slots,"image",{},(()=>[zs(h,{recipe:e.recipe,class:"absolute inset-0"},null,8,["recipe"])]))]),Bs("div",{class:Fe(["recipe-page--wrapper flex flex-col flex-grow w-[200vw] z-10 md:w-full pointer-events-none print:w-auto print:block print:translate-x-0",{"transition-transform duration-300":t.$ui.animations&&t.$ui.isMobile,"-translate-x-screen":t.$ui.isMobile&&a.value,"translate-x-0":t.$ui.isMobile&&!a.value}])},[Bs("div",TP,[Bs("div",{style:{height:"var(--header-height)"},class:Fe(["recipe-page--header-overlay absolute inset-x-0 top-0 bg-gradient-to-b to-transparent from-dark-overlay print:hidden",{"opacity-0":t.$app.isOnboarding}])},null,2),Bs("div",PP,[Bs("div",jP,[Ti(t.$slots,"title")]),MP]),Bs("div",LP,[(null==(r=e.recipe)?void 0:r.imageUrl)?(Os(),js("div",$P,[zs(h,{recipe:e.recipe,class:"absolute inset-0"},null,8,["recipe"])])):Js("",!0),e.recipe&&c.value?(Os(),js("ul",UP,[Bs("li",NP,[Bs("div",FP,[zs(w,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",BP,He(t.$t("recipes.servings")),1)]),Bs("p",zP,He(null!=(i=d.value)?i:"-"),1)]),Bs("li",qP,[Bs("div",VP,[zs(x,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",HP,He(t.$t("recipes.prepTime")),1)]),Bs("p",WP,He(null!=(s=p.value)?s:"-"),1)]),Bs("li",JP,[Bs("div",KP,[zs(_,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",GP,He(t.$t("recipes.cookTime")),1)]),Bs("p",ZP,He(null!=(l=f.value)?l:"-"),1)])])):Js("",!0)])]),Bs("div",YP,[t.$ui.isMobile?(Os(),js("div",QP,[XP,Bs("button",{type:"button",class:"p-2 z-10 active:text-primary-900 focus:text-primary-900","aria-label":t.$t("recipes.showMainPanel"),title:t.$t("recipes.showMainPanel"),onClick:n[0]||(n[0]=e=>a.value=!0)},[zs(k,{class:"w-8 h-8","aria-hidden":"true"})],8,ej),Bs("button",{type:"button",class:"p-2 z-10 active:text-primary-900 focus:text-primary-900","aria-label":t.$t("recipes.showSecondaryPanel"),title:t.$t("recipes.showSecondaryPanel"),onClick:n[1]||(n[1]=e=>a.value=!1)},[zs(S,{class:"w-8 h-8","aria-hidden":"true"})],8,tj)])):Js("",!0),Bs("div",nj,[Ti(t.$slots,"description",{},(()=>{var t;return[(null==(t=e.recipe)?void 0:t.description)?(Os(),Ms(R,{key:0,"auto-link":"recipes",text:e.recipe.description,class:"break-inside-avoid"},null,8,["text"])):Js("",!0)]})),t.$slots.ingredients||g.value.length>0?(Os(),js(Ss,{key:0},[Bs("h2",null,He(t.$t("recipes.ingredients")),1),Ti(t.$slots,"ingredients",{},(()=>[g.value.length>0?(Os(),js("div",rj,[Bs("ul",ij,[(Os(!0),js(Ss,null,Oi(g.value,((e,t)=>(Os(),js("li",{key:t,class:"flex items-center my-2 break-inside-avoid print:list-item print:w-1/2"},[sj,zs(R,{class:"border-b-2 border-transparent",inline:"",tag:"span","auto-link":"recipes",text:e},null,8,["text"])])))),128))])])):Js("",!0)]))],64)):Js("",!0),t.$slots.instructions||y.value.length>0?(Os(),js(Ss,{key:1},[Bs("h2",null,He(t.$t("recipes.instructions")),1),Ti(t.$slots,"instructions",{},(()=>{var e;return[1===y.value.length?(Os(),Ms(R,{key:0,text:null==(e=y.value[0])?void 0:e.text,"auto-link":"recipes"},null,8,["text"])):y.value.length>0?(Os(),js("ol",aj,[(Os(!0),js(Ss,null,Oi(y.value,((e,t)=>(Os(),js("li",{key:e.position,class:"pl-0 break-inside-avoid"},[Bs("div",oj,[Bs("span",lj,He(t+1)+". ",1),zs(R,{text:e.text,"auto-link":"recipes"},null,8,["text"])])])))),128))])):Js("",!0)]}))],64)):Js("",!0),b.value.length>0?(Os(),js("div",uj,[Bs("h2",null,He(t.$t("recipes.printUrls")),1),Bs("ul",cj,[(Os(!0),js(Ss,null,Oi(b.value,((e,t)=>(Os(),js("li",{key:t},[zs(I,{url:e.url,class:"prose flex items-center"},{default:Tr((()=>[zs(A,{class:"w-4 h-4 mr-1 inline","aria-hidden":"true"}),Hs(" "+He(e.url),1)])),_:2},1032,["url"])])))),128))])])):Js("",!0),zs(C)]),Bs("div",{class:"w-screen px-edge flex-shrink-0 md:w-72 md:px-0 print:hidden",style:Me(t.$ui.isMobile?"":`transform:translateY(-${v.value}px)`)},[Bs("div",dj,[t.$ui.isMobile?Js("",!0):(Os(),js("svg",{key:0,preserveAspectRatio:"none",class:"recipe-page--metadata-decoration absolute -top-4 right-1/2 text-white translate-x-1/2 pointer-events-none fill-current",viewBox:"0 0 260 30",style:Me(`height:${v.value}px;width:400%`)},pj,4)),Bs("div",hj,[Ti(t.$slots,"metadata",{},(()=>[e.recipe&&c.value?(Os(),Ms(O,{key:0,class:"w-full"},Di({_:2},[e.recipe.servingsBreakdown?{name:"servings",fn:Tr((()=>[Bs("div",fj,[u.value?(Os(),Ms(E,{key:0,modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=e=>o.value=e),class:"pt-0 p-1 -mr-1.5 bg-left text-right",label:t.$t("recipes.servings_change"),options:u.value},null,8,["modelValue","label","options"])):(Os(),js("span",mj,He(e.recipe.servings),1))])])),key:"0"}:void 0,e.recipe.prepTime?{name:"prepTime",fn:Tr((()=>[Hs(He(p.value),1)])),key:"1"}:void 0,e.recipe.cookTime?{name:"cookTime",fn:Tr((()=>[Hs(He(f.value),1)])),key:"2"}:void 0]),1024)):Js("",!0)]))])]),Bs("div",vj,[Bs("div",{class:Fe(m.value>0&&"mt-6")},null,2),Ti(t.$slots,"urls",{},(()=>[Bs("h2",gj,He(t.$t("recipes.externalUrls")),1),b.value.length>0?(Os(),js("ul",yj,[(Os(!0),js(Ss,null,Oi(b.value,((e,n)=>(Os(),js("li",{key:n},[zs(I,{url:e.url,class:"flex items-center space-x-1"},{default:Tr((()=>[zs(A,{class:"w-4 h-4 shrink-0","aria-hidden":"true"}),Bs("span",null,He(t.$t("recipes.externalUrl",{domain:e.domain})),1)])),_:2},1032,["url"])])))),128))])):Js("",!0)])),Bs("div",bj,[Ti(t.$slots,"actions")]),wj])],4)])],2)])}}});function _j(e,t,n){var r,i;const s="pageY"in e?e.pageY:null==(r=e.touches[0])?void 0:r.pageY;if(!s||s<t)return 0;let a=t;for(let o=0;o<n.length;o++)if(a+=null!=(i=n[o])?i:0,a>s)return o;return n.length}const kj=ti({__name:"CoreSortableList",emits:["swapItems"],setup(e,{emit:t}){const n=Qn();return $r("list-dragging",function(e,t){const n=e,r=Qn(!1),i=Qn(0),s=Qn([]),a=Qn(0);return{start(e){var t;(null==(t=n.value)?void 0:t.firstElementChild)&&(r.value=!0,i.value=window.scrollY+n.value.getBoundingClientRect().y,s.value=Array.from(n.value.children).map((e=>e.clientHeight)),a.value=_j(e,i.value,s.value))},update(e){if(!r)return;const o=_j(e,i.value,s.value);if(o!==a.value){const e=[...s.value];t(a.value,o),De(e,a.value,o),yr().then((()=>{var e,t;s.value=Array.from(null!=(t=null==(e=n.value)?void 0:e.children)?t:[]).map((e=>e.clientHeight)),a.value=o}))}},stop(){r.value=!1}}}(n,((e,n)=>t("swapItems",e,n,!1)))),(e,t)=>(Os(),js("ol",{ref_key:"list",ref:n,class:"list-none"},[Ti(e.$slots,"default")],512))}}),Sj={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Rj=[Bs("path",{fill:"currentColor",d:"M4 20h11v6.17l-2.59-2.58L11 25l5 5l5-5l-1.41-1.41L17 26.17V20h11v-2H4zm7-13l1.41 1.41L15 5.83V12H4v2h24v-2H17V5.83l2.59 2.58L21 7l-5-5z"},null,-1)];const Aj={name:"carbon-drag-vertical",render:function(e,t){return Os(),js("svg",Sj,Rj)}},Ij={class:"my-0"},Cj={class:"flex group"},Ej={class:"relative mr-2"},Oj={class:"flex justify-center min-w-clickable group-hover:opacity-0"},Dj=["title"],Tj=ti({__name:"CoreSortableListItem",emits:["dragStart","dragStop","dragUpdate","swapDown","swapUp"],setup(e,{emit:t}){const n=Ur("list-dragging");function r(e){const r=e=>{e.preventDefault(),null==n||n.update(e),t("dragUpdate",e)},i=e=>{document.removeEventListener("mousemove",r),document.removeEventListener("touchmove",r),document.removeEventListener("mouseup",i),document.removeEventListener("touchend",i),e.preventDefault(),null==n||n.stop(),t("dragStop",e)};document.addEventListener("mousemove",r),document.addEventListener("touchmove",r),document.addEventListener("mouseup",i),document.addEventListener("touchend",i),e.preventDefault(),null==n||n.start(e),t("dragStart",e)}return(e,t)=>{const n=Aj;return Os(),js("li",Ij,[Bs("div",Cj,[Bs("div",Ej,[Bs("div",Oj,[Ti(e.$slots,"marker")]),Bs("button",{type:"button",tabindex:"-1","aria-hidden":"true",class:Fe(["absolute top-0 inset-x-1/2 -translate-x-1/2 w-clickable h-clickable","hidden justify-center items-center text-gray-900 rounded-full opacity-50","hover:!opacity-100 group-hover:flex"]),title:e.$t("ui.drag"),onMousedown:r,onTouchstart:r},[zs(n,{class:"w-4 h-4"})],40,Dj)]),Ti(e.$slots,"default")])])}}}),Pj=ti({__name:"CoreFluidActionButton",setup(e,{expose:t}){const n=Qn(null);return t(Bx(n)),(e,t)=>{const r=Si("HeadlessButton"),i=Ii("wobbly-border");return wi((Os(),Ms(r,{ref_key:"$root",ref:n,class:Fe(["flex items-center justify-center w-clickable h-clickable text-primary-gray-700 opacity-0","group-hover:opacity-80 group-focus-within:opacity-80","hover:bg-primary-gray-300 hover:!opacity-100","focus:outline-none focus:border-2 focus:border-primary-600 focus:!opacity-100"])},{default:Tr((()=>[Ti(e.$slots,"default")])),_:3})),[[i,{min:30,max:42}]])}}}),jj={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},Mj=[Bs("g",{fill:"currentColor"},[Bs("path",{d:"M11.937 4.5H8.062A2.003 2.003 0 0 1 10 2a2.003 2.003 0 0 1 1.937 2.5Z"}),Bs("path",{d:"M4.5 5.5a1 1 0 0 1 0-2h11a1 1 0 1 1 0 2h-11Z"}),Bs("path",{"fill-rule":"evenodd",d:"M14.5 18.5a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v10.5a1 1 0 0 0 1 1h9Zm-2-10a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7ZM10 8a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0v-7A.5.5 0 0 0 10 8Zm-3.5.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7Z","clip-rule":"evenodd"})],-1)];const Lj={name:"pepicons-trash",render:function(e,t){return Os(),js("svg",jj,Mj)}},$j=ti({inheritAttrs:!1}),Uj=ti({...$j,__name:"CoreFluidTextArea",props:{name:ax(),label:ax(),placeholder:ax(),modelValue:ax(),error:ax(),initialFocus:Zw()},emits:["update:modelValue"],setup(e,{expose:t}){const n=Qn(null),r=Qn(null),i=Qn(null);let s=Qn(1);const a=ha(),o=pa((()=>{var e,t,r,i;return(null==(t=null==(e=n.value)?void 0:e.value)?void 0:t.endsWith("\n"))?(null==(r=n.value)?void 0:r.value)+"\n":null==(i=n.value)?void 0:i.value})),l=pa((()=>{var e;return"invisible absolute w-full whitespace-pre-wrap "+(null!=(e=a.class)?e:"")})),u=pa((()=>{var e;if(!i.value)return 0;const t=null==(e=document.defaultView)?void 0:e.getComputedStyle(i.value,null).lineHeight;return t?parseInt(t):0}));return Br((()=>{var e;return[null==(e=n.value)?void 0:e.value,u.value]}),(async()=>{await yr(),s.value=i.value?Math.max(1,Math.round(i.value.offsetHeight/u.value)):1})),t({...Bx(n),getRootElement:()=>r.value}),(t,a)=>{const u=Si("HeadlessInputLabel"),c=Si("HeadlessInputTextArea"),d=Si("HeadlessInputError"),p=Si("HeadlessInput");return Os(),Ms(p,{ref_key:"$root",ref:n,name:e.name,placeholder:e.placeholder,"model-value":e.modelValue,error:e.error,"initial-focus":e.initialFocus,"onUpdate:modelValue":a[0]||(a[0]=e=>t.$emit("update:modelValue",e))},{default:Tr((({hasErrors:n})=>[Bs("div",{ref_key:"$wrapper",ref:r,class:"relative w-full"},[e.label?(Os(),Ms(u,{key:0,class:"sr-only"},{default:Tr((()=>[Hs(He(e.label),1)])),_:1})):Js("",!0),Bs("span",{ref_key:"$filler",ref:i,class:Fe(l.value)},He(o.value),3),zs(c,Ys(t.$attrs,{rows:s.value,class:["block w-full resize-none border-b-2 caret-primary-500 focus:outline-none",n?"border-red-500 hover:border-primary-600 focus:border-primary-600":"border-gray-300 md:border-transparent md:hover:border-gray-300 focus:border-primary-600"]}),null,16,["rows","class"]),zs(d,{class:"mt-1 text-sm text-left text-red-700 opacity-75"})],512)])),_:1},8,["name","placeholder","model-value","error","initial-focus"])}}});class Nj extends px{constructor(e="",n){super(e),t(this,"id"),this.id=null!=n?n:F()}update(e){return new(0,this.constructor)(e,this.id)}}async function Fj(e){const t=e.firstElementChild,n=e.getBoundingClientRect();await Ux({duration:300},[{element:e,before:{addClasses:"overflow-hidden relative"},after:{removeClasses:"overflow-hidden relative"},styles:{height:["0",`${n.height}px`]}},{element:t,before:{addClasses:"absolute top-0",styles:{width:`${n.width}px`,height:`${n.height}px`}},after:{removeClasses:"absolute top-0",resetStyles:!0}}])}const Bj={name:ax(),modelValue:Gw(),addLabel:sx(),itemLabel:ax(),itemPlaceholder:ax(),itemRemoveLabel:ax(),itemRemoveA11yLabel:ax()},zj={index:rx(),name:ax(),label:ax(),removeLabel:ax(),removeA11yLabel:ax(),placeholder:ax(),modelValue:ex((()=>new Nj))};function qj(){return Bj}function Vj(e,t,n,r,i){const s=Ur("form",null),a=pa((()=>{var e,t;return null!=(t=null==s?void 0:s.input(null!=(e=r.name)?e:""))?t:null})),o=pa((()=>{var e,t;return null!=(t=null==(e=a.value)?void 0:e.value)?t:r.modelValue})),l=pa((()=>o.value.map(((e,t)=>({index:t,name:r.name&&`${r.name}[${t}]`,label:r.itemLabel,placeholder:r.itemPlaceholder,removeLabel:r.itemRemoveLabel,removeA11yLabel:r.itemRemoveA11yLabel,modelValue:e}))))),u=pa((()=>o.value.map(((e,t)=>({add:()=>c(t),remove:()=>p(t),"update:modelValue":e=>h(t,e),submit:()=>i("submit")})))));async function c(e){var n;f(Te(o.value,new Nj,e)),await yr(),null==(n=t.value[e+1])||n.focus()}async function p(e){var n,r,i;null==(n=t.value[0===e?1:e-1])||n.focus();const s=null==(i=null==(r=t.value[e])?void 0:r.getRootElement())?void 0:i.parentElement;s&&await async function(e){const t=e.firstElementChild,n=e.getBoundingClientRect();await Ux({duration:300},[{element:e,before:{addClasses:"overflow-hidden relative",styles:{width:`${n.width}px`}},after:{removeClasses:"overflow-hidden relative",addClasses:"hidden"},styles:{height:[`${n.height}px`,"0"]}},{element:t,before:{addClasses:"absolute top-0",styles:{height:`${n.height}px`}}}])}(s),f(ee(o.value,e))}async function h(e,t){f([...o.value.slice(0,e),t,...o.value.slice(e+1)])}async function f(e){i("update:modelValue",d(e,(e=>{var t;return null==(t=a.value)?void 0:t.update(e)})))}return{items:o,itemsProps:l,itemsEvents:u,focusableApi:{getRootElement(){var t;return null!=(t=e.value)?t:null},focus(e={}){var r,i,s;const a=null==(r=t.value)?void 0:r[t.value.length-1],o=null==(i=n.value)?void 0:i.getRootElement(),l=null==(s=e.scrollIntoView)||s;a&&o&&(l&&!Nx(o)&&this.scrollIntoView(),a.focus({scrollIntoView:!1}))},isFocused(){var t;return!!(null==(t=e.value)?void 0:t.querySelector(":focus"))},blur(){var t,n;null==(n=null==(t=e.value)?void 0:t.querySelector(":focus"))||n.blur()},scrollIntoView(){var e;null==(e=n.value)||e.scrollIntoView()}},addItem:c,removeItem:p,updateItem:h,updateItems:f}}function Hj(){return zj}function Wj(e,t,n,r){const i=n.modelValue,s=pa((()=>({input:n.label&&a(n.label),remove:n.removeLabel&&a(n.removeLabel),removeA11y:n.removeA11yLabel&&a(n.removeA11yLabel)})));function a(e){return e.replace(":position",(n.index+1).toString()).replace(":index",n.index.toString()).replace(":value",i.value)}return{inputProps:pa((()=>({name:n.name,label:s.value.input,placeholder:n.placeholder,modelValue:i.value}))),inputEvents:pa((()=>({"update:modelValue":e=>r("update:modelValue",i.update(e)),keydown:e=>{"enter"!==e.key.toLowerCase()||e.shiftKey||(e.preventDefault(),e.ctrlKey?r("submit"):r("add"))}}))),removeButtonProps:pa((()=>({"aria-label":s.value.removeA11y,title:s.value.remove}))),removeButtonEvents:pa((()=>({click:()=>r("remove")}))),focusableApi:{...Bx(t),getRootElement:()=>e.value}}}const Jj=ti({__name:"CoreFluidTextAreaListItem",props:Hj(),emits:["swapUp","swapDown","add","remove","update:modelValue","submit"],setup(e,{expose:t,emit:n}){const r=e,i=Qn(null),s=Qn(null),{inputProps:a,inputEvents:o,removeButtonProps:l,removeButtonEvents:u,focusableApi:c}=Wj(i,s,r,n);return t(c),(e,t)=>{const n=Uj,r=Lj,c=Pj;return Os(),js("div",{ref_key:"$root",ref:i,class:"relative group"},[zs(n,Ys({ref_key:"$textarea",ref:s},tr(a),ji(tr(o)),{onKeydown:[t[0]||(t[0]=go(mo((t=>e.$emit("swapUp")),["ctrl","prevent"]),["up"])),t[1]||(t[1]=go(mo((t=>e.$emit("swapDown")),["ctrl","prevent"]),["down"]))]}),null,16),zs(c,Ys({class:"absolute right-1 bottom-1"},tr(l),ji(tr(u))),{default:Tr((()=>[zs(r,{"aria-hidden":"true",class:"w-5 h-5"})])),_:1},16)],512)}}}),Kj={class:"sr-only"},Gj={class:"text-lg font-semibold text-primary-700","aria-hidden":"true"},Zj=ti({__name:"CoreFluidTextAreaList",props:{instructionsA11y:sx(),...qj()},emits:["update:modelValue","submit"],setup(e,{expose:t,emit:n}){const r=e;let i=Qn([]);const s=Qn(null),a=Qn(null),{addItem:o,updateItems:l,items:u,focusableApi:c,itemsProps:p,itemsEvents:h}=Vj(s,i,a,r,n);async function f(e,t,n){var r;Math.max(e,t)>u.value.length-1||Math.min(e,t)<0||(l(d(u.value.slice(),(n=>De(n,e,t)))),n&&(await yr(),null==(r=i.value[t])||r.focus()))}return pi((()=>i.value=[])),t(c),(t,n)=>{const r=Jj,l=Tj,c=kj,d=Wx;return Os(),js("div",{ref_key:"$root",ref:s},[Bs("span",Kj,He(e.instructionsA11y),1),zs(c,{class:"pl-0",onSwapItems:f},{default:Tr((()=>[zs(io,{"move-class":"transition-all duration-300",onEnter:n[0]||(n[0]=e=>tr(Fj)(e))},{default:Tr((()=>[(Os(!0),js(Ss,null,Oi(tr(u),((e,t)=>(Os(),Ms(l,{key:e.id,class:"mt-4"},{marker:Tr((()=>[Bs("span",Gj,He(t+1)+". ",1)])),default:Tr((()=>[zs(r,Ys({ref_for:!0,ref:e=>e&&(i.value[t]=e),class:"w-full"},tr(p)[t],ji(tr(h)[t]),{onSwapUp:e=>f(t,t-1,!0),onSwapDown:e=>f(t,t+1,!0)}),null,16,["onSwapUp","onSwapDown"])])),_:2},1024)))),128))])),_:1})])),_:1}),zs(d,{ref_key:"$addButton",ref:a,class:"mt-4",secondary:"",tinted:"",onClick:n[1]||(n[1]=e=>tr(o)(tr(u).length-1))},{default:Tr((()=>[Hs(He(t.addLabel),1)])),_:1},512)],512)}}}),Yj={class:"flex flex-shrink-0 justify-center items-center w-8 text-gray-400"},Qj=Bs("span",{class:"w-2 h-2 bg-gray-300 rounded-full"},null,-1),Xj=ti({__name:"CoreFluidInputListItem",props:{...Hj(),inputClass:ax()},emits:["remove","paste","add","remove","update:modelValue","submit"],setup(e,{expose:t,emit:n}){const r=e,i=Qn(null),s=Qn(null),{inputProps:a,inputEvents:o,removeButtonProps:l,removeButtonEvents:u,focusableApi:c}=Wj(i,s,r,n);return t(c),(t,n)=>{const r=LC,c=Lj,d=Pj;return Os(),js("div",{ref_key:"$root",ref:i,class:"flex text-gray-700 group"},[Bs("span",Yj,[Ti(t.$slots,"marker",{},(()=>[Qj]))]),zs(r,Ys({ref_key:"$input",ref:s},tr(a),{"wrapper-class":e.inputClass},ji(tr(o)),{onPaste:n[0]||(n[0]=e=>t.$emit("paste",e))}),null,16,["wrapper-class"]),zs(d,Ys({class:"ml-2 flex-shrink-0"},tr(l),ji(tr(u))),{default:Tr((()=>[zs(c,{"aria-hidden":"true",class:"w-5 h-5"})])),_:1},16)],512)}}}),eM={class:"mb-4"},tM=ti({__name:"CoreFluidInputList",props:{...qj(),inputsClass:ax()},emits:["paste","update:modelValue","submit"],setup(e,{expose:t,emit:n}){const r=e;let i=Qn([]);const s=Qn(null),a=Qn(null),{addItem:o,items:l,focusableApi:u,itemsProps:c,itemsEvents:d}=Vj(s,i,a,r,n);return pi((()=>i.value=[])),t(u),(t,n)=>{const r=Xj,u=Wx;return Os(),js("div",{ref_key:"$root",ref:s},[Bs("ul",eM,[zs(io,{"move-class":"transition-all duration-300",onEnter:n[0]||(n[0]=e=>tr(Fj)(e))},{default:Tr((()=>[(Os(!0),js(Ss,null,Oi(tr(l),((n,s)=>(Os(),js("li",{key:n.id},[zs(r,Ys({ref_for:!0,ref:e=>e&&(i.value[s]=e),class:"w-full","input-class":e.inputsClass},tr(c)[s],ji(tr(d)[s]),{onPaste:e=>t.$emit("paste",{index:s,event:e})}),Di({_:2},[t.$slots.marker?{name:"marker",fn:Tr((()=>[Ti(t.$slots,"marker")])),key:"0"}:void 0]),1040,["input-class","onPaste"])])))),128))])),_:3})]),zs(u,{ref_key:"$addButton",ref:a,secondary:"",tinted:"",onClick:n[1]||(n[1]=e=>tr(o)(tr(l).length-1))},{default:Tr((()=>[Hs(He(t.addLabel),1)])),_:1},512)],512)}}}),nM={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},rM=[Bs("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[Bs("path",{d:"M5.75 11.5a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Z"}),Bs("path",{d:"M2.5 2.5c0-1.102.898-2 2-2h6.69c.562 0 1.092.238 1.465.631l.006.007l4.312 4.702c.359.383.527.884.527 1.36v10.3c0 1.102-.898 2-2 2h-11c-1.102 0-2-.898-2-2v-15Zm8.689 0H4.5v15h11V7.192l-4.296-4.685l-.003-.001a.041.041 0 0 0-.012-.006Z"}),Bs("path",{d:"M11.19.5a1 1 0 0 1 1 1v4.7h4.31a1 1 0 1 1 0 2h-5.31a1 1 0 0 1-1-1V1.5a1 1 0 0 1 1-1Z"})],-1)];const iM={name:"pepicons-file",render:function(e,t){return Os(),js("svg",nM,rM)}},sM={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},aM=[Ws('<g fill="none"><circle cx="5" cy="6" r="1.5" fill="currentColor"></circle><circle cx="5" cy="10" r="1.5" fill="currentColor"></circle><circle cx="5" cy="14" r="1.5" fill="currentColor"></circle><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.5 6h7m-7 4h7m-7 4h7"></path></g>',1)];const oM={name:"pepicons-list",render:function(e,t){return Os(),js("svg",sM,aM)}},lM={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},uM=[Bs("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[Bs("path",{d:"M10 4a6 6 0 1 0 0 12a6 6 0 0 0 0-12Zm-8 6a8 8 0 1 1 16 0a8 8 0 0 1-16 0Z"}),Bs("path",{d:"M10 6a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0V7a1 1 0 0 1 1-1Z"}),Bs("path",{d:"M14 10a1 1 0 0 1-1 1h-3a1 1 0 1 1 0-2h3a1 1 0 0 1 1 1Z"})],-1)];const cM={name:"pepicons-clock",render:function(e,t){return Os(),js("svg",lM,uM)}},dM={key:0},pM=["title"],hM={class:"flex items-center text-gray-700 overflow-auto whitespace-pre-wrap min-h-clickable align-center"},fM={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md md:w-96"},mM={class:"space-y-1 text-center"},vM={class:"flex text-sm text-gray-600"},gM={class:"pl-1 hidden md:block"},yM={class:"text-xs text-gray-500"},bM={class:"text-gray-800 mt-4"},wM={class:"flex flex-col mt-4 space-y-2 w-full self-end md:flex-row md:space-x-2 md:space-y-0"},xM=Bs("div",{class:"flex-grow"},null,-1),_M=ti({__name:"RecipeImageFormModal",props:{recipe:ex(),imageUrl:ax()},setup(e){var t,n;const r=$S({customUrl:{type:LS.String,default:null!=(t=e.imageUrl)?t:""}});let i=Qn(null!=(n=e.imageUrl)?n:""),s=Qn(!1);const a=Qn(null),o=pa((()=>/^(tmp|solid):\/\//.test(i.value)));return Nr((async()=>s.value=await tA.has(i.value))),(t,n)=>{const l=CD,u=cM,c=kD,d=JO,p=SS,h=Lj,f=Wx,m=wS,v=l_,g=Ii("initial-focus");return Os(),Ms(v,{ref_key:"$root",ref:a,title:t.$t("recipes.image_edit_title")},{default:Tr((()=>[zs(m,{form:tr(r),class:"flex flex-col",onSubmit:n[5]||(n[5]=e=>function(){var e;const t=r.customUrl.trim();null==(e=a.value)||e.close(t.length>0?t:null)}())},{default:Tr((()=>[i.value?(Os(),js("div",dM,[zs(l,{recipe:e.recipe,url:i.value,class:"w-full aspect-[5/2] max-h-[60vh] min-w-modal-content md:min-w-modal-content-md"},null,8,["recipe","url"]),o.value?Js("",!0):(Os(),js("div",{key:0,class:"flex items-center mt-2",title:s.value?t.$t("recipes.image_edit_uploadPending"):""},[s.value?(Os(),Ms(u,{key:0,class:"w-4 h-4 mr-2","aria-label":t.$t("recipes.image_edit_uploadPending")},null,8,["aria-label"])):Js("",!0),Bs("pre",hM,He(i.value),1)],8,pM))])):(Os(),js(Ss,{key:1},[Bs("div",null,[Bs("div",fM,[Bs("div",mM,[zs(c,{class:"mx-auto h-12 w-12 text-gray-400","aria-hidden":"true"}),Bs("div",vM,[zs(d,{class:"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500",accept:"image/png, image/jpeg, image/gif",onStart:n[0]||(n[0]=e=>t.$ui.showLoading(t.$t("recipes.image_edit_uploading"))),onError:n[1]||(n[1]=e=>(t.$errors.report(e),t.$ui.hideLoading())),onSuccess:n[2]||(n[2]=e=>async function(e){try{const t=`tmp://${F()}.png`,{default:n}=await Fu((()=>import("./image-blob-reduce.esm.1f01119e.js")),1?[]:void 0),s=await(new n).toBlob(e,{max:1024});await tA.store(t,"image/png",s),i.value=t,r.customUrl=t}catch(t){MR.report(t)}finally{PR.hideLoading()}}(e))},{default:Tr((()=>[Bs("span",null,He(t.$t("recipes.image_edit_upload")),1)])),_:1}),Bs("p",gM,He(t.$t("recipes.image_edit_drop")),1)]),Bs("p",yM,He(t.$t("recipes.image_edit_mimeTypes")),1)])])]),Bs("span",bM,He(t.$t("recipes.image_edit_customUrl"))+":",1),zs(p,{ref:"input",label:t.$t("recipes.image_edit_url"),name:"customUrl",class:"mt-2",placeholder:"https://..."},null,8,["label"])],64)),Bs("div",wM,[i.value?(Os(),Ms(f,{key:0,clear:"",class:"self-start",onClick:n[3]||(n[3]=e=>(i.value="",tr(r).customUrl=""))},{default:Tr((()=>[zs(h,{class:"w-5 h-5 mr-2","aria-hidden":"true"}),Hs(" "+He(t.$t("recipes.image_edit_remove")),1)])),_:1})):Js("",!0),xM,zs(f,{class:"self-end",secondary:"",onClick:n[4]||(n[4]=e=>{var t;return null==(t=a.value)?void 0:t.close(null)})},{default:Tr((()=>[Hs(He(t.$t("recipes.image_edit_discard")),1)])),_:1}),wi((Os(),Ms(f,{class:"self-end",type:"submit"},{default:Tr((()=>[Hs(He(t.$t("recipes.image_edit_submit")),1)])),_:1})),[[g]])])])),_:1},8,["form"])])),_:1},8,["title"])}}});async function kM(e,t){const n=Fx(e,".recipe-page--header"),r=Fx(e,".recipe-page--body"),i=PR.isMobile?Fx(e,".recipe-page--body-switch"):Fx(e,".recipe-page--metadata-decoration"),s=r.getBoundingClientRect(),a=n.getBoundingClientRect();await Ux({duration:t},[{element:r,before:{addClasses:"z-20 fixed w-full",removeClasses:"relative",styles:{height:Math.max(s.height,window.innerHeight-a.height)+"px"}},styles:{top:[`${s.top}px`,`${window.innerHeight+i.clientHeight}px`]}}])}async function SM(e,t){const n=Fx(e,".recipe-page--body"),r=PR.isMobile?Fx(e,".recipe-page--body-switch"):Fx(e,".recipe-page--metadata-decoration"),i=n.getBoundingClientRect();await Ux({duration:t},[{element:n,before:{addClasses:"z-30"},after:{removeClasses:"z-30"},styles:{transform:[`translateY(${window.innerHeight-i.top+r.clientHeight}px)`,"translateY(0)"]}}])}async function RM(e,t){const n=Fx(e,".recipe-page--header"),r=Fx(e,".recipe-page--image");await Promise.all([Qx(n,t),Qx(r,t)])}async function AM(e,t){const n=Fx(e,".recipe-page--image"),r=Fx(e,".recipe-page--header");await Ux({duration:t},[{element:n,styles:{transform:["translateY(-100%)","translateY(0)"]}},{element:r,styles:{transform:["translateY(-100%)","translateY(0)"]}}])}async function IM(e,t){const n=Fx(e,".recipe-page--image"),r=Fx(e,".recipe-page--header");await Ux({duration:t},[{element:n,styles:{transform:["translateY(0)","translateY(-100%)"]}},{element:r,styles:{transform:["translateY(0)","translateY(-100%)"]}}])}async function CM(e,{duration:t,withoutHeaderOverlay:n,$headerTitle:r,$card:i}){const s=Fx(e,".recipe-page--image"),a=Fx(e,".recipe-page--header"),o=Fx(e,".recipe-page--header-wrapper"),l=Fx(e,".recipe-page--header-overlay"),u=Fx(e,".recipe-page--header-title-wrapper"),c=Fx(e,".recipe-page--header-title-filler"),d=document.createElement("div"),p=s.getBoundingClientRect(),h=i.getBoundingClientRect(),f=function(e){const t=Fx(e,".recipe-title--text"),n=e.getBoundingClientRect();return[{element:e,before:{addClasses:"relative w-full"},classes:{paddingTop:["p-4","p-2"],paddingRight:["p-4","p-2"],paddingBottom:["p-4","p-2"],textShadow:["text-shadow","text-shadow-transparent"],fontSize:[PR.isMobile?"text-2xl":"text-4xl","text-lg"]},styles:{paddingLeft:[`${n.left}px`,Kw.css("spacing.2")],paddingRight:[`${window.innerWidth-n.right}px`,Kw.css("spacing.2")]}},{element:t,before:{addClasses:"relative"}}]}(r);n&&l.remove(),e.classList.remove("overflow-hidden"),c.remove(),await Ux({duration:t,fill:"forwards"},[{element:s,before:{removeClasses:"fixed h-52 md:h-80",addClasses:"absolute h-full"},styles:{width:[`${window.innerWidth}px`,`${h.width}px`]}},{element:a,before:{prepend:s,addClasses:"overflow-hidden z-10 relative",removeClasses:"justify-center"},classes:{borderRadius:["rounded-none","rounded-lg"]},boundingRects:[p,h]},n?null:{element:l,styles:{opacity:[1,0]}},{element:o,before:{removeClasses:"justify-center pb-4 px-edge",prepend:d}},{element:d,before:{addClasses:"opacity-0 absolute inset-0 bg-gradient-to-t to-transparent from-dark-overlay"},styles:{opacity:[0,1]}},{element:u,before:{addClasses:"w-full flex-shrink-0",removeClasses:"mr-8 md:pr-36 max-w-prose"}},...f])}const EM=async e=>{const t=500,n=Fx(e,".recipe-form--recipe-page"),r=Fx(e,".recipe-form--footer");await Promise.all([Xx(n,t),s_(r,t)])},OM=async e=>{const t=500,n=Fx(e,".recipe-form--recipe-page"),r=Fx(e,".recipe-form--footer");e.classList.add("z-20"),e.classList.add("relative"),await Promise.all([SM(n,t),AM(n,t),s_(r,t)]),e.classList.remove("z-20"),e.classList.remove("relative")},DM=async(e,t)=>{const n=500,r=Fx(t,".recipe-form--recipe-page"),i=Fx(t,".recipe-form--footer");e.classList.add("z-10"),await Promise.all([e_(r,n),a_(i,n)])},TM=async(e,t)=>{const n=500,r=Fx(t,".recipe-form--recipe-page"),i=Fx(t,".recipe-form--footer");e.classList.add("z-10"),t.classList.add("z-20"),t.classList.add("relative"),i.classList.add("z-20"),await Promise.all([kM(r,n),IM(r,n),a_(i,n)])},PM=async(e,t,{element:n})=>{const r=500,i=Fx(t,".recipe-form--recipe-page"),s=Fx(t,".recipe-form--title-label"),a=Fx(s,"textarea"),o=Fx(t,".recipe-form--footer"),l=function(e){const t=document.createElement("h1"),n=document.createElement("span");return t.setAttribute("class","text-2xl font-semibold text-white text-shadow md:text-4xl"),t.append(n),n.setAttribute("class","recipe-title--text"),n.innerText=e,t}(a.value);e.classList.add("z-20"),s.replaceWith(l),o.classList.add("z-20"),await Promise.all([CM(i,{duration:r,withoutHeaderOverlay:re(t.dataset.wasOnboarding),$headerTitle:l,$card:n}),kM(i,r),a_(o,r)])},jM={id:"recipe-form-title",class:"sr-only"},MM={class:"absolute inset-0 group"},LM=["aria-label"],$M={class:"m-edge max-w-full h-24 w-[calc(20rem+65ch)] justify-end items-start hidden md:flex"},UM={class:"w-72 flex justify-center"},NM={class:"flex items-center text-xl px-4 py-2 bg-black bg-opacity-50 rounded-md hover:bg-opacity-100 group-focus:ring-2 group-focus:ring-offset-[rgba(255,255,255,.5)] group-focus:ring-offset-2 group-focus:ring-[rgba(0,0,0,.5)] hover:group-focus:ring-black"},FM={class:"flex recipe-form--title-label"},BM={class:"sr-only"},zM={class:"flex flex-col items-start space-y-3"},qM={key:0,class:"group relative w-full"},VM={class:"not-prose mt-4"},HM={class:"sr-only"},WM={class:"ml-1"},JM={class:"fixed flex justify-center inset-x-0 bottom-0 z-30 bg-primary-gray-300 recipe-form--footer"},KM={class:"mx-edge"},GM={class:"flex"},ZM={class:"prose mr-8"},YM=Bs("div",{class:"hidden w-72 md:block"},null,-1),QM={class:"flex flex-row-reverse items-center py-4 space-x-reverse space-x-4"},XM={class:"flex flex-row-reverse space-x-4 space-x-reverse"},eL=Bs("div",{class:"flex-grow"},null,-1),tL={class:"!ml-1 sr-only md:not-sr-only"},nL=ti({__name:"RecipeForm",props:{recipe:ex()},emits:["done","cancel"],setup(e,{emit:t}){var n,r,i,s,a,o,l,u,c,p,f,m,v,g,y,b,w,x;let _=Qn(!1),k=Qn(iI.isOnboarding);const S={},R=$S({name:{type:LS.String,rules:"required",default:null!=(r=null==(n=e.recipe)?void 0:n.name)?r:""},description:{type:LS.String,default:null!=(s=null==(i=e.recipe)?void 0:i.description)?s:""},imageUrl:{type:LS.String,default:null!=(o=null==(a=e.recipe)?void 0:a.imageUrl)?o:""},servings:{type:LS.String,default:null!=(u=null==(l=e.recipe)?void 0:l.servings)?u:""},prepTime:{type:LS.String,default:null!=(p=PR.renderDuration(null==(c=e.recipe)?void 0:c.prepTime))?p:""},cookTime:{type:LS.String,default:null!=(m=PR.renderDuration(null==(f=e.recipe)?void 0:f.cookTime))?m:""},ingredients:{type:LS.Object,multi:!0,default:(null!=(g=null==(v=e.recipe)?void 0:v.sortedIngredients)?g:[]).map((e=>new Nj(e)))},instructions:{type:LS.Object,multi:!0,default:(null!=(b=null==(y=e.recipe)?void 0:y.sortedInstructions)?b:[]).map((e=>d(new Nj(e.text),(t=>S[t.id]=e.url))))},externalUrls:{type:LS.Object,multi:!0,default:(null!=(x=null==(w=e.recipe)?void 0:w.sortedExternalUrls)?x:[]).map((e=>new Nj(e)))}});let A=Qn(null);const I=Qn(null),C=Qn(null),O=Qn(null),D=Qn(null),T=pa((()=>{var t;return(null==(t=e.recipe)?void 0:t.exists())?uS("recipes.edit_a11y_title",{recipe:e.recipe.name}):uS("recipes.create_a11y_title")}));async function P(){var t,n;const r=await PR.openModal(_M,{recipe:e.recipe,imageUrl:R.imageUrl.trim()}),i=await r.beforeClose;null==(t=document.querySelector(":focus"))||t.blur(),void 0!==i&&(null==(n=R.input("imageUrl"))||n.update(null!=i?i:""))}function j(e){const t=CR(e,IR);return t?function(e){const t=E([e.years&&`${e.years}Y`,e.months&&`${e.months}M`,e.weeks&&`${e.weeks}W`,e.days&&`${e.days}D`]).join(""),n=E([e.hours&&`${e.hours}H`,e.minutes&&`${e.minutes}M`,e.seconds&&`${e.seconds}S`]).join("");return`P${t}${n&&`T${n}`}`}(t):e}function M(e){var t,n;const r=R.instructions.map((({id:e})=>{var t;return null!=(t=S[e])?t:null})),i=R.instructions.filter((({value:e})=>!!e)).map((({id:e,value:t})=>$({url:S[e],text:t.trim()})));if(!e.exists())return e.setRelationModels("instructions",[]),e.relatedInstructions.reset(),void K(i.length).forEach((t=>e.relatedInstructions.attach({...i[t],position:t+1})));for(let s=0;s<i.length;s++){const n=i[s],r=n.url&&(null==(t=e.instructions)?void 0:t.find((e=>e.url===n.url)));n.position=s+1,r?r.setAttributes(n):e.relatedInstructions.attach(n)}for(const s of null!=(n=e.instructions)?n:[])s.exists()&&!r.includes(s.url)&&e.relatedInstructions.detach(s)}async function L(e){var t,n,r;const i=R.imageUrl.trim();if(i){if(i.startsWith("tmp://")){e.exists()||e.mintUrl();const r=(null==(t=e.imageUrl)?void 0:t.startsWith(e.requireContainerUrl()))?e.imageUrl:`${e.getDocumentUrl()}.png`;return await tA.rename(i,r),FA.remoteCookbookUrl&&r.startsWith(FA.remoteCookbookUrl)&&JA.enqueueFileUpload(e,r),void(e.imageUrls=h([r,...null==(n=e.imageUrls)?void 0:n.slice(1)]))}e.imageUrls=h([i,...null!=(r=e.imageUrls)?r:[]])}else e.imageUrls=[]}async function U(){const n=function(){const t={name:R.name.trim(),description:R.description.trim()||null,servings:R.servings.trim()||null,prepTime:j(R.prepTime.trim())||null,cookTime:j(R.cookTime.trim())||null,ingredients:h(E(R.ingredients.map((({value:e})=>e.trim())))),externalUrls:h(E(R.externalUrls.map((({value:e})=>e.trim()))))};return e.recipe?d(e.recipe,(e=>e.setAttributes(t))):new LA(t)}();await Promise.all([M(n),L(n)]),await n.save(),A.value=n.url,t("done",n)}return di((()=>k.value=iI.isOnboarding)),(t,n)=>{var r,i;const s=CD,a=XO,o=qO,l=Uj,u=Wx,c=Lj,d=Pj,p=oM,h=iM,f=tM,m=Zj,v=LC,g=wP,y=kP,b=xj,w=sP,x=wS,S=Ii("wobbly-border"),E=Ii("element-transitions");return wi((Os(),Ms(x,{"data-was-onboarding":k.value,form:tr(R),class:"flex flex-grow",onSubmit:n[14]||(n[14]=e=>U())},{default:Tr((()=>{var r;return[Bs("h1",jM,He(T.value),1),zs(b,{class:"recipe-form--recipe-page"},Di({image:Tr((()=>[Bs("div",MM,[zs(s,{recipe:e.recipe,url:tr(R).imageUrl,class:"w-full h-full"},null,8,["recipe","url"]),Bs("button",{type:"button",class:"group flex absolute inset-0 justify-center items-center w-full text-white opacity-0 group-hover:opacity-100 focus:opacity-100 focus:outline-none focus:bg-opacity-20","aria-label":tr(R).imageUrl?t.$t("recipes.image_edit"):t.$t("recipes.image_set"),onClick:P},[Bs("div",$M,[Bs("div",UM,[wi((Os(),js("div",NM,[tr(R).imageUrl?(Os(),Ms(a,{key:0,class:"mr-3 w-4 h-4","aria-hidden":"true"})):(Os(),Ms(o,{key:1,class:"mr-3 w-4 h-4","aria-hidden":"true"})),Hs(" "+He(tr(R).imageUrl?t.$t("recipes.image_edit"):t.$t("recipes.image_set")),1)])),[[S]])])])],8,LM)])])),title:Tr((()=>{var n;return[Bs("label",FM,[Bs("span",BM,He(t.$t("recipes.name_label")),1),zs(l,{"initial-focus":"",name:"name",placeholder:(null==(n=e.recipe)?void 0:n.exists())?"-":t.$t("recipes.name_placeholder"),class:"pb-2 -mb-2.5 text-2xl text-white placeholder:text-white placeholder:opacity-50 bg-transparent caret-primary-500 text-shadow font-semibold md:text-4xl",onKeydown:go(mo(U,["prevent"]),["enter"])},null,8,["placeholder","onKeydown"])])]})),description:Tr((()=>[Bs("div",zM,[zs(u,{secondary:"",class:"space-x-2 md:hidden",onClick:P},{default:Tr((()=>[tr(R).imageUrl?(Os(),Ms(a,{key:0,class:"w-4 h-4","aria-hidden":"true"})):(Os(),Ms(o,{key:1,class:"w-4 h-4","aria-hidden":"true"})),Bs("span",null,He(tr(R).imageUrl?t.$t("recipes.image_edit"):t.$t("recipes.image_set")),1)])),_:1}),tr(R).description||_.value?(Os(),js("div",qM,[zs(l,{ref_key:"$description",ref:I,name:"description",label:t.$t("recipes.description_label"),placeholder:t.$t("recipes.description_placeholder"),onFocus:n[0]||(n[0]=e=>_.value=!0),onBlur:n[1]||(n[1]=e=>_.value=!1),onKeydown:n[2]||(n[2]=go(mo((e=>U()),["ctrl","exact","prevent"]),["enter"]))},null,8,["label","placeholder"]),tr(R).description?(Os(),Ms(d,{key:0,"aria-label":t.$t("recipes.description_remove"),title:t.$t("recipes.description_remove"),class:"absolute right-1 bottom-1",onClick:n[3]||(n[3]=e=>function({target:e}){var t;null==(t=R.input("description"))||t.update(""),null==e||e.blur()}(e))},{default:Tr((()=>[zs(c,{"aria-hidden":"true",class:"w-5 h-5"})])),_:1},8,["aria-label","title"])):Js("",!0)])):Js("",!0),tr(R).description||_.value?Js("",!0):(Os(),Ms(u,{key:1,secondary:"",tinted:"",class:"px-4 space-x-2",onClick:n[4]||(n[4]=e=>async function(){var e;_.value=!0,await yr(),null==(e=I.value)||e.focus()}())},{default:Tr((()=>[zs(a,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",null,He(t.$t("recipes.description_set")),1)])),_:1})),0===tr(R).ingredients.length?(Os(),Ms(u,{key:2,secondary:"",tinted:"",class:"px-4 space-x-2",onClick:n[5]||(n[5]=e=>async function(){var e,t;null==(e=R.input("ingredients"))||e.update([new Nj]),await yr(),null==(t=C.value)||t.focus()}())},{default:Tr((()=>[zs(p,{class:"w-5 h-5","aria-hidden":"true"}),Bs("span",null,He(t.$t("recipes.ingredients_set")),1)])),_:1})):Js("",!0),0===tr(R).instructions.length?(Os(),Ms(u,{key:3,secondary:"",tinted:"",class:"px-4 space-x-2",onClick:n[6]||(n[6]=e=>async function(){var e,t;null==(e=R.input("instructions"))||e.update([new Nj]),await yr(),null==(t=O.value)||t.focus()}())},{default:Tr((()=>[zs(h,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",null,He(t.$t("recipes.instructions_set")),1)])),_:1})):Js("",!0)])])),metadata:Tr((()=>[zs(g,{class:"w-full"},{servings:Tr((()=>[zs(v,{name:"servings",class:"text-right bg-transparent","aria-label":t.$t("recipes.servings"),placeholder:t.$t("recipes.servings_placeholder")},null,8,["aria-label","placeholder"])])),prepTime:Tr((()=>[zs(v,{name:"prepTime",class:"text-right bg-transparent","aria-label":t.$t("recipes.prepTime"),placeholder:t.$t("recipes.prepTime_placeholder")},null,8,["aria-label","placeholder"])])),cookTime:Tr((()=>[zs(v,{name:"cookTime",class:"text-right bg-transparent","aria-label":t.$t("recipes.cookTime"),placeholder:t.$t("recipes.cookTime_placeholder")},null,8,["aria-label","placeholder"])])),_:1})])),urls:Tr((()=>[Bs("h2",HM,He(t.$t("recipes.externalUrls")),1),0===tr(R).externalUrls.length?(Os(),Ms(u,{key:0,secondary:"",tinted:"",class:"self-start",onClick:n[10]||(n[10]=e=>async function(){var e,t;null==(e=R.input("externalUrls"))||e.update([new Nj]),await yr(),null==(t=D.value)||t.focus()}())},{default:Tr((()=>[zs(y,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",WM,He(t.$t("recipes.externalUrls_set")),1)])),_:1})):(Os(),Ms(f,{key:1,ref_key:"$externalUrls",ref:D,name:"externalUrls","inputs-class":"w-full","add-label":t.$t("recipes.externalUrl_add"),"item-label":t.$t("recipes.externalUrl_label"),"item-placeholder":t.$t("recipes.externalUrl_placeholder"),"item-remove-label":t.$t("recipes.externalUrl_remove"),"item-remove-a11y-label":t.$t("recipes.externalUrl_remove_a11y",{url:":value"}),onSubmit:n[11]||(n[11]=e=>U())},{marker:Tr((()=>[zs(y,{class:"w-4 h-4","aria-hidden":"true"})])),_:1},8,["add-label","item-label","item-placeholder","item-remove-label","item-remove-a11y-label"]))])),_:2},[tr(R).ingredients.length>0?{name:"ingredients",fn:Tr((()=>[Bs("div",VM,[zs(f,{ref_key:"$ingredients",ref:C,name:"ingredients","add-label":t.$t("recipes.ingredient_add"),"item-label":t.$t("recipes.ingredient_label"),"item-placeholder":t.$t("recipes.ingredient_placeholder"),"item-remove-label":t.$t("recipes.ingredient_remove"),"item-remove-a11y-label":t.$t("recipes.ingredient_remove_a11y",{ingredient:":value"}),onPaste:n[7]||(n[7]=e=>function({index:e,event:t}){var n,r;const i=null==(n=t.clipboardData)?void 0:n.getData("text");if(!(null==i?void 0:i.includes("\n")))return;const s=i.split("\n").map((e=>e.replace(/^\s*[-*]/,"").trim())).filter((e=>e.length>0));t.preventDefault(),null==(r=R.input("ingredients"))||r.update([...R.ingredients.slice(0,e),...s.map((e=>new Nj(e))),...R.ingredients.slice(e+1)])}(e)),onSubmit:n[8]||(n[8]=e=>U())},null,8,["add-label","item-label","item-placeholder","item-remove-label","item-remove-a11y-label"])])])),key:"0"}:void 0,tr(R).instructions.length>0?{name:"instructions",fn:Tr((()=>[zs(m,{ref_key:"$instructions",ref:O,name:"instructions","instructions-a11y":t.$t("recipes.drag_instructions_a11y"),"add-label":t.$t("recipes.instructionStep_add"),"item-label":t.$t("recipes.instructionStep_label"),"item-placeholder":t.$t("recipes.instructionStep_placeholder"),"item-remove-label":t.$t("recipes.instructionStep_remove"),"item-remove-a11y-label":t.$t("recipes.instructionStep_remove_a11y",{position:":position"}),onSubmit:n[9]||(n[9]=e=>U())},null,8,["instructions-a11y","add-label","item-label","item-placeholder","item-remove-label","item-remove-a11y-label"])])),key:"1"}:void 0]),1024),Bs("div",JM,[Bs("div",KM,[Bs("div",GM,[Bs("div",ZM,[zs(w)]),YM]),Bs("div",QM,[Bs("div",XM,[zs(u,{type:"submit",class:"text-lg focus:ring-offset-primary-gray-300"},{default:Tr((()=>{var n;return[Hs(He((null==(n=e.recipe)?void 0:n.exists())?t.$t("recipes.form.update"):t.$t("recipes.form.create")),1)]})),_:1}),zs(u,{clear:"",class:"text-lg focus:ring-offset-primary-gray-300",onClick:n[12]||(n[12]=e=>t.$emit("cancel"))},{default:Tr((()=>[Hs(He(t.$t("recipes.form.cancel")),1)])),_:1})]),eL,(null==(r=e.recipe)?void 0:r.exists())?(Os(),Ms(u,{key:0,clear:"",class:"focus:ring-offset-primary-gray-300",onClick:n[13]||(n[13]=t=>async function(){var t;if(!(null==(t=e.recipe)?void 0:t.exists()))return;await PR.confirm({message:uS("recipes.delete_confirm"),acceptText:uS("recipes.delete_confirm_accept"),acceptColor:Vx.Danger})&&(Ed.push({name:"home"}),await PR.runOperation((()=>FA.deleteRecipe(e.recipe)),{blocking:!0,loadingMessage:uS("recipes.delete_ongoing",{name:e.recipe.name}),successMessage:uS("recipes.delete_success",{name:e.recipe.name})}))}())},{default:Tr((()=>[zs(c,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",tL,He(t.$t("recipes.delete")),1)])),_:1})):Js("",!0)])])])]})),_:1},8,["data-was-onboarding","form"])),[[E,{name:"recipe-form",id:null!=(i=null==(r=e.recipe)?void 0:r.url)?i:A.value,transitions:{enter:{"recipes.show":tr(EM),"*":tr(OM)},leave:{"recipes.show":tr(DM),"*":tr(TM)},"recipe-card":tr(PM)}}]])}}}),rL=ti({__name:"RecipesCreate",setup(e){var t;let n=Qn(FA.getTmpRecipe(null==(t=history.state)?void 0:t.tmpRecipe)),r=Qn(ne("from"));async function i(e){PR.scrollLayout({top:0}),await Ed.push({name:"home"}),await JA.syncIfOnline(e)}return di((async()=>{var e,t,i,s;const a=ie("from");if(a){PR.hideHeader();try{const i=null!=(e=uD.proxyUrl)?e:iI.env("DEFAULT_PROXY_URL"),s=i?await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a})}):await fetch(a),o=await s.text();if(2!==Math.floor(s.status/100))throw new Error(`Got unexpected response code: ${s.status}\n\n${o}`);const[l,u]=await Promise.all([GD(a,o),KD(a,o)]);n.value=null!=(t=u[0])?t:new LA({name:l.title,description:l.description,imageUrls:l.imageUrls&&h(l.imageUrls),externalUrls:[l.url]})}catch(o){PR.showSnackbar(uS("recipes.createFromUrl_notFound",{domain:null==(s=null==(i=oe(a))?void 0:i.domain)?void 0:s.replace(/^www\./,"")}),{actions:[{text:uS("recipes.createFromUrl_retry"),handler(){PR.openModal(ZD,{url:a})}}]})}finally{PR.restoreHeader(),r.value=!1}}else r.value=!1})),(e,t)=>{const s=BD,a=nL,o=sS;return Os(),Ms(o,{style:{"margin-top":"calc(-1 * var(--header-height))"},"aria-labelledby":"recipe-form-title"},{default:Tr((()=>[r.value?(Os(),Ms(s,{key:0})):(Os(),Ms(a,{key:1,recipe:n.value,onDone:i,onCancel:t[0]||(t[0]=t=>e.$router.back())},null,8,["recipe"]))])),_:1})}}}),iL=ti({__name:"RecipesEdit",props:{recipe:ix()},setup(e){async function t(e){await Ed.push(e.route()),await JA.syncIfOnline(e)}return(n,r)=>{const i=nL,s=sS;return Os(),Ms(s,{style:{"margin-top":"calc(-1 * var(--header-height))"},"aria-labelledby":"recipe-form-title"},{default:Tr((()=>[zs(i,{recipe:e.recipe,onDone:t,onCancel:r[0]||(r[0]=t=>n.$router.push(e.recipe.route()))},null,8,["recipe"])])),_:1})}}}),sL={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},aL=[Bs("g",{fill:"currentColor"},[Bs("path",{"fill-rule":"evenodd",d:"M5 13a3 3 0 1 0 0-6a3 3 0 0 0 0 6Zm0-4a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm9-1a3 3 0 1 0 0-6a3 3 0 0 0 0 6Zm0-4a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0 14a3 3 0 1 0 0-6a3 3 0 0 0 0 6Zm0-4a1 1 0 1 1 0 2a1 1 0 0 1 0-2Z","clip-rule":"evenodd"}),Bs("path",{d:"m6.236 9.777l-.763-1.291l6.791-4.013l.763 1.291l-6.791 4.013Zm6.021 5.752l.772-1.286l-6.286-3.772l-.772 1.286l6.286 3.772Z"})],-1)];const oL={name:"pepicons-share-android",render:function(e,t){return Os(),js("svg",sL,aL)}},lL={class:"text-2xl font-semibold text-white text-shadow md:text-4xl print:text-no-shadow print:text-primary-500 print:text-5xl"},uL={class:"recipe-title--text"},cL=ti({__name:"RecipeTitle",props:{recipe:ix()},setup:e=>(t,n)=>(Os(),js("h1",lL,[Bs("span",uL,He(e.recipe.name),1)]))}),dL={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},pL=[Ws('<g fill="currentColor"><path fill-rule="evenodd" d="M11 3h-1a4.002 4.002 0 0 0-3.874 3H6a4 4 0 1 0 0 8h8a4 4 0 0 0 .899-7.899A4.002 4.002 0 0 0 11 3ZM7.676 8l.387-1.501A2.002 2.002 0 0 1 10 5h1c.937 0 1.743.65 1.95 1.549l.28 1.221l1.221.28A2.002 2.002 0 0 1 14 12H6a2 2 0 1 1 0-4h1.676Z" clip-rule="evenodd"></path><path d="M9.5 10a1 1 0 1 1 2 0v7.5a1 1 0 1 1-2 0V10Z"></path><path d="M12.375 14.72a1 1 0 1 1 1.25 1.56l-2.5 2a1 1 0 0 1-1.25-1.56l2.5-2Z"></path><path d="M7.375 16.28a1 1 0 1 1 1.25-1.56l2.5 2a1 1 0 0 1-1.25 1.56l-2.5-2Z"></path></g>',1)];const hL={name:"pepicons-cloud-down",render:function(e,t){return Os(),js("svg",dL,pL)}},fL={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},mL=[Bs("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07m12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32M9 5h2v6H9zm0 8h2v2H9z"},null,-1)];const vL={name:"zondicons-exclamation-outline",render:function(e,t){return Os(),js("svg",fL,mL)}},gL={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},yL=[Ws('<g fill="currentColor"><path d="M6 3v4a1 1 0 0 1-2 0V3c0-1.068.776-2 1.833-2h8.334C15.224 1 16 1.932 16 3v4a1 1 0 1 1-2 0V3H6Z"></path><path d="M4 6h12a3 3 0 0 1 3 3v5a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3Z"></path><path d="M6 16.8V12a1 1 0 1 0-2 0v4.8c0 1.154.727 2.2 1.833 2.2h8.334C15.273 19 16 17.954 16 16.8V12a1 1 0 1 0-2 0v4.8a.661.661 0 0 1-.029.2H6.029A.66.66 0 0 1 6 16.8Z"></path><path d="M7 16a.5.5 0 0 1 0-1h6a.5.5 0 0 1 0 1H7Zm0-2a.5.5 0 0 1 0-1h6a.5.5 0 0 1 0 1H7Z"></path></g>',1)];const bL={name:"pepicons-printer",render:function(e,t){return Os(),js("svg",gL,yL)}};var wL=(e=>(e["Umai"]="umai",e["Solid"]="solid",e["JsonLD"]="jsonld",e["Print"]="print",e))(wL||{});const xL=ti({__name:"RecipeShareOptions",props:{modelValue:function(e){const t=Object.values(e);return{type:String,required:!0,validator:e=>t.includes(e)}}(wL)},emits:["update:modelValue"],setup(e,{emit:t}){const n=pa((()=>({[wL.Umai]:{name:uS("recipes.share_umai"),iconComponent:oE,onlyRemote:!0},[wL.Solid]:{name:uS("recipes.share_solid"),iconComponent:ES,onlyRemote:!0},[wL.JsonLD]:{name:uS("recipes.share_jsonld"),iconComponent:ZO,onlyRemote:!1},[wL.Print]:{name:uS("recipes.share_print"),iconComponent:bL,onlyRemote:!1}}))),r=pa((()=>Object.entries(n.value).reduce(((e,[t,n])=>(n.onlyRemote&&!FA.isRemote||e.push({id:t,...n}),e)),[]))),i=pa({get:()=>e.modelValue,set:e=>t("update:modelValue",e)});return(e,t)=>{const n=Nw,s=Uw,a=Lw,o=Ii("wobbly-border");return Os(),Ms(a,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),class:"flex flex-col space-y-2 md:flex-row md:space-x-2 md:space-y-0 md:items-center"},{default:Tr((()=>[zs(n,{class:"mr-2"},{default:Tr((()=>[Hs(He(e.$t("recipes.shareWith")),1)])),_:1}),(Os(!0),js(Ss,null,Oi(r.value,(e=>(Os(),Ms(s,{key:e.id,value:e.id,"aria-label":e.name},{default:Tr((({checked:t})=>[wi((Os(),js("div",{class:Fe([t?"bg-primary-200 px-4":"bg-gray-200 md:w-clickable","h-clickable flex justify-center items-center cursor-pointer"])},[(Os(),Ms(Ai(e.iconComponent),{class:"w-4 h-4"})),Bs("span",{class:Fe(["ml-2",{"md:hidden":!t}])},He(e.name),3)],2)),[[o]])])),_:2},1032,["value","aria-label"])))),128))])),_:1},8,["modelValue"])}}}),_L={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},kL=[Bs("path",{fill:"currentColor",d:"m0 11l2-2l5 5L18 3l2 2L7 18z"},null,-1)];const SL={name:"zondicons-checkmark",render:function(e,t){return Os(),js("svg",_L,kL)}},RL={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},AL=[Bs("path",{fill:"currentColor",d:"m12.81 4.36l-1.77 1.78a4 4 0 0 0-4.9 4.9l-2.76 2.75C2.06 12.79.96 11.49.2 10a11 11 0 0 1 12.6-5.64zm3.8 1.85c1.33 1 2.43 2.3 3.2 3.79a11 11 0 0 1-12.62 5.64l1.77-1.78a4 4 0 0 0 4.9-4.9l2.76-2.75zm-.25-3.99l1.42 1.42L3.64 17.78l-1.42-1.42z"},null,-1)];const IL={name:"zondicons-view-hide",render:function(e,t){return Os(),js("svg",RL,AL)}},CL={class:"text-sm"},EL={key:2,class:"flex items-center space-x-2 text-gray-600"},OL={class:"text-sm"},DL={key:3,class:"flex items-center space-x-2 text-gray-600"},TL={class:"text-sm"},PL={class:"relative"},jL={class:"ml-2 text-sm font-medium"},ML={class:"flex flex-col"},LL={class:"flex justify-between"},$L={class:"ml-2"},UL=Bs("div",{class:"flex-grow"},null,-1),NL=ti({__name:"RecipeAccessControl",props:{recipe:ix()},setup(e){const t=Wn({name:uS("recipes.accessControl.profile_public"),description:uS("recipes.accessControl.profile_publicDescription"),iconComponent:oE,publicPermissions:[Hd.Read],publicListing:!0}),n=Wn({name:uS("recipes.accessControl.profile_unlisted"),description:uS("recipes.accessControl.profile_unlistedDescription"),iconComponent:oE,publicPermissions:[Hd.Read],publicListing:!1}),r=Wn({name:uS("recipes.accessControl.profile_private"),description:uS("recipes.accessControl.profile_privateDescription"),iconComponent:IL,publicPermissions:[],publicListing:!1}),i=[t,n,r];let s=Qn(null),a=Qn(!1),o=Qn({top:0,right:0}),l=Qn(null);const u=Qn();function c(e,t){return`h-4 w-4 ${e?"text-white":t?"text-gray-600":"text-gray-400"}`}async function d(t){if(t!==l.value){a.value=!0;try{await e.recipe.updatePublicPermissions(t.publicPermissions),await FA.updatePublicRecipeListing(e.recipe,t.publicListing),l.value=t}catch(Wd){if(Wd instanceof zd)return void function handleUnsupportedProtocolError(e){PR.alert(uS("recipes.accessControl.unsupportedProtocol_title",{protocol:e.protocol}),uS("recipes.accessControl.unsupportedProtocol_message",{instructions:p(e)}))}(Wd);s.value=Wd}finally{a.value=!1}}}function p(e){return e.url.includes("inrupt.com")?uS("recipes.accessControl.unsupportedProtocol_inruptInstructions"):null}return Nr((()=>u.value&&function(e){const t=e.getBoundingClientRect();o.value={top:t.bottom,right:window.innerWidth-t.right}}(u.value.el))),di((async()=>{nI.loggedIn&&await async function(){try{await e.recipe.fetchPublicPermissionsIfMissing(),l.value=e.recipe.isPublic?e.recipe.listUrls.length>0?t:n:r}catch(Wd){s.value=Wd}}()})),(e,t)=>{const n=Wx,r=vL,p=ZC,h=vw,f=gw,m=SL,v=bw,g=yw,y=mw,b=Ii("wobbly-border");return e.$auth.loggedIn?s.value?(Os(),Ms(n,{key:1,clear:"",class:"flex items-center space-x-2 text-red-500",onClick:t[1]||(t[1]=t=>e.$errors.inspect(s.value))},{default:Tr((()=>[zs(r,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",CL,He(e.$t("recipes.accessControl.error")),1)])),_:1})):l.value?a.value?(Os(),js("span",DL,[zs(p,{class:"animate-spin w-4 h-4","aria-hidden":"true"}),Bs("span",TL,He(e.$t("recipes.accessControl.updating")),1)])):(Os(),Ms(y,{key:4,"model-value":l.value,as:"div",disabled:!!s.value||!l.value||a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d(e))},{default:Tr((()=>[zs(h,{class:"sr-only"},{default:Tr((()=>[Hs(He(e.$t("recipes.accessControl.change_label_a11y")),1)])),_:1}),Bs("div",PL,[wi((Os(),Ms(f,{ref_key:"button",ref:u,class:"relative inline-flex items-center p-2 rounded-md text-sm font-medium focus:outline-none focus:z-10 focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-brand-solid-500 hover:bg-gray-200","aria-label":e.$t("recipes.accessControl.change_label_a11y",{current:l.value.name})},{default:Tr((()=>[(Os(),Ms(Ai(l.value.iconComponent),{class:"h-4 w-4","aria-hidden":"true"})),Bs("p",jL,He(l.value.name),1)])),_:1},8,["aria-label"])),[[b]]),zs(Na,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Tr((()=>[zs(g,{class:"fixed z-10 mt-2 max-w-prose rounded-md shadow-lg overflow-hidden bg-white divide-y divide-gray-200 ring-1 ring-black ring-opacity-5 focus:outline-none",style:Me(`top:${o.value.top}px;right:${o.value.right}px`)},{default:Tr((()=>[(Os(),js(Ss,null,Oi(i,(e=>zs(v,{key:e.name,as:"template",value:e},{default:Tr((({active:t,selected:n})=>[Bs("li",{class:Fe([t?"text-white bg-brand-solid-500":"text-gray-900","select-none relative p-4 text-sm flex items-center cursor-pointer max-w-sm"])},[Bs("div",ML,[Bs("div",LL,[Bs("p",{class:Fe([n?"font-semibold":"font-normal","flex items-center"])},[(Os(),Ms(Ai(e.iconComponent),{class:Fe(c(t,n)),"aria-hidden":"true"},null,8,["class"])),Bs("span",$L,He(e.name),1)],2)]),Bs("p",{class:Fe([t?"text-brand-solid-200":"text-gray-500","mt-2"])},He(e.description),3)]),UL,n?(Os(),js("span",{key:0,class:Fe([t?"text-white":"text-brand-solid-500","ml-4"])},[zs(m,{class:"h-5 w-5","aria-hidden":"true"})],2)):Js("",!0)],2)])),_:2},1032,["value"]))),64))])),_:1},8,["style"])])),_:1})])])),_:1},8,["model-value","disabled"])):(Os(),js("span",EL,[zs(p,{class:"animate-spin w-4 h-4","aria-hidden":"true"}),Bs("span",OL,He(e.$t("recipes.accessControl.loading")),1)])):(Os(),Ms(n,{key:0,clear:"",class:"text-sm",onClick:t[0]||(t[0]=t=>e.$ui.openModal(iE))},{default:Tr((()=>[Hs(He(e.$t("recipes.accessControl.disconnected")),1)])),_:1}))}}}),FL={class:"flex justify-between"},BL={key:1,class:"text-red-500 flex self-start mt-2 max-w-prose"},zL={class:"flex flex-col justify-between items-end mt-4 gap-y-2 md:flex-row md:gap-x-2 md:gap-y-0"},qL={key:0,class:"cursor-pointer flex items-center self-start mb-4 md:mb-0"},VL={class:"ml-2"},HL={key:1},WL={class:"ml-2"},JL={class:"ml-2"},KL={class:"ml-2"},GL=ti({__name:"ShareRecipeModal",props:{recipe:ix()},setup(e){const t=Qn(!1),n=Qn(FA.isRemote?wL.Umai:wL.JsonLD),r=pa((()=>({[wL.Umai]:T(location.href)+Ed.resolve({name:"viewer",query:{url:e.recipe.getDocumentUrl()}}).href,[wL.Solid]:e.recipe.url,[wL.JsonLD]:JSON.stringify(e.recipe.toExternalJsonLD({includeHistory:t.value}),null,2),[wL.Print]:null}))),i=pa((()=>r.value[n.value])),s=pa((()=>!!FA.isRemote&&(n.value===wL.Umai||n.value===wL.Solid))),a=pa((()=>n.value!==wL.Print||oA.supportsPrinting?s.value&&!1!==e.recipe.isPrivate?e.recipe.isPrivate?uS("recipes.accessControl.warning_private"):uS("recipes.accessControl.warning_unknown"):void 0:uS("recipes.print_unsupportedBrowser")));return(r,o)=>{const l=NL,u=xL,c=yD,d=vL,p=Xk,h=pE,f=hL,m=Wx,v=iM,g=oL,y=l_;return Os(),Ms(y,null,{title:Tr((()=>[Bs("div",FL,[Hs(He(r.$t("recipes.share"))+" ",1),s.value?(Os(),Ms(l,{key:0,recipe:e.recipe},null,8,["recipe"])):Js("",!0)])])),default:Tr((({close:s})=>[zs(u,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e)},null,8,["modelValue"]),i.value?(Os(),Ms(c,{key:0,class:"mt-4 max-w-prose",text:i.value},null,8,["text"])):Js("",!0),a.value?(Os(),js("p",BL,[zs(d,{class:"w-4 h-4 mt-1 mr-2 flex-shrink-0"}),Hs(" "+He(a.value),1)])):"print"===n.value?(Os(),Ms(p,{key:2,class:"mt-4",text:r.$t("recipes.print_info")},null,8,["text"])):Js("",!0),Bs("div",zL,["jsonld"===n.value?(Os(),js("label",qL,[zs(h,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=e=>t.value=e)},null,8,["modelValue"]),Bs("p",VL,He(r.$t("recipes.download_includeHistory")),1)])):(Os(),js("span",HL)),"jsonld"===n.value?(Os(),Ms(m,{key:2,onClick:()=>(e.recipe.download({includeHistory:t.value}),s())},{default:Tr((()=>[zs(f,{class:"w-6 h-6","aria-hidden":"true"}),Bs("span",WL,He(r.$t("recipes.download")),1)])),_:2},1032,["onClick"])):Js("",!0),"print"===n.value&&r.$browser.supportsPrinting?(Os(),Ms(m,{key:3,onClick:e=>s().then((()=>{window.print()}))},{default:Tr((()=>[zs(v,{class:"w-6 h-6","aria-hidden":"true"}),Bs("span",JL,He(r.$t("recipes.print")),1)])),_:2},1032,["onClick"])):"print"!==n.value&&r.$browser.supportsSharing?(Os(),Ms(m,{key:4,onClick:t=>(s(),function(){const t=MR.handleErrors((e=>e instanceof Error&&"AbortError"===e.name));navigator.share($({title:e.recipe.name,text:e.recipe.description?X(e.recipe.description):null,url:i.value})),ge({seconds:60}).then((()=>t()))}())},{default:Tr((()=>[zs(g,{class:"w-6 h-6","aria-hidden":"true"}),Bs("span",KL,He(r.$t("recipes.share")),1)])),_:2},1032,["onClick"])):Js("",!0)])])),_:1})}}}),ZL={"recipe-card":(e,t)=>Promise.all([RM(e,t),SM(e,t)])},YL=async(e,t)=>{var n;const r=null!=(n=null==t?void 0:t.config.name)?n:"",i=ZL[r];i&&await i(e,500)},QL=async(e,t,{element:n})=>{const r=500,i=Fx(t,"#recipe-details-title");e.classList.add("z-20"),await Promise.all([CM(t,{duration:r,$headerTitle:i,$card:n}),kM(t,r)])},XL={class:"space-y-2 flex flex-col items-end w-full"},e$={class:"mx-2 uppercase tracking-wider font-semibold text-sm"},t$={class:"mx-2 uppercase tracking-wider font-semibold text-sm"},n$={class:"mx-2 uppercase tracking-wider font-semibold text-sm"},r$=ti({__name:"RecipeDetails",props:{recipe:ix()},setup(e){var t,n;const r=Qn(null),i=Qn(null!=(n=null==(t=e.recipe.servingsBreakdown)?void 0:t.quantity)?n:1);async function s(){var t;await(null==(t=r.value)?void 0:t.showPrimaryPanel()),await Ed.push(e.recipe.route("edit"))}return Zx("recipe-servings-updated",(e=>i.value=e)),di((()=>window.scrollTo({top:0}))),(t,n)=>{const a=cL,o=yO,l=Wx,u=XO,c=oL,d=xj,p=Ii("element-transitions");return wi((Os(),Ms(d,{ref_key:"$page",ref:r,recipe:e.recipe},{title:Tr((()=>[zs(a,{id:"recipe-details-title",recipe:e.recipe},null,8,["recipe"])])),actions:Tr((()=>[Bs("div",XL,[zs(l,{secondary:"",class:"h-12 w-full",onClick:n[0]||(n[0]=n=>t.$kitchen.cook(e.recipe,i.value))},{default:Tr((()=>[zs(o,{class:"w-5 h-5 ml-2","aria-hidden":"true"}),Bs("span",e$,He(t.$t("recipes.cook")),1)])),_:1}),zs(l,{secondary:"",class:"h-12 w-full",onClick:s},{default:Tr((()=>[zs(u,{class:"ml-2 w-4 h-4","aria-hidden":"true"}),Bs("span",t$,He(t.$t("recipes.edit")),1)])),_:1}),zs(l,{secondary:"",class:"h-12 w-full",onClick:n[1]||(n[1]=n=>t.$ui.openModal(GL,{recipe:e.recipe}))},{default:Tr((()=>[zs(c,{class:"w-5 h-5 ml-2","aria-hidden":"true"}),Bs("span",n$,He(t.$t("recipes.share")),1)])),_:1})])])),_:1},8,["recipe"])),[[p,{name:"recipe-details",id:e.recipe.url,transitions:{enter:tr(YL),leave:{"recipes.edit":t.$elementTransitions.fadeOut,"recipes.show":t.$elementTransitions.fadeOut,kitchen:()=>tr(ge)({ms:tr(iT)}),"kitchen.instructions":()=>tr(ge)({ms:tr(iT)}),"kitchen.ingredients":()=>tr(ge)({ms:tr(iT)}),"kitchen.completed":()=>tr(ge)({ms:tr(iT)})},"recipe-card":tr(QL)}}]])}}}),i$=ti({__name:"RecipesShow",props:{recipe:ix()},setup:e=>(t,n)=>{const r=r$,i=sS;return Os(),Ms(i,{style:{"margin-top":"calc(-1 * var(--header-height))"},"aria-labelledby":"recipe-details-title"},{default:Tr((()=>[zs(r,{recipe:e.recipe},null,8,["recipe"])])),_:1})}}),s$={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},a$=[Bs("path",{fill:"currentColor","fill-rule":"evenodd",d:"M6.75 3a2 2 0 0 0-2 2v10a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2Zm6.5 0a2 2 0 0 0-2 2v10a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2Z","clip-rule":"evenodd"},null,-1)];const o$={name:"pepicons-pause",render:function(e,t){return Os(),js("svg",s$,a$)}},l$={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},u$=[Bs("path",{fill:"currentColor",d:"M15.544 9.59a1 1 0 0 1-.053 1.728L6.476 16.2A1 1 0 0 1 5 15.321V4.804a1 1 0 0 1 1.53-.848l9.014 5.634Z"},null,-1)];const c$={name:"pepicons-play",render:function(e,t){return Os(),js("svg",l$,u$)}},d$={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},p$=[Bs("path",{fill:"currentColor",d:"M17 4H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3"},null,-1)];const h$={name:"tabler-player-stop-filled",render:function(e,t){return Os(),js("svg",d$,p$)}};const f$={class:"flex flex-col"},m$={class:"flex justify-between"},v$={class:"font-semibold"},g$={class:"text-sm"},y$={class:"ml-1 text-xs uppercase font-medium"},b$={class:"ml-1 text-xs uppercase font-medium"},w$={class:"ml-1 text-xs uppercase font-medium"},x$={class:"ml-1 text-xs uppercase font-medium"},_$={key:0,class:"mt-1 w-full h-2 rounded-full bg-gray-200 relative overflow-hidden"},k$=ti({__name:"KitchenTimer",props:{timer:ix()},setup(e){const t=e;let n=null,r=null;const i=Qn(null),s=pa((()=>{var e;let n="",r=t.timer.getTimeLeft(null!=(e=i.value)?e:void 0);r<0&&(n="-",r=-r+1e3);const s=Math.floor(r/1e3),o=Math.floor(s/60);return n+[a(Math.floor(o/60)),a(o%60),a(s%60)].join(":")}));function a(e,t=2){return e.toString().padStart(t,"0")}function o(){n||(i.value=Date.now(),n=function(e){let t=!0;return requestAnimationFrame((function n(){e(),t&&requestAnimationFrame(n)})),()=>t=!1}((()=>i.value=Date.now())))}function l(){n&&(n(),n=null,i.value=null)}return di((()=>{r=t.timer.listeners.add({onStartedRunning:()=>o(),onStoppedRunning:()=>l()}),t.timer.isRunning()&&o()})),mi((()=>{null==r||r(),l()})),(n,r)=>{const i=h$,a=Wx,o=c$,l=o$,u=Lj;return Os(),js("div",f$,[Bs("div",m$,[Bs("div",{class:Fe(["flex flex-col",{"text-red-700":e.timer.isOverTime()}])},[Bs("h3",v$,He(e.timer.name),1),Bs("span",g$,He(tr(s)),1)],2),Bs("div",{class:Fe(["flex self-center mt-1",{"flex-col space-y-2 md:flex-row md:space-y-0 md:space-x-2":e.timer.isPaused(),"space-x-2":!e.timer.isPaused()}])},[e.timer.isPaused()?(Os(),Ms(a,{key:0,secondary:"",rounded:"",class:"self-end",onClick:r[0]||(r[0]=t=>e.timer.stop())},{default:Tr((()=>[zs(i,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",y$,He(n.$t("kitchen.timers.stop")),1)])),_:1})):Js("",!0),e.timer.isRunning()?e.timer.isOverTime()?(Os(),Ms(a,{key:3,secondary:"",class:"self-end",onClick:r[3]||(r[3]=t=>e.timer.stop())},{default:Tr((()=>[zs(i,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",x$,He(n.$t("kitchen.timers.stop")),1)])),_:1})):(Os(),Ms(a,{key:2,secondary:"",class:"self-end",onClick:r[2]||(r[2]=t=>e.timer.pause())},{default:Tr((()=>[zs(l,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",w$,He(n.$t("kitchen.timers.pause")),1)])),_:1})):(Os(),Ms(a,{key:1,secondary:"",class:"self-end",onClick:r[1]||(r[1]=t=>e.timer.play())},{default:Tr((()=>[zs(o,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",b$,He(e.timer.isPaused()?n.$t("kitchen.timers.resume"):n.$t("kitchen.timers.play")),1)])),_:1})),zs(a,{secondary:"",rounded:"",class:"self-end",title:n.$t("kitchen.timers.delete"),onClick:r[4]||(r[4]=e=>async function(){await PR.confirm({message:uS("kitchen.timers.delete_confirm",{timer:t.timer.name}),acceptText:uS("kitchen.timers.delete_confirm_accept"),acceptColor:Vx.Danger})&&iO.removeTimer(t.timer)}())},{default:Tr((()=>[zs(u,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",{class:Fe(["md:sr-only ml-1 text-xs uppercase font-medium",{"sr-only":!e.timer.isPaused()}])},He(n.$t("kitchen.timers.delete")),3)])),_:1},8,["title"])],2)]),e.timer.hasStarted()&&!e.timer.isOverTime()?(Os(),js("div",_$,[Bs("div",{class:Fe(["h-full absolute left-0 top-0",{"bg-primary-500":!e.timer.isPaused(),"bg-gray-400":e.timer.isPaused()}]),style:Me(`width: ${100*(e.timer.duration-e.timer.getTimeLeft())/e.timer.duration}%`)},null,6)])):Js("",!0)])}}}),S$={class:"flex flex-col"},R$={for:"name",class:"font-medium text-gray-700"},A$={class:"font-medium text-gray-700 mt-4"},I$={class:"flex mt-2 space-y-2 flex-col md:space-y-0 md:space-x-2 md:flex-row"},C$={class:"text-sm"},E$={class:"text-sm"},O$={class:"text-sm"},D$={class:"flex justify-end mt-4"},T$=ti({__name:"KitchenAddTimerModal",setup(e){const t=$S({name:{type:LS.String,default:uS("kitchen.timers.new.name_default",{count:iO.timers.filter((e=>!e.hasDishStep())).length+1}),rules:"required"},hours:{type:LS.Number,default:0,rules:"required"},minutes:{type:LS.Number,default:10,rules:"required"},seconds:{type:LS.Number,default:0,rules:"required"}});function n(e,t,n){return Math.min(Math.max(e,t),n)}return(e,r)=>{const i=SS,s=Wx,a=wS,o=l_;return Os(),Ms(o,{title:e.$t("kitchen.timers.new.title")},{default:Tr((({close:r})=>[zs(a,{form:tr(t),onSubmit:e=>async function(e){const r=new JE(t.name,60*t.hours*60*1e3+60*n(t.minutes,0,60)*1e3+1e3*n(t.seconds,0,60)),i=FA.recipes.first((e=>e.slug===Ed.currentRoute.value.params.recipe)),s=i&&iO.findDish(i);s&&r.setDish(s),iO.addTimer(r),e()}(r)},{default:Tr((()=>[Bs("div",S$,[Bs("label",R$,He(e.$t("kitchen.timers.new.name")),1),zs(i,{id:"name",name:"name",class:"mt-2",bordered:""})]),Bs("div",A$,He(e.$t("kitchen.timers.new.duration")),1),Bs("div",I$,[Bs("label",null,[zs(i,{name:"hours",type:"number",class:"w-20"}),Bs("span",C$,He(e.$t("kitchen.timers.new.hours")),1)]),Bs("label",null,[zs(i,{name:"minutes",type:"number",class:"w-20"}),Bs("span",E$,He(e.$t("kitchen.timers.new.minutes")),1)]),Bs("label",null,[zs(i,{name:"seconds",type:"number",class:"w-20"}),Bs("span",O$,He(e.$t("kitchen.timers.new.seconds")),1)])]),Bs("div",D$,[zs(s,{type:"submit"},{default:Tr((()=>[Hs(He(e.$t("kitchen.timers.new.submit")),1)])),_:1})])])),_:2},1032,["form","onSubmit"])])),_:1},8,["title"])}}}),P$={key:0,class:"mt-5 [&>li:not(:last-child)]:mb-5"},j$={class:"ml-1"},M$=ti({__name:"KitchenTimersModal",setup:e=>(e,t)=>{const n=Xk,r=k$,i=qO,s=Wx,a=l_;return Os(),Ms(a,{title:e.$t("kitchen.timers.title")},{default:Tr((()=>[zs(n,{text:e.$t("kitchen.timers.description"),class:"text-gray-700 text-sm max-w-sm"},null,8,["text"]),e.$kitchen.timers.length>0?(Os(),js("ul",P$,[(Os(!0),js(Ss,null,Oi(e.$kitchen.timers,((e,t)=>(Os(),js("li",{key:t},[zs(r,{timer:e},null,8,["timer"])])))),128))])):Js("",!0),zs(s,{class:"self-center mt-6",secondary:"",onClick:t[0]||(t[0]=t=>e.$ui.openModal(T$))},{default:Tr((()=>[zs(i,{class:"w-5 h-5","aria-hidden":"true"}),Bs("span",j$,He(e.$t("kitchen.timers.add")),1)])),_:1})])),_:1},8,["title"])}}),L$={class:"fixed inset-0 bg-white z-40"},$$={class:"sr-only"},U$={class:"w-full h-full overflow-auto"},N$={class:"mx-auto max-w-4xl pt-4 pb-8 px-edge md:pt-10 min-h-full flex flex-col"},F$={class:"text-gray-500 opacity-50 font-medium tracking-wide uppercase text-xs mr-8"},B$={class:"text-2xl font-semibold mt-4"},z$={key:1,class:"text-2xl font-semibold mt-4"},q$={class:"fixed bottom-24 right-8 flex flex-col-reverse space-y-4 space-y-reverse z-10 md:top-32 md:bottom-auto md:right-12 md:flex-col md:space-y-4"},V$={class:"sr-only"},H$={key:0,class:"w-4 h-4 absolute -top-1 -right-1 rounded-full bg-red-800"},W$={class:"sr-only"},J$={class:"sr-only"},K$=ti({__name:"KitchenPage",props:{title:sx(),recipe:ex(),showKitchenShortcut:Zw(!0)},setup(e){const t=pa((()=>iO.timers.some((e=>e.isOverTime()))));return(n,r)=>{const i=Gx,s=Wx,a=YE,o=yO;return Os(),js("div",L$,[zs(s,{clear:"",class:"absolute right-4 top-4 md:right-8 md:top-8",title:n.$t("kitchen.close"),onClick:r[0]||(r[0]=e=>n.$kitchen.close())},{default:Tr((()=>[zs(i,{class:"w-8 h-8","aria-hidden":"true"}),Bs("span",$$,He(n.$t("kitchen.close")),1)])),_:1},8,["title"]),Bs("div",U$,[Bs("div",N$,[e.recipe?(Os(),js(Ss,{key:0},[Bs("h1",F$,He(n.$t("kitchen.title",{recipe:e.recipe.name})),1),Bs("h2",B$,He(e.title),1)],64)):(Os(),js("h1",z$,He(e.title),1)),Ti(n.$slots,"default")])]),Bs("div",q$,[zs(s,{title:n.$t("kitchen.timers.show"),secondary:"",class:"relative",onClick:r[1]||(r[1]=e=>n.$ui.openModal(M$))},{default:Tr((()=>[zs(a,{class:"w-8 h-8","aria-hidden":"true"}),Bs("span",V$,He(n.$t("kitchen.timers.show")),1),tr(t)?(Os(),js("div",H$,[Bs("span",W$," ("+He(n.$t("kitchen.timers.overtime"))+") ",1)])):Js("",!0)])),_:1},8,["title"]),e.showKitchenShortcut&&n.$kitchen.dishes.length>1?(Os(),Ms(s,{key:0,title:n.$t("kitchen.index.show"),route:"kitchen",secondary:""},{default:Tr((()=>[zs(o,{class:"w-7 h-7","aria-hidden":"true"}),Bs("span",J$,He(n.$t("kitchen.index.show")),1)])),_:1},8,["title"])):Js("",!0)])])}}}),G$={class:"grid grid-cols-1 gap-3 my-3 mt-6 sm:grid-cols-2 md:grid-cols-3"};const Z$=rS({},[["render",function(e,t){const n=gT,r=K$;return Os(),Ms(r,{title:e.$t("kitchen.index.title"),"show-kitchen-shortcut":!1},{default:Tr((()=>[Bs("ul",G$,[(Os(!0),js(Ss,null,Oi(e.$kitchen.dishes,(e=>(Os(),Ms(n,{key:e.recipe.url,recipe:e.recipe,route:e.getStageRoute(),transitions:!1},null,8,["recipe","route"])))),128))])])),_:1},8,["title"])}]]),Y$={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},Q$=[Bs("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[Bs("path",{d:"M8.974 14.768a1 1 0 0 1-1.409-.128l-3.333-4a1 1 0 1 1 1.536-1.28l3.334 4a1 1 0 0 1-.128 1.408Z"}),Bs("path",{d:"M8.974 5.232a1 1 0 0 1 .128 1.408l-3.334 4a1 1 0 1 1-1.536-1.28l3.333-4a1 1 0 0 1 1.409-.128Z"}),Bs("path",{d:"M6 10a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H7a1 1 0 0 1-1-1Z"})],-1)];const X$={name:"pepicons-arrow-left",render:function(e,t){return Os(),js("svg",Y$,Q$)}},eU={class:"flex w-full justify-end space-x-2 mt-3"},tU={class:"ml-1"},nU={class:"ml-1.5"},rU=ti({__name:"KitchenCompleted",props:{recipe:ix()},setup(e){const t=e,n=pa((()=>iO.findDish(t.recipe)));return di((()=>{var e;return null==(e=n.value)?void 0:e.updateStage("completed")})),(t,r)=>{const i=CD,s=Xk,a=X$,o=Wx,l=SL,u=K$;return Os(),Ms(u,{recipe:e.recipe,title:t.$t("kitchen.completed.title")},{default:Tr((()=>{var u;return[e.recipe.imageUrl?(Os(),js(Ss,{key:0},[zs(i,{recipe:e.recipe,class:"mt-3 rounded-lg w-full aspect-video"},null,8,["recipe"]),zs(s,{text:t.$t("kitchen.completed.imageDescription"),class:"text-gray-700 mt-3 flex-grow"},null,8,["text"])],64)):(Os(),Ms(s,{key:1,text:t.$t("kitchen.completed.imageMissingDescription"),class:"text-gray-700 mt-3 flex-grow"},null,8,["text"])),Bs("div",eU,[zs(o,{route:"kitchen.instructions","route-params":{recipe:e.recipe.slug,step:(null==(u=e.recipe.instructions)?void 0:u.length)||1}},{default:Tr((()=>[zs(a,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",tU,He(t.$t("kitchen.previous")),1)])),_:1},8,["route-params"]),zs(o,{onClick:r[0]||(r[0]=e=>tr(n)&&t.$kitchen.complete(tr(n)))},{default:Tr((()=>[zs(l,{class:"w-3 h-3","aria-hidden":"true"}),Bs("span",nU,He(t.$t("kitchen.completed.finish")),1)])),_:1})])]})),_:1},8,["recipe","title"])}}}),iU={class:"space-y-2 mt-6 flex flex-col items-start flex-grow"},sU={class:"flex items-center space-x-2"},aU={class:"flex w-full justify-end mt-3"},oU={class:"mr-1"},lU=ti({__name:"KitchenIngredients",props:{recipe:ix()},setup(e){const t=e,n=pa((()=>iO.findDish(t.recipe))),r=pa((()=>{var e,r,i,s,a,o,l,u,c;const d=null==(e=t.recipe)?void 0:e.sortedIngredientsBreakdown,p=null==(i=null==(r=t.recipe)?void 0:r.servingsBreakdown)?void 0:i.quantity,h=null!=(o=null!=(a=null==(s=n.value)?void 0:s.servings)?a:p)?o:1,f=h/(null!=p?p:h);return(null==(l=t.recipe)?void 0:l.servings)?null!=(c=null==d?void 0:d.map((({quantity:e,original:t,unitMultiplier:n,renderQuantity:r})=>e?Array.isArray(e)?r(e.map((e=>TA(e*f)))):r(TA(e*f/(null!=n?n:1))):t)))?c:[]:null!=(u=null==d?void 0:d.map((({original:e})=>e)))?u:[]}));return di((()=>{var e;return null==(e=n.value)?void 0:e.updateStage("ingredients")})),(t,i)=>{const s=Xk,a=iD,o=bS,l=Wx,u=K$;return Os(),Ms(u,{recipe:e.recipe,title:t.$t("kitchen.ingredients.title")},{default:Tr((()=>[zs(s,{text:t.$t("kitchen.ingredients.description"),class:"text-gray-500 mt-1"},null,8,["text"]),Bs("ul",iU,[(Os(!0),js(Ss,null,Oi(r.value,((e,t)=>{var r;return Os(),js("li",{key:t},[Bs("label",sU,[zs(a,{"model-value":null==(r=tr(n))?void 0:r.ingredients[e],class:"w-5 h-5","onUpdate:modelValue":t=>{var r;return null==(r=tr(n))?void 0:r.updateIngredient(e,t)}},null,8,["model-value","onUpdate:modelValue"]),zs(s,{inline:"",text:e,"auto-link":"recipes"},null,8,["text"])])])})),128))]),Bs("div",aU,[zs(l,{route:"kitchen.instructions","route-params":{recipe:e.recipe.slug,step:1}},{default:Tr((()=>[Bs("span",oU,He(t.$t("kitchen.next")),1),zs(o,{class:"w-4 h-4","aria-hidden":"true"})])),_:1},8,["route-params"])])])),_:1},8,["recipe","title"])}}}),uU={class:"flex-grow"},cU={class:"mt-4 font-medium text-lg"},dU={class:"mt-2"},pU={class:"flex w-full justify-end space-x-2 mt-3"},hU={class:"ml-1"},fU={class:"ml-1"},mU={class:"mr-1"},vU={class:"mr-1"},gU=ti({__name:"KitchenInstructions",props:{recipe:ix(),step:sx()},setup(e){const t=e,n=pa((()=>parseInt(t.step))),r=pa((()=>iO.findDish(t.recipe))),i=pa((()=>{var e,r;return null==(r=null==(e=t.recipe.instructions)?void 0:e.find((e=>e.position===n.value)))?void 0:r.text})),s=pa((()=>{var e;return 1!==(null==(e=t.recipe.instructions)?void 0:e.length)&&i.value?uS("kitchen.instructions.title",{step:t.step}):uS("kitchen.instructions.emptyTitle")})),a=pa((()=>iO.timers.filter((e=>r.value&&e.hasDish(r.value,n.value)))));return di((()=>{var e;return null==(e=r.value)?void 0:e.updateStage(n.value)})),(t,r)=>{const o=Xk,l=k$,u=X$,c=Wx,d=bS,p=K$;return Os(),Ms(p,{recipe:e.recipe,title:tr(s)},{default:Tr((()=>{var r;return[Bs("div",uU,[tr(i)?(Os(),Ms(o,{key:0,text:tr(i),class:"text-gray-700 mt-2","auto-link":"recipes"},null,8,["text"])):(Os(),Ms(o,{key:1,text:t.$t("kitchen.instructions.empty"),class:"text-gray-700 mt-2","auto-link":"recipes"},null,8,["text"])),tr(a).length>0?(Os(),js(Ss,{key:2},[Bs("h3",cU,He(t.$t("kitchen.timers.title")),1),Bs("ul",dU,[(Os(!0),js(Ss,null,Oi(tr(a),((e,t)=>(Os(),js("li",{key:t,class:"bg-gray-100 rounded-lg px-3 py-4 max-w-lg"},[zs(l,{timer:e},null,8,["timer"])])))),128))])],64)):Js("",!0)]),Bs("div",pU,[1===tr(n)?(Os(),Ms(c,{key:0,route:"kitchen.ingredients","route-params":{recipe:e.recipe.slug}},{default:Tr((()=>[zs(u,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",hU,He(t.$t("kitchen.previous")),1)])),_:1},8,["route-params"])):(Os(),Ms(c,{key:1,route:"kitchen.instructions","route-params":{recipe:e.recipe.slug,step:tr(n)-1}},{default:Tr((()=>[zs(u,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",fU,He(t.$t("kitchen.previous")),1)])),_:1},8,["route-params"])),tr(i)&&tr(n)!==(null==(r=e.recipe.instructions)?void 0:r.length)?(Os(),Ms(c,{key:3,route:"kitchen.instructions","route-params":{recipe:e.recipe.slug,step:tr(n)+1}},{default:Tr((()=>[Bs("span",vU,He(t.$t("kitchen.next")),1),zs(d,{class:"w-4 h-4","aria-hidden":"true"})])),_:1},8,["route-params"])):(Os(),Ms(c,{key:2,route:"kitchen.completed","route-params":{recipe:e.recipe.slug}},{default:Tr((()=>[Bs("span",mU,He(t.$t("kitchen.next")),1),zs(d,{class:"w-4 h-4","aria-hidden":"true"})])),_:1},8,["route-params"]))])]})),_:1},8,["recipe","title"])}}}),yU={class:"flex flex-col items-center justify-center max-w-prose px-edge mx-auto w-full"},bU={key:0,class:"flex flex-col justify-center items-center p-4 space-y-4"},wU={class:"text-xl text-gray-700"},xU={id:"viewer-form-title",class:"text-2xl font-medium mt-6"},_U=ti({__name:"ViewerForm",setup(e){let t=Qn(!1),n=Qn(null);const r=$S({url:{type:LS.String,rules:"required",default:ie("url")}});async function i(){t.value=!0,n.value=null;const e=await qA.search(r.url);!e&&nI.wasLoggedIn&&await nI.reconnect(!0),n.value=e?null:r.url,t.value=!1}return di((()=>r.url&&i())),(e,s)=>{const a=UD,o=lS,l=Xk,u=AS,c=wS;return Os(),Ms(c,{form:tr(r),class:"flex max-w-full pt-edge",onSubmit:s[0]||(s[0]=e=>async function(){await Ed.push({name:"viewer",query:{url:r.url}}),await i()}())},{default:Tr((()=>[Bs("div",yU,[t.value?(Os(),js("div",bU,[zs(a,{class:"w-12 h-12 text-primary-500"}),Bs("p",wU,He(e.$t("viewer.form.searching")),1)])):(Os(),js(Ss,{key:1},[zs(o,{class:"h-auto w-[250px] max-w-[60vw] fill-primary-500 flex-shrink-0","aria-hidden":"true"}),Bs("h1",xU,He(e.$t("viewer.form.title")),1),zs(l,{text:e.$t("viewer.form.description"),class:"mt-4 text-center"},null,8,["text"]),zs(u,{class:"mt-4 w-full",name:"url",label:e.$t("viewer.form.urlLabel"),placeholder:e.$t("viewer.form.urlPlaceholder")},{default:Tr((()=>[Hs(He(e.$t("viewer.form.submit")),1)])),_:1},8,["label","placeholder"]),n.value?(Os(),Ms(l,{key:0,class:"mt-2 text-center text-red-700 opacity-75 w-full",text:e.$t("viewer.form.notFound",{url:n.value})},null,8,["text"])):Js("",!0)],64))])])),_:1},8,["form"])}}}),kU={key:0,class:"prose text-sm mt-2 flex items-center space-x-1.5 group"},SU={class:"flex items-center space-x-1"},RU=["src"],AU=ti({__name:"ViewerRecipeCreator",props:{collection:ix(),prefix:sx()},setup(e){const t=function(e){const t=Qn(),n=pa(e);return Br(n,(async()=>t.value=await n.value),{immediate:!0}),t}((async()=>{var t,n,r,i;if(!(null==(t=e.collection)?void 0:t.creatorWebId))return null;const s=await P(nI.getUserProfile(e.collection.creatorWebId));return{name:null!=(r=null==s?void 0:s.name)?r:Pe(null!=(n=null==s?void 0:s.webId)?n:e.collection.creatorWebId,{protocol:!1}),url:null!=(i=null==s?void 0:s.webId)?i:e.collection.creatorWebId,avatarUrl:null==s?void 0:s.avatarUrl}}));return(n,r)=>{const i=vS;return t.value?(Os(),js("p",kU,[Bs("span",null,He(e.prefix),1),zs(i,{url:t.value.url,class:"no-underline group-hover:underline"},{default:Tr((()=>[Bs("div",SU,[t.value.avatarUrl?(Os(),js("img",{key:0,src:t.value.avatarUrl,class:"h-6 w-6 rounded-full object-cover m-0",alt:""},null,8,RU)):Js("",!0),Bs("span",null,He(t.value.name),1)])])),_:1},8,["url"])])):Js("",!0)}}});async function IU(){await Ae(),await zI.waitElementsReady("viewer-recipe")}const CU={key:0,class:"flex flex-col flex-grow w-full px-edge"},EU={id:"viewer-recipes-collection-title",class:"mt-4 text-xl font-semibold"},OU=ti({__name:"ViewerRecipes",setup(e){const t=pa((()=>{var e,t;return E(null!=(t=null==(e=qA.collection)?void 0:e.recipes)?t:[])}));return(e,n)=>{var r;const i=lS,s=Si("router-link"),a=Xk,o=AU,l=yT,u=Ii("wobbly-border"),c=Ii("element-transitions");return e.$viewer.collection?(Os(),js("div",CU,[wi((Os(),js("div",null,[wi((Os(),Ms(s,{to:{name:"home"},title:"Umai","aria-label":"Umai",target:"_blank",class:"flex self-center ring-primary-100 justify-center items-center space-x-2 mt-4 focus-visible:outline-none focus-visible:bg-primary-100 focus-visible:ring-8"},{default:Tr((()=>[zs(i,{class:"mr-2 w-36 h-12 fill-primary-500"})])),_:1})),[[u]]),Bs("h1",EU,He(null!=(r=e.$viewer.collection.name)?r:e.$t("viewer.collection.titleFallback")),1),e.$viewer.collection.description?(Os(),Ms(a,{key:0,class:"mt-2",text:e.$viewer.collection.description},null,8,["text"])):Js("",!0),zs(o,{collection:e.$viewer.collection,prefix:e.$t("viewer.collection.creatorPrefix")},null,8,["collection","prefix"])])),[[c,{transitions:{leave:tr(IU)}}]]),zs(l,{recipes:t.value,class:"w-full"},null,8,["recipes"])])):Js("",!0)}}}),DU={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},TU=[Bs("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[Bs("path",{d:"M11 5.297a1 1 0 0 0-.838-.987L2.323 3.026A2 2 0 0 0 0 5v9.737a2 2 0 0 0 1.69 1.975l8.155 1.276A1 1 0 0 0 11 17V5.297Zm-9 9.44V5l7 1.147v9.684l-7-1.094Z"}),Bs("path",{d:"M20 5a2 2 0 0 0-2.323-1.974L9.838 4.31A1 1 0 0 0 9 5.297V17a1 1 0 0 0 1.155.988l8.154-1.276A2 2 0 0 0 20 14.737V5Zm-2 9.737l-7 1.094V6.147L18 5v9.737Z"})],-1)];const PU={name:"pepicons-book",render:function(e,t){return Os(),js("svg",DU,TU)}},jU={"recipe-card":(e,t)=>Promise.all([RM(e,t),SM(e,t)])},MU=async(e,t)=>{var n;const r=null!=(n=null==t?void 0:t.config.name)?n:"",i=jU[r];i&&await i(e,500)},LU=async(e,t,{element:n})=>{const r=500,i=Fx(t,"#viewer-recipe-title");e.classList.add("z-20"),await Promise.all([CM(t,{duration:r,$headerTitle:i,$card:n}),kM(t,r)])},$U={class:"flex flex-col items-start gap-y-2 w-fit"},UU={class:"ml-2"},NU={class:"ml-1"},FU={class:"ml-2"},BU=ti({__name:"ViewerRecipe",setup(e){const t=pa((()=>qA.recipe)),n=pa((()=>{var e,n;return t.value&&(null==(n=null==(e=t.value)?void 0:e.lists)?void 0:n[0])})),r=pa((()=>t.value&&qA.getRecipeContainer(t.value))),i=pa((()=>{var e;return null!=(e=n.value)?e:r.value})),s=pa((()=>{var e,n;return(null==(e=t.value)?void 0:e.url)&&null!=(n=FA.recipes.find((e=>e.url===t.value.url||e.externalUrls.includes(t.value.url))))?n:null}));async function a(){if(!t.value)return;if(!oA.supportsIndexedDB)return void function(){const e=uS("errors.unsupportedBrowser_indexedDBFeature"),t=uS("errors.unsupportedBrowser_indexedDBFeatureFirefox");var n;PR.alert(uS("errors.unsupportedBrowser"),oA.isFirefox?`${e}\n\n${n=t,`<span class="text-sm">${n}</span>`}`:e)}();const e=d(t.value.clone(),(e=>e.unloadRelation("lists"))),n=await LA.newFromJsonLD(e.toExternalJsonLD({includeIds:!1}));n.externalUrls=h([...n.externalUrls,e.url]),await n.save(),await Ed.push({name:"home"}),await JA.syncIfOnline(n)}return function(e,t,n){const r=H(n,t);r(),Br(e,r)}(i,300,(()=>{n.value?qA.preloadList(n.value):t.value&&qA.preloadContainer(t.value.requireContainerUrl())})),(e,n)=>{const r=cL,o=PU,l=Wx,u=qO,c=iM,d=AU,p=vS,h=xj,f=Ii("element-transitions");return t.value?wi((Os(),Ms(h,{key:0,recipe:t.value},{title:Tr((()=>[zs(r,{id:"viewer-recipe-title",recipe:t.value},null,8,["recipe"])])),actions:Tr((()=>{var t;return[Bs("div",$U,[s.value?(Os(),Ms(l,{key:0,secondary:"",class:"w-full",route:"recipes.show","route-params":{recipe:null==(t=s.value)?void 0:t.slug}},{default:Tr((()=>[zs(o,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",UU,He(e.$t("viewer.recipe.inCookbook")),1)])),_:1},8,["route-params"])):(Os(),Ms(l,{key:1,secondary:"",class:"w-full",onClick:n[0]||(n[0]=e=>a())},{default:Tr((()=>[zs(u,{class:"w-5 h-5","aria-hidden":"true"}),Bs("span",NU,He(e.$t("viewer.recipe.import")),1)])),_:1})),e.$browser.supportsPrinting?(Os(),Ms(l,{key:2,class:"w-full",secondary:"",onClick:n[1]||(n[1]=e=>{window.print()})},{default:Tr((()=>[zs(c,{class:"w-4 h-4","aria-hidden":"true"}),Bs("span",FU,He(e.$t("recipes.print")),1)])),_:1})):Js("",!0)]),i.value?(Os(),Ms(d,{key:0,prefix:e.$t("viewer.recipe.creatorPrefix"),collection:i.value},null,8,["prefix","collection"])):Js("",!0),i.value?(Os(),Ms(p,{key:1,class:"text-sm",route:"viewer","route-query":{url:i.value.url}},{default:Tr((()=>[Hs(He(e.$t("viewer.recipe.viewAll")),1)])),_:1},8,["route-query"])):Js("",!0)]})),_:1},8,["recipe"])),[[f,{name:"viewer-recipe",id:t.value.url,transitions:{enter:tr(MU),leave:{"recipes.edit":e.$elementTransitions.fadeOut,"recipes.show":e.$elementTransitions.fadeOut},"recipe-card":tr(LU)}}]]):Js("",!0)}}});async function zU(e){Ed.previousRouteWas(/^kitchen(\.[^.]+)?$/)||(await s_(e,iT),PR.hideHeader())}async function qU(e){iO.active||(PR.restoreHeader(),await a_(e,iT))}function VU(e){const t=qA.autoLink(e);return!!t&&(async()=>{await Ed.push(t.collection.route()),await Ed.push(t.recipe.route("viewer"))})}function HU(){u_.registerScope("default",(e=>!!e.startsWith(document.location.origin)&&(async()=>{const t=new URL(e);await Ed.push({name:"home"}),await Ed.push({path:t.pathname,query:Object.fromEntries(t.searchParams.entries())})}))),u_.registerScope("recipes",(e=>qA.active?qA.autoLinksReady?VU(e):qA.waitAutoLinksReady().then((()=>VU(e))):function(e){const t=FA.autoLink(e);return!!t&&(async()=>{await Ed.push({name:"home"}),await Ed.push(t.route())})}(e)))}const WU=[{name:"home",path:"/",component:rP},{name:"recipes.index",path:"/recipes",redirect:{name:"home"}},{name:"recipes.create",path:"/recipes/create",component:rL,meta:{fullBleedHeader:!0,pageFooter:!0}},{name:"recipes.show",path:"/recipes/:recipe",component:i$,meta:{title:({recipe:e})=>e.name,fullBleedHeader:!0}},{name:"recipes.edit",path:"/recipes/:recipe/edit",component:iL,meta:{title:({recipe:e})=>uS("recipes.edit_title",{name:e.name}),fullBleedHeader:!0,pageFooter:!0}},{name:"recipes.history",path:"/recipes/:recipe/history",component:()=>Fu((()=>import("./RecipesHistory.4098fafa.js")),1?["assets/RecipesHistory.4098fafa.js","assets/noeldemartin-utils.esm.87e89d40.js","assets/RecipesHistory.09aebf4f.css"]:void 0),meta:{title:({recipe:e})=>`${e.name} history`,header:!1,footer:!1}},{name:"kitchen",path:"/kitchen",component:Z$,meta:{title:()=>uS("kitchen.index.title"),fullBleedHeader:()=>{var e;return null==(e=iO.lastPage)?void 0:e.fullBleedHeader},enter:zU,leave:qU}},{path:"/kitchen/:recipe",redirect:"/kitchen/:recipe/ingredients"},{name:"kitchen.ingredients",path:"/kitchen/:recipe/ingredients",component:lU,meta:{title:({recipe:e})=>uS("kitchen.title",{recipe:e.name}),fullBleedHeader:()=>{var e;return null==(e=iO.lastPage)?void 0:e.fullBleedHeader},enter:zU,leave:qU}},{path:"/kitchen/:recipe/instructions",redirect:"/kitchen/:recipe/instructions/1"},{name:"kitchen.instructions",path:"/kitchen/:recipe/instructions/:step",component:gU,meta:{title:({recipe:e})=>uS("kitchen.title",{recipe:e.name}),fullBleedHeader:()=>{var e;return null==(e=iO.lastPage)?void 0:e.fullBleedHeader},enter:zU,leave:qU}},{name:"kitchen.completed",path:"/kitchen/:recipe/completed",component:rU,meta:{title:({recipe:e})=>uS("kitchen.title",{recipe:e.name}),fullBleedHeader:()=>{var e;return null==(e=iO.lastPage)?void 0:e.fullBleedHeader},enter:zU,leave:qU}},{name:"viewer",path:"/viewer",component:ti({__name:"Viewer",setup(e){let t=Qn(ne("url"));const n=pa((()=>qA.recipe?"viewer-recipe-title":qA.collection?"viewer-recipes-collection-title":"viewer-form-title")),r=pa((()=>{var e;return qA.recipe?qA.recipe.name:(null==(e=qA.collection)?void 0:e.name)?qA.collection.name:uS("viewer.title")}));return Br(Ed.currentRoute,(()=>qA.view(Ed.getQueryParam("url")))),Br(r,(e=>dI(e)),{immediate:!0}),di((()=>t.value&&setTimeout((()=>t.value=!1),1e3))),(e,r)=>{const i=BU,s=OU,a=_U,o=sS;return Os(),Ms(o,{style:{"margin-top":"calc(-1 * var(--header-height))"},"aria-labelledby":n.value},{default:Tr((()=>[e.$viewer.recipe?(Os(),Ms(i,{key:0})):e.$viewer.collection?(Os(),Ms(s,{key:1})):Js("",!0),zs(Na,{"enter-active-class":e.$ui.animations&&t.value?"":"transition duration-1000","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":e.$ui.animations&&t.value?"":"transition duration-1000","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Tr((()=>[e.$viewer.recipe||e.$viewer.collection?Js("",!0):wi((Os(),Ms(a,{key:0},null,512)),[[yo,!t.value]])])),_:1},8,["enter-active-class","leave-active-class"])])),_:1},8,["aria-labelledby"])}}}),meta:{fullBleedHeader:!0,reconnect:!1,requiresIndexedDB:!1}}],JU=Bs("div",{class:"h-4 rounded-full overflow-hidden w-full bg-primary-200 mt-2 min-w-modal-content md:min-w-modal-content-md"},[Bs("div",{class:"progress-bar-content bg-primary-500 rounded-full h-full"})],-1),KU=ti({__name:"AppLoadingModal",props:{text:ax()},setup(e){const t=pa((()=>{var t;return null!=(t=e.text)?t:uS("ui.loading")}));return(e,n)=>{const r=Xk,i=l_;return Os(),Ms(i,{cancellable:!1},{default:Tr((()=>[zs(r,{text:t.value},null,8,["text"]),JU])),_:1})}}});class GU{constructor(){t(this,"booted"),t(this,"active"),this.booted=FA.booted,this.active=FA.cookbook.isResolved()}async initialize(){FA.cookbook.onResolve((()=>this.active=!0)),FA.cookbook.onReject((()=>this.active=!1))}getLocalModels(){return FA.allRecipes.toArray()}mendRemoteModel(e){FA.mendRecipe(e)}async beforeDeletingModel(e){await FA.removePublicRecipeListing(e)}getLocalModelsWithRemoteFileUrls(){return FA.allRecipes.toArray().map((e=>{var t;return{model:e,remoteFileUrls:FA.remoteCookbookUrl&&(null==(t=e.imageUrl)?void 0:t.startsWith(FA.remoteCookbookUrl))?[e.imageUrl]:[]}}))}foundModelUsingRdfAliases(){FA.foundRecipeUsingRdfAliases()}}const ZU={$config:uD,$cookbook:FA,$kitchen:iO,$viewer:qA};!async function({beforeMount:e}={}){await iC(NO,{plugins:FO,services:ZU,routes:WU,beforeLaunch:()=>async function(){await JA.registerHandler(LA,new GU),PR.registerComponent(OR.LoadingModal,KU)}(),async beforeMount(t){HU(),Ed.registerModelBinding("recipe",{find:e=>{var t;return(null==(t=FA.recipes)?void 0:t.find((t=>t.slug===e)))||null},subscribe:(e,t)=>{const n=n=>n.slug===e&&t(n),r=LA.on("created",n),i=LA.on("updated",n);return()=>{r(),i()}}}),await(null==e?void 0:e(t))}})}();export{yy as $,Ss as F,wy as J,LA as R,py as S,Xk as _,Qn as a,Os as b,js as c,ti as d,pa as e,Ms as f,Bs as g,zs as h,Oi as i,fy as j,cA as k,sS as l,cy as m,di as o,ix as r,He as t,Tr as w,ky as z};
